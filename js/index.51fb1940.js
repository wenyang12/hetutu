import{p as t,q as e,t as n,r as a,u as r,v as o,x as i,_ as u,w as l,y as c,N as s,z as d,A as f,B as h,C as v,D as g}from"./nutui.32878658.js";import{r as p,f as m,o as y,a as w,V as b,D as _,c as L,e as x,w as I,G as k,q as M,s as C,g as T,F as S,I as j,j as z,v as P,m as H,W as O,k as R,l as W,x as V,y as D,M as A,n as B}from"./vue.25d5b29f.js";import{d as E,s as F}from"./app.84c5654a.js";import{_ as G}from"./_plugin-vue_export-helper.1b428a4d.js";import{B as U}from"./tarobase.ac14d6a6.js";import"./swiper.637bccad.js";function N(t,e,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(o){r=0}N=function(t,e,n,a){if(e)r?r(t,e,{value:n,enumerable:!a,configurable:!a,writable:!a}):t[e]=n;else{var o=function(e,n){N(t,e,function(t){return this._invoke(e,n,t)})};o("next",0),o("throw",1),o("return",2)}},N(t,e,n,a)}function q(){var t,e,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function o(n,a,r,o){var l=a&&a.prototype instanceof u?a:u,c=Object.create(l.prototype);return N(c,"_invoke",function(n,a,r){var o,u,l,c=0,s=r||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return o=e,u=0,l=t,f.n=n,i}};function h(n,a){for(u=n,l=a,e=0;!d&&c&&!r&&e<s.length;e++){var r,o=s[e],h=f.p,v=o[2];n>3?(r=v===a)&&(l=o[(u=o[4])?5:(u=3,3)],o[4]=o[5]=t):o[0]<=h&&((r=n<2&&h<o[1])?(u=0,f.v=a,f.n=o[1]):h<v&&(r=n<3||o[0]>a||a>v)&&(o[4]=n,o[5]=a,f.n=v,u=0))}if(r||n>1)return i;throw d=!0,a}return function(r,s,v){if(c>1)throw TypeError("Generator is already running");for(d&&1===s&&h(s,v),u=s,l=v;(e=u<2?t:l)||!d;){o||(u?u<3?(u>1&&(f.n=-1),h(u,l)):f.n=l:f.v=l);try{if(c=2,o){if(u||(r="next"),e=o[r]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,u<2&&(u=0)}else 1===u&&(e=o["return"])&&e.call(o),u<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),u=1);o=t}else if((e=(d=f.n<0)?l:n.call(a,f))!==i)break}catch(g){o=t,u=1,l=g}finally{c=1}}return{value:e,done:d}}}(n,r,o),!0),c}var i={};function u(){}function l(){}function c(){}e=Object.getPrototypeOf;var s=[][a]?e(e([][a]())):(N(e={},a,function(){return this}),e),d=c.prototype=u.prototype=Object.create(s);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,N(t,r,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=c,N(d,"constructor",c),N(c,"constructor",l),l.displayName="GeneratorFunction",N(c,r,"GeneratorFunction"),N(d),N(d,r,"Generator"),N(d,a,function(){return this}),N(d,"toString",function(){return"[object Generator]"}),(q=function(){return{w:o,m:f}})()}function Q(t,e,n,a,r,o,i){try{var u=t[o](i),l=u.value}catch(c){return void n(c)}u.done?e(l):Promise.resolve(l).then(a,r)}function $(t){return function(){var e=this,n=arguments;return new Promise(function(a,r){var o=t.apply(e,n);function i(t){Q(o,a,r,i,u,"next",t)}function u(t){Q(o,a,r,i,u,"throw",t)}i(void 0)})}}function J(t){"@babel/helpers - typeof";return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function K(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(J(t)+" is not iterable")}var X=window.devicePixelRatio;console.log("dpr",X);var Y=function(t){var e=t.ctx,n=t.width,a=t.height;e.canvas.width=n,e.canvas.height=a,e.fillStyle="white",e.fillRect(0,0,n,a)},Z=function(t){return new Promise(function(e,n){try{var a=t.canvas.toDataURL("image/jpeg",1),r=document.createElement("a");r.download="\u5408\u56fe\u56fe-".concat((new Date).toLocaleString(),".jpg"),r.href=a,document.body.appendChild(r),r.click(),document.body.removeChild(r),e()}catch(o){n(o)}})};function tt(t,e,n,a,r,o,i,u,l,c,s){t.save(),t.beginPath(),t.moveTo(n+i,a),t.lineTo(n+r-i,a),t.arc(n+r-i,a+i,i,1.5*Math.PI,2*Math.PI),t.lineTo(n+r,a+o-i),t.arc(n+r-i,a+o-i,i,0,.5*Math.PI),t.lineTo(n+i,a+o),t.arc(n+i,a+o-i,i,.5*Math.PI,Math.PI),t.lineTo(n,a+i),t.arc(n+i,a+i,i,Math.PI,1.5*Math.PI),t.closePath(),t.clip(),void 0!==u&&void 0!==l&&void 0!==c&&void 0!==s?t.drawImage(e,u,l,c,s,n,a,r,o):t.drawImage(e,n,a,r,o),t.restore()}function et(t){var e=t.ctx,n=t.width,a=t.height;t.canvas,Y({ctx:e,width:n,height:a})}function nt(t){var e=t.ctx;return t.canvasId,t.canvasWidth,t.canvasHeight,t.canvas,Z(e)}function at(t){return rt.apply(this,arguments)}function rt(){return rt=$(q().m(function e(n){var a;return q().w(function(e){while(1)switch(e.n){case 0:return e.a(2,new Promise(function(t,e){var a=new Image;a.onload=function(){return t({width:a.width,height:a.height})},a.onerror=e,a.src=n}));case 1:return e.n=2,t({src:n});case 2:return a=e.v,e.a(2,{width:a.width,height:a.height});case 3:return e.a(2)}},e)})),rt.apply(this,arguments)}function ot(t){return new Image}function it(t){return ut.apply(this,arguments)}function ut(){return ut=$(q().m(function t(e){var n,a,r,o,i,u;return q().w(function(t){while(1)switch(t.n){case 0:n=e.ctx,a=e.imageLayout,r=e.imageInfos,e.canvas,o=[],i=q().m(function t(){var e,i,l,c,s,d,f,h,v,g,p,m,y;return q().w(function(t){while(1)switch(t.n){case 0:if(e=r[u]||{},e.url&&a[u]){t.n=1;break}return t.a(2,1);case 1:i=a[u],l=i.x,c=i.y,s=i.crop,d=i.width,f=i.height,h=s.x,v=s.y,g=s.cropWidth,p=s.cropHeight,m=s.round,y=new Promise(function(t){var a=ot();a.src=e.url,a.width=e.width,a.height=e.height,a.onload=function(){tt(n,a,l,c,d,f,m,h,v,g,p),t()},a.onerror=function(n){console.error("\u56fe\u7247\u52a0\u8f7d\u5931\u8d25:",e.src,n),t()}}),o.push(y);case 2:return t.a(2)}},t)}),u=0;case 1:if(!(u<r.length)){t.n=4;break}return t.d(K(i()),2);case 2:if(!t.v){t.n=3;break}return t.a(3,3);case 3:u++,t.n=1;break;case 4:return t.n=5,Promise.all(o);case 5:return t.a(2)}},t)})),ut.apply(this,arguments)}function lt(t){return new Promise(function(e){var n=document.querySelector('[canvas-id="'.concat(t,'"]')),a=n.getContext("2d");e({ctx:a,canvas:n})})}function ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}function st(t){if(Array.isArray(t))return ct(t)}function dt(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function ft(t,e){if(t){if("string"==typeof t)return ct(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ct(t,e):void 0}}function ht(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vt(t){return st(t)||dt(t)||ft(t)||ht()}function gt(t){if(Array.isArray(t))return t}function pt(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,r,o,i,u=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=o.call(n)).done)&&(u.push(a.value),u.length!==e);l=!0);}catch(s){c=!0,r=s}finally{try{if(!l&&null!=n["return"]&&(i=n["return"](),Object(i)!==i))return}finally{if(c)throw r}}return u}}function mt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yt(t,e){return gt(t)||pt(t,e)||ft(t,e)||mt()}function wt(t){var e=t.aspectRatio,n=t.width,a=t.height,r={width:0,height:0};if(e<=0)throw new Error("\u9ad8\u5bbd\u6bd4\u5fc5\u987b\u5927\u4e8e 0");return void 0!==n&&void 0===a?(r.width=Math.min(n,700),r.height=r.width*e):void 0!==a&&void 0===n?(r.height=a,r.width=r.height/e,r.width>700&&(r.width=700,r.height=r.width*e)):(r.width=700,r.height=r.width*e),r.width=Math.round(r.width),r.height=Math.round(r.height),r}function bt(t){var e=t.totalWidth,n=t.totalHeight,a=t.layoutConfig,r=t.padding,o=t.gap,i=void 0===o?0:o,u=r||[i,i,i,i],l=yt(u,4),c=l[0],s=l[1],d=l[2],f=l[3],h=Array.isArray(i)?i:[i,i],v=yt(h,2),g=v[0],p=v[1],m=e-f-s,y=n-c-d,w=a.cols,b=a.rows,_=(w-1)*p,L=(b-1)*g,x=(m-_)/w,I=(y-L)/b,k=a.areas.map(function(t,e){var n=yt(t,4),a=n[0],r=n[1],o=n[2],i=n[3],u=f+a*(x+p),l=c+r*(I+g),s=(o-a)*x+(o-a-1)*p,d=(i-r)*I+(i-r-1)*g;return{id:e,x:Math.round(u),y:Math.round(l),width:Math.round(s),height:Math.round(d),meta:{cellWidth:x,cellHeight:I,colGap:p,rowGap:g}}});return{totalWidth:e,totalHeight:n,id:a.id||"",grids:k,rowGap:g,colGap:p}}function _t(t){var e=t.gridLayout,n=t.images,a=void 0===n?[]:n,r=t.round,o=e.grids.map(function(t,e){if(!a[e])return{};var n,o,i,u,l,c=a[e]||{width:1,height:1},s=c.height/c.width,d=t.height/t.width;return s>d?(n=t.width/c.width,i=t.height/n,o=c.width,i=Math.min(i,c.height),u=0,l=Math.max(0,(c.height-i)/2)):(n=t.height/c.height,o=t.width/n,i=c.height,o=Math.min(o,c.width),u=Math.max(0,(c.width-o)/2),l=0),(o>c.width||i>c.height)&&(n=Math.min(t.width/c.width,t.height/c.height),o=c.width,i=c.height,u=0,l=0,console.warn("\u56fe\u7247".concat(e,"\u5c3a\u5bf8\u4e0d\u8db3\uff0c\u5df2\u542f\u7528\u7f29\u653e\u586b\u5145\u6a21\u5f0f"))),{x:t.x,y:t.y,width:t.width,height:t.height,url:c.url,crop:{x:Math.round(u),y:Math.round(l),width:Math.round(c.width),height:Math.round(c.height),cropWidth:Math.round(o),cropHeight:Math.round(i),round:r},scale:parseFloat(n.toFixed(4))}});return o}function Lt(t){var e=t.images,n=e.filter(function(t){return!!t});if(!n||!n.length)return[{},{}];var a=[].concat(vt(n),[{}]);return a.map(function(){return{}})}function xt(t){var e=t.images,n=t.gap,a=t.round,r=t.isHorizontal,o=t.canvasBaseH,i=t.canvasBaseW,u=e.filter(function(t){return!!t}),l=o/2,c=i;if(!u.length)return{layout:[]};var s={layout:[]};if(r){s.totalWidth=u.reduce(function(t,e){return t+Math.round(l/e.aspectRatio)},n),s.totalHeight=l;var d=n;u.forEach(function(t){var e=t.aspectRatio,r=Math.round(l/e-n),o=l-2*n;s.layout.push({x:d,y:n,w:r,h:o,width:r,height:o,crop:{round:a},round:a,url:t.url}),d+=r+n})}else{s.totalHeight=u.reduce(function(t,e){return t+Math.round(c*e.aspectRatio)},n),s.totalWidth=c;var f=n;u.forEach(function(t){var e=t.aspectRatio,r=c-2*n,o=Math.round(c*e-n);s.layout.push({x:n,y:f,w:r,h:o,width:r,height:o,crop:{round:a},round:a,url:t.url}),f+=o+n})}return s}function It(t){var e=t.layoutStore,n=t.longLayoutStore,a=e.isLongLayout;if(a){var r=n||{},o=r.longImageLayouCanvas,i=o||{},u=i.totalWidth,l=i.totalHeight,c=i.layout;return{imageLayout:c,totalWidth:u,totalHeight:l}}var s=e.imageLayoutCanvas,d=e.gridLayoutCanvas,f=d.totalWidth,h=d.totalHeight;return{imageLayout:s,totalWidth:f,totalHeight:h}}function kt(){var t=navigator.userAgent.toLowerCase(),e=/android|iphone|symbianos|windows phone|ipad|ipod/i.test(t);return!e&&window.innerWidth>768}function Mt(t,e){if("object"!=J(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=J(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Ct(t){var e=Mt(t,"string");return"symbol"==J(e)?e:e+""}function Tt(t,e,n){return(e=Ct(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function St(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?St(Object(n),!0).forEach(function(e){Tt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var zt={LayoutDefinitions:{"grid-1":{name:"\u957f\u56fe",areas:[[[0,0,1,1],[1,0,2,1]],[[0,0,1,1],[0,1,1,2]]]},"grid-2":{name:"\u4e8c\u56fe",areas:[[[0,0,1,1],[1,0,2,1]],[[0,0,1,1],[0,1,1,2]],[[0,0,1.2,1],[1.2,0,2,1]],[[0,0,1,1.2],[0,1.2,1,2]],[[0,0,1,1],[1,1,2,2]],[[0,0,.8,1],[.8,0,2,1]],[[0,0,1,.8],[0,.8,1,2]],[[1,0,2,1],[0,1,1,2]]]},"grid-3":{name:"\u4e09\u56fe",areas:[[[0,0,1,1],[1,0,2,1],[2,0,3,1]],[[0,0,1,1],[0,1,1,2],[0,2,1,3]],[[0,0,1,1],[1,0,2,1],[0,1,2,2]],[[0,0,1,2],[1,0,2,1],[1,1,2,2]],[[0,0,1,1],[1,1,2,2],[2,0,3,1]],[[0,0,1,1],[1,0,2,2],[2,1,3,2]],[[0,0,2,1],[0,1,1,2],[1,1,2,2]],[[0,0,3,1],[0,1,1,2],[1,1,3,2]],[[0,0,2,1],[2,0,3,1],[0,1,3,2]],[[0,0,1,1],[0,1,1,2],[1,0,2,2]],[[0,0,2,2],[2,0,3,1],[2,1,3,2]],[[0,0,1,1],[0,1,1,2],[1,0,3,2]]]},"grid-4":{name:"\u56db\u56fe",areas:[[[0,0,1,1],[1,0,2,1],[0,1,1,2],[1,1,2,2]],[[0,0,3,1],[0,1,1,2],[1,1,2,2],[2,1,3,2]],[[0,0,2,1],[2,0,4,1],[0,1,1,2],[1,1,4,2]],[[0,0,1,1],[1,0,3,1],[3,0,4,1],[0,1,4,2]],[[0,0,2,1],[2,0,3,1],[3,0,4,1],[0,1,4,2]],[[0,0,1,1],[1,0,2,1],[2,0,3,1],[0,1,3,2]],[[0,0,1,1],[0,1,1,2],[0,2,1,3],[1,0,2,3]],[[0,0,2,2],[2,0,3,1],[0,2,1,3],[1,1,3,3]],[[1,0,3,2],[0,0,1,1],[2,2,3,3],[0,1,2,3]],[[0,0,1,2],[1,0,2,2],[2,0,3,2],[3,0,4,2]],[[0,0,1,1],[0,1,1,2],[0,2,1,3],[0,3,1,4]],[[0,0,1,3],[1,0,2,1],[1,1,2,2],[1,2,2,3]],[[0,0,2,1],[0,1,1,2],[1,1,2,2],[0,2,2,3]],[[0,1,2,2],[0,0,1,1],[1,0,2,1],[0,2,2,3]]]},"grid-5":{name:"\u4e94\u56fe",areas:[[[0,0,1,1],[1,0,2,1],[2,0,3,1],[0,1,2,2],[2,1,3,2]],[[0,0,1,2],[1,0,2,1],[1,1,2,2],[2,0,3,1],[2,1,3,2]],[[0,0,2,1],[2,0,3,1],[0,1,1,2],[1,1,3,2],[2,1,3,2]],[[0,0,2,1],[2,0,4,1],[0,1,2,2],[2,1,3,2],[3,1,4,2]],[[0,0,3,1],[3,0,4,1],[0,1,1,2],[1,1,4,2],[2,1,3,2]],[[0,0,1,1],[1,0,2,1],[2,0,3,1],[3,0,4,1],[0,1,4,2]],[[0,0,4,1],[4,0,5,1],[0,1,1,2],[1,1,2,2],[2,1,5,2]],[[0,0,1,1],[1,0,3,1],[3,0,4,1],[0,1,2,2],[2,1,4,2]],[[1,1,2,2],[0,0,1,1],[2,0,3,1],[0,2,1,3],[2,2,3,3]],[[0,0,1,1],[1,0,2,1],[0,1,1,2],[1,1,2,2],[0,2,2,3]],[[0,0,1,1],[1,0,2,1],[2,0,3,1],[0,1,1,2],[1,1,3,2]],[[0,0,1,2],[1,0,3,1],[1,1,2,2],[0,2,2,3],[2,1,3,3]],[[0,0,2,1],[2,0,3,2],[0,1,1,3],[1,1,2,2],[1,2,3,3]],[[0,0,1,4],[1,0,2,1],[1,1,2,2],[1,2,2,3],[1,3,2,4]],[[0,0,4,1],[0,1,1,2],[1,1,2,2],[2,1,3,2],[3,1,4,2]]]},"grid-6":{name:"\u516d\u56fe",areas:[[[0,0,1,1],[1,0,2,1],[2,0,3,1],[0,1,1,2],[1,1,2,2],[2,1,3,2]],[[0,0,1,1],[1,0,2,1],[0,1,1,2],[1,1,2,2],[0,2,1,3],[1,2,2,3]],[[0,0,1,1],[1,0,2,1],[2,0,3,1],[3,0,4,1],[0,1,2,2],[2,1,4,2]],[[0,0,1,1],[1,0,3,1],[3,0,4,1],[0,1,2,2],[2,1,3,2],[3,1,4,2]],[[0,0,3,1],[3,0,4,1],[0,1,1,2],[1,1,2,2],[2,1,3,2],[3,1,4,2]],[[0,0,2,1],[2,0,4,1],[0,1,1,2],[1,1,2,2],[2,1,3,2],[3,1,4,2]],[[0,0,1,1],[1,0,2,1],[2,0,3,1],[3,0,4,1],[4,0,5,1],[0,1,5,2]],[[0,0,2,1],[2,0,3,1],[3,0,5,1],[0,1,1,2],[1,1,4,2],[4,1,5,2]],[[0,0,1,1],[1,0,2,1],[0,1,1,2],[1,1,2,2],[2,0,3,2],[3,0,4,2]],[[0,0,2,1],[2,0,3,3],[0,1,1,4],[1,1,2,2],[1,2,2,3],[1,3,3,4]],[[0,0,1,2],[1,0,4,1],[1,1,2,2],[2,1,3,2],[0,2,3,3],[3,1,4,3]],[[0,0,1,1],[1,0,3,1],[0,1,2,2],[2,1,3,2],[0,2,1,3],[1,2,3,3]],[[0,0,2,1],[2,0,3,1],[0,1,1,2],[1,1,3,2],[0,2,2,3],[2,2,3,3]],[[0,0,1,5],[1,0,2,1],[1,1,2,2],[1,2,2,3],[1,3,2,4],[1,4,2,5]],[[0,0,5,1],[0,1,1,2],[1,1,2,2],[2,1,3,2],[3,1,4,2],[4,1,5,2]]]},"grid-7":{name:"\u4e03\u56fe",areas:[[[0,0,1,1],[1,0,2,1],[2,0,3,1],[0,1,1,2],[1,1,2,2],[2,1,3,2],[0,2,3,3]],[[0,0,3,1],[3,0,4,1],[0,1,1,2],[1,1,2,2],[2,1,3,2],[3,1,4,2],[0,2,4,3]],[[0,0,2,1],[2,0,3,1],[3,0,5,1],[0,1,1,2],[1,1,4,2],[4,1,5,2],[0,2,5,3]],[[1,1,2,2],[0,0,1,1],[2,0,3,1],[0,1,1,2],[2,1,3,2],[0,2,1,3],[2,2,3,3]],[[1,1,2,2],[0,0,1,1],[2,0,3,1],[0,2,1,3],[2,2,3,3],[1,0,2,1],[1,2,2,3]],[[0,0,3,1],[3,0,4,3],[0,1,1,4],[1,1,2,2],[2,1,3,2],[1,2,3,3],[1,3,4,4]],[[0,0,1,3],[1,0,4,1],[1,1,2,2],[2,1,3,2],[1,2,3,3],[0,3,3,4],[3,1,4,4]],[[0,0,1,6],[1,0,2,1],[1,1,2,2],[1,2,2,3],[1,3,2,4],[1,4,2,5],[1,5,2,6]],[[0,0,6,1],[0,1,1,2],[1,1,2,2],[2,1,3,2],[3,1,4,2],[4,1,5,2],[5,1,6,2]],[[0,0,2,1],[2,0,3,2],[0,1,1,3],[1,1,2,2],[1,2,3,3],[0,3,2,5],[2,3,3,5]],[[0,0,1,2],[1,0,4,1],[1,1,2,2],[2,1,3,2],[0,2,3,3],[3,1,4,3],[0,3,4,4]],[[0,0,1,1],[1,0,3,1],[0,1,2,2],[2,1,3,2],[0,2,1,3],[1,2,3,3],[0,3,3,4]],[[0,0,2,1],[2,0,3,1],[0,1,1,2],[1,1,3,2],[0,2,2,3],[2,2,3,3],[0,3,3,4]]]},"grid-8":{name:"\u516b\u56fe",areas:[[[0,0,1,1],[1,0,2,1],[2,0,3,1],[3,0,4,1],[0,1,1,2],[1,1,2,2],[2,1,3,2],[3,1,4,2]],[[0,0,1,1],[1,0,2,1],[2,0,3,1],[3,0,4,1],[4,0,5,1],[0,1,2,2],[2,1,4,2],[4,1,5,2]],[[0,0,2,1],[2,0,3,1],[3,0,5,1],[0,1,1,2],[1,1,4,2],[4,1,5,2],[0,2,3,3],[3,2,5,3]],[[0,0,1,1],[1,0,2,1],[0,1,1,2],[1,1,2,2],[0,2,1,3],[1,2,2,3],[0,3,1,4],[1,3,2,4]],[[0,0,3,1],[3,0,4,3],[0,1,1,4],[1,1,2,2],[2,1,3,2],[1,2,2,3],[2,2,3,3],[1,3,4,4]],[[0,0,1,3],[1,0,4,1],[1,1,2,2],[2,1,3,2],[1,2,2,3],[2,2,3,3],[0,3,3,4],[3,1,4,4]],[[0,0,1,1],[1,0,2,1],[2,0,3,1],[0,1,1,2],[1,1,2,2],[2,1,3,2],[0,2,1,3],[1,2,3,3]],[[0,0,1,7],[1,0,2,1],[1,1,2,2],[1,2,2,3],[1,3,2,4],[1,4,2,5],[1,5,2,6],[1,6,2,7]],[[0,0,7,1],[0,1,1,2],[1,1,2,2],[2,1,3,2],[3,1,4,2],[4,1,5,2],[5,1,6,2],[6,1,7,2]],[[0,0,2,1],[2,0,3,2],[0,1,1,3],[1,1,2,2],[1,2,3,3],[0,3,2,4],[2,3,3,4],[0,4,3,6]],[[0,0,1,2],[1,0,4,1],[1,1,2,2],[2,1,3,2],[0,2,3,3],[3,1,4,3],[0,3,4,4],[0,4,4,5]],[[0,0,1,1],[1,0,3,1],[0,1,2,2],[2,1,3,2],[0,2,1,3],[1,2,3,3],[0,3,2,4],[2,3,3,4]],[[0,0,2,1],[2,0,3,1],[0,1,1,2],[1,1,3,2],[0,2,2,3],[2,2,3,3],[0,3,1,4],[1,3,3,4]]]},"grid-9":{name:"\u4e5d\u56fe",areas:[[[0,0,1,1],[1,0,2,1],[2,0,3,1],[0,1,1,2],[1,1,2,2],[2,1,3,2],[0,2,1,3],[1,2,2,3],[2,2,3,3]],[[0,0,1,1],[1,0,2,1],[2,0,3,1],[3,0,4,1],[0,1,1,2],[1,1,2,2],[2,1,3,2],[3,1,4,2],[0,2,4,3]],[[0,0,1,4],[1,0,4,1],[1,1,2,2],[2,1,3,2],[1,2,2,3],[2,2,3,3],[1,3,3,4],[0,4,3,5],[3,1,4,5]],[[0,0,3,1],[3,0,4,4],[0,1,1,5],[1,1,2,2],[2,1,3,2],[1,2,2,3],[2,2,3,3],[1,3,3,4],[1,4,4,5]],[[0,0,1,8],[1,0,2,1],[1,1,2,2],[1,2,2,3],[1,3,2,4],[1,4,2,5],[1,5,2,6],[1,6,2,7],[1,7,2,8]],[[0,0,8,1],[0,1,1,2],[1,1,2,2],[2,1,3,2],[3,1,4,2],[4,1,5,2],[5,1,6,2],[6,1,7,2],[7,1,8,2]],[[0,0,2,1],[2,0,3,2],[0,1,1,3],[1,1,2,2],[1,2,3,3],[0,3,2,4],[2,3,3,4],[0,4,2,5],[2,4,3,5]],[[0,0,1,2],[1,0,4,1],[1,1,2,2],[2,1,3,2],[0,2,3,3],[3,1,4,3],[0,3,4,4],[0,4,2,5],[2,4,4,5]],[[0,0,1,1],[1,0,3,1],[0,1,2,2],[2,1,3,2],[0,2,1,3],[1,2,3,3],[0,3,2,4],[2,3,3,4],[0,4,3,5]],[[0,0,2,1],[2,0,3,1],[0,1,1,2],[1,1,3,2],[0,2,2,3],[2,2,3,3],[0,3,2,4],[2,3,3,4],[0,4,3,5]],[[0,0,3,1],[3,0,4,3],[0,1,1,4],[1,1,2,2],[2,1,3,2],[1,2,2,3],[2,2,3,3],[1,3,4,4],[0,4,4,5]]]},"grid-10":{name:"\u5341\u56fe",areas:[[[1,1,2,2],[0,0,1,1],[2,0,3,1],[0,1,1,2],[2,1,3,2],[0,2,1,3],[2,2,3,3],[1,0,2,1],[1,2,2,3],[0,3,3,4]],[[0,0,1,4],[1,0,4,1],[1,1,2,2],[2,1,3,2],[1,2,2,3],[2,2,3,3],[1,3,2,4],[2,3,3,4],[0,4,3,5],[3,1,4,5]],[[0,0,3,1],[3,0,4,4],[0,1,1,5],[1,1,2,2],[2,1,3,2],[1,2,2,3],[2,2,3,3],[1,3,2,4],[2,3,3,4],[1,4,4,5]]]}},getLayoutConfig:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.LayoutDefinitions[t],a=n.areas[e%n.areas.length],r=Math.max.apply(Math,vt(a.map(function(t){return t[2]}))),o=Math.max.apply(Math,vt(a.map(function(t){return t[3]})));return jt(jt({},n),{},{areas:a,cols:r,rows:o})},getAllLayoutConfigs:function(){var t=this,e={};return Object.keys(this.LayoutDefinitions).map(function(n){var a=t.LayoutDefinitions[n];e[n]=a.areas.map(function(t,e){var r=Math.max.apply(Math,vt(t.map(function(t){return t[2]}))),o=Math.max.apply(Math,vt(t.map(function(t){return t[3]})));return jt(jt({},a),{},{id:"".concat(n,"_").concat(e),areas:t,cols:r,rows:o})})}),e}},Pt=E("ratio",function(){var t=p([{label:"1:1",value:1},{label:"2:3",value:2/3},{label:"3:2",value:1.5},{label:"3:4",value:3/4},{label:"4:3",value:4/3},{label:"4:5",value:.8},{label:"5:4",value:5/4},{label:"5:6",value:5/6},{label:"6:5",value:1.2},{label:"6:7",value:6/7},{label:"7:6",value:7/6},{label:"8:9",value:8/9},{label:"9:8",value:9/8},{label:"10:11",value:10/11},{label:"11:10",value:1.1},{label:"12:13",value:12/13},{label:"13:12",value:13/12},{label:"14:15",value:14/15},{label:"15:14",value:15/14},{label:"16:17",value:16/17},{label:"17:16",value:17/16},{label:"16:9",value:16/9},{label:"9:16",value:9/16}]),e=p(1),n=function(t){e.value=t};return{customRatios:t,currentRatio:e,handleRatioSelected:n}}),Ht=E("layout",function(){var t=700,o=700,i=p([]),u=p({}),l=p([]),c=p(15),s=p(20),d=p(2),f=p(0),h=Pt();function v(t){d.value=t+f.value/10,console.log("\u8d28\u91cf\u503c:",d.value)}var g=m(function(){var e=h.currentRatio,n=Math.round(e*t),a=wt({aspectRatio:e,height:n}),r=a.height;return r}),y=m(function(){var t=h.currentRatio,e=Math.round(o/t),n=wt({aspectRatio:t,width:e}),a=n.width;return a}),w=m(function(){var t=!i.value.length||!i.value.some(function(t){return!!t});return t}),b=m(function(){var t=u.value.id;if(!t)return null;var e=zt.getLayoutConfig.apply(zt,vt(t.split("_")));return e}),_=m(function(){var t=u.value.id;return!!t&&"grid-1"===t.split("_")[0]}),L=m(function(){var t={},e=zt.getAllLayoutConfigs();return Object.keys(e).map(function(n){t[n]={name:"",datas:[]},t[n].datas=e[n].map(function(e){return t[n].name=e.name,bt({totalWidth:50,totalHeight:50,layoutConfig:e,gap:4})})}),console.log("\u6240\u6709\u5e03\u5c40:",t),t}),x=m(function(){if(!b.value)return null;var t=bt({totalWidth:y.value,totalHeight:g.value,layoutConfig:b.value,gap:c.value});return console.log("\u5e03\u5c40\u914d\u7f6e\u4fe1\u606f:",b.value),console.log("\u7f51\u683c\u5e03\u5c40:",t),t}),I=m(function(){if(!l.value||!l.value.length)return{};var t=_t({gridLayout:x.value,images:l.value,round:s.value});return console.log("\u56fe\u7247\u5e03\u5c40:",t),t}),k=m(function(){if(!b.value)return null;var t=bt({totalWidth:Math.round(y.value*d.value),totalHeight:Math.round(g.value*d.value),layoutConfig:b.value,gap:Math.round(c.value*d.value)});return console.log("\u7f51\u683c\u5e03\u5c40canvas:",t),t}),M=m(function(){if(!l.value||!l.value.length)return{};var t=_t({gridLayout:k.value,images:l.value,round:Math.round(s.value*d.value)});return console.log("\u56fe\u7247\u5e03\u5c40canvas:",t),t}),C=m(function(){if(!b.value||_.value)return 1;var t=b.value,e=t.areas,n=t.cols,a=Object.keys(l.value).reduce(function(t,e){return t+l.value[e].width},0);if(!a)return 1;var r=Math.round(a/e.length),o=Math.max(r*n/y.value,1);return console.log("\u8ba1\u7b97\u7cfb\u6570:",o.toFixed(1)),Number(o.toFixed(1))});function T(){return S.apply(this,arguments)}function S(){return S=$(q().m(function t(){return q().w(function(t){while(1)switch(t.n){case 0:return t.n=1,Promise.all(i.value.map(function(){var t=$(q().m(function t(e){var n;return q().w(function(t){while(1)switch(t.n){case 0:if(e){t.n=1;break}return t.a(2,"");case 1:return t.n=2,at(e);case 2:return n=t.v,t.a(2,{url:e,width:n.width,height:n.height,aspectRatio:n.height/n.width})}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:return t.a(2,t.v)}},t)})),S.apply(this,arguments)}function j(t){u.value=t,H()}var z=function(t){if(_.value)return i.value=i.value.filter(function(e,n){return n!==t}),void(l.value=l.value.filter(function(e,n){return n!==t}));i.value.splice(t,1,""),l.value.splice(t,1,"")},P=function(){var t=$(q().m(function t(e){var n,o,u,c,s;return q().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,n=x.value.grids.length||1,o=i.value.filter(function(t){return!!t}).length||0,u=_.value?100:n-o||1,t.n=1,r({count:u,sizeType:["original","compressed"],sourceType:["album","camera"]});case 1:if(c=t.v,1===c.tempFilePaths.length){while(i.value.length<=e)i.value.push("");i.value.splice(e,1,c.tempFilePaths[0])}return c.tempFilePaths.length>1&&(c.tempFilePaths=c.tempFilePaths.slice(0,u),(s=i.value).splice.apply(s,[e,u].concat(vt(c.tempFilePaths)))),t.n=2,T();case 2:l.value=t.v,console.log("\u56fe\u7247\u4fe1\u606f",l.value),t.n=4;break;case 3:t.p=3,t.v,a({title:"\u9009\u62e9\u56fe\u7247\u5931\u8d25\uff01",icon:"none",duration:2e3});case 4:return t.a(2)}},t,null,[[0,3]])}));return function(e){return t.apply(this,arguments)}}();function H(){if(!_.value){var t=x.value.grids.length||1,e=i.value.filter(function(t){return!!t}).length||0;e<=t||(i.value=i.value.slice(0,t),l.value=l.value.slice(0,t))}}var O=m(function(){var t=[{label:"message",action:function(){n.navigateTo({url:"/pages/customer-service/index"})},disabled:!1}];return[{label:"del",action:function(){e({title:"\u63d0\u793a",content:"\u786e\u8ba4\u6e05\u7a7a\u6240\u6709\u56fe\u7247\u5417\uff1f",success:function(t){t.confirm&&(i.value=[],l.value=[])}})},disabled:w.value}].concat(t)});return{gridLayout:x,imageData:i,imageLayout:I,allLayout:L,currentTpl:u,onTpl:j,removeImage:z,addImage:P,imageInfos:l,isEmptyImage:w,gap:c,round:s,quality:d,setQuality:v,customQuality:f,gridLayoutCanvas:k,imageLayoutCanvas:M,factor:C,isLongLayout:_,canvasBaseH:o,canvasBaseW:t,fastButton:O}}),Ot=E("longLayout",function(){var t=Ht(),e=t.canvasBaseH,n=t.canvasBaseW,a=m(function(){return!!t.currentTpl.id.match("0")}),r=m(function(){if(!t.imageInfos||!t.imageInfos.length)return null;var r=xt({images:t.imageInfos,round:t.round,isHorizontal:a.value,canvasBaseH:e,canvasBaseW:n,gap:t.gap});return console.log("\u957f\u56fe\u7247\u5e03\u5c40:",r),r}),o=m(function(){if(!t.imageInfos||!t.imageInfos.length)return null;var r=t.quality,o=xt({images:t.imageInfos,round:t.round*r,isHorizontal:a.value,canvasBaseH:e*r*2,canvasBaseW:n*r,gap:t.gap*r});return console.log("\u957f\u56fe\u7247\u5e03\u5c40canvas:",o),o}),i=m(function(){var e=Lt({images:t.imageInfos});return console.log("\u6a2a\u7ad6\u56fe\u7f51\u683c\u5e03\u5c40:",e),e});return{longImageLayout:r,longGridLayout:i,isHorizontal:a,longImageLayouCanvas:o}}),Rt=1280,Wt=function(){var t=p(window.innerWidth),e=p(t.value>=Rt),n=p(t.value>=Rt),a=function(){t.value=window.innerWidth;var a=t.value>=Rt;e.value=a,n.value=a};return y(function(){window.addEventListener("resize",a),a()}),w(function(){window.removeEventListener("resize",a)}),{showTemplateDrawer:e,showSettings:n}},Vt=E("puzzle",function(){var t=p(!1),e=Wt(),n=e.showTemplateDrawer,r=e.showSettings,o=Ht(),i=Ot(),u=function(){var e=$(q().m(function e(){var n,a,r,o,i;return q().w(function(e){while(1)switch(e.p=e.n){case 0:return t.value=!0,e.p=1,n="puzzleCanvas",e.n=2,lt(n);case 2:return a=e.v,r=a.ctx,o=a.canvas,e.n=3,l({ctx:r,canvasId:n,canvas:o});case 3:e.n=5;break;case 4:e.p=4,i=e.v,console.error(i),c("\u751f\u6210\u62fc\u56fe\u5931\u8d25"),t.value=!1;case 5:return e.a(2)}},e,null,[[1,4]])}));return function(){return e.apply(this,arguments)}}(),l=function(){var e=$(q().m(function e(n){var r,u,l,s,d,f,h,v;return q().w(function(e){while(1)switch(e.n){case 0:r=n.ctx,u=n.canvasId,l=n.canvas,s=o.imageInfos,d=It({layoutStore:o,longLayoutStore:i}),f=d.totalWidth,h=d.totalHeight,v=d.imageLayout,e.n=1;break;case 1:e.n=2;break;case 2:return e.n=3,et({ctx:r,width:f,height:h,canvas:l});case 3:return e.n=4,it({ctx:r,imageLayout:v,imageInfos:s,canvas:l});case 4:return e.a(2,nt({ctx:r,canvasId:u,canvasWidth:f,canvasHeight:h,canvas:l}).then(function(){a({title:"\u4fdd\u5b58\u6210\u529f",icon:"success"})}).catch(function(t){console.error("\u4fdd\u5b58\u56fe\u7247\u5931\u8d25:",t),c("\u751f\u6210\u56fe\u7247\u8fc7\u5927\u8d85\u8fc7\u9608\u503c\uff0c\u8bf7\u5220\u51cf\u4e00\u5f20\u56fe\u7247\u540e\u91cd\u8bd5\uff01")}).finally(function(){t.value=!1}))}},e)}));return function(t){return e.apply(this,arguments)}}(),c=function(t){a({title:t,icon:"none",duration:3e3})};function s(t){var e=o.setQuality,n=o.isLongLayout;e(t.id),u(n)}var d=m(function(){var t=o.factor;return[{id:Math.min(t,X+1),name:"\u539f\u56fe\u751f\u6210"},{id:Math.min(t,X+1)+1,name:"\u9ad8\u6e05\u56fe\u751f\u6210"}]});return{isLoading:t,generatePuzzle:u,showTemplateDrawer:n,showSettings:r,chooseQuality:s,qualityItems:d}});var Dt={__name:"layoutItem",props:b(["gridLayout","onTpl","currentTpl","addImage"],{gridLayout:function(){return{}},currentTpl:function(){return{}}}),setup:function(t){function e(e){return t.onTpl?{left:e.x+"px",top:e.y+"px",width:e.width+"px",height:e.height+"px"}:{left:"".concat(o(e.x)),top:"".concat(o(e.y)),width:"".concat(o(e.width)),height:"".concat(o(e.height))}}function n(){return t.onTpl?{width:t.gridLayout.totalWidth+"px",height:t.gridLayout.totalHeight+"px"}:{width:"".concat(o(t.gridLayout.totalWidth)),height:"".concat(o(t.gridLayout.totalHeight))}}return function(a,r){var o=_("taro-view");return L(),x(o,{class:"htt-container"},{default:I(function(){return[k(o,{class:M({"grid-container--active":t.currentTpl.id===t.gridLayout.id,"grid-container":!0}),style:C(n()),onClick:r[0]||(r[0]=function(e){return t.onTpl&&t.onTpl(t.gridLayout)})},{default:I(function(){return[(L(!0),T(S,null,j(t.gridLayout.grids,function(n,r){return L(),x(o,{key:n.id,class:"grid-item",style:C(e(n)),onClick:function(e){return t.addImage&&t.addImage(r)}},{default:I(function(){return[z(a.$slots,"image",{index:r})]}),_:2},1032,["style","onClick"])}),128))]}),_:3},8,["class","style"])]}),_:3})}}};const At=G(Dt,[["__file","layoutItem.vue"]]);var Bt=["src"],Et={__name:"layout",setup:function(t){var e=Ht(),n=Vt(),a=F(n),r=a.showTemplateDrawer,l=F(e),c=l.gridLayout,s=l.imageLayout,d=l.round,f=e.removeImage,h=e.addImage;return function(t,e){var n=_("taro-view"),a=_("taro-button"),l=u;return P(c)?(L(),x(At,{key:0,gridLayout:P(c),addImage:P(h)},{image:I(function(t){var e=t.index;return[P(s)[e]&&P(s)[e].url?(L(),T(S,{key:0},[k(n,{class:"htt-img-container",style:C({borderRadius:P(d)&&P(o)(P(d))||0})},{default:I(function(){return[H("img",{src:P(s)[e].url,class:"htt-media",style:C({width:"".concat(P(o)(P(s)[e].crop.width)),height:"".concat(P(o)(P(s)[e].crop.height)),transform:"translate(-".concat(P(o)(P(s)[e].crop.x*P(s)[e].scale),", -").concat(P(o)(P(s)[e].crop.y*P(s)[e].scale),") scale(").concat(P(s)[e].scale,")")})},null,12,Bt)]}),_:2},1032,["style"]),k(a,{shape:"circle",size:"small",class:"htt-remove-btn",onClick:O(function(t){return P(f)&&P(f)(e)},["stop"])},{default:I(function(){return[k(P(i),{name:"del",width:"12",height:"12"})]}),_:2},1032,["onClick"])],64)):(L(),x(P(i),{key:1,class:"htt-add",color:"var(--nut-primary-color)",name:"plus",size:"20"}))]}),_:1},8,["gridLayout","addImage"])):(L(),x(n,{key:1,class:"htt-empty-template",onClick:e[0]||(e[0]=O(function(t){return r.value=!0},["stop"]))},{default:I(function(){return[k(l,{description:"\u70b9\u51fb\u6211\u9009\u62e9\u5e03\u5c40"})]}),_:1}))}}};const Ft=G(Et,[["__file","layout.vue"]]);var Gt={__name:"longLayoutItem",props:b(["gridLayout","onTpl","addImage","isHorizontal","longImageLayout","gap"],{gridLayout:function(){return{}}}),setup:function(t){var e=function(e){if(t.longImageLayout&&t.longImageLayout["layout"]&&t.longImageLayout["layout"][e]){var n=t.longImageLayout["layout"][e],a=n.w,r=n.h;return{height:o(r),width:o(a),marginRight:t.isHorizontal&&o(t.gap)||0,marginBottom:!t.isHorizontal&&o(t.gap)||0}}return{height:o(200),width:t.isHorizontal?"50%":"auto",marginRight:t.isHorizontal&&o(t.gap)||0,marginBottom:!t.isHorizontal&&o(t.gap)||0}},n=m(function(){var e=t.isHorizontal&&t.longImageLayout&&t.longImageLayout.totalWidth&&o(t.longImageLayout.totalWidth+200)||"auto";return{display:"".concat(t.isHorizontal?"flex":"block"),padding:"".concat(o(t.gap)),width:e}});return function(a,r){var o=_("taro-view");return L(),x(o,{class:"htt-long-container"},{default:I(function(){return[k(o,{class:"grid-container-long",onClick:r[0]||(r[0]=function(e){return t.onTpl&&t.onTpl(t.gridLayout)}),style:C(n.value)},{default:I(function(){return[(L(!0),T(S,null,j(t.gridLayout,function(n,r){return L(),x(o,{key:r,class:"grid-item",onClick:function(e){return t.addImage&&t.addImage(r)},style:C(e(r))},{default:I(function(){return[z(a.$slots,"image",{index:r})]}),_:2},1032,["onClick","style"])}),128))]}),_:3},8,["style"])]}),_:3})}}};const Ut=G(Gt,[["__file","longLayoutItem.vue"]]);var Nt=["src"],qt={__name:"longLayout",setup:function(t){var e=Ht(),n=Ot(),a=F(e),r=a.round,u=a.gap,l=F(n),c=l.longImageLayout,s=l.longGridLayout,d=l.isHorizontal,f=e.removeImage,h=e.addImage;return function(t,e){var n=_("taro-view"),a=_("taro-button");return P(s)?(L(),x(Ut,{key:0,gridLayout:P(s),gap:P(u),addImage:P(h),isHorizontal:P(d),longImageLayout:P(c)},{image:I(function(t){var e=t.index;return[P(c)&&P(c)["layout"][e]&&P(c)["layout"][e].url?(L(),T(S,{key:0},[k(n,{class:"htt-long-img-container"},{default:I(function(){return[H("img",{src:P(c)["layout"][e].url,style:C({display:"block",width:"".concat(P(o)(P(c)["layout"][e].w)),height:"".concat(P(o)(P(c)["layout"][e].h)),borderRadius:P(r)&&P(o)(P(r))||0})},null,12,Nt)]}),_:2},1024),k(a,{shape:"circle",size:"small",class:"htt-long-remove-btn",onClick:O(function(t){return P(f)&&P(f)(e)},["stop"])},{default:I(function(){return[k(P(i),{name:"del",width:"12",height:"12"})]}),_:2},1032,["onClick"])],64)):(L(),x(P(i),{key:1,color:"var(--nut-primary-color)",name:"plus",size:"20"}))]}),_:1},8,["gridLayout","gap","addImage","isHorizontal","longImageLayout"])):R("",!0)}}};const Qt=G(qt,[["__file","longLayout.vue"]]);var $t={__name:"tpl",setup:function(t){var e=p(Object.keys(zt.LayoutDefinitions)),n=Ht(),a=Vt(),r=F(a),o=r.showTemplateDrawer,u=r.showSettings,d=F(n),f=d.allLayout,h=d.currentTpl,v=n.onTpl,g=function(t){v(t),o.value=!1,u.value=!1},y=m(function(){return!kt()&&!u.value});return function(t,n){var a=_("taro-view"),r=l,u=c,d=s;return L(),x(d,{class:"htt-tpl-popup",visible:P(o),"onUpdate:visible":n[2]||(n[2]=function(t){return A(o)?o.value=t:null}),position:"left",overlay:y.value,round:"","destroy-on-close":!1},{default:I(function(){return[k(a,{class:"drawer-header"},{default:I(function(){return[k(a,{class:"title"},{default:I(function(){return n[3]||(n[3]=[W("\u5e03\u5c40")])}),_:1,__:[3]}),V(k(P(i),{name:"left",color:"var(--nut-primary-color)",class:"nut-icon-am-shake close-icon close-icon--left",onClick:n[0]||(n[0]=function(t){return o.value=!1})},null,512),[[D,P(o)]])]}),_:1}),k(a,{class:"template-group"},{default:I(function(){return[k(u,{modelValue:e.value,"onUpdate:modelValue":n[1]||(n[1]=function(t){return e.value=t})},{default:I(function(){return[(L(!0),T(S,null,j(Object.keys(P(f)),function(t){return L(),x(r,{class:"htt-collapse-item",title:P(f)[t].name,key:t,name:t},{default:I(function(){return[(L(!0),T(S,null,j(P(f)[t].datas,function(e,n){return L(),x(At,{onTpl:g,currentTpl:P(h),key:"".concat(t,"_").concat(n),gridLayout:e},null,8,["currentTpl","gridLayout"])}),128))]}),_:2},1032,["title","name"])}),128))]}),_:1},8,["modelValue"])]}),_:1})]}),_:1},8,["visible","overlay"])}}};const Jt=G($t,[["__file","tpl.vue"]]);var Kt={class:"htt-input-ratio"},Xt={__name:"inputRatio",props:["selectRatio"],setup:function(t){var e=p(""),n=function(){if(/^[\.\d]+:[\.\d]+$/.test(e.value)){var n=e.value.split(":").map(function(t){return+t}),r=n[0]/n[1];t.selectRatio(Number(r.toFixed(2))),a({title:"\u6bd4\u4f8b\u8bbe\u7f6e\u6210\u529f!",icon:"none",duration:1e3})}else a({title:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6bd4\u5217\uff08\u5982 16:9\uff09",icon:"none",duration:3e3})};return function(t,a){var r=_("taro-input"),o=_("taro-button");return L(),T("div",Kt,[k(r,{class:"htt-input-ratio__input",modelValue:e.value,"onUpdate:modelValue":a[0]||(a[0]=function(t){return e.value=t}),placeholder:"\u8bf7\u8f93\u5165\u5982,16:9"},null,8,["modelValue"]),k(o,{class:"htt-input-ratio__button",onClick:n},{default:I(function(){return a[1]||(a[1]=[W("\u786e\u5b9a")])}),_:1,__:[1]})])}}};const Yt=G(Xt,[["__file","inputRatio.vue"]]);var Zt={__name:"ratio",props:{ratios:{type:Array,default:function(){return[{label:"1:1",value:1},{label:"3:2",value:1.5},{label:"4:3",value:1.333},{label:"16:9",value:1.778}]}},defaultRatio:{type:Number,default:1}},emits:["ratio-selected"],setup:function(t,e){var n=e.emit,a=t,r=p(!1),o=n,i=p(a.defaultRatio),u=function(t){i.value=t,o("ratio-selected",t)};return function(e,n){var a=d,o=f,l=_("taro-view");return L(),x(l,{class:"aspect-ratio-selector"},{default:I(function(){return[k(o,{title:"\u81ea\u5b9a\u4e49\u6bd4\u4f8b"},{link:I(function(){return[k(a,{modelValue:r.value,"onUpdate:modelValue":n[0]||(n[0]=function(t){return r.value=t}),"active-color":"var(--nut-primary-color)","active-text":"\u5f00","inactive-text":"\u5173"},null,8,["modelValue"])]}),_:1}),V(k(l,null,{default:I(function(){return[k(Yt,{selectRatio:u})]}),_:1},512),[[D,r.value]]),(L(!0),T(S,null,j(t.ratios,function(t,e){return V((L(),x(l,{key:e,class:M(["ratio-option",{active:i.value===t.value}]),onClick:function(e){return u(t.value)}},{default:I(function(){return[H("span",null,B(t.label),1)]}),_:2},1032,["class","onClick"])),[[D,!r.value]])}),128))]}),_:1})}}};const te=G(Zt,[["__file","ratio.vue"]]);var ee={__name:"range",props:{min:{type:Number,default:0},max:{type:Number,default:100},modelValue:{type:Number,default:0},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup:function(t,e){var n=e.emit,a=n,r=m(function(){return!1}),o=function(t){a("update:modelValue",t.detail.value),a("change",t.detail.value)},i=function(t){a("change",t.detail.value)},u=function(t){var e=parseInt(t.target.value,10);a("update:modelValue",e),a("change",e)};return function(e,n){var a=_("taro-slider"),l=_("taro-input"),c=_("taro-view");return L(),x(c,{class:M(["slider-container",{disabled:t.disabled}])},{default:I(function(){return[r.value?(L(),x(a,{key:0,min:t.min,max:t.max,value:t.modelValue,disabled:t.disabled,onChange:o,onChanging:i,class:"slider-container__slider","block-size":"20","block-color":"var(--nut-primary-color)"},null,8,["min","max","value","disabled"])):(L(),x(l,{key:1,type:"range",min:t.min,max:t.max,value:t.modelValue,disabled:t.disabled,onInput:u,class:"slider-input"},null,8,["min","max","value","disabled"]))]}),_:1},8,["class"])}}};const ne=G(ee,[["__file","range.vue"]]);var ae={__name:"setting",setup:function(t){var e=Ht(),n=Vt(),a=Pt(),r=F(n),o=r.showTemplateDrawer,u=r.showSettings,d=F(e),v=d.gap,g=d.round,y=d.isLongLayout,w=d.customQuality,b=F(a),M=b.customRatios,C=b.currentRatio,T=a.handleRatioSelected,S=p(["set-1","set-2","set-3"]),j=m(function(){return!kt()&&!o.value});function z(t){T(t),u.value=!1}return function(t,e){var n=_("taro-view"),a=f,r=h,o=l,d=c,p=s;return L(),x(p,{visible:P(u),"onUpdate:visible":e[5]||(e[5]=function(t){return A(u)?u.value=t:null}),position:"right",overlay:j.value,class:"htt-setting",round:"","destroy-on-close":!1},{default:I(function(){return[k(n,{class:"drawer-header"},{default:I(function(){return[k(n,{class:"title"},{default:I(function(){return e[6]||(e[6]=[W("\u8bbe\u7f6e")])}),_:1,__:[6]}),k(P(i),{name:"right",color:"var(--nut-primary-color)",class:"nut-icon-am-shake close-icon close-icon--right",onClick:e[0]||(e[0]=function(t){return u.value=!1})})]}),_:1}),k(n,{class:"htt-setting__content"},{default:I(function(){return[k(d,{modelValue:S.value,"onUpdate:modelValue":e[4]||(e[4]=function(t){return S.value=t})},{default:I(function(){return[k(o,{title:"\u6837\u5f0f\u8bbe\u7f6e",name:"set-1"},{default:I(function(){return[k(r,{desc:"\u95f4\u8ddd(".concat(P(v),")")},{default:I(function(){return[k(a,null,{default:I(function(){return[k(ne,{modelValue:P(v),"onUpdate:modelValue":e[1]||(e[1]=function(t){return A(v)?v.value=t:null}),step:10},null,8,["modelValue"])]}),_:1})]}),_:1},8,["desc"]),k(r,{title:"\u5706\u89d2(".concat(P(g),")")},{default:I(function(){return[k(a,null,{default:I(function(){return[k(ne,{modelValue:P(g),"onUpdate:modelValue":e[2]||(e[2]=function(t){return A(g)?g.value=t:null}),max:200,step:10},null,8,["modelValue"])]}),_:1})]}),_:1},8,["title"])]}),_:1}),k(o,{title:"\u56fe\u7247\u8d28\u91cf\u8bbe\u7f6e",name:"set-2"},{default:I(function(){return[k(r,{desc:"\u8d28\u91cf(".concat(P(w)/10,"\uff09\u6ce8:0-10\u6570\u5b57\u8d8a\u5927\u8d8a\u9ad8\u6e05")},{default:I(function(){return[k(a,null,{default:I(function(){return[k(ne,{modelValue:P(w),"onUpdate:modelValue":e[3]||(e[3]=function(t){return A(w)?w.value=t:null}),min:0,max:100,step:10},null,8,["modelValue"])]}),_:1})]}),_:1},8,["desc"])]}),_:1}),V(k(o,{title:"\u6bd4\u4f8b\u8bbe\u7f6e",name:"set-3"},{default:I(function(){return[k(r,{desc:"\u9ad8\u5bbd\u6bd4\u4f8b"},{default:I(function(){return[k(te,{ratios:P(M),"default-ratio":P(C),onRatioSelected:z},null,8,["ratios","default-ratio"])]}),_:1})]}),_:1},512),[[D,!P(y)]])]}),_:1},8,["modelValue"])]}),_:1})]}),_:1},8,["visible","overlay"])}}};const re=G(ae,[["__file","setting.vue"]]);var oe={__name:"fast",props:{buttons:{type:Array,required:!0,validator:function(t){return t.every(function(t){return t.label&&t.action})}},direction:{type:String,default:"horizontal",validator:function(t){return["horizontal","vertical"].includes(t)}}},setup:function(t){return function(e,n){var a=_("taro-view");return L(),x(a,{class:M(["floating-buttons",t.direction])},{default:I(function(){return[(L(!0),T(S,null,j(t.buttons,function(t,e){return L(),x(P(U),{key:e,class:M(["floating-button",[{"floating-button--disabled":t.disabled}]]),disabled:t.disabled,"open-type":"message"===t.label?"feedback":"",onClick:t.action},{default:I(function(){return[k(P(i),{class:"nut-icon-am-shake",name:t.label},null,8,["name"])]}),_:2},1032,["class","disabled","open-type","onClick"])}),128))]}),_:1},8,["class"])}}};const ie=G(oe,[["__file","fast.vue"]]);var ue={__name:"index",setup:function(t){var e=p("\u5408\u56fe\u56fe"),a=p(!1),r=Vt(),o=Ht(),u=F(o),l=u.isEmptyImage,c=u.isLongLayout,s=u.fastButton,d=F(r),f=d.isLoading,h=d.showTemplateDrawer,m=d.showSettings,y=d.qualityItems,w=r.chooseQuality;return n.useShareAppMessage(function(){return{title:"\u672c\u5730\u65e0\u670d\u52a1\u62fc\u56fe\uff0c\u6240\u89c1\u5373\u6240\u5f97\uff0c\u591a\u79cd\u5e03\u5c40\u8f7b\u677e\u62ff\u634f\u5404\u79cd\u573a\u666f\uff01",path:"/pages/index/index"}}),n.useShareTimeline(function(){console.log("onShareTimeline")}),function(t,n){var r=_("taro-view"),o=v,u=_("taro-button"),d=g,p=_("taro-canvas");return L(),x(r,{class:"puzzle-page"},{default:I(function(){return[k(o,{class:"htt-navbar",title:e.value},{left:I(function(){return[k(r,{class:"htt-navbar-left",onClick:n[0]||(n[0]=O(function(t){return h.value=!P(h)},["stop"]))},{default:I(function(){return[k(P(i),{name:"scan",size:"20",color:"var(--nut-primary-color)",class:"nut-icon-am-shake"})]}),_:1})]}),right:I(function(){return[k(P(i),{name:"setting",size:"20",color:"var(--nut-primary-color)",class:"nut-icon-am-shake",onClick:n[1]||(n[1]=function(t){return m.value=!P(m)})})]}),_:1},8,["title"]),k(Jt),k(re),P(c)?(L(),x(Qt,{key:1})):(L(),x(Ft,{key:0})),k(r,{class:"htt-save"},{default:I(function(){return[k(u,{block:"",loading:P(f),onClick:n[2]||(n[2]=function(t){return a.value=!0}),class:M({"htt-save__btn":!0,"htt-save__btn--disabled":P(l)}),disabled:P(l)},{default:I(function(){return[W(B(P(f)?"\u751f\u6210\u4e2d...":"\u751f\u6210\u62fc\u56fe"),1)]}),_:1},8,["loading","class","disabled"])]}),_:1}),k(d,{class:"htt-quality",visible:a.value,"onUpdate:visible":n[3]||(n[3]=function(t){return a.value=t}),"menu-items":P(y),onChoose:P(w)},null,8,["visible","menu-items","onChoose"]),k(ie,{buttons:P(s)},null,8,["buttons"]),k(p,{"canvas-id":"puzzleCanvas",id:"puzzleCanvas",type:"2d",class:"hidden-canvas"})]}),_:1})}}};const le=G(ue,[["__file","index.vue"]]);export{le as default};

import{p as t,q as e,t as a,r as n,u as r,v as u,x as i,_ as o,w as l,y as c,N as s,z as d,A as h,B as v,C as f,D as g}from"./nutui.00f5da56.js";import{r as m,f as p,o as y,a as w,V as b,D as _,c as L,e as I,w as k,G as x,q as M,s as C,g as z,F as H,I as T,j as R,v as W,m as V,W as P,k as S,l as B,x as D,y as j,M as F,n as U}from"./vue.25d5b29f.js";import{d as q,s as A}from"./app.52a6787d.js";import{b as E,c as G,d as N,e as Q,f as O,g as $,h as J}from"./helper.314184a3.js";import{B as K}from"./tarobase.75d709d1.js";import"./swiper.637bccad.js";var X=window.devicePixelRatio;console.log("dpr",X);var Y=function(t){var e=t.ctx,a=t.width,n=t.height;e.canvas.width=a,e.canvas.height=n,e.fillStyle="white",e.fillRect(0,0,a,n)},Z=function(t){return new Promise(function(e,a){try{var n=t.canvas.toDataURL("image/jpeg",1),r=document.createElement("a");r.download="\u5408\u56fe\u56fe-".concat((new Date).toLocaleString(),".jpg"),r.href=n,document.body.appendChild(r),r.click(),document.body.removeChild(r),e()}catch(u){a(u)}})};function tt(t,e,a,n,r,u,i,o,l,c,s){t.save(),t.beginPath(),t.moveTo(a+i,n),t.lineTo(a+r-i,n),t.arc(a+r-i,n+i,i,1.5*Math.PI,2*Math.PI),t.lineTo(a+r,n+u-i),t.arc(a+r-i,n+u-i,i,0,.5*Math.PI),t.lineTo(a+i,n+u),t.arc(a+i,n+u-i,i,.5*Math.PI,Math.PI),t.lineTo(a,n+i),t.arc(a+i,n+i,i,Math.PI,1.5*Math.PI),t.closePath(),t.clip(),void 0!==o&&void 0!==l&&void 0!==c&&void 0!==s?t.drawImage(e,o,l,c,s,a,n,r,u):t.drawImage(e,a,n,r,u),t.restore()}function et(t){var e=t.ctx,a=t.width,n=t.height;t.canvas,Y({ctx:e,width:a,height:n})}function at(t){var e=t.ctx;return t.canvasId,t.canvasWidth,t.canvasHeight,t.canvas,Z(e)}function nt(t){return rt.apply(this,arguments)}function rt(){return rt=E(G().m(function e(a){var n;return G().w(function(e){while(1)switch(e.n){case 0:return e.a(2,new Promise(function(t,e){var n=new Image;n.onload=function(){return t({width:n.width,height:n.height})},n.onerror=e,n.src=a}));case 1:return e.n=2,t({src:a});case 2:return n=e.v,e.a(2,{width:n.width,height:n.height});case 3:return e.a(2)}},e)})),rt.apply(this,arguments)}function ut(t){return new Image}function it(t){return ot.apply(this,arguments)}function ot(){return ot=E(G().m(function t(e){var a,n,r,u,i,o;return G().w(function(t){while(1)switch(t.n){case 0:a=e.ctx,n=e.imageLayout,r=e.imageInfos,e.canvas,u=[],i=G().m(function t(){var e,i,l,c,s,d,h,v,f,g,m,p,y;return G().w(function(t){while(1)switch(t.n){case 0:if(e=r[o]||{},e.url&&n[o]){t.n=1;break}return t.a(2,1);case 1:i=n[o],l=i.x,c=i.y,s=i.crop,d=i.width,h=i.height,v=s.x,f=s.y,g=s.cropWidth,m=s.cropHeight,p=s.round,y=new Promise(function(t){var n=ut();n.src=e.url,n.width=e.width,n.height=e.height,n.onload=function(){tt(a,n,l,c,d,h,p,v,f,g,m),t()},n.onerror=function(a){console.error("\u56fe\u7247\u52a0\u8f7d\u5931\u8d25:",e.src,a),t()}}),u.push(y);case 2:return t.a(2)}},t)}),o=0;case 1:if(!(o<r.length)){t.n=4;break}return t.d(N(i()),2);case 2:if(!t.v){t.n=3;break}return t.a(3,3);case 3:o++,t.n=1;break;case 4:return t.n=5,Promise.all(u);case 5:return t.a(2)}},t)})),ot.apply(this,arguments)}function lt(t){return new Promise(function(e){var a=document.querySelector('[canvas-id="'.concat(t,'"]')),n=a.getContext("2d");e({ctx:n,canvas:a})})}function ct(t){var e=t.aspectRatio,a=t.width,n=t.height,r={width:0,height:0};if(e<=0)throw new Error("\u9ad8\u5bbd\u6bd4\u5fc5\u987b\u5927\u4e8e 0");return void 0!==a&&void 0===n?(r.width=Math.min(a,700),r.height=r.width*e):void 0!==n&&void 0===a?(r.height=n,r.width=r.height/e,r.width>700&&(r.width=700,r.height=r.width*e)):(r.width=700,r.height=r.width*e),r.width=Math.round(r.width),r.height=Math.round(r.height),r}function st(t){var e=t.totalWidth,a=t.totalHeight,n=t.layoutConfig,r=t.padding,u=t.gap,i=void 0===u?0:u,o=r||[i,i,i,i],l=Q(o,4),c=l[0],s=l[1],d=l[2],h=l[3],v=Array.isArray(i)?i:[i,i],f=Q(v,2),g=f[0],m=f[1],p=e-h-s,y=a-c-d,w=n.cols,b=n.rows,_=(w-1)*m,L=(b-1)*g,I=(p-_)/w,k=(y-L)/b,x=n.areas.map(function(t,e){var a=Q(t,4),n=a[0],r=a[1],u=a[2],i=a[3],o=h+n*(I+m),l=c+r*(k+g),s=(u-n)*I+(u-n-1)*m,d=(i-r)*k+(i-r-1)*g;return{id:e,x:Math.round(o),y:Math.round(l),width:Math.round(s),height:Math.round(d),meta:{cellWidth:I,cellHeight:k,colGap:m,rowGap:g}}});return{totalWidth:e,totalHeight:a,id:n.id||"",grids:x,rowGap:g,colGap:m}}function dt(t){var e=t.gridLayout,a=t.images,n=void 0===a?[]:a,r=t.round,u=e.grids.map(function(t,e){if(!n[e])return{};var a,u,i,o,l,c=n[e]||{width:1,height:1},s=c.height/c.width,d=t.height/t.width;return s>d?(a=t.width/c.width,i=t.height/a,u=c.width,i=Math.min(i,c.height),o=0,l=Math.max(0,(c.height-i)/2)):(a=t.height/c.height,u=t.width/a,i=c.height,u=Math.min(u,c.width),o=Math.max(0,(c.width-u)/2),l=0),(u>c.width||i>c.height)&&(a=Math.min(t.width/c.width,t.height/c.height),u=c.width,i=c.height,o=0,l=0,console.warn("\u56fe\u7247".concat(e,"\u5c3a\u5bf8\u4e0d\u8db3\uff0c\u5df2\u542f\u7528\u7f29\u653e\u586b\u5145\u6a21\u5f0f"))),{x:t.x,y:t.y,width:t.width,height:t.height,url:c.url,crop:{x:Math.round(o),y:Math.round(l),width:Math.round(c.width),height:Math.round(c.height),cropWidth:Math.round(u),cropHeight:Math.round(i),round:r},scale:parseFloat(a.toFixed(4))}});return u}function ht(t){var e=t.images,a=e.filter(function(t){return!!t});if(!a||!a.length)return[{},{}];var n=[].concat(O(a),[{}]);return n.map(function(){return{}})}function vt(t){var e=t.images,a=t.gap,n=t.round,r=t.isHorizontal,u=t.canvasBaseH,i=t.canvasBaseW,o=e.filter(function(t){return!!t}),l=u/2,c=i;if(!o.length)return{layout:[]};var s={layout:[]};if(r){s.totalWidth=o.reduce(function(t,e){return t+Math.round(l/e.aspectRatio)},a),s.totalHeight=l;var d=a;o.forEach(function(t){var e=t.aspectRatio,r=Math.round(l/e-a),u=l-2*a;s.layout.push({x:d,y:a,w:r,h:u,width:r,height:u,crop:{round:n},round:n,url:t.url}),d+=r+a})}else{s.totalHeight=o.reduce(function(t,e){return t+Math.round(c*e.aspectRatio)},a),s.totalWidth=c;var h=a;o.forEach(function(t){var e=t.aspectRatio,r=c-2*a,u=Math.round(c*e-a);s.layout.push({x:a,y:h,w:r,h:u,width:r,height:u,crop:{round:n},round:n,url:t.url}),h+=u+a})}return s}function ft(t){var e=t.layoutStore,a=t.longLayoutStore,n=e.isLongLayout;if(n){var r=a||{},u=r.longImageLayouCanvas,i=u||{},o=i.totalWidth,l=i.totalHeight,c=i.layout;return{imageLayout:c,totalWidth:o,totalHeight:l}}var s=e.imageLayoutCanvas,d=e.gridLayoutCanvas,h=d.totalWidth,v=d.totalHeight;return{imageLayout:s,totalWidth:h,totalHeight:v}}function gt(){var t=navigator.userAgent.toLowerCase(),e=/android|iphone|symbianos|windows phone|ipad|ipod/i.test(t);return!e&&window.innerWidth>768}var mt={LayoutDefinitions:{"grid-1":{name:"\u957f\u56fe",areas:[[[0,0,1,1],[1,0,2,1]],[[0,0,1,1],[0,1,1,2]]]},"grid-2":{name:"\u4e8c\u56fe",areas:[[[0,0,1,1],[1,0,2,1]],[[0,0,1,1],[0,1,1,2]],[[0,0,1.2,1],[1.2,0,2,1]],[[0,0,1,1.2],[0,1.2,1,2]],[[0,0,1,1],[1,1,2,2]],[[0,0,.8,1],[.8,0,2,1]],[[0,0,1,.8],[0,.8,1,2]],[[1,0,2,1],[0,1,1,2]]]},"grid-3":{name:"\u4e09\u56fe",areas:[[[0,0,1,1],[1,0,2,1],[2,0,3,1]],[[0,0,1,1],[0,1,1,2],[0,2,1,3]],[[0,0,1,1],[1,0,2,1],[0,1,2,2]],[[0,0,1,2],[1,0,2,1],[1,1,2,2]],[[0,0,1,1],[1,1,2,2],[2,0,3,1]],[[0,0,1,1],[1,0,2,2],[2,1,3,2]],[[0,0,2,1],[0,1,1,2],[1,1,2,2]],[[0,0,3,1],[0,1,1,2],[1,1,3,2]],[[0,0,2,1],[2,0,3,1],[0,1,3,2]],[[0,0,1,1],[0,1,1,2],[1,0,2,2]],[[0,0,2,2],[2,0,3,1],[2,1,3,2]],[[0,0,1,1],[0,1,1,2],[1,0,3,2]]]},"grid-4":{name:"\u56db\u56fe",areas:[[[0,0,1,1],[1,0,2,1],[0,1,1,2],[1,1,2,2]],[[0,0,3,1],[0,1,1,2],[1,1,2,2],[2,1,3,2]],[[0,0,2,1],[2,0,4,1],[0,1,1,2],[1,1,4,2]],[[0,0,1,1],[1,0,3,1],[3,0,4,1],[0,1,4,2]],[[0,0,2,1],[2,0,3,1],[3,0,4,1],[0,1,4,2]],[[0,0,1,1],[1,0,2,1],[2,0,3,1],[0,1,3,2]],[[0,0,1,1],[0,1,1,2],[0,2,1,3],[1,0,2,3]],[[0,0,2,2],[2,0,3,1],[0,2,1,3],[1,1,3,3]],[[1,0,3,2],[0,0,1,1],[2,2,3,3],[0,1,2,3]],[[0,0,1,2],[1,0,2,2],[2,0,3,2],[3,0,4,2]],[[0,0,1,1],[0,1,1,2],[0,2,1,3],[0,3,1,4]],[[0,0,1,3],[1,0,2,1],[1,1,2,2],[1,2,2,3]],[[0,0,2,1],[0,1,1,2],[1,1,2,2],[0,2,2,3]],[[0,1,2,2],[0,0,1,1],[1,0,2,1],[0,2,2,3]]]},"grid-5":{name:"\u4e94\u56fe",areas:[[[0,0,1,1],[1,0,2,1],[2,0,3,1],[0,1,2,2],[2,1,3,2]],[[0,0,1,2],[1,0,2,1],[1,1,2,2],[2,0,3,1],[2,1,3,2]],[[0,0,2,1],[2,0,3,1],[0,1,1,2],[1,1,3,2],[2,1,3,2]],[[0,0,2,1],[2,0,4,1],[0,1,2,2],[2,1,3,2],[3,1,4,2]],[[0,0,3,1],[3,0,4,1],[0,1,1,2],[1,1,4,2],[2,1,3,2]],[[0,0,1,1],[1,0,2,1],[2,0,3,1],[3,0,4,1],[0,1,4,2]],[[0,0,4,1],[4,0,5,1],[0,1,1,2],[1,1,2,2],[2,1,5,2]],[[0,0,1,1],[1,0,3,1],[3,0,4,1],[0,1,2,2],[2,1,4,2]],[[1,1,2,2],[0,0,1,1],[2,0,3,1],[0,2,1,3],[2,2,3,3]],[[0,0,1,1],[1,0,2,1],[0,1,1,2],[1,1,2,2],[0,2,2,3]],[[0,0,1,1],[1,0,2,1],[2,0,3,1],[0,1,1,2],[1,1,3,2]],[[0,0,1,2],[1,0,3,1],[1,1,2,2],[0,2,2,3],[2,1,3,3]],[[0,0,2,1],[2,0,3,2],[0,1,1,3],[1,1,2,2],[1,2,3,3]],[[0,0,1,4],[1,0,2,1],[1,1,2,2],[1,2,2,3],[1,3,2,4]],[[0,0,4,1],[0,1,1,2],[1,1,2,2],[2,1,3,2],[3,1,4,2]]]},"grid-6":{name:"\u516d\u56fe",areas:[[[0,0,1,1],[1,0,2,1],[2,0,3,1],[0,1,1,2],[1,1,2,2],[2,1,3,2]],[[0,0,1,1],[1,0,2,1],[0,1,1,2],[1,1,2,2],[0,2,1,3],[1,2,2,3]],[[0,0,1,1],[1,0,2,1],[2,0,3,1],[3,0,4,1],[0,1,2,2],[2,1,4,2]],[[0,0,1,1],[1,0,3,1],[3,0,4,1],[0,1,2,2],[2,1,3,2],[3,1,4,2]],[[0,0,3,1],[3,0,4,1],[0,1,1,2],[1,1,2,2],[2,1,3,2],[3,1,4,2]],[[0,0,2,1],[2,0,4,1],[0,1,1,2],[1,1,2,2],[2,1,3,2],[3,1,4,2]],[[0,0,1,1],[1,0,2,1],[2,0,3,1],[3,0,4,1],[4,0,5,1],[0,1,5,2]],[[0,0,2,1],[2,0,3,1],[3,0,5,1],[0,1,1,2],[1,1,4,2],[4,1,5,2]],[[0,0,1,1],[1,0,2,1],[0,1,1,2],[1,1,2,2],[2,0,3,2],[3,0,4,2]],[[0,0,2,1],[2,0,3,3],[0,1,1,4],[1,1,2,2],[1,2,2,3],[1,3,3,4]],[[0,0,1,2],[1,0,4,1],[1,1,2,2],[2,1,3,2],[0,2,3,3],[3,1,4,3]],[[0,0,1,1],[1,0,3,1],[0,1,2,2],[2,1,3,2],[0,2,1,3],[1,2,3,3]],[[0,0,2,1],[2,0,3,1],[0,1,1,2],[1,1,3,2],[0,2,2,3],[2,2,3,3]],[[0,0,1,5],[1,0,2,1],[1,1,2,2],[1,2,2,3],[1,3,2,4],[1,4,2,5]],[[0,0,5,1],[0,1,1,2],[1,1,2,2],[2,1,3,2],[3,1,4,2],[4,1,5,2]]]},"grid-7":{name:"\u4e03\u56fe",areas:[[[0,0,1,1],[1,0,2,1],[2,0,3,1],[0,1,1,2],[1,1,2,2],[2,1,3,2],[0,2,3,3]],[[0,0,3,1],[3,0,4,1],[0,1,1,2],[1,1,2,2],[2,1,3,2],[3,1,4,2],[0,2,4,3]],[[0,0,2,1],[2,0,3,1],[3,0,5,1],[0,1,1,2],[1,1,4,2],[4,1,5,2],[0,2,5,3]],[[1,1,2,2],[0,0,1,1],[2,0,3,1],[0,1,1,2],[2,1,3,2],[0,2,1,3],[2,2,3,3]],[[1,1,2,2],[0,0,1,1],[2,0,3,1],[0,2,1,3],[2,2,3,3],[1,0,2,1],[1,2,2,3]],[[0,0,3,1],[3,0,4,3],[0,1,1,4],[1,1,2,2],[2,1,3,2],[1,2,3,3],[1,3,4,4]],[[0,0,1,3],[1,0,4,1],[1,1,2,2],[2,1,3,2],[1,2,3,3],[0,3,3,4],[3,1,4,4]],[[0,0,1,6],[1,0,2,1],[1,1,2,2],[1,2,2,3],[1,3,2,4],[1,4,2,5],[1,5,2,6]],[[0,0,6,1],[0,1,1,2],[1,1,2,2],[2,1,3,2],[3,1,4,2],[4,1,5,2],[5,1,6,2]],[[0,0,2,1],[2,0,3,2],[0,1,1,3],[1,1,2,2],[1,2,3,3],[0,3,2,5],[2,3,3,5]],[[0,0,1,2],[1,0,4,1],[1,1,2,2],[2,1,3,2],[0,2,3,3],[3,1,4,3],[0,3,4,4]],[[0,0,1,1],[1,0,3,1],[0,1,2,2],[2,1,3,2],[0,2,1,3],[1,2,3,3],[0,3,3,4]],[[0,0,2,1],[2,0,3,1],[0,1,1,2],[1,1,3,2],[0,2,2,3],[2,2,3,3],[0,3,3,4]]]},"grid-8":{name:"\u516b\u56fe",areas:[[[0,0,1,1],[1,0,2,1],[2,0,3,1],[3,0,4,1],[0,1,1,2],[1,1,2,2],[2,1,3,2],[3,1,4,2]],[[0,0,1,1],[1,0,2,1],[2,0,3,1],[3,0,4,1],[4,0,5,1],[0,1,2,2],[2,1,4,2],[4,1,5,2]],[[0,0,2,1],[2,0,3,1],[3,0,5,1],[0,1,1,2],[1,1,4,2],[4,1,5,2],[0,2,3,3],[3,2,5,3]],[[0,0,1,1],[1,0,2,1],[0,1,1,2],[1,1,2,2],[0,2,1,3],[1,2,2,3],[0,3,1,4],[1,3,2,4]],[[0,0,3,1],[3,0,4,3],[0,1,1,4],[1,1,2,2],[2,1,3,2],[1,2,2,3],[2,2,3,3],[1,3,4,4]],[[0,0,1,3],[1,0,4,1],[1,1,2,2],[2,1,3,2],[1,2,2,3],[2,2,3,3],[0,3,3,4],[3,1,4,4]],[[0,0,1,1],[1,0,2,1],[2,0,3,1],[0,1,1,2],[1,1,2,2],[2,1,3,2],[0,2,1,3],[1,2,3,3]],[[0,0,1,7],[1,0,2,1],[1,1,2,2],[1,2,2,3],[1,3,2,4],[1,4,2,5],[1,5,2,6],[1,6,2,7]],[[0,0,7,1],[0,1,1,2],[1,1,2,2],[2,1,3,2],[3,1,4,2],[4,1,5,2],[5,1,6,2],[6,1,7,2]],[[0,0,2,1],[2,0,3,2],[0,1,1,3],[1,1,2,2],[1,2,3,3],[0,3,2,4],[2,3,3,4],[0,4,3,6]],[[0,0,1,2],[1,0,4,1],[1,1,2,2],[2,1,3,2],[0,2,3,3],[3,1,4,3],[0,3,4,4],[0,4,4,5]],[[0,0,1,1],[1,0,3,1],[0,1,2,2],[2,1,3,2],[0,2,1,3],[1,2,3,3],[0,3,2,4],[2,3,3,4]],[[0,0,2,1],[2,0,3,1],[0,1,1,2],[1,1,3,2],[0,2,2,3],[2,2,3,3],[0,3,1,4],[1,3,3,4]]]},"grid-9":{name:"\u4e5d\u56fe",areas:[[[0,0,1,1],[1,0,2,1],[2,0,3,1],[0,1,1,2],[1,1,2,2],[2,1,3,2],[0,2,1,3],[1,2,2,3],[2,2,3,3]],[[0,0,1,1],[1,0,2,1],[2,0,3,1],[3,0,4,1],[0,1,1,2],[1,1,2,2],[2,1,3,2],[3,1,4,2],[0,2,4,3]],[[0,0,1,4],[1,0,4,1],[1,1,2,2],[2,1,3,2],[1,2,2,3],[2,2,3,3],[1,3,3,4],[0,4,3,5],[3,1,4,5]],[[0,0,3,1],[3,0,4,4],[0,1,1,5],[1,1,2,2],[2,1,3,2],[1,2,2,3],[2,2,3,3],[1,3,3,4],[1,4,4,5]],[[0,0,1,8],[1,0,2,1],[1,1,2,2],[1,2,2,3],[1,3,2,4],[1,4,2,5],[1,5,2,6],[1,6,2,7],[1,7,2,8]],[[0,0,8,1],[0,1,1,2],[1,1,2,2],[2,1,3,2],[3,1,4,2],[4,1,5,2],[5,1,6,2],[6,1,7,2],[7,1,8,2]],[[0,0,2,1],[2,0,3,2],[0,1,1,3],[1,1,2,2],[1,2,3,3],[0,3,2,4],[2,3,3,4],[0,4,2,5],[2,4,3,5]],[[0,0,1,2],[1,0,4,1],[1,1,2,2],[2,1,3,2],[0,2,3,3],[3,1,4,3],[0,3,4,4],[0,4,2,5],[2,4,4,5]],[[0,0,1,1],[1,0,3,1],[0,1,2,2],[2,1,3,2],[0,2,1,3],[1,2,3,3],[0,3,2,4],[2,3,3,4],[0,4,3,5]],[[0,0,2,1],[2,0,3,1],[0,1,1,2],[1,1,3,2],[0,2,2,3],[2,2,3,3],[0,3,2,4],[2,3,3,4],[0,4,3,5]],[[0,0,3,1],[3,0,4,3],[0,1,1,4],[1,1,2,2],[2,1,3,2],[1,2,2,3],[2,2,3,3],[1,3,4,4],[0,4,4,5]]]},"grid-10":{name:"\u5341\u56fe",areas:[[[1,1,2,2],[0,0,1,1],[2,0,3,1],[0,1,1,2],[2,1,3,2],[0,2,1,3],[2,2,3,3],[1,0,2,1],[1,2,2,3],[0,3,3,4]],[[0,0,1,4],[1,0,4,1],[1,1,2,2],[2,1,3,2],[1,2,2,3],[2,2,3,3],[1,3,2,4],[2,3,3,4],[0,4,3,5],[3,1,4,5]],[[0,0,3,1],[3,0,4,4],[0,1,1,5],[1,1,2,2],[2,1,3,2],[1,2,2,3],[2,2,3,3],[1,3,2,4],[2,3,3,4],[1,4,4,5]]]}},getLayoutConfig:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this.LayoutDefinitions[t],n=a.areas[e%a.areas.length],r=Math.max.apply(Math,O(n.map(function(t){return t[2]}))),u=Math.max.apply(Math,O(n.map(function(t){return t[3]})));return $($({},a),{},{areas:n,cols:r,rows:u})},getAllLayoutConfigs:function(){var t=this,e={};return Object.keys(this.LayoutDefinitions).map(function(a){var n=t.LayoutDefinitions[a];e[a]=n.areas.map(function(t,e){var r=Math.max.apply(Math,O(t.map(function(t){return t[2]}))),u=Math.max.apply(Math,O(t.map(function(t){return t[3]})));return $($({},n),{},{id:"".concat(a,"_").concat(e),areas:t,cols:r,rows:u})})}),e}},pt=q("ratio",function(){var t=m([{label:"1:1",value:1},{label:"2:3",value:2/3},{label:"3:2",value:1.5},{label:"3:4",value:3/4},{label:"4:3",value:4/3},{label:"4:5",value:.8},{label:"5:4",value:5/4},{label:"5:6",value:5/6},{label:"6:5",value:1.2},{label:"6:7",value:6/7},{label:"7:6",value:7/6},{label:"8:9",value:8/9},{label:"9:8",value:9/8},{label:"10:11",value:10/11},{label:"11:10",value:1.1},{label:"12:13",value:12/13},{label:"13:12",value:13/12},{label:"14:15",value:14/15},{label:"15:14",value:15/14},{label:"16:17",value:16/17},{label:"17:16",value:17/16},{label:"16:9",value:16/9},{label:"9:16",value:9/16}]),e=m(1),a=function(t){e.value=t};return{customRatios:t,currentRatio:e,handleRatioSelected:a}}),yt=q("layout",function(){var t=700,u=700,i=m([]),o=m({}),l=m([]),c=m(15),s=m(20),d=m(2),h=m(0),v=pt();function f(t){d.value=t+h.value/10,console.log("\u8d28\u91cf\u503c:",d.value)}var g=p(function(){var e=v.currentRatio,a=Math.round(e*t),n=ct({aspectRatio:e,height:a}),r=n.height;return r}),y=p(function(){var t=v.currentRatio,e=Math.round(u/t),a=ct({aspectRatio:t,width:e}),n=a.width;return n}),w=p(function(){var t=!i.value.length||!i.value.some(function(t){return!!t});return t}),b=p(function(){var t=o.value.id;if(!t)return null;var e=mt.getLayoutConfig.apply(mt,O(t.split("_")));return e}),_=p(function(){var t=o.value.id;return!!t&&"grid-1"===t.split("_")[0]}),L=p(function(){var t={},e=mt.getAllLayoutConfigs();return Object.keys(e).map(function(a){t[a]={name:"",datas:[]},t[a].datas=e[a].map(function(e){return t[a].name=e.name,st({totalWidth:50,totalHeight:50,layoutConfig:e,gap:4})})}),console.log("\u6240\u6709\u5e03\u5c40:",t),t}),I=p(function(){if(!b.value)return null;var t=st({totalWidth:y.value,totalHeight:g.value,layoutConfig:b.value,gap:c.value});return console.log("\u5e03\u5c40\u914d\u7f6e\u4fe1\u606f:",b.value),console.log("\u7f51\u683c\u5e03\u5c40:",t),t}),k=p(function(){if(!l.value||!l.value.length)return{};var t=dt({gridLayout:I.value,images:l.value,round:s.value});return console.log("\u56fe\u7247\u5e03\u5c40:",t),t}),x=p(function(){if(!b.value)return null;var t=st({totalWidth:Math.round(y.value*d.value),totalHeight:Math.round(g.value*d.value),layoutConfig:b.value,gap:Math.round(c.value*d.value)});return console.log("\u7f51\u683c\u5e03\u5c40canvas:",t),t}),M=p(function(){if(!l.value||!l.value.length)return{};var t=dt({gridLayout:x.value,images:l.value,round:Math.round(s.value*d.value)});return console.log("\u56fe\u7247\u5e03\u5c40canvas:",t),t}),C=p(function(){if(!b.value||_.value)return 1;var t=b.value,e=t.areas,a=t.cols,n=Object.keys(l.value).reduce(function(t,e){return t+l.value[e].width},0);if(!n)return 1;var r=Math.round(n/e.length),u=Math.max(r*a/y.value,1);return console.log("\u8ba1\u7b97\u7cfb\u6570:",u.toFixed(1)),Number(u.toFixed(1))});function z(){return H.apply(this,arguments)}function H(){return H=E(G().m(function t(){return G().w(function(t){while(1)switch(t.n){case 0:return t.n=1,Promise.all(i.value.map(function(){var t=E(G().m(function t(e){var a;return G().w(function(t){while(1)switch(t.n){case 0:if(e){t.n=1;break}return t.a(2,"");case 1:return t.n=2,nt(e);case 2:return a=t.v,t.a(2,{url:e,width:a.width,height:a.height,aspectRatio:a.height/a.width})}},t)}));return function(e){return t.apply(this,arguments)}}()));case 1:return t.a(2,t.v)}},t)})),H.apply(this,arguments)}function T(t){o.value=t,V()}var R=function(t){if(_.value)return i.value=i.value.filter(function(e,a){return a!==t}),void(l.value=l.value.filter(function(e,a){return a!==t}));i.value.splice(t,1,""),l.value.splice(t,1,"")},W=function(){var t=E(G().m(function t(e){var a,u,o,c,s;return G().w(function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,a=I.value.grids.length||1,u=i.value.filter(function(t){return!!t}).length||0,o=_.value?100:a-u||1,t.n=1,r({count:o,sizeType:["original","compressed"],sourceType:["album","camera"]});case 1:if(c=t.v,1===c.tempFilePaths.length){while(i.value.length<=e)i.value.push("");i.value.splice(e,1,c.tempFilePaths[0])}return c.tempFilePaths.length>1&&(c.tempFilePaths=c.tempFilePaths.slice(0,o),(s=i.value).splice.apply(s,[e,o].concat(O(c.tempFilePaths)))),t.n=2,z();case 2:l.value=t.v,console.log("\u56fe\u7247\u4fe1\u606f",l.value),t.n=4;break;case 3:t.p=3,t.v,n({title:"\u9009\u62e9\u56fe\u7247\u5931\u8d25\uff01",icon:"none",duration:2e3});case 4:return t.a(2)}},t,null,[[0,3]])}));return function(e){return t.apply(this,arguments)}}();function V(){if(!_.value){var t=I.value.grids.length||1,e=i.value.filter(function(t){return!!t}).length||0;e<=t||(i.value=i.value.slice(0,t),l.value=l.value.slice(0,t))}}var P=p(function(){var t=[{label:"message",action:function(){a.navigateTo({url:"/pages/customer-service/index"})},disabled:!1}];return[{label:"del",action:function(){e({title:"\u63d0\u793a",content:"\u786e\u8ba4\u6e05\u7a7a\u6240\u6709\u56fe\u7247\u5417\uff1f",success:function(t){t.confirm&&(i.value=[],l.value=[])}})},disabled:w.value}].concat(t)});return{gridLayout:I,imageData:i,imageLayout:k,allLayout:L,currentTpl:o,onTpl:T,removeImage:R,addImage:W,imageInfos:l,isEmptyImage:w,gap:c,round:s,quality:d,setQuality:f,customQuality:h,gridLayoutCanvas:x,imageLayoutCanvas:M,factor:C,isLongLayout:_,canvasBaseH:u,canvasBaseW:t,fastButton:P}}),wt=q("longLayout",function(){var t=yt(),e=t.canvasBaseH,a=t.canvasBaseW,n=p(function(){return!!t.currentTpl.id.match("0")}),r=p(function(){if(!t.imageInfos||!t.imageInfos.length)return null;var r=vt({images:t.imageInfos,round:t.round,isHorizontal:n.value,canvasBaseH:e,canvasBaseW:a,gap:t.gap});return console.log("\u957f\u56fe\u7247\u5e03\u5c40:",r),r}),u=p(function(){if(!t.imageInfos||!t.imageInfos.length)return null;var r=t.quality,u=vt({images:t.imageInfos,round:t.round*r,isHorizontal:n.value,canvasBaseH:e*r*2,canvasBaseW:a*r,gap:t.gap*r});return console.log("\u957f\u56fe\u7247\u5e03\u5c40canvas:",u),u}),i=p(function(){var e=ht({images:t.imageInfos});return console.log("\u6a2a\u7ad6\u56fe\u7f51\u683c\u5e03\u5c40:",e),e});return{longImageLayout:r,longGridLayout:i,isHorizontal:n,longImageLayouCanvas:u}}),bt=1280,_t=function(){var t=m(window.innerWidth),e=m(t.value>=bt),a=m(t.value>=bt),n=function(){t.value=window.innerWidth;var n=t.value>=bt;e.value=n,a.value=n};return y(function(){window.addEventListener("resize",n),n()}),w(function(){window.removeEventListener("resize",n)}),{showTemplateDrawer:e,showSettings:a}},Lt=q("puzzle",function(){var t=m(!1),e=_t(),a=e.showTemplateDrawer,r=e.showSettings,u=yt(),i=wt(),o=function(){var e=E(G().m(function e(){var a,n,r,u,i;return G().w(function(e){while(1)switch(e.p=e.n){case 0:return t.value=!0,e.p=1,a="puzzleCanvas",e.n=2,lt(a);case 2:return n=e.v,r=n.ctx,u=n.canvas,e.n=3,l({ctx:r,canvasId:a,canvas:u});case 3:e.n=5;break;case 4:e.p=4,i=e.v,console.error(i),c("\u751f\u6210\u62fc\u56fe\u5931\u8d25"),t.value=!1;case 5:return e.a(2)}},e,null,[[1,4]])}));return function(){return e.apply(this,arguments)}}(),l=function(){var e=E(G().m(function e(a){var r,o,l,s,d,h,v,f;return G().w(function(e){while(1)switch(e.n){case 0:r=a.ctx,o=a.canvasId,l=a.canvas,s=u.imageInfos,d=ft({layoutStore:u,longLayoutStore:i}),h=d.totalWidth,v=d.totalHeight,f=d.imageLayout,e.n=1;break;case 1:e.n=2;break;case 2:return e.n=3,et({ctx:r,width:h,height:v,canvas:l});case 3:return e.n=4,it({ctx:r,imageLayout:f,imageInfos:s,canvas:l});case 4:return e.a(2,at({ctx:r,canvasId:o,canvasWidth:h,canvasHeight:v,canvas:l}).then(function(){n({title:"\u4fdd\u5b58\u6210\u529f",icon:"success"})}).catch(function(t){console.error("\u4fdd\u5b58\u56fe\u7247\u5931\u8d25:",t),c("\u751f\u6210\u56fe\u7247\u8fc7\u5927\u8d85\u8fc7\u9608\u503c\uff0c\u8bf7\u5220\u51cf\u4e00\u5f20\u56fe\u7247\u540e\u91cd\u8bd5\uff01")}).finally(function(){t.value=!1}))}},e)}));return function(t){return e.apply(this,arguments)}}(),c=function(t){n({title:t,icon:"none",duration:3e3})};function s(t){var e=u.setQuality,a=u.isLongLayout;e(t.id),o(a)}var d=p(function(){var t=u.factor;return[{id:Math.min(t,X+1),name:"\u539f\u56fe\u751f\u6210"},{id:Math.min(t,X+1)+1,name:"\u9ad8\u6e05\u56fe\u751f\u6210"}]});return{isLoading:t,generatePuzzle:o,showTemplateDrawer:a,showSettings:r,chooseQuality:s,qualityItems:d}});var It={__name:"layoutItem",props:b(["gridLayout","onTpl","currentTpl","addImage"],{gridLayout:function(){return{}},currentTpl:function(){return{}}}),setup:function(t){function e(e){return t.onTpl?{left:e.x+"px",top:e.y+"px",width:e.width+"px",height:e.height+"px"}:{left:"".concat(u(e.x)),top:"".concat(u(e.y)),width:"".concat(u(e.width)),height:"".concat(u(e.height))}}function a(){return t.onTpl?{width:t.gridLayout.totalWidth+"px",height:t.gridLayout.totalHeight+"px"}:{width:"".concat(u(t.gridLayout.totalWidth)),height:"".concat(u(t.gridLayout.totalHeight))}}return function(n,r){var u=_("taro-view");return L(),I(u,{class:"htt-container"},{default:k(function(){return[x(u,{class:M({"grid-container--active":t.currentTpl.id===t.gridLayout.id,"grid-container":!0}),style:C(a()),onClick:r[0]||(r[0]=function(e){return t.onTpl&&t.onTpl(t.gridLayout)})},{default:k(function(){return[(L(!0),z(H,null,T(t.gridLayout.grids,function(a,r){return L(),I(u,{key:a.id,class:"grid-item",style:C(e(a)),onClick:function(e){return t.addImage&&t.addImage(r)}},{default:k(function(){return[R(n.$slots,"image",{index:r})]}),_:2},1032,["style","onClick"])}),128))]}),_:3},8,["class","style"])]}),_:3})}}};const kt=J(It,[["__file","layoutItem.vue"]]);var xt=["src"],Mt={__name:"layout",setup:function(t){var e=yt(),a=Lt(),n=A(a),r=n.showTemplateDrawer,l=A(e),c=l.gridLayout,s=l.imageLayout,d=l.round,h=e.removeImage,v=e.addImage;return function(t,e){var a=_("taro-view"),n=_("taro-button"),l=o;return W(c)?(L(),I(kt,{key:0,gridLayout:W(c),addImage:W(v)},{image:k(function(t){var e=t.index;return[W(s)[e]&&W(s)[e].url?(L(),z(H,{key:0},[x(a,{class:"htt-img-container",style:C({borderRadius:W(d)&&W(u)(W(d))||0})},{default:k(function(){return[V("img",{src:W(s)[e].url,class:"htt-media",style:C({width:"".concat(W(u)(W(s)[e].crop.width)),height:"".concat(W(u)(W(s)[e].crop.height)),transform:"translate(-".concat(W(u)(W(s)[e].crop.x*W(s)[e].scale),", -").concat(W(u)(W(s)[e].crop.y*W(s)[e].scale),") scale(").concat(W(s)[e].scale,")")})},null,12,xt)]}),_:2},1032,["style"]),x(n,{shape:"circle",size:"small",class:"htt-remove-btn",onClick:P(function(t){return W(h)&&W(h)(e)},["stop"])},{default:k(function(){return[x(W(i),{name:"del",width:"12",height:"12"})]}),_:2},1032,["onClick"])],64)):(L(),I(W(i),{key:1,class:"htt-add",color:"var(--nut-primary-color)",name:"plus",size:"20"}))]}),_:1},8,["gridLayout","addImage"])):(L(),I(a,{key:1,class:"htt-empty-template",onClick:e[0]||(e[0]=P(function(t){return r.value=!0},["stop"]))},{default:k(function(){return[x(l,{description:"\u70b9\u51fb\u6211\u9009\u62e9\u5e03\u5c40"})]}),_:1}))}}};const Ct=J(Mt,[["__file","layout.vue"]]);var zt={__name:"longLayoutItem",props:b(["gridLayout","onTpl","addImage","isHorizontal","longImageLayout","gap"],{gridLayout:function(){return{}}}),setup:function(t){var e=function(e){if(t.longImageLayout&&t.longImageLayout["layout"]&&t.longImageLayout["layout"][e]){var a=t.longImageLayout["layout"][e],n=a.w,r=a.h;return{height:u(r),width:u(n),marginRight:t.isHorizontal&&u(t.gap)||0,marginBottom:!t.isHorizontal&&u(t.gap)||0}}return{height:u(200),width:t.isHorizontal?"50%":"auto",marginRight:t.isHorizontal&&u(t.gap)||0,marginBottom:!t.isHorizontal&&u(t.gap)||0}},a=p(function(){var e=t.isHorizontal&&t.longImageLayout&&t.longImageLayout.totalWidth&&u(t.longImageLayout.totalWidth+200)||"auto";return{display:"".concat(t.isHorizontal?"flex":"block"),padding:"".concat(u(t.gap)),width:e}});return function(n,r){var u=_("taro-view");return L(),I(u,{class:"htt-long-container"},{default:k(function(){return[x(u,{class:"grid-container-long",onClick:r[0]||(r[0]=function(e){return t.onTpl&&t.onTpl(t.gridLayout)}),style:C(a.value)},{default:k(function(){return[(L(!0),z(H,null,T(t.gridLayout,function(a,r){return L(),I(u,{key:r,class:"grid-item",onClick:function(e){return t.addImage&&t.addImage(r)},style:C(e(r))},{default:k(function(){return[R(n.$slots,"image",{index:r})]}),_:2},1032,["onClick","style"])}),128))]}),_:3},8,["style"])]}),_:3})}}};const Ht=J(zt,[["__file","longLayoutItem.vue"]]);var Tt=["src"],Rt={__name:"longLayout",setup:function(t){var e=yt(),a=wt(),n=A(e),r=n.round,o=n.gap,l=A(a),c=l.longImageLayout,s=l.longGridLayout,d=l.isHorizontal,h=e.removeImage,v=e.addImage;return function(t,e){var a=_("taro-view"),n=_("taro-button");return W(s)?(L(),I(Ht,{key:0,gridLayout:W(s),gap:W(o),addImage:W(v),isHorizontal:W(d),longImageLayout:W(c)},{image:k(function(t){var e=t.index;return[W(c)&&W(c)["layout"][e]&&W(c)["layout"][e].url?(L(),z(H,{key:0},[x(a,{class:"htt-long-img-container"},{default:k(function(){return[V("img",{src:W(c)["layout"][e].url,style:C({display:"block",width:"".concat(W(u)(W(c)["layout"][e].w)),height:"".concat(W(u)(W(c)["layout"][e].h)),borderRadius:W(r)&&W(u)(W(r))||0})},null,12,Tt)]}),_:2},1024),x(n,{shape:"circle",size:"small",class:"htt-long-remove-btn",onClick:P(function(t){return W(h)&&W(h)(e)},["stop"])},{default:k(function(){return[x(W(i),{name:"del",width:"12",height:"12"})]}),_:2},1032,["onClick"])],64)):(L(),I(W(i),{key:1,color:"var(--nut-primary-color)",name:"plus",size:"20"}))]}),_:1},8,["gridLayout","gap","addImage","isHorizontal","longImageLayout"])):S("",!0)}}};const Wt=J(Rt,[["__file","longLayout.vue"]]);var Vt={__name:"tpl",setup:function(t){var e=m(Object.keys(mt.LayoutDefinitions)),a=yt(),n=Lt(),r=A(n),u=r.showTemplateDrawer,o=r.showSettings,d=A(a),h=d.allLayout,v=d.currentTpl,f=a.onTpl,g=function(t){f(t),u.value=!1,o.value=!1},y=p(function(){return!gt()&&!o.value});return function(t,a){var n=_("taro-view"),r=l,o=c,d=s;return L(),I(d,{class:"htt-tpl-popup",visible:W(u),"onUpdate:visible":a[2]||(a[2]=function(t){return F(u)?u.value=t:null}),position:"left",overlay:y.value,round:"","destroy-on-close":!1},{default:k(function(){return[x(n,{class:"drawer-header"},{default:k(function(){return[x(n,{class:"title"},{default:k(function(){return a[3]||(a[3]=[B("\u5e03\u5c40")])}),_:1,__:[3]}),D(x(W(i),{name:"left",color:"var(--nut-primary-color)",class:"nut-icon-am-shake close-icon close-icon--left",onClick:a[0]||(a[0]=function(t){return u.value=!1})},null,512),[[j,W(u)]])]}),_:1}),x(n,{class:"template-group"},{default:k(function(){return[x(o,{modelValue:e.value,"onUpdate:modelValue":a[1]||(a[1]=function(t){return e.value=t})},{default:k(function(){return[(L(!0),z(H,null,T(Object.keys(W(h)),function(t){return L(),I(r,{class:"htt-collapse-item",title:W(h)[t].name,key:t,name:t},{default:k(function(){return[(L(!0),z(H,null,T(W(h)[t].datas,function(e,a){return L(),I(kt,{onTpl:g,currentTpl:W(v),key:"".concat(t,"_").concat(a),gridLayout:e},null,8,["currentTpl","gridLayout"])}),128))]}),_:2},1032,["title","name"])}),128))]}),_:1},8,["modelValue"])]}),_:1})]}),_:1},8,["visible","overlay"])}}};const Pt=J(Vt,[["__file","tpl.vue"]]);var St={class:"htt-input-ratio"},Bt={__name:"inputRatio",props:["selectRatio"],setup:function(t){var e=m(""),a=function(){if(/^[\.\d]+:[\.\d]+$/.test(e.value)){var a=e.value.split(":").map(function(t){return+t}),r=a[0]/a[1];t.selectRatio(Number(r.toFixed(2))),n({title:"\u6bd4\u4f8b\u8bbe\u7f6e\u6210\u529f!",icon:"none",duration:1e3})}else n({title:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6bd4\u5217\uff08\u5982 16:9\uff09",icon:"none",duration:3e3})};return function(t,n){var r=_("taro-input"),u=_("taro-button");return L(),z("div",St,[x(r,{class:"htt-input-ratio__input",modelValue:e.value,"onUpdate:modelValue":n[0]||(n[0]=function(t){return e.value=t}),placeholder:"\u8bf7\u8f93\u5165\u5982,16:9"},null,8,["modelValue"]),x(u,{class:"htt-input-ratio__button",onClick:a},{default:k(function(){return n[1]||(n[1]=[B("\u786e\u5b9a")])}),_:1,__:[1]})])}}};const Dt=J(Bt,[["__file","inputRatio.vue"]]);var jt={__name:"ratio",props:{ratios:{type:Array,default:function(){return[{label:"1:1",value:1},{label:"3:2",value:1.5},{label:"4:3",value:1.333},{label:"16:9",value:1.778}]}},defaultRatio:{type:Number,default:1}},emits:["ratio-selected"],setup:function(t,e){var a=e.emit,n=t,r=m(!1),u=a,i=m(n.defaultRatio),o=function(t){i.value=t,u("ratio-selected",t)};return function(e,a){var n=d,u=h,l=_("taro-view");return L(),I(l,{class:"aspect-ratio-selector"},{default:k(function(){return[x(u,{title:"\u81ea\u5b9a\u4e49\u6bd4\u4f8b"},{link:k(function(){return[x(n,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=function(t){return r.value=t}),"active-color":"var(--nut-primary-color)","active-text":"\u5f00","inactive-text":"\u5173"},null,8,["modelValue"])]}),_:1}),D(x(l,null,{default:k(function(){return[x(Dt,{selectRatio:o})]}),_:1},512),[[j,r.value]]),(L(!0),z(H,null,T(t.ratios,function(t,e){return D((L(),I(l,{key:e,class:M(["ratio-option",{active:i.value===t.value}]),onClick:function(e){return o(t.value)}},{default:k(function(){return[V("span",null,U(t.label),1)]}),_:2},1032,["class","onClick"])),[[j,!r.value]])}),128))]}),_:1})}}};const Ft=J(jt,[["__file","ratio.vue"]]);var Ut={__name:"range",props:{min:{type:Number,default:0},max:{type:Number,default:100},modelValue:{type:Number,default:0},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup:function(t,e){var a=e.emit,n=a,r=p(function(){return!1}),u=function(t){n("update:modelValue",t.detail.value),n("change",t.detail.value)},i=function(t){n("change",t.detail.value)},o=function(t){var e=parseInt(t.target.value,10);n("update:modelValue",e),n("change",e)};return function(e,a){var n=_("taro-slider"),l=_("taro-input"),c=_("taro-view");return L(),I(c,{class:M(["slider-container",{disabled:t.disabled}])},{default:k(function(){return[r.value?(L(),I(n,{key:0,min:t.min,max:t.max,value:t.modelValue,disabled:t.disabled,onChange:u,onChanging:i,class:"slider-container__slider","block-size":"20","block-color":"var(--nut-primary-color)"},null,8,["min","max","value","disabled"])):(L(),I(l,{key:1,type:"range",min:t.min,max:t.max,value:t.modelValue,disabled:t.disabled,onInput:o,class:"slider-input"},null,8,["min","max","value","disabled"]))]}),_:1},8,["class"])}}};const qt=J(Ut,[["__file","range.vue"]]);var At={__name:"setting",setup:function(t){var e=yt(),a=Lt(),n=pt(),r=A(a),u=r.showTemplateDrawer,o=r.showSettings,d=A(e),f=d.gap,g=d.round,y=d.isLongLayout,w=d.customQuality,b=A(n),M=b.customRatios,C=b.currentRatio,z=n.handleRatioSelected,H=m(["set-1","set-2","set-3"]),T=p(function(){return!gt()&&!u.value});function R(t){z(t),o.value=!1}return function(t,e){var a=_("taro-view"),n=h,r=v,u=l,d=c,m=s;return L(),I(m,{visible:W(o),"onUpdate:visible":e[5]||(e[5]=function(t){return F(o)?o.value=t:null}),position:"right",overlay:T.value,class:"htt-setting",round:"","destroy-on-close":!1},{default:k(function(){return[x(a,{class:"drawer-header"},{default:k(function(){return[x(a,{class:"title"},{default:k(function(){return e[6]||(e[6]=[B("\u8bbe\u7f6e")])}),_:1,__:[6]}),x(W(i),{name:"right",color:"var(--nut-primary-color)",class:"nut-icon-am-shake close-icon close-icon--right",onClick:e[0]||(e[0]=function(t){return o.value=!1})})]}),_:1}),x(a,{class:"htt-setting__content"},{default:k(function(){return[x(d,{modelValue:H.value,"onUpdate:modelValue":e[4]||(e[4]=function(t){return H.value=t})},{default:k(function(){return[x(u,{title:"\u6837\u5f0f\u8bbe\u7f6e",name:"set-1"},{default:k(function(){return[x(r,{desc:"\u95f4\u8ddd(".concat(W(f),")")},{default:k(function(){return[x(n,null,{default:k(function(){return[x(qt,{modelValue:W(f),"onUpdate:modelValue":e[1]||(e[1]=function(t){return F(f)?f.value=t:null}),step:10},null,8,["modelValue"])]}),_:1})]}),_:1},8,["desc"]),x(r,{title:"\u5706\u89d2(".concat(W(g),")")},{default:k(function(){return[x(n,null,{default:k(function(){return[x(qt,{modelValue:W(g),"onUpdate:modelValue":e[2]||(e[2]=function(t){return F(g)?g.value=t:null}),max:200,step:10},null,8,["modelValue"])]}),_:1})]}),_:1},8,["title"])]}),_:1}),x(u,{title:"\u56fe\u7247\u8d28\u91cf\u8bbe\u7f6e",name:"set-2"},{default:k(function(){return[x(r,{desc:"\u8d28\u91cf(".concat(W(w)/10,"\uff09\u6ce8:0-10\u6570\u5b57\u8d8a\u5927\u8d8a\u9ad8\u6e05")},{default:k(function(){return[x(n,null,{default:k(function(){return[x(qt,{modelValue:W(w),"onUpdate:modelValue":e[3]||(e[3]=function(t){return F(w)?w.value=t:null}),min:0,max:100,step:10},null,8,["modelValue"])]}),_:1})]}),_:1},8,["desc"])]}),_:1}),D(x(u,{title:"\u6bd4\u4f8b\u8bbe\u7f6e",name:"set-3"},{default:k(function(){return[x(r,{desc:"\u9ad8\u5bbd\u6bd4\u4f8b"},{default:k(function(){return[x(Ft,{ratios:W(M),"default-ratio":W(C),onRatioSelected:R},null,8,["ratios","default-ratio"])]}),_:1})]}),_:1},512),[[j,!W(y)]])]}),_:1},8,["modelValue"])]}),_:1})]}),_:1},8,["visible","overlay"])}}};const Et=J(At,[["__file","setting.vue"]]);var Gt={__name:"fast",props:{buttons:{type:Array,required:!0,validator:function(t){return t.every(function(t){return t.label&&t.action})}},direction:{type:String,default:"horizontal",validator:function(t){return["horizontal","vertical"].includes(t)}}},setup:function(t){return function(e,a){var n=_("taro-view");return L(),I(n,{class:M(["floating-buttons",t.direction])},{default:k(function(){return[(L(!0),z(H,null,T(t.buttons,function(t,e){return L(),I(W(K),{key:e,class:M(["floating-button",[{"floating-button--disabled":t.disabled}]]),disabled:t.disabled,"open-type":"message"===t.label?"feedback":"",onClick:t.action},{default:k(function(){return[x(W(i),{class:"nut-icon-am-shake",name:t.label},null,8,["name"])]}),_:2},1032,["class","disabled","open-type","onClick"])}),128))]}),_:1},8,["class"])}}};const Nt=J(Gt,[["__file","fast.vue"]]);var Qt={__name:"index",setup:function(t){var e=m("\u5408\u56fe\u56fe"),n=m(!1),r=Lt(),u=yt(),o=A(u),l=o.isEmptyImage,c=o.isLongLayout,s=o.fastButton,d=A(r),h=d.isLoading,v=d.showTemplateDrawer,p=d.showSettings,y=d.qualityItems,w=r.chooseQuality;return a.useShareAppMessage(function(){return{title:"\u672c\u5730\u65e0\u670d\u52a1\u62fc\u56fe\uff0c\u6240\u89c1\u5373\u6240\u5f97\uff0c\u591a\u79cd\u5e03\u5c40\u8f7b\u677e\u62ff\u634f\u5404\u79cd\u573a\u666f\uff01",path:"/pages/index/index"}}),a.useShareTimeline(function(){console.log("onShareTimeline")}),function(t,a){var r=_("taro-view"),u=f,o=_("taro-button"),d=g,m=_("taro-canvas");return L(),I(r,{class:"puzzle-page"},{default:k(function(){return[x(u,{class:"htt-navbar",title:e.value},{left:k(function(){return[x(r,{class:"htt-navbar-left",onClick:a[0]||(a[0]=P(function(t){return v.value=!W(v)},["stop"]))},{default:k(function(){return[x(W(i),{name:"scan",size:"20",color:"var(--nut-primary-color)",class:"nut-icon-am-shake"})]}),_:1})]}),right:k(function(){return[x(W(i),{name:"setting",size:"20",color:"var(--nut-primary-color)",class:"nut-icon-am-shake",onClick:a[1]||(a[1]=function(t){return p.value=!W(p)})})]}),_:1},8,["title"]),x(Pt),x(Et),W(c)?(L(),I(Wt,{key:1})):(L(),I(Ct,{key:0})),x(r,{class:"htt-save"},{default:k(function(){return[x(o,{block:"",loading:W(h),onClick:a[2]||(a[2]=function(t){return n.value=!0}),class:M({"htt-save__btn":!0,"htt-save__btn--disabled":W(l)}),disabled:W(l)},{default:k(function(){return[B(U(W(h)?"\u751f\u6210\u4e2d...":"\u751f\u6210\u62fc\u56fe"),1)]}),_:1},8,["loading","class","disabled"])]}),_:1}),x(d,{class:"htt-quality",visible:n.value,"onUpdate:visible":a[3]||(a[3]=function(t){return n.value=t}),"menu-items":W(y),onChoose:W(w)},null,8,["visible","menu-items","onChoose"]),x(Nt,{buttons:W(s)},null,8,["buttons"]),x(m,{"canvas-id":"puzzleCanvas",id:"puzzleCanvas",type:"2d",class:"hidden-canvas"})]}),_:1})}}};const Ot=J(Qt,[["__file","index.vue"]]);export{Ot as default};

var e=Object.defineProperty,t=Object.defineProperties,i=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,a=Math.pow,o=(t,i,s)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s,l=(e,t)=>{for(var i in t||(t={}))r.call(t,i)&&o(e,i,t[i]);if(s)for(var i of s(t))n.call(t,i)&&o(e,i,t[i]);return e},c=(e,s)=>t(e,i(s)),d=(e,t,i)=>new Promise((s,r)=>{var n=e=>{try{o(i.next(e))}catch(t){r(t)}},a=e=>{try{o(i.throw(e))}catch(t){r(t)}},o=e=>e.done?s(e.value):Promise.resolve(e.value).then(n,a);o((i=i.apply(e,t)).next())});const h="modulepreload",u=function(e){return"/"+e},p={},f=function(e,t,i){if(!t||0===t.length)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map(e=>{if(e=u(e),e in p)return;p[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"",n=!!i;if(n)for(let i=s.length-1;i>=0;i--){const r=s[i];if(r.href===e&&(!t||"stylesheet"===r.rel))return}else if(document.querySelector(`link[href="${e}"]${r}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":h,t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise((t,i)=>{a.addEventListener("load",t),a.addEventListener("error",()=>i(new Error(`Unable to preload CSS for ${e}`)))}):void 0})).then(()=>e()).catch(e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e})},g="[]",m="",v="!0",y="!1",b={bindTouchStart:m,bindTouchMove:m,bindTouchEnd:m,bindTouchCancel:m,bindLongTap:m},E={animation:m,bindAnimationStart:m,bindAnimationIteration:m,bindAnimationEnd:m,bindTransitionEnd:m};function w(e){return`'${e}'`}var A;Object.assign(Object.assign({"hover-class":w("none"),"hover-stop-propagation":y,"hover-start-time":"50","hover-stay-time":"400"},b),E),Object.assign({longitude:m,latitude:m,scale:"16",markers:g,covers:m,polyline:g,circles:g,controls:g,"include-points":g,"show-location":m,"layer-style":"1",bindMarkerTap:m,bindControlTap:m,bindCalloutTap:m,bindUpdated:m},b),Object.assign({selectable:y,space:m,decode:y},b),Object.assign({size:w("default"),type:m,plain:y,disabled:m,loading:y,"form-type":m,"open-type":m,"hover-class":w("button-hover"),"hover-stop-propagation":y,"hover-start-time":"20","hover-stay-time":"70",name:m,bindagreeprivacyauthorization:m},b),Object.assign({for:m,name:m},b),Object.assign({"scroll-top":y},b),Object.assign(Object.assign({direction:"none",inertia:y,"out-of-bounds":y,x:m,y:m,damping:"20",friction:"2",disabled:m,scale:y,"scale-min":"0.5","scale-max":"10","scale-value":"1",bindChange:m,bindScale:m,bindHTouchMove:m,bindVTouchMove:m,width:w("10px"),height:w("10px")},b),E),Object.assign(Object.assign({"scroll-x":y,"scroll-y":y,"upper-threshold":"50","lower-threshold":"50","scroll-top":m,"scroll-left":m,"scroll-into-view":m,"scroll-with-animation":y,"enable-back-to-top":y,bindScrollToUpper:m,bindScrollToLower:m,bindScroll:m},b),E),Object.assign({"indicator-dots":y,"indicator-color":w("rgba(0, 0, 0, .3)"),"indicator-active-color":w("#000000"),autoplay:y,current:"0",interval:"5000",duration:"500",circular:y,vertical:y,"previous-margin":w("0px"),"next-margin":w("0px"),"display-multiple-items":"1",bindChange:m,bindTransition:m,bindAnimationFinish:m},b),Object.assign({src:m,mode:w("scaleToFill"),"lazy-load":y,bindError:m,bindLoad:m},b),Object.assign({src:m,autoplay:y,muted:y,orientation:w("vertical"),"object-fit":w("contain"),"background-mute":y,"min-cache":"1","max-cache":"3",bindStateChange:m,bindFullScreenChange:m,bindNetStatus:m},E),Object.assign({src:m,duration:m,controls:v,"danmu-list":m,"danmu-btn":m,"enable-danmu":m,autoplay:y,loop:y,muted:y,"initial-time":"0","page-gesture":y,direction:m,"show-progress":v,"show-fullscreen-btn":v,"show-play-btn":v,"show-center-play-btn":v,"enable-progress-gesture":v,"object-fit":w("contain"),poster:m,"show-mute-btn":y,bindPlay:m,bindPause:m,bindEnded:m,bindTimeUpdate:m,bindFullScreenChange:m,bindWaiting:m,bindError:m},E),Object.assign({"canvas-id":m,"disable-scroll":y,bindError:m},b),function(e){e["MINI"]="mini",e["ASCF"]="ascf",e["WEB"]="web",e["RN"]="rn",e["HARMONY"]="harmony",e["QUICK"]="quickapp"}(A||(A={})),A.WEB,A.HARMONY,A.ASCF,A.MINI,A.RN,A.QUICK;let T=class e{constructor(e){var t;this.callbacks=null!==(t=null===e||void 0===e?void 0:e.callbacks)&&void 0!==t?t:{}}on(t,i,s){let r,n,a;if(!i)return this;a="symbol"===typeof t?[t]:t.split(e.eventSplitter),this.callbacks||(this.callbacks={});const o=this.callbacks;while(r=a.shift()){const e=o[r],t=e?e.tail:{};t.next=n={},t.context=s,t.callback=i,o[r]={tail:n,next:e?e.next:t}}return this}once(e,t,i){const s=(...r)=>{t.apply(this,r),this.off(e,s,i)};return this.on(e,s,i),this}off(t,i,s){let r,n,a;if(!(n=this.callbacks))return this;if(!(t||i||s))return delete this.callbacks,this;a="symbol"===typeof t?[t]:t?t.split(e.eventSplitter):Object.keys(n);while(r=a.shift()){let e=n[r];if(delete n[r],!e||!i&&!s)continue;const t=e.tail;while((e=e.next)!==t){const t=e.callback,n=e.context;(i&&t!==i||s&&n!==s)&&this.on(r,t,n)}}return this}trigger(t,...i){let s,r,n,a;if(!(n=this.callbacks))return this;a="symbol"===typeof t?[t]:t.split(e.eventSplitter);while(s=a.shift())if(r=n[s]){const e=r.tail;while((r=r.next)!==e)r.callback.apply(r.context||this,i)}return this}};T.eventSplitter=",";class S extends T{constructor(){super(...arguments),this.exeList=[]}on(e,t){return super.on(e,t,this),this.exeList=this.exeList.reduce((t,i)=>(i.eventName===e?super.trigger(i.eventName,i.data):t.push(i),t),[]),this}emit(e,t){k.trigger(e,t)}}const x=new S;class L extends T{emit(e,t){x.off(e),x.exeList.push({eventName:e,data:t})}addEvents(e){e&&"object"===typeof e&&Object.keys(e).forEach(t=>{this.off(t),this.on(t,e[t],this)})}}const k=new L,I={pageChannel:x,routeChannel:k};function _(e){return"string"===typeof e}function C(e){return"undefined"===typeof e}function R(e){return null!==e&&"object"===typeof e}function P(e){return"function"===typeof e}const D=Array.isArray;var M;(function(e){e[e["SINGLE"]=0]="SINGLE",e[e["MULTI"]=1]="MULTI",e[e["WATERFALL"]=2]="WATERFALL"})(M||(M={}));const O={app:["onLaunch","onShow","onHide"],page:["onLoad","onUnload","onReady","onShow","onHide",["onPullDownRefresh","onReachBottom","onPageScroll","onResize","defer:onTabItemTap","onTitleClick","onOptionMenuClick","onPopMenuClick","onPullIntercept","onAddToFavorites"],["onShareAppMessage","onShareTimeline"]],component:["attached","detached"]};function N(e,t){return{type:e,initial:t||null}}class B extends T{constructor(e,t){super(t),this.hooks=e;for(const i in e){const{initial:t}=e[i];P(t)&&this.on(i,t)}}tapOneOrMany(e,t){const i=P(t)?[t]:t;i.forEach(t=>this.on(e,t))}tap(e,t){const i=this.hooks,{type:s,initial:r}=i[e];s===M.SINGLE?(this.off(e),this.on(e,P(t)?t:t[t.length-1])):(r&&this.off(e,r),this.tapOneOrMany(e,t))}call(e,...t){var i;const s=this.hooks[e];if(!s)return;const{type:r}=s,n=this.callbacks;if(!n)return;const a=n[e];if(a){const e=a.tail;let s,n=a.next,o=t;while(n!==e){if(s=null===(i=n.callback)||void 0===i?void 0:i.apply(n.context||this,o),r===M.WATERFALL){const e=[s];o=e}n=n.next}return s}}isExist(e){var t;return Boolean(null===(t=this.callbacks)||void 0===t?void 0:t[e])}}const F=new B({getMiniLifecycle:N(M.SINGLE,e=>e),getMiniLifecycleImpl:N(M.SINGLE,function(){return this.call("getMiniLifecycle",O)}),getLifecycle:N(M.SINGLE,(e,t)=>e[t]),modifyRecursiveComponentConfig:N(M.SINGLE,e=>e),getPathIndex:N(M.SINGLE,e=>`[${e}]`),getEventCenter:N(M.SINGLE,e=>new e),isBubbleEvents:N(M.SINGLE,e=>{const t=new Set(["touchstart","touchmove","touchcancel","touchend","touchforcechange","tap","longpress","longtap","transitionend","animationstart","animationiteration","animationend"]);return t.has(e)}),getSpecialNodes:N(M.SINGLE,()=>["view","text","image"]),onRemoveAttribute:N(M.SINGLE),batchedEventUpdates:N(M.SINGLE),mergePageInstance:N(M.SINGLE),modifyPageObject:N(M.SINGLE),createPullDownComponent:N(M.SINGLE),getDOMNode:N(M.SINGLE),modifyHydrateData:N(M.SINGLE),transferHydrateData:N(M.SINGLE),modifySetAttrPayload:N(M.SINGLE),modifyRmAttrPayload:N(M.SINGLE),onAddEvent:N(M.SINGLE),proxyToRaw:N(M.SINGLE,function(e){return e}),modifyMpEvent:N(M.MULTI),modifyMpEventImpl:N(M.SINGLE,function(e){try{this.call("modifyMpEvent",e)}catch(t){console.warn("[Taro modifyMpEvent hook Error]: "+(null===t||void 0===t?void 0:t.message))}}),injectNewStyleProperties:N(M.SINGLE),modifyTaroEvent:N(M.MULTI),dispatchTaroEvent:N(M.SINGLE,(e,t)=>{t.dispatchEvent(e)}),dispatchTaroEventFinish:N(M.MULTI),modifyTaroEventReturn:N(M.SINGLE,()=>{}),modifyDispatchEvent:N(M.MULTI),initNativeApi:N(M.MULTI),patchElement:N(M.MULTI),modifyAddEventListener:N(M.SINGLE),modifyRemoveEventListener:N(M.SINGLE),getMemoryLevel:N(M.SINGLE)}),$={};function U(e){let t="",i=!1;for(let s=0;s<e.length;s++)"-"!==e[s]?(t+=i?e[s].toUpperCase():e[s],i=!1):i=!0;return t}function G(e,t){if(!e)throw new Error(t)}var H;(new Date).getTime().toString(),function(e){e["Container"]="container",e["Childnodes"]="cn",e["Text"]="v",e["NodeType"]="nt",e["NodeName"]="nn",e["Sid"]="sid",e["Style"]="st",e["Class"]="cl",e["Src"]="src"}(H||(H={}));const j="\u9875\u9762\u521d\u59cb\u5316",z="root",V="input",Y="target",W="currentTarget",K="type",q="confirm",X="timeStamp",Q="keyCode",Z="touchmove",J="onLoad",ee="onReady",te="onShow",ie="onHide",se="e_result";var re;(function(e){e["INIT"]="0",e["RESTORE"]="1",e["RECOVER"]="2",e["DESTORY"]="3"})(re||(re={}));const ne=F.call("getEventCenter",T),ae={window:window,document:document};function oe(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(i[s[r]]=e[s[r]])}return i}function le(e,t,i,s){function r(e){return e instanceof i?e:new i(function(t){t(e)})}return new(i||(i=Promise))(function(i,n){function a(e){try{l(s.next(e))}catch(t){n(t)}}function o(e){try{l(s["throw"](e))}catch(t){n(t)}}function l(e){e.done?i(e.value):r(e.value).then(a,o)}l((s=s.apply(e,t||[])).next())})}function ce(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)}"function"===typeof SuppressedError&&SuppressedError;const de={app:null,router:null,page:null},he=()=>de;(function(){"undefined"!==typeof performance&&null!==performance&&performance.now||Date.now||(new Date).getTime()})();const ue=requestAnimationFrame,pe=ae.window,fe=pe.location,ge=()=>{const e=[];for(let s=65;s<=90;s++)e.push(s);for(let s=97;s<=122;s++)e.push(s);const t=e.length-1,i=[0,0];return()=>{const s=i.map(t=>e[t]),r=String.fromCharCode(...s);let n=i.length-1;i[n]++;while(i[n]>t){if(i[n]=0,n-=1,n<0){i.push(0);break}i[n]++}return r}};function me(e){const t=Object.keys(e.props).find(e=>!(/^(class|style|id)$/.test(e)||e.startsWith("data-")));return Boolean(t)}function ve(e,t){var i;while(e=(null===e||void 0===e?void 0:e.parentElement)||null){if(!e||e.nodeName===z||"root-portal"===e.nodeName)return!1;if(null===(i=e.__handlers[t])||void 0===i?void 0:i.length)return!0}return!1}const ye={prerender:!0,debug:!1};class be{constructor(e,t,i){this._stop=!1,this._end=!1,this.defaultPrevented=!1,this.button=0,this.timeStamp=Date.now(),this.type=e.toLowerCase(),this.mpEvent=i,this.bubbles=Boolean(t&&t.bubbles),this.cancelable=Boolean(t&&t.cancelable)}stopPropagation(){this._stop=!0}stopImmediatePropagation(){this._end=this._stop=!0}preventDefault(){this.defaultPrevented=!0}get target(){var e,t,i,s,r;const n=this.cacheTarget;if(n)return n;{const n=Object.create((null===(e=this.mpEvent)||void 0===e?void 0:e.target)||null),a=ae.document.getElementById((null===(t=n.dataset)||void 0===t?void 0:t.sid)||n.id||null),o=ae.document.getElementById((null===(i=n.targetDataset)||void 0===i?void 0:i.sid)||(null===(s=n.dataset)||void 0===s?void 0:s.sid)||n.id||null);n.dataset=Object.assign(Object.assign({},null!==a?a.dataset:$),null!==o?o.dataset:$);for(const e in null===(r=this.mpEvent)||void 0===r?void 0:r.detail)n[e]=this.mpEvent.detail[e];return this.cacheTarget=n,n}}get currentTarget(){var e,t,i,s,r,n,a,o;const l=this.cacheCurrentTarget;if(l)return l;{const l=ae.document,c=Object.create((null===(e=this.mpEvent)||void 0===e?void 0:e.currentTarget)||null),d=l.getElementById((null===(t=c.dataset)||void 0===t?void 0:t.sid)||c.id||null),h=l.getElementById((null===(r=null===(s=null===(i=this.mpEvent)||void 0===i?void 0:i.target)||void 0===s?void 0:s.dataset)||void 0===r?void 0:r.sid)||(null===(a=null===(n=this.mpEvent)||void 0===n?void 0:n.target)||void 0===a?void 0:a.id)||null);if(null===d||d&&d===h)return this.cacheCurrentTarget=this.target,this.target;c.dataset=d.dataset;for(const e in null===(o=this.mpEvent)||void 0===o?void 0:o.detail)c[e]=this.mpEvent.detail[e];return this.cacheCurrentTarget=c,c}}}function Ee(e,t){if("string"===typeof e)return new be(e,{bubbles:!0,cancelable:!0});const i=new be(e.type,{bubbles:!0,cancelable:!0},e);for(const s in e)s!==W&&s!==Y&&s!==K&&s!==X&&(i[s]=e[s]);return i.type===q&&(null===t||void 0===t?void 0:t.nodeName)===V&&(i[Q]=13),i}const we={};function Ae(e){const t=e[se];return C(t)||delete e[se],t}function Te(e){var t,i;void 0===e.type&&Object.defineProperty(e,"type",{value:e._type}),void 0===e.detail&&Object.defineProperty(e,"detail",{value:e._detail||Object.assign({},e)}),e.currentTarget=e.currentTarget||e.target||Object.assign({},e),F.call("modifyMpEventImpl",e);const s=e.currentTarget,r=(null===(t=s.dataset)||void 0===t?void 0:t.sid)||s.id||(null===(i=e.detail)||void 0===i?void 0:i.id)||"",n=ae.document.getElementById(r);if(n){const t=()=>{const t=Ee(e,n);F.call("modifyTaroEvent",t,n),F.call("dispatchTaroEvent",t,n),F.call("dispatchTaroEventFinish",t,n)};if(!F.isExist("batchedEventUpdates"))return t(),Ae(e);{const i=e.type;if(!F.call("isBubbleEvents",i)||!ve(n,i)||i===Z&&n.props.catchMove)return F.call("batchedEventUpdates",()=>{we[i]&&(we[i].forEach(e=>e()),delete we[i]),t()}),Ae(e);(we[i]||(we[i]=[])).push(t)}}}function Se(e,t=250,i){let s;return function(...r){const n=i||this;clearTimeout(s),s=setTimeout(function(){e.apply(n,r)},t)}}var xe,Le;class ke{constructor(){xe.add(this),this.recorder=new Map}start(e){ye.debug&&this.recorder.set(e,Date.now())}stop(e,t=Date.now()){if(!ye.debug)return;const i=this.recorder.get(e);if(!(i>=0))return;this.recorder.delete(e);const s=t-i;console.log(`${e} \u65f6\u957f\uff1a ${s}ms \u5f00\u59cb\u65f6\u95f4\uff1a${ce(this,xe,"m",Le).call(this,i)} \u7ed3\u675f\u65f6\u95f4\uff1a${ce(this,xe,"m",Le).call(this,t)}`)}delayStop(e,t=500){if(ye.debug)return Se((t=Date.now(),i)=>{this.stop(e,t),null===i||void 0===i||i()},t)}}xe=new WeakSet,Le=function(e){const t=new Date(e);return`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()}.${`${t.getMilliseconds()}`.padStart(3,"0")}`};const Ie=new ke,_e=(e="")=>"/"===e.charAt(0)?e:"/"+e,Ce=(e="",t="")=>new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)||e===t,Re=(e="",t="")=>Ce(e,t)?e.substring(t.length):e,Pe=(e="")=>e.replace(/[?#][\s\S]*$/,""),De=(e="",t="")=>e.includes(t)?e.substring(0,e.length-t.length):e,Me=(e="",t="",i={},s="")=>{var r;const n=_e(Re(e,t)),a=(null===(r=Object.entries(i).find(([e])=>e===n))||void 0===r?void 0:r[1])||n;return s||("string"===typeof a?a:a[0])||t},Oe=(e="hash",t="/")=>{const i="hash"===e?fe.hash.slice(1).split("?")[0]:fe.pathname;return _e(Re(i,t))},Ne=new Map,Be=ge();function Fe(e,t){F.call("mergePageInstance",Ne.get(t),e),Ne.set(t,e)}function $e(e){return Ne.get(e)}function Ue(e,t,...i){const s=Ne.get(e);if(null==s)return;const r=F.call("getLifecycle",s,t);if(D(r)){const e=r.map(e=>e.apply(s,i));return e[0]}return P(r)?r.apply(s,i):void 0}function Ge(e){if(null==e)return"";const t=Object.keys(e).map(t=>t+"="+e[t]).join("&");return""===t?t:"?"+t}function He(e,t){const i=e.indexOf("?");return`${i>-1?e.substring(0,i):e}${Ge((null===t||void 0===t?void 0:t.stamp)?{stamp:t.stamp}:{})}`}function je(e){return e+"."+ee}function ze(e){return e+"."+te}function Ve(e){return e+"."+ie}function Ye(e,t,i,s){const r=null!==t&&void 0!==t?t:`taro_page_${Be()}`,[n,a,o,l,c,d,h]=F.call("getMiniLifecycleImpl").page;let u,p,f=null,g=!1,m=[];function v(e){const t=e.$taroPath;de.router={params:e.$taroParams,path:_e(t),$taroPath:e.$taroPath,onReady:je(r),onShow:ze(r),onHide:Ve(r)},C(e.exitState)||(de.router.exitState=e.exitState)}const y={[n](t={},i){p=new Promise(e=>{u=e}),Ie.start(j),de.page=this,this.config=s||{};const n=Object.assign({},t,{$taroTimestamp:Date.now()}),a=this.$taroPath=He(r,n);y.path=a,null==this.$taroParams&&(this.$taroParams=n),v(this);const o=()=>{de.app.mount(e,a,()=>{f=ae.document.getElementById(a),G(null!==f,"\u6ca1\u6709\u627e\u5230\u9875\u9762\u5b9e\u4f8b\u3002"),Ue(a,J,this.$taroParams),u(),P(i)&&i()})};g?m.push(o):o()},[a](){const e=this.$taroPath;Ue(e,a),g=!0,de.app.unmount(e,()=>{g=!1,Ne.delete(e),f&&(f.ctx=null,f=null),m.length&&(m.forEach(e=>e()),m=[])})},[o](){p.then(()=>{Ue(this.$taroPath,ee),ue(()=>ne.trigger(je(r))),this.onReady.called=!0})},[l](e={}){p.then(()=>{de.page=this,v(this),Ue(this.$taroPath,te,e),ue(()=>ne.trigger(ze(r)))})},[c](){de.page===this&&(de.page=null,de.router=null),Ue(this.$taroPath,ie),ne.trigger(Ve(r))},getOpenerEventChannel:()=>I.pageChannel};return d.forEach(e=>{let t=!1;e=e.replace(/^defer:/,()=>(t=!0,"")),y[e]=function(){const i=()=>Ue(this.$taroPath,e,...arguments);if(!t)return i();p.then(i)}}),h.forEach(t=>{var i;(e[t]||(null===(i=e.prototype)||void 0===i?void 0:i[t])||e[t.replace(/^on/,"enable")]||(null===s||void 0===s?void 0:s[t.replace(/^on/,"enable")]))&&(y[t]=function(...e){var i;const s=null===(i=e[0])||void 0===i?void 0:i.target;if(null===s||void 0===s?void 0:s.id){const e=s.id,t=ae.document.getElementById(e);t&&(s.dataset=t.dataset)}return Ue(this.$taroPath,t,...e)})}),y.eh=Te,C(i)||(y.data=i),F.call("modifyPageObject",y),y}const We=100,Ke=(e,t)=>{const i=Date.now(),s=de.router,r=()=>{setTimeout(function(){t?e.call(t):e()},1)};if(null===s)return r();const n=s.$taroPath;function a(){var e,t,s;const o=ae.document.getElementById(n);(null===o||void 0===o?void 0:o.pendingUpdate)?null!==(s=null===(t=null===(e=o.firstChild)||void 0===e?void 0:e["componentOnReady"])||void 0===t?void 0:t.call(e).then(()=>{r()}))&&void 0!==s||r():Date.now()-i>We?r():setTimeout(()=>a(),20)}a()};function qe(e){const t=function(t,i){const s=t.toLowerCase();if(s in e){const r=e[s];_(r)?t=r:(t=r[0],i=r[1][i]||i)}return[t,i]};return t}const Xe=new Set(["i","abbr","select","acronym","small","bdi","kbd","strong","big","sub","sup","br","mark","meter","template","cite","object","time","code","output","u","data","picture","tt","datalist","var","dfn","del","q","em","s","embed","samp","b"]),Qe=new Set(["body","svg","address","fieldset","li","span","article","figcaption","main","aside","figure","nav","blockquote","footer","ol","details","p","dialog","h1","h2","h3","h4","h5","h6","pre","dd","header","section","div","hgroup","table","dl","hr","ul","dt","view","view-block"]),Ze=new Map([["slot","slot"],["form","form"],["iframe","web-view"],["img","image"],["audio","audio"],["video","video"],["canvas","canvas"],["a",{mapName(e){return e.as&&_(e.as)?e.as.toLowerCase():!e.href||/^javascript/.test(e.href)?"view":"navigator"},mapNameCondition:["href"],mapAttr:qe({href:"url",target:["openType",{_blank:"navigate",_self:"redirect"}]})}],["input",{mapName(e){return"checkbox"===e.type?"checkbox":"radio"===e.type?"radio":"input"},mapNameCondition:["type"],mapAttr(e,t,i){const s=e.toLowerCase();return"autofocus"===s?e="focus":"readonly"===s?(!0===i.disabled&&(t=!0),e="disabled"):"type"===s?"password"===t?(e="password",t=!0):"tel"===t&&(t="number"):"maxlength"===s&&(e="maxlength"),[e,t]}}],["label",{mapName:"label",mapAttr:qe({htmlfor:"for"})}],["textarea",{mapName:"textarea",mapAttr:qe({autofocus:"focus",readonly:"disabled",maxlength:"maxlength"})}],["progress",{mapName:"progress",mapAttr(e,t,i){if("value"===e){const s=i.max||1;e="percent",t=Math.round(t/s*100)}return[e,t]}}],["button",{mapName:"button",mapAttr(e,t){return"type"!==e||"submit"!==t&&"reset"!==t||(e="formType"),[e,t]}}]]);function Je(e){return!!(Xe.has(e)||Qe.has(e)||Ze.has(e))}function et(e,t,i){if(Xe.has(e))return"text";if(Ze.has(e)){const i=Ze.get(e);if(_(i))return i;const{mapName:s}=i;return P(s)?s(t):s}if(i){const{props:e}=i;for(const t in e){const i=U(t);if("catchMove"===i&&!1!==e[t])return"catch-view"}}return i?i.isOnlyClickBinded()&&!me(i)?"click-view":i.isAnyEventBinded()?"view":me(i)?"static-view":"pure-view":"view"}function tt(e){const t=Ze.get(e);if(!_(t))return null===t||void 0===t?void 0:t.mapAttr}function it(e,t,i){const s=Ze.get(e);if(!s||_(s))return;const{mapName:r,mapNameCondition:n}=s;return n&&n.indexOf(t)>-1&&!_(r)?r(i):void 0}function st(e,t,i,s){const r=it(e,t,i.props);if(r){const e=s[r]._num;i.enqueueUpdate({path:`${i._path}.nn`,value:e})}}function rt(e,t=""){const i=t.split(" "),s=`h5-${e}`;return-1===i.indexOf(s)&&i.unshift(s),i.join(" ")}function nt(e,t=""){let i=t;const{width:s,height:r}=e;return s&&(i=`width: ${s};${i}`),r&&(i=`height: ${r};${i}`),i}function at(e,t,i){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get(){return e[i]},set(t){e[i]=t}})}F.tap("modifyHydrateData",(e,t)=>{const i=e["nn"];if(!Je(i))return;e["nn"]=et(i,e,t);const s=tt(i);if(s)for(const r in e){const t=e[r],[i,n]=s(r,t,e);r!==i?(delete e[r],e[i]=n):t!==n&&(e[r]=n)}"br"===i&&(e["cn"]=[{["nn"]:"#text",v:"\n"}]),e["cl"]=rt(i,e["cl"]),e["st"]=nt(e,e["st"])}),F.tap("modifySetAttrPayload",(e,t,i,s)=>{const{nodeName:r,_path:n,props:a}=e;if(!Je(r))return;st(r,t,e,s);const o=et(r,a),l=s[o],c=tt(r);if(c){const e=i.value,[s,r]=c(t,e,a);i.path=`${n}.${l[s]||s}`,i.value=r}else l[t]&&l[t]!==t&&(i.path=`${n}.${U(l[t])}`);if("cl"===t?i.value=rt(r,i.value):"st"!==t&&"width"!==t&&"height"!==t||(i.path=`${n}.st`,i.value=nt(a,e.style.cssText)),Qe.has(e.nodeName)){const r=s.view._num,a=s["static-view"]._num,o=s["catch-view"]._num,l=s["click-view"]._num,c=U(t),d=`${n}.nn`;"catchMove"===c?e.enqueueUpdate({path:d,value:i.value?o:e.isOnlyClickBinded()&&!me(e)?l:e.isAnyEventBinded()?r:a}):me(e)&&!e.isAnyEventBinded()&&e.enqueueUpdate({path:d,value:a})}}),F.tap("modifyRmAttrPayload",(e,t,i,s)=>{const{nodeName:r,_path:n,props:a}=e;if(!Je(r))return;st(r,t,e,s);const o=et(r,a),l=s[o],c=tt(r);if(c){const e=i[t],[s]=c(t,e,a);i.path=`${n}.${l[s]||s}`}else l[t]&&l[t]!==t&&(i.path=`${n}.${U(l[t])}`);if("cl"===t?i.value=rt(r,i.value):"st"!==t&&"width"!==t&&"height"!==t||(i.path=`${n}.st`,i.value=nt(a,e.style.cssText)),Qe.has(e.nodeName)){const i=s.view._num,r=s["static-view"]._num,a=s["pure-view"]._num,o=s["click-view"]._num,l=U(t),c=`${n}.nn`;"catchMove"===l?e.enqueueUpdate({path:c,value:e.isOnlyClickBinded()&&!me(e)?o:e.isAnyEventBinded()?i:me(e)?r:a}):me(e)||e.enqueueUpdate({path:c,value:a})}}),F.tap("onAddEvent",(e,t,i,s)=>{Je(s.nodeName)&&("click"===e?at(s.__handlers,e,"tap"):"input"===s.nodeName&&("change"===e?"checkbox"===s.props.type||"radio"===s.props.type?at(s.__handlers,e,"tap"):at(s.__handlers,e,"input"):"keypress"===e&&at(s.__handlers,e,"confirm")))}),F.tap("modifyTaroEvent",(e,t)=>{const{nodeName:i,props:s}=t;if("input"===i&&"tap"===e.type&&("checkbox"===s.type?s.checked=!s.checked:"radio"!==s.type||s.checked||(s.checked=!0),e.mpEvent)){const{currentTarget:t,target:i}=e.mpEvent;t.checked=s.checked,i.id===t.id&&(i.checked=s.checked)}}),F.tap("modifyAddEventListener",(e,t,i)=>{if(Qe.has(e.nodeName)&&!1!==t&&!e.isAnyEventBinded()){const t=i(),s=t.view._num;e.enqueueUpdate({path:`${e._path}.nn`,value:s})}}),F.tap("modifyRemoveEventListener",(e,t,i)=>{if(Qe.has(e.nodeName)&&!1!==t&&!e.isAnyEventBinded()){const t=i(),s=me(e)?"static-view":"pure-view",r=t[s]._num;e.enqueueUpdate({path:`${e._path}.nn`,value:r})}});function ot(e){const t=Object.create(null);for(const i of e.split(","))t[i]=1;return e=>e in t}const lt={},ct=[],dt=()=>{},ht=()=>!1,ut=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),pt=e=>e.startsWith("onUpdate:"),ft=Object.assign,gt=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},mt=Object.prototype.hasOwnProperty,vt=(e,t)=>mt.call(e,t),yt=Array.isArray,bt=e=>"[object Map]"===kt(e),Et=e=>"[object Set]"===kt(e),wt=e=>"function"===typeof e,At=e=>"string"===typeof e,Tt=e=>"symbol"===typeof e,St=e=>null!==e&&"object"===typeof e,xt=e=>(St(e)||wt(e))&&wt(e.then)&&wt(e.catch),Lt=Object.prototype.toString,kt=e=>Lt.call(e),It=e=>kt(e).slice(8,-1),_t=e=>"[object Object]"===kt(e),Ct=e=>At(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,Rt=ot(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Pt=e=>{const t=Object.create(null);return i=>{const s=t[i];return s||(t[i]=e(i))}},Dt=/-(\w)/g,Mt=Pt(e=>e.replace(Dt,(e,t)=>t?t.toUpperCase():"")),Ot=/\B([A-Z])/g,Nt=Pt(e=>e.replace(Ot,"-$1").toLowerCase()),Bt=Pt(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ft=Pt(e=>{const t=e?`on${Bt(e)}`:"";return t}),$t=(e,t)=>!Object.is(e,t),Ut=(e,...t)=>{for(let i=0;i<e.length;i++)e[i](...t)},Gt=(e,t,i,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:i})},Ht=e=>{const t=parseFloat(e);return isNaN(t)?e:t},jt=e=>{const t=At(e)?Number(e):NaN;return isNaN(t)?e:t};let zt;const Vt=()=>zt||(zt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{});function Yt(e){if(yt(e)){const t={};for(let i=0;i<e.length;i++){const s=e[i],r=At(s)?Xt(s):Yt(s);if(r)for(const e in r)t[e]=r[e]}return t}if(At(e)||St(e))return e}const Wt=/;(?![^(]*\))/g,Kt=/:([^]+)/,qt=/\/\*[^]*?\*\//g;function Xt(e){const t={};return e.replace(qt,"").split(Wt).forEach(e=>{if(e){const i=e.split(Kt);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Qt(e){let t="";if(At(e))t=e;else if(yt(e))for(let i=0;i<e.length;i++){const s=Qt(e[i]);s&&(t+=s+" ")}else if(St(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const Zt="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Jt=ot(Zt);function ei(e){return!!e||""===e}const ti=e=>!(!e||!0!==e["__v_isRef"]),ii=e=>At(e)?e:null==e?"":yt(e)||St(e)&&(e.toString===Lt||!wt(e.toString))?ti(e)?ii(e.value):JSON.stringify(e,si,2):String(e),si=(e,t)=>ti(t)?si(e,t.value):bt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[t,i],s)=>(e[ri(t,s)+" =>"]=i,e),{})}:Et(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>ri(e))}:Tt(t)?ri(t):!St(t)||yt(t)||_t(t)?t:String(t),ri=(e,t="")=>{var i;return Tt(e)?`Symbol(${null!=(i=e.description)?i:t})`:e};let ni,ai;class oi{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ni,!e&&ni&&(this.index=(ni.scopes||(ni.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){let e,t;if(this._isPaused=!0,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){let e,t;if(this._isPaused=!1,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=ni;try{return ni=this,e()}finally{ni=t}}}on(){1===++this._on&&(this.prevScope=ni,ni=this)}off(){this._on>0&&0===--this._on&&(ni=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){let t,i;for(this._active=!1,t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(this.effects.length=0,t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0}}}function li(e){return new oi(e)}function ci(){return ni}function di(e,t=!1){ni&&ni.cleanups.push(e)}const hi=new WeakSet;class ui{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ni&&ni.active&&ni.effects.push(this)}pause(){this.flags|=64}resume(){64&this.flags&&(this.flags&=-65,hi.has(this)&&(hi.delete(this),this.trigger()))}notify(){2&this.flags&&!(32&this.flags)||8&this.flags||mi(this)}run(){if(!(1&this.flags))return this.fn();this.flags|=2,_i(this),bi(this);const e=ai,t=xi;ai=this,xi=!0;try{return this.fn()}finally{Ei(this),ai=e,xi=t,this.flags&=-3}}stop(){if(1&this.flags){for(let e=this.deps;e;e=e.nextDep)Ti(e);this.deps=this.depsTail=void 0,_i(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){64&this.flags?hi.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){wi(this)&&this.run()}get dirty(){return wi(this)}}let pi,fi,gi=0;function mi(e,t=!1){if(e.flags|=8,t)return e.next=fi,void(fi=e);e.next=pi,pi=e}function vi(){gi++}function yi(){if(--gi>0)return;if(fi){let e=fi;fi=void 0;while(e){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let e;while(pi){let i=pi;pi=void 0;while(i){const s=i.next;if(i.next=void 0,i.flags&=-9,1&i.flags)try{i.trigger()}catch(t){e||(e=t)}i=s}}if(e)throw e}function bi(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ei(e){let t,i=e.depsTail,s=i;while(s){const e=s.prevDep;-1===s.version?(s===i&&(i=e),Ti(s),Si(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=e}e.deps=t,e.depsTail=i}function wi(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Ai(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Ai(e){if(4&e.flags&&!(16&e.flags))return;if(e.flags&=-17,e.globalVersion===Ci)return;if(e.globalVersion=Ci,!e.isSSR&&128&e.flags&&(!e.deps&&!e._dirty||!wi(e)))return;e.flags|=2;const t=e.dep,i=ai,s=xi;ai=e,xi=!0;try{bi(e);const i=e.fn(e._value);(0===t.version||$t(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(r){throw t.version++,r}finally{ai=i,xi=s,Ei(e),e.flags&=-3}}function Ti(e,t=!1){const{dep:i,prevSub:s,nextSub:r}=e;if(s&&(s.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=s,e.nextSub=void 0),i.subs===e&&(i.subs=s,!s&&i.computed)){i.computed.flags&=-5;for(let e=i.computed.deps;e;e=e.nextDep)Ti(e,!0)}t||--i.sc||!i.map||i.map.delete(i.key)}function Si(e){const{prevDep:t,nextDep:i}=e;t&&(t.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=t,e.nextDep=void 0)}let xi=!0;const Li=[];function ki(){Li.push(xi),xi=!1}function Ii(){const e=Li.pop();xi=void 0===e||e}function _i(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const e=ai;ai=void 0;try{t()}finally{ai=e}}}let Ci=0,Ri=class{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class Pi{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!ai||!xi||ai===this.computed)return;let t=this.activeLink;if(void 0===t||t.sub!==ai)t=this.activeLink=new Ri(ai,this),ai.deps?(t.prevDep=ai.depsTail,ai.depsTail.nextDep=t,ai.depsTail=t):ai.deps=ai.depsTail=t,Di(t);else if(-1===t.version&&(t.version=this.version,t.nextDep)){const e=t.nextDep;e.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=e),t.prevDep=ai.depsTail,t.nextDep=void 0,ai.depsTail.nextDep=t,ai.depsTail=t,ai.deps===t&&(ai.deps=e)}return t}trigger(e){this.version++,Ci++,this.notify(e)}notify(e){vi();try{0;for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{yi()}}}function Di(e){if(e.dep.sc++,4&e.sub.flags){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let e=t.deps;e;e=e.nextDep)Di(e)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const Mi=new WeakMap,Oi=Symbol(""),Ni=Symbol(""),Bi=Symbol("");function Fi(e,t,i){if(xi&&ai){let t=Mi.get(e);t||Mi.set(e,t=new Map);let s=t.get(i);s||(t.set(i,s=new Pi),s.map=t,s.key=i),s.track()}}function $i(e,t,i,s,r,n){const a=Mi.get(e);if(!a)return void Ci++;const o=e=>{e&&e.trigger()};if(vi(),"clear"===t)a.forEach(o);else{const r=yt(e),n=r&&Ct(i);if(r&&"length"===i){const e=Number(s);a.forEach((t,i)=>{("length"===i||i===Bi||!Tt(i)&&i>=e)&&o(t)})}else switch((void 0!==i||a.has(void 0))&&o(a.get(i)),n&&o(a.get(Bi)),t){case"add":r?n&&o(a.get("length")):(o(a.get(Oi)),bt(e)&&o(a.get(Ni)));break;case"delete":r||(o(a.get(Oi)),bt(e)&&o(a.get(Ni)));break;case"set":bt(e)&&o(a.get(Oi));break}}yi()}function Ui(e,t){const i=Mi.get(e);return i&&i.get(t)}function Gi(e){const t=Is(e);return t===e?t:(Fi(t,"iterate",Bi),Ls(e)?t:t.map(Cs))}function Hi(e){return Fi(e=Is(e),"iterate",Bi),e}const ji={__proto__:null,[Symbol.iterator](){return zi(this,Symbol.iterator,Cs)},concat(...e){return Gi(this).concat(...e.map(e=>yt(e)?Gi(e):e))},entries(){return zi(this,"entries",e=>(e[1]=Cs(e[1]),e))},every(e,t){return Yi(this,"every",e,t,void 0,arguments)},filter(e,t){return Yi(this,"filter",e,t,e=>e.map(Cs),arguments)},find(e,t){return Yi(this,"find",e,t,Cs,arguments)},findIndex(e,t){return Yi(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Yi(this,"findLast",e,t,Cs,arguments)},findLastIndex(e,t){return Yi(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Yi(this,"forEach",e,t,void 0,arguments)},includes(...e){return Ki(this,"includes",e)},indexOf(...e){return Ki(this,"indexOf",e)},join(e){return Gi(this).join(e)},lastIndexOf(...e){return Ki(this,"lastIndexOf",e)},map(e,t){return Yi(this,"map",e,t,void 0,arguments)},pop(){return qi(this,"pop")},push(...e){return qi(this,"push",e)},reduce(e,...t){return Wi(this,"reduce",e,t)},reduceRight(e,...t){return Wi(this,"reduceRight",e,t)},shift(){return qi(this,"shift")},some(e,t){return Yi(this,"some",e,t,void 0,arguments)},splice(...e){return qi(this,"splice",e)},toReversed(){return Gi(this).toReversed()},toSorted(e){return Gi(this).toSorted(e)},toSpliced(...e){return Gi(this).toSpliced(...e)},unshift(...e){return qi(this,"unshift",e)},values(){return zi(this,"values",Cs)}};function zi(e,t,i){const s=Hi(e),r=s[t]();return s===e||Ls(e)||(r._next=r.next,r.next=()=>{const e=r._next();return e.value&&(e.value=i(e.value)),e}),r}const Vi=Array.prototype;function Yi(e,t,i,s,r,n){const a=Hi(e),o=a!==e&&!Ls(e),l=a[t];if(l!==Vi[t]){const t=l.apply(e,n);return o?Cs(t):t}let c=i;a!==e&&(o?c=function(t,s){return i.call(this,Cs(t),s,e)}:i.length>2&&(c=function(t,s){return i.call(this,t,s,e)}));const d=l.call(a,c,s);return o&&r?r(d):d}function Wi(e,t,i,s){const r=Hi(e);let n=i;return r!==e&&(Ls(e)?i.length>3&&(n=function(t,s,r){return i.call(this,t,s,r,e)}):n=function(t,s,r){return i.call(this,t,Cs(s),r,e)}),r[t](n,...s)}function Ki(e,t,i){const s=Is(e);Fi(s,"iterate",Bi);const r=s[t](...i);return-1!==r&&!1!==r||!ks(i[0])?r:(i[0]=Is(i[0]),s[t](...i))}function qi(e,t,i=[]){ki(),vi();const s=Is(e)[t].apply(e,i);return yi(),Ii(),s}const Xi=ot("__proto__,__v_isRef,__isVue"),Qi=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>"arguments"!==e&&"caller"!==e).map(e=>Symbol[e]).filter(Tt));function Zi(e){Tt(e)||(e=String(e));const t=Is(this);return Fi(t,"has",e),t.hasOwnProperty(e)}class Ji{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,i){if("__v_skip"===t)return e["__v_skip"];const s=this._isReadonly,r=this._isShallow;if("__v_isReactive"===t)return!s;if("__v_isReadonly"===t)return s;if("__v_isShallow"===t)return r;if("__v_raw"===t)return i===(s?r?vs:ms:r?gs:fs).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const n=yt(e);if(!s){let e;if(n&&(e=ji[t]))return e;if("hasOwnProperty"===t)return Zi}const a=Reflect.get(e,t,Ps(e)?e:i);return(Tt(t)?Qi.has(t):Xi(t))?a:(s||Fi(e,"get",t),r?a:Ps(a)?n&&Ct(t)?a:a.value:St(a)?s?As(a):Es(a):a)}}class es extends Ji{constructor(e=!1){super(!1,e)}set(e,t,i,s){let r=e[t];if(!this._isShallow){const t=xs(r);if(Ls(i)||xs(i)||(r=Is(r),i=Is(i)),!yt(e)&&Ps(r)&&!Ps(i))return!t&&(r.value=i,!0)}const n=yt(e)&&Ct(t)?Number(t)<e.length:vt(e,t),a=Reflect.set(e,t,i,Ps(e)?e:s);return e===Is(s)&&(n?$t(i,r)&&$i(e,"set",t,i):$i(e,"add",t,i)),a}deleteProperty(e,t){const i=vt(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&i&&$i(e,"delete",t,void 0),s}has(e,t){const i=Reflect.has(e,t);return Tt(t)&&Qi.has(t)||Fi(e,"has",t),i}ownKeys(e){return Fi(e,"iterate",yt(e)?"length":Oi),Reflect.ownKeys(e)}}class ts extends Ji{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const is=new es,ss=new ts,rs=new es(!0),ns=e=>e,as=e=>Reflect.getPrototypeOf(e);function os(e,t,i){return function(...s){const r=this["__v_raw"],n=Is(r),a=bt(n),o="entries"===e||e===Symbol.iterator&&a,l="keys"===e&&a,c=r[e](...s),d=i?ns:t?Rs:Cs;return!t&&Fi(n,"iterate",l?Ni:Oi),{next(){const{value:e,done:t}=c.next();return t?{value:e,done:t}:{value:o?[d(e[0]),d(e[1])]:d(e),done:t}},[Symbol.iterator](){return this}}}}function ls(e){return function(...t){return"delete"!==e&&("clear"===e?void 0:this)}}function cs(e,t){const i={get(i){const s=this["__v_raw"],r=Is(s),n=Is(i);e||($t(i,n)&&Fi(r,"get",i),Fi(r,"get",n));const{has:a}=as(r),o=t?ns:e?Rs:Cs;return a.call(r,i)?o(s.get(i)):a.call(r,n)?o(s.get(n)):void(s!==r&&s.get(i))},get size(){const t=this["__v_raw"];return!e&&Fi(Is(t),"iterate",Oi),Reflect.get(t,"size",t)},has(t){const i=this["__v_raw"],s=Is(i),r=Is(t);return e||($t(t,r)&&Fi(s,"has",t),Fi(s,"has",r)),t===r?i.has(t):i.has(t)||i.has(r)},forEach(i,s){const r=this,n=r["__v_raw"],a=Is(n),o=t?ns:e?Rs:Cs;return!e&&Fi(a,"iterate",Oi),n.forEach((e,t)=>i.call(s,o(e),o(t),r))}};ft(i,e?{add:ls("add"),set:ls("set"),delete:ls("delete"),clear:ls("clear")}:{add(e){t||Ls(e)||xs(e)||(e=Is(e));const i=Is(this),s=as(i),r=s.has.call(i,e);return r||(i.add(e),$i(i,"add",e,e)),this},set(e,i){t||Ls(i)||xs(i)||(i=Is(i));const s=Is(this),{has:r,get:n}=as(s);let a=r.call(s,e);a||(e=Is(e),a=r.call(s,e));const o=n.call(s,e);return s.set(e,i),a?$t(i,o)&&$i(s,"set",e,i):$i(s,"add",e,i),this},delete(e){const t=Is(this),{has:i,get:s}=as(t);let r=i.call(t,e);r||(e=Is(e),r=i.call(t,e)),s&&s.call(t,e);const n=t.delete(e);return r&&$i(t,"delete",e,void 0),n},clear(){const e=Is(this),t=0!==e.size,i=e.clear();return t&&$i(e,"clear",void 0,void 0),i}});const s=["keys","values","entries",Symbol.iterator];return s.forEach(s=>{i[s]=os(s,e,t)}),i}function ds(e,t){const i=cs(e,t);return(t,s,r)=>"__v_isReactive"===s?!e:"__v_isReadonly"===s?e:"__v_raw"===s?t:Reflect.get(vt(i,s)&&s in t?i:t,s,r)}const hs={get:ds(!1,!1)},us={get:ds(!1,!0)},ps={get:ds(!0,!1)},fs=new WeakMap,gs=new WeakMap,ms=new WeakMap,vs=new WeakMap;function ys(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function bs(e){return e["__v_skip"]||!Object.isExtensible(e)?0:ys(It(e))}function Es(e){return xs(e)?e:Ts(e,!1,is,hs,fs)}function ws(e){return Ts(e,!1,rs,us,gs)}function As(e){return Ts(e,!0,ss,ps,ms)}function Ts(e,t,i,s,r){if(!St(e))return e;if(e["__v_raw"]&&(!t||!e["__v_isReactive"]))return e;const n=bs(e);if(0===n)return e;const a=r.get(e);if(a)return a;const o=new Proxy(e,2===n?s:i);return r.set(e,o),o}function Ss(e){return xs(e)?Ss(e["__v_raw"]):!(!e||!e["__v_isReactive"])}function xs(e){return!(!e||!e["__v_isReadonly"])}function Ls(e){return!(!e||!e["__v_isShallow"])}function ks(e){return!!e&&!!e["__v_raw"]}function Is(e){const t=e&&e["__v_raw"];return t?Is(t):e}function _s(e){return!vt(e,"__v_skip")&&Object.isExtensible(e)&&Gt(e,"__v_skip",!0),e}const Cs=e=>St(e)?Es(e):e,Rs=e=>St(e)?As(e):e;function Ps(e){return!!e&&!0===e["__v_isRef"]}function Ds(e){return Ms(e,!1)}function Ms(e,t){return Ps(e)?e:new Os(e,t)}class Os{constructor(e,t){this.dep=new Pi,this["__v_isRef"]=!0,this["__v_isShallow"]=!1,this._rawValue=t?e:Is(e),this._value=t?e:Cs(e),this["__v_isShallow"]=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,i=this["__v_isShallow"]||Ls(e)||xs(e);e=i?e:Is(e),$t(e,t)&&(this._rawValue=e,this._value=i?e:Cs(e),this.dep.trigger())}}function Ns(e){return Ps(e)?e.value:e}const Bs={get:(e,t,i)=>"__v_raw"===t?e:Ns(Reflect.get(e,t,i)),set:(e,t,i,s)=>{const r=e[t];return Ps(r)&&!Ps(i)?(r.value=i,!0):Reflect.set(e,t,i,s)}};function Fs(e){return Ss(e)?e:new Proxy(e,Bs)}function $s(e){const t=yt(e)?new Array(e.length):{};for(const i in e)t[i]=js(e,i);return t}class Us{constructor(e,t,i){this._object=e,this._key=t,this._defaultValue=i,this["__v_isRef"]=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Ui(Is(this._object),this._key)}}class Gs{constructor(e){this._getter=e,this["__v_isRef"]=!0,this["__v_isReadonly"]=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Hs(e,t,i){return Ps(e)?e:wt(e)?new Gs(e):St(e)&&arguments.length>1?js(e,t,i):Ds(e)}function js(e,t,i){const s=e[t];return Ps(s)?s:new Us(e,t,i)}class zs{constructor(e,t,i){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Pi(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ci-1,this.next=void 0,this.effect=this,this["__v_isReadonly"]=!t,this.isSSR=i}notify(){if(this.flags|=16,!(8&this.flags)&&ai!==this)return mi(this,!0),!0}get value(){const e=this.dep.track();return Ai(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Vs(e,t,i=!1){let s,r;wt(e)?s=e:(s=e.get,r=e.set);const n=new zs(s,r,i);return n}const Ys={},Ws=new WeakMap;let Ks;function qs(e,t=!1,i=Ks){if(i){let t=Ws.get(i);t||Ws.set(i,t=[]),t.push(e)}}function Xs(e,t,i=lt){const{immediate:s,deep:r,once:n,scheduler:a,augmentJob:o,call:l}=i,c=e=>r?e:Ls(e)||!1===r||0===r?Qs(e,1):Qs(e);let d,h,u,p,f=!1,g=!1;if(Ps(e)?(h=()=>e.value,f=Ls(e)):Ss(e)?(h=()=>c(e),f=!0):yt(e)?(g=!0,f=e.some(e=>Ss(e)||Ls(e)),h=()=>e.map(e=>Ps(e)?e.value:Ss(e)?c(e):wt(e)?l?l(e,2):e():void 0)):h=wt(e)?t?l?()=>l(e,2):e:()=>{if(u){ki();try{u()}finally{Ii()}}const t=Ks;Ks=d;try{return l?l(e,3,[p]):e(p)}finally{Ks=t}}:dt,t&&r){const e=h,t=!0===r?1/0:r;h=()=>Qs(e(),t)}const m=ci(),v=()=>{d.stop(),m&&m.active&&gt(m.effects,d)};if(n&&t){const e=t;t=(...t)=>{e(...t),v()}}let y=g?new Array(e.length).fill(Ys):Ys;const b=e=>{if(1&d.flags&&(d.dirty||e))if(t){const e=d.run();if(r||f||(g?e.some((e,t)=>$t(e,y[t])):$t(e,y))){u&&u();const i=Ks;Ks=d;try{const i=[e,y===Ys?void 0:g&&y[0]===Ys?[]:y,p];y=e,l?l(t,3,i):t(...i)}finally{Ks=i}}}else d.run()};return o&&o(b),d=new ui(h),d.scheduler=a?()=>a(b,!1):b,p=e=>qs(e,!1,d),u=d.onStop=()=>{const e=Ws.get(d);if(e){if(l)l(e,4);else for(const t of e)t();Ws.delete(d)}},t?s?b(!0):y=d.run():a?a(b.bind(null,!0),!0):d.run(),v.pause=d.pause.bind(d),v.resume=d.resume.bind(d),v.stop=v,v}function Qs(e,t=1/0,i){if(t<=0||!St(e)||e["__v_skip"])return e;if(i=i||new Set,i.has(e))return e;if(i.add(e),t--,Ps(e))Qs(e.value,t,i);else if(yt(e))for(let s=0;s<e.length;s++)Qs(e[s],t,i);else if(Et(e)||bt(e))e.forEach(e=>{Qs(e,t,i)});else if(_t(e)){for(const s in e)Qs(e[s],t,i);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Qs(e[s],t,i)}return e}function Zs(e,t,i,s){try{return s?e(...s):e()}catch(r){er(r,t,i)}}function Js(e,t,i,s){if(wt(e)){const r=Zs(e,t,i,s);return r&&xt(r)&&r.catch(e=>{er(e,t,i)}),r}if(yt(e)){const r=[];for(let n=0;n<e.length;n++)r.push(Js(e[n],t,i,s));return r}}function er(e,t,i,s=!0){const r=t?t.vnode:null,{errorHandler:n,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||lt;if(t){let s=t.parent;const r=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${i}`;while(s){const t=s.ec;if(t)for(let i=0;i<t.length;i++)if(!1===t[i](e,r,a))return;s=s.parent}if(n)return ki(),Zs(n,null,10,[e,r,a]),void Ii()}tr(e,i,r,s,a)}function tr(e,t,i,s=!0,r=!1){if(r)throw e;console.error(e)}const ir=[];let sr=-1;const rr=[];let nr=null,ar=0;const or=Promise.resolve();let lr=null;function cr(e){const t=lr||or;return e?t.then(this?e.bind(this):e):t}function dr(e){let t=sr+1,i=ir.length;while(t<i){const s=t+i>>>1,r=ir[s],n=mr(r);n<e||n===e&&2&r.flags?t=s+1:i=s}return t}function hr(e){if(!(1&e.flags)){const t=mr(e),i=ir[ir.length-1];!i||!(2&e.flags)&&t>=mr(i)?ir.push(e):ir.splice(dr(t),0,e),e.flags|=1,ur()}}function ur(){lr||(lr=or.then(vr))}function pr(e){yt(e)?rr.push(...e):nr&&-1===e.id?nr.splice(ar+1,0,e):1&e.flags||(rr.push(e),e.flags|=1),ur()}function fr(e,t,i=sr+1){for(;i<ir.length;i++){const t=ir[i];if(t&&2&t.flags){if(e&&t.id!==e.uid)continue;ir.splice(i,1),i--,4&t.flags&&(t.flags&=-2),t(),4&t.flags||(t.flags&=-2)}}}function gr(e){if(rr.length){const e=[...new Set(rr)].sort((e,t)=>mr(e)-mr(t));if(rr.length=0,nr)return void nr.push(...e);for(nr=e,ar=0;ar<nr.length;ar++){const e=nr[ar];4&e.flags&&(e.flags&=-2),8&e.flags||e(),e.flags&=-2}nr=null,ar=0}}const mr=e=>null==e.id?2&e.flags?-1:1/0:e.id;function vr(e){try{for(sr=0;sr<ir.length;sr++){const e=ir[sr];!e||8&e.flags||(4&e.flags&&(e.flags&=-2),Zs(e,e.i,e.i?15:14),4&e.flags||(e.flags&=-2))}}finally{for(;sr<ir.length;sr++){const e=ir[sr];e&&(e.flags&=-2)}sr=-1,ir.length=0,gr(),lr=null,(ir.length||rr.length)&&vr()}}let yr=null,br=null;function Er(e){const t=yr;return yr=e,br=e&&e.type.__scopeId||null,t}function wr(e,t=yr,i){if(!t)return e;if(e._n)return e;const s=(...i)=>{s._d&&Qa(-1);const r=Er(t);let n;try{n=e(...i)}finally{Er(r),s._d&&Qa(1)}return n};return s._n=!0,s._c=!0,s._d=!0,s}function Ar(e,t){if(null===yr)return e;const i=No(yr),s=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[e,n,a,o=lt]=t[r];e&&(wt(e)&&(e={mounted:e,updated:e}),e.deep&&Qs(n),s.push({dir:e,instance:i,value:n,oldValue:void 0,arg:a,modifiers:o}))}return e}function Tr(e,t,i,s){const r=e.dirs,n=t&&t.dirs;for(let a=0;a<r.length;a++){const o=r[a];n&&(o.oldValue=n[a].value);let l=o.dir[s];l&&(ki(),Js(l,i,8,[e.el,o,e,t]),Ii())}}const Sr=Symbol("_vte"),xr=e=>e.__isTeleport,Lr=Symbol("_leaveCb"),kr=Symbol("_enterCb");function Ir(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Jr(()=>{e.isMounted=!0}),sn(()=>{e.isUnmounting=!0}),e}const _r=[Function,Array],Cr={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:_r,onEnter:_r,onAfterEnter:_r,onEnterCancelled:_r,onBeforeLeave:_r,onLeave:_r,onAfterLeave:_r,onLeaveCancelled:_r,onBeforeAppear:_r,onAppear:_r,onAfterAppear:_r,onAppearCancelled:_r},Rr=e=>{const t=e.subTree;return t.component?Rr(t.component):t},Pr={name:"BaseTransition",props:Cr,setup(e,{slots:t}){const i=Ao(),s=Ir();return()=>{const r=t.default&&Ur(t.default(),!0);if(!r||!r.length)return;const n=Dr(r),a=Is(e),{mode:o}=a;if(s.isLeaving)return Br(n);const l=Fr(n);if(!l)return Br(n);let c=Nr(l,a,s,i,e=>c=e);l.type!==za&&$r(l,c);let d=i.subTree&&Fr(i.subTree);if(d&&d.type!==za&&!io(l,d)&&Rr(i).type!==za){let e=Nr(d,a,s,i);if($r(d,e),"out-in"===o&&l.type!==za)return s.isLeaving=!0,e.afterLeave=()=>{s.isLeaving=!1,8&i.job.flags||i.update(),delete e.afterLeave,d=void 0},Br(n);"in-out"===o&&l.type!==za?e.delayLeave=(e,t,i)=>{const r=Or(s,d);r[String(d.key)]=d,e[Lr]=()=>{t(),e[Lr]=void 0,delete c.delayedLeave,d=void 0},c.delayedLeave=()=>{i(),delete c.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return n}}};function Dr(e){let t=e[0];if(e.length>1)for(const i of e)if(i.type!==za){t=i;break}return t}const Mr=Pr;function Or(e,t){const{leavingVNodes:i}=e;let s=i.get(t.type);return s||(s=Object.create(null),i.set(t.type,s)),s}function Nr(e,t,i,s,r){const{appear:n,mode:a,persisted:o=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:d,onEnterCancelled:h,onBeforeLeave:u,onLeave:p,onAfterLeave:f,onLeaveCancelled:g,onBeforeAppear:m,onAppear:v,onAfterAppear:y,onAppearCancelled:b}=t,E=String(e.key),w=Or(i,e),A=(e,t)=>{e&&Js(e,s,9,t)},T=(e,t)=>{const i=t[1];A(e,t),yt(e)?e.every(e=>e.length<=1)&&i():e.length<=1&&i()},S={mode:a,persisted:o,beforeEnter(t){let s=l;if(!i.isMounted){if(!n)return;s=m||l}t[Lr]&&t[Lr](!0);const r=w[E];r&&io(e,r)&&r.el[Lr]&&r.el[Lr](),A(s,[t])},enter(e){let t=c,s=d,r=h;if(!i.isMounted){if(!n)return;t=v||c,s=y||d,r=b||h}let a=!1;const o=e[kr]=t=>{a||(a=!0,A(t?r:s,[e]),S.delayedLeave&&S.delayedLeave(),e[kr]=void 0)};t?T(t,[e,o]):o()},leave(t,s){const r=String(e.key);if(t[kr]&&t[kr](!0),i.isUnmounting)return s();A(u,[t]);let n=!1;const a=t[Lr]=i=>{n||(n=!0,s(),A(i?g:f,[t]),t[Lr]=void 0,w[r]===e&&delete w[r])};w[r]=e,p?T(p,[t,a]):a()},clone(e){const n=Nr(e,t,i,s,r);return r&&r(n),n}};return S}function Br(e){if(Vr(e))return e=co(e),e.children=null,e}function Fr(e){if(!Vr(e))return xr(e.type)&&e.children?Dr(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:i}=e;if(i){if(16&t)return i[0];if(32&t&&wt(i.default))return i.default()}}function $r(e,t){6&e.shapeFlag&&e.component?(e.transition=t,$r(e.component.subTree,t)):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ur(e,t=!1,i){let s=[],r=0;for(let n=0;n<e.length;n++){let a=e[n];const o=null==i?a.key:String(i)+String(null!=a.key?a.key:n);a.type===Ha?(128&a.patchFlag&&r++,s=s.concat(Ur(a.children,t,o))):(t||a.type!==za)&&s.push(null!=o?co(a,{key:o}):a)}if(r>1)for(let n=0;n<s.length;n++)s[n].patchFlag=-2;return s}function Gr(e,t){return wt(e)?(()=>ft({name:e.name},t,{setup:e}))():e}function Hr(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function jr(e,t,i,s,r=!1){if(yt(e))return void e.forEach((e,n)=>jr(e,t&&(yt(t)?t[n]:t),i,s,r));if(zr(s)&&!r)return void(512&s.shapeFlag&&s.type.__asyncResolved&&s.component.subTree.component&&jr(e,t,i,s.component.subTree));const n=4&s.shapeFlag?No(s.component):s.el,a=r?null:n,{i:o,r:l}=e,c=t&&t.r,d=o.refs===lt?o.refs={}:o.refs,h=o.setupState,u=Is(h),p=h===lt?()=>!1:e=>vt(u,e);if(null!=c&&c!==l&&(At(c)?(d[c]=null,p(c)&&(h[c]=null)):Ps(c)&&(c.value=null)),wt(l))Zs(l,o,12,[a,d]);else{const t=At(l),s=Ps(l);if(t||s){const o=()=>{if(e.f){const i=t?p(l)?h[l]:d[l]:l.value;r?yt(i)&&gt(i,n):yt(i)?i.includes(n)||i.push(n):t?(d[l]=[n],p(l)&&(h[l]=d[l])):(l.value=[n],e.k&&(d[e.k]=l.value))}else t?(d[l]=a,p(l)&&(h[l]=a)):s&&(l.value=a,e.k&&(d[e.k]=a))};a?(o.id=-1,pa(o,i)):o()}}}Vt().requestIdleCallback,Vt().cancelIdleCallback;const zr=e=>!!e.type.__asyncLoader,Vr=e=>e.type.__isKeepAlive;function Yr(e,t){Kr(e,"a",t)}function Wr(e,t){Kr(e,"da",t)}function Kr(e,t,i=wo){const s=e.__wdc||(e.__wdc=()=>{let t=i;while(t){if(t.isDeactivated)return;t=t.parent}return e()});if(Xr(t,s,i),i){let e=i.parent;while(e&&e.parent)Vr(e.parent.vnode)&&qr(s,t,i,e),e=e.parent}}function qr(e,t,i,s){const r=Xr(t,e,s,!0);rn(()=>{gt(s[t],r)},i)}function Xr(e,t,i=wo,s=!1){if(i){const r=i[e]||(i[e]=[]),n=t.__weh||(t.__weh=(...s)=>{ki();const r=xo(i),n=Js(t,i,e,s);return r(),Ii(),n});return s?r.unshift(n):r.push(n),n}}const Qr=e=>(t,i=wo)=>{_o&&"sp"!==e||Xr(e,(...e)=>t(...e),i)},Zr=Qr("bm"),Jr=Qr("m"),en=Qr("bu"),tn=Qr("u"),sn=Qr("bum"),rn=Qr("um"),nn=Qr("sp"),an=Qr("rtg"),on=Qr("rtc");function ln(e,t=wo){Xr("ec",e,t)}const cn="components";function dn(e,t){return pn(cn,e,!0,t)||e}const hn=Symbol.for("v-ndc");function un(e){return At(e)?pn(cn,e,!1)||e:e||hn}function pn(e,t,i=!0,s=!1){const r=yr||wo;if(r){const i=r.type;if(e===cn){const e=Bo(i,!1);if(e&&(e===t||e===Mt(t)||e===Bt(Mt(t))))return i}const n=fn(r[e]||i[e],t)||fn(r.appContext[e],t);return!n&&s?i:n}}function fn(e,t){return e&&(e[t]||e[Mt(t)]||e[Bt(Mt(t))])}function gn(e,t,i,s){let r;const n=i&&i[s],a=yt(e);if(a||At(e)){const i=a&&Ss(e);let s=!1,o=!1;i&&(s=!Ls(e),o=xs(e),e=Hi(e)),r=new Array(e.length);for(let a=0,l=e.length;a<l;a++)r[a]=t(s?o?Rs(Cs(e[a])):Cs(e[a]):e[a],a,void 0,n&&n[a])}else if("number"===typeof e){r=new Array(e);for(let i=0;i<e;i++)r[i]=t(i+1,i,void 0,n&&n[i])}else if(St(e))if(e[Symbol.iterator])r=Array.from(e,(e,i)=>t(e,i,void 0,n&&n[i]));else{const i=Object.keys(e);r=new Array(i.length);for(let s=0,a=i.length;s<a;s++){const a=i[s];r[s]=t(e[a],a,s,n&&n[s])}}else r=[];return i&&(i[s]=r),r}function mn(e,t,i={},s,r){if(yr.ce||yr.parent&&zr(yr.parent)&&yr.parent.ce)return"default"!==t&&(i.name=t),Ka(),eo(Ha,null,[ao("slot",i,s&&s())],64);let n=e[t];n&&n._c&&(n._d=!1),Ka();const a=n&&vn(n(i)),o=i.key||a&&a.key,l=eo(Ha,{key:(o&&!Tt(o)?o:`_${t}`)+(!a&&s?"_fb":"")},a||(s?s():[]),a&&1===e._?64:-2);return!r&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),n&&n._c&&(n._d=!0),l}function vn(e){return e.some(e=>!to(e)||e.type!==za&&!(e.type===Ha&&!vn(e.children)))?e:null}const yn=e=>e?ko(e)?No(e):yn(e.parent):null,bn=ft(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>yn(e.parent),$root:e=>yn(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Pn(e),$forceUpdate:e=>e.f||(e.f=()=>{hr(e.update)}),$nextTick:e=>e.n||(e.n=cr.bind(e.proxy)),$watch:e=>Ia.bind(e)}),En=(e,t)=>e!==lt&&!e.__isScriptSetup&&vt(e,t),wn={get({_:e},t){if("__v_skip"===t)return!0;const{ctx:i,setupState:s,data:r,props:n,accessCache:a,type:o,appContext:l}=e;let c;if("$"!==t[0]){const o=a[t];if(void 0!==o)switch(o){case 1:return s[t];case 2:return r[t];case 4:return i[t];case 3:return n[t]}else{if(En(s,t))return a[t]=1,s[t];if(r!==lt&&vt(r,t))return a[t]=2,r[t];if((c=e.propsOptions[0])&&vt(c,t))return a[t]=3,n[t];if(i!==lt&&vt(i,t))return a[t]=4,i[t];kn&&(a[t]=0)}}const d=bn[t];let h,u;return d?("$attrs"===t&&Fi(e.attrs,"get",""),d(e)):(h=o.__cssModules)&&(h=h[t])?h:i!==lt&&vt(i,t)?(a[t]=4,i[t]):(u=l.config.globalProperties,vt(u,t)?u[t]:void 0)},set({_:e},t,i){const{data:s,setupState:r,ctx:n}=e;return En(r,t)?(r[t]=i,!0):s!==lt&&vt(s,t)?(s[t]=i,!0):!vt(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(n[t]=i,!0))},has({_:{data:e,setupState:t,accessCache:i,ctx:s,appContext:r,propsOptions:n}},a){let o;return!!i[a]||e!==lt&&vt(e,a)||En(t,a)||(o=n[0])&&vt(o,a)||vt(s,a)||vt(bn,a)||vt(r.config.globalProperties,a)},defineProperty(e,t,i){return null!=i.get?e._.accessCache[t]=0:vt(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function An(){return Sn().slots}function Tn(){return Sn().attrs}function Sn(){const e=Ao();return e.setupContext||(e.setupContext=Oo(e))}function xn(e){return yt(e)?e.reduce((e,t)=>(e[t]=null,e),{}):e}function Ln(e,t){const i=xn(e);for(const s in t){if(s.startsWith("__skip"))continue;let e=i[s];e?yt(e)||wt(e)?e=i[s]={type:e,default:t[s]}:e.default=t[s]:null===e&&(e=i[s]={default:t[s]}),e&&t[`__skip_${s}`]&&(e.skipFactory=!0)}return i}let kn=!0;function In(e){const t=Pn(e),i=e.proxy,s=e.ctx;kn=!1,t.beforeCreate&&Cn(t.beforeCreate,e,"bc");const{data:r,computed:n,methods:a,watch:o,provide:l,inject:c,created:d,beforeMount:h,mounted:u,beforeUpdate:p,updated:f,activated:g,deactivated:m,beforeDestroy:v,beforeUnmount:y,destroyed:b,unmounted:E,render:w,renderTracked:A,renderTriggered:T,errorCaptured:S,serverPrefetch:x,expose:L,inheritAttrs:k,components:I,directives:_,filters:C}=t,R=null;if(c&&_n(c,s,R),a)for(const D in a){const e=a[D];wt(e)&&(s[D]=e.bind(i))}if(r){const t=r.call(i,i);St(t)&&(e.data=Es(t))}if(kn=!0,n)for(const D in n){const e=n[D],t=wt(e)?e.bind(i,i):wt(e.get)?e.get.bind(i,i):dt,r=!wt(e)&&wt(e.set)?e.set.bind(i):dt,a=$o({get:t,set:r});Object.defineProperty(s,D,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e})}if(o)for(const D in o)Rn(o[D],s,i,D);if(l){const e=wt(l)?l.call(i):l;Reflect.ownKeys(e).forEach(t=>{Yn(t,e[t])})}function P(e,t){yt(t)?t.forEach(t=>e(t.bind(i))):t&&e(t.bind(i))}if(d&&Cn(d,e,"c"),P(Zr,h),P(Jr,u),P(en,p),P(tn,f),P(Yr,g),P(Wr,m),P(ln,S),P(on,A),P(an,T),P(sn,y),P(rn,E),P(nn,x),yt(L))if(L.length){const t=e.exposed||(e.exposed={});L.forEach(e=>{Object.defineProperty(t,e,{get:()=>i[e],set:t=>i[e]=t})})}else e.exposed||(e.exposed={});w&&e.render===dt&&(e.render=w),null!=k&&(e.inheritAttrs=k),I&&(e.components=I),_&&(e.directives=_),x&&Hr(e)}function _n(e,t,i=dt){yt(e)&&(e=Bn(e));for(const s in e){const i=e[s];let r;r=St(i)?"default"in i?Wn(i.from||s,i.default,!0):Wn(i.from||s):Wn(i),Ps(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:e=>r.value=e}):t[s]=r}}function Cn(e,t,i){Js(yt(e)?e.map(e=>e.bind(t.proxy)):e.bind(t.proxy),t,i)}function Rn(e,t,i,s){let r=s.includes(".")?_a(i,s):()=>i[s];if(At(e)){const i=t[e];wt(i)&&La(r,i)}else if(wt(e))La(r,e.bind(i));else if(St(e))if(yt(e))e.forEach(e=>Rn(e,t,i,s));else{const s=wt(e.handler)?e.handler.bind(i):t[e.handler];wt(s)&&La(r,s,e)}}function Pn(e){const t=e.type,{mixins:i,extends:s}=t,{mixins:r,optionsCache:n,config:{optionMergeStrategies:a}}=e.appContext,o=n.get(t);let l;return o?l=o:r.length||i||s?(l={},r.length&&r.forEach(e=>Dn(l,e,a,!0)),Dn(l,t,a)):l=t,St(t)&&n.set(t,l),l}function Dn(e,t,i,s=!1){const{mixins:r,extends:n}=t;n&&Dn(e,n,i,!0),r&&r.forEach(t=>Dn(e,t,i,!0));for(const a in t)if(s&&"expose"===a);else{const s=Mn[a]||i&&i[a];e[a]=s?s(e[a],t[a]):t[a]}return e}const Mn={data:On,props:Un,emits:Un,methods:$n,computed:$n,beforeCreate:Fn,created:Fn,beforeMount:Fn,mounted:Fn,beforeUpdate:Fn,updated:Fn,beforeDestroy:Fn,beforeUnmount:Fn,destroyed:Fn,unmounted:Fn,activated:Fn,deactivated:Fn,errorCaptured:Fn,serverPrefetch:Fn,components:$n,directives:$n,watch:Gn,provide:On,inject:Nn};function On(e,t){return t?e?function(){return ft(wt(e)?e.call(this,this):e,wt(t)?t.call(this,this):t)}:t:e}function Nn(e,t){return $n(Bn(e),Bn(t))}function Bn(e){if(yt(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function Fn(e,t){return e?[...new Set([].concat(e,t))]:t}function $n(e,t){return e?ft(Object.create(null),e,t):t}function Un(e,t){return e?yt(e)&&yt(t)?[...new Set([...e,...t])]:ft(Object.create(null),xn(e),xn(null!=t?t:{})):t}function Gn(e,t){if(!e)return t;if(!t)return e;const i=ft(Object.create(null),e);for(const s in t)i[s]=Fn(e[s],t[s]);return i}function Hn(){return{app:null,config:{isNativeTag:ht,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let jn=0;function zn(e,t){return function(i,s=null){wt(i)||(i=ft({},i)),null==s||St(s)||(s=null);const r=Hn(),n=new WeakSet,a=[];let o=!1;const l=r.app={_uid:jn++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:Go,get config(){return r.config},set config(e){},use(e,...t){return n.has(e)||(e&&wt(e.install)?(n.add(e),e.install(l,...t)):wt(e)&&(n.add(e),e(l,...t))),l},mixin(e){return r.mixins.includes(e)||r.mixins.push(e),l},component(e,t){return t?(r.components[e]=t,l):r.components[e]},directive(e,t){return t?(r.directives[e]=t,l):r.directives[e]},mount(n,a,c){if(!o){const d=l._ceVNode||ao(i,s);return d.appContext=r,!0===c?c="svg":!1===c&&(c=void 0),a&&t?t(d,n):e(d,n,c),o=!0,l._container=n,n.__vue_app__=l,No(d.component)}},onUnmount(e){a.push(e)},unmount(){o&&(Js(a,l._instance,16),e(null,l._container),delete l._container.__vue_app__)},provide(e,t){return r.provides[e]=t,l},runWithContext(e){const t=Vn;Vn=l;try{return e()}finally{Vn=t}}};return l}}let Vn=null;function Yn(e,t){if(wo){let i=wo.provides;const s=wo.parent&&wo.parent.provides;s===i&&(i=wo.provides=Object.create(s)),i[e]=t}else;}function Wn(e,t,i=!1){const s=wo||yr;if(s||Vn){let r=Vn?Vn._context.provides:s?null==s.parent||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return i&&wt(t)?t.call(s&&s.proxy):t}}function Kn(){return!!(wo||yr||Vn)}const qn={},Xn=()=>Object.create(qn),Qn=e=>Object.getPrototypeOf(e)===qn;function Zn(e,t,i,s=!1){const r={},n=Xn();e.propsDefaults=Object.create(null),ea(e,t,r,n);for(const a in e.propsOptions[0])a in r||(r[a]=void 0);i?e.props=s?r:ws(r):e.type.props?e.props=r:e.props=n,e.attrs=n}function Jn(e,t,i,s){const{props:r,attrs:n,vnode:{patchFlag:a}}=e,o=Is(r),[l]=e.propsOptions;let c=!1;if(!(s||a>0)||16&a){let s;ea(e,t,r,n)&&(c=!0);for(const n in o)t&&(vt(t,n)||(s=Nt(n))!==n&&vt(t,s))||(l?!i||void 0===i[n]&&void 0===i[s]||(r[n]=ta(l,o,n,void 0,e,!0)):delete r[n]);if(n!==o)for(const e in n)t&&vt(t,e)||(delete n[e],c=!0)}else if(8&a){const i=e.vnode.dynamicProps;for(let s=0;s<i.length;s++){let a=i[s];if(Da(e.emitsOptions,a))continue;const d=t[a];if(l)if(vt(n,a))d!==n[a]&&(n[a]=d,c=!0);else{const t=Mt(a);r[t]=ta(l,o,t,d,e,!1)}else d!==n[a]&&(n[a]=d,c=!0)}}c&&$i(e.attrs,"set","")}function ea(e,t,i,s){const[r,n]=e.propsOptions;let a,o=!1;if(t)for(let l in t){if(Rt(l))continue;const c=t[l];let d;r&&vt(r,d=Mt(l))?n&&n.includes(d)?(a||(a={}))[d]=c:i[d]=c:Da(e.emitsOptions,l)||l in s&&c===s[l]||(s[l]=c,o=!0)}if(n){const t=Is(i),s=a||lt;for(let a=0;a<n.length;a++){const o=n[a];i[o]=ta(r,t,o,s[o],e,!vt(s,o))}}return o}function ta(e,t,i,s,r,n){const a=e[i];if(null!=a){const e=vt(a,"default");if(e&&void 0===s){const e=a.default;if(a.type!==Function&&!a.skipFactory&&wt(e)){const{propsDefaults:n}=r;if(i in n)s=n[i];else{const a=xo(r);s=n[i]=e.call(null,t),a()}}else s=e;r.ce&&r.ce._setProp(i,s)}a[0]&&(n&&!e?s=!1:!a[1]||""!==s&&s!==Nt(i)||(s=!0))}return s}const ia=new WeakMap;function sa(e,t,i=!1){const s=i?ia:t.propsCache,r=s.get(e);if(r)return r;const n=e.props,a={},o=[];let l=!1;if(!wt(e)){const s=e=>{l=!0;const[i,s]=sa(e,t,!0);ft(a,i),s&&o.push(...s)};!i&&t.mixins.length&&t.mixins.forEach(s),e.extends&&s(e.extends),e.mixins&&e.mixins.forEach(s)}if(!n&&!l)return St(e)&&s.set(e,ct),ct;if(yt(n))for(let d=0;d<n.length;d++){const e=Mt(n[d]);ra(e)&&(a[e]=lt)}else if(n)for(const d in n){const e=Mt(d);if(ra(e)){const t=n[d],i=a[e]=yt(t)||wt(t)?{type:t}:ft({},t),s=i.type;let r=!1,l=!0;if(yt(s))for(let e=0;e<s.length;++e){const t=s[e],i=wt(t)&&t.name;if("Boolean"===i){r=!0;break}"String"===i&&(l=!1)}else r=wt(s)&&"Boolean"===s.name;i[0]=r,i[1]=l,(r||vt(i,"default"))&&o.push(e)}}const c=[a,o];return St(e)&&s.set(e,c),c}function ra(e){return"$"!==e[0]&&!Rt(e)}const na=e=>"_"===e[0]||"$stable"===e,aa=e=>yt(e)?e.map(po):[po(e)],oa=(e,t,i)=>{if(t._n)return t;const s=wr((...e)=>aa(t(...e)),i);return s._c=!1,s},la=(e,t,i)=>{const s=e._ctx;for(const r in e){if(na(r))continue;const i=e[r];if(wt(i))t[r]=oa(r,i,s);else if(null!=i){const e=aa(i);t[r]=()=>e}}},ca=(e,t)=>{const i=aa(t);e.slots.default=()=>i},da=(e,t,i)=>{for(const s in t)!i&&na(s)||(e[s]=t[s])},ha=(e,t,i)=>{const s=e.slots=Xn();if(32&e.vnode.shapeFlag){const e=t.__;e&&Gt(s,"__",e,!0);const r=t._;r?(da(s,t,i),i&&Gt(s,"_",r,!0)):la(t,s)}else t&&ca(e,t)},ua=(e,t,i)=>{const{vnode:s,slots:r}=e;let n=!0,a=lt;if(32&s.shapeFlag){const e=t._;e?i&&1===e?n=!1:da(r,t,i):(n=!t.$stable,la(t,r)),a=t}else t&&(ca(e,t),a={default:1});if(n)for(const o in r)na(o)||null!=a[o]||delete r[o]},pa=Ga;function fa(e){return ga(e)}function ga(e,t){const i=Vt();i.__VUE__=!0;const{insert:s,remove:r,patchProp:n,createElement:a,createText:o,createComment:l,setText:c,setElementText:d,parentNode:h,nextSibling:u,setScopeId:p=dt,insertStaticContent:f}=e,g=(e,t,i,s=null,r=null,n=null,a=void 0,o=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!io(e,t)&&(s=j(e),F(e,r,n,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:c,ref:d,shapeFlag:h}=t;switch(c){case ja:m(e,t,i,s);break;case za:v(e,t,i,s);break;case Va:null==e&&y(t,i,s,a);break;case Ha:I(e,t,i,s,r,n,a,o,l);break;default:1&h?w(e,t,i,s,r,n,a,o,l):6&h?_(e,t,i,s,r,n,a,o,l):(64&h||128&h)&&c.process(e,t,i,s,r,n,a,o,l,Y)}null!=d&&r?jr(d,e&&e.ref,n,t||e,!t):null==d&&e&&null!=e.ref&&jr(e.ref,null,n,e,!0)},m=(e,t,i,r)=>{if(null==e)s(t.el=o(t.children),i,r);else{const i=t.el=e.el;t.children!==e.children&&c(i,t.children)}},v=(e,t,i,r)=>{null==e?s(t.el=l(t.children||""),i,r):t.el=e.el},y=(e,t,i,s)=>{[e.el,e.anchor]=f(e.children,t,i,s,e.el,e.anchor)},b=({el:e,anchor:t},i,r)=>{let n;while(e&&e!==t)n=u(e),s(e,i,r),e=n;s(t,i,r)},E=({el:e,anchor:t})=>{let i;while(e&&e!==t)i=u(e),r(e),e=i;r(t)},w=(e,t,i,s,r,n,a,o,l)=>{"svg"===t.type?a="svg":"math"===t.type&&(a="mathml"),null==e?A(t,i,s,r,n,a,o,l):x(e,t,r,n,a,o,l)},A=(e,t,i,r,o,l,c,h)=>{let u,p;const{props:f,shapeFlag:g,transition:m,dirs:v}=e;if(u=e.el=a(e.type,l,f&&f.is,f),8&g?d(u,e.children):16&g&&S(e.children,u,null,r,o,ma(e,l),c,h),v&&Tr(e,null,r,"created"),T(u,e,e.scopeId,c,r),f){for(const e in f)"value"===e||Rt(e)||n(u,e,null,f[e],l,r);"value"in f&&n(u,"value",null,f.value,l),(p=f.onVnodeBeforeMount)&&vo(p,r,e)}v&&Tr(e,null,r,"beforeMount");const y=ya(o,m);y&&m.beforeEnter(u),s(u,t,i),((p=f&&f.onVnodeMounted)||y||v)&&pa(()=>{p&&vo(p,r,e),y&&m.enter(u),v&&Tr(e,null,r,"mounted")},o)},T=(e,t,i,s,r)=>{if(i&&p(e,i),s)for(let n=0;n<s.length;n++)p(e,s[n]);if(r){let i=r.subTree;if(t===i||Ua(i.type)&&(i.ssContent===t||i.ssFallback===t)){const t=r.vnode;T(e,t,t.scopeId,t.slotScopeIds,r.parent)}}},S=(e,t,i,s,r,n,a,o,l=0)=>{for(let c=l;c<e.length;c++){const l=e[c]=o?fo(e[c]):po(e[c]);g(null,l,t,i,s,r,n,a,o)}},x=(e,t,i,s,r,a,o)=>{const l=t.el=e.el;let{patchFlag:c,dynamicChildren:h,dirs:u}=t;c|=16&e.patchFlag;const p=e.props||lt,f=t.props||lt;let g;if(i&&va(i,!1),(g=f.onVnodeBeforeUpdate)&&vo(g,i,t,e),u&&Tr(t,e,i,"beforeUpdate"),i&&va(i,!0),(p.innerHTML&&null==f.innerHTML||p.textContent&&null==f.textContent)&&d(l,""),h?L(e.dynamicChildren,h,l,i,s,ma(t,r),a):o||M(e,t,l,null,i,s,ma(t,r),a,!1),c>0){if(16&c)k(l,p,f,i,r);else if(2&c&&p.class!==f.class&&n(l,"class",null,f.class,r),4&c&&n(l,"style",p.style,f.style,r),8&c){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const s=e[t],a=p[s],o=f[s];o===a&&"value"!==s||n(l,s,a,o,r,i)}}1&c&&e.children!==t.children&&d(l,t.children)}else o||null!=h||k(l,p,f,i,r);((g=f.onVnodeUpdated)||u)&&pa(()=>{g&&vo(g,i,t,e),u&&Tr(t,e,i,"updated")},s)},L=(e,t,i,s,r,n,a)=>{for(let o=0;o<t.length;o++){const l=e[o],c=t[o],d=l.el&&(l.type===Ha||!io(l,c)||198&l.shapeFlag)?h(l.el):i;g(l,c,d,null,s,r,n,a,!0)}},k=(e,t,i,s,r)=>{if(t!==i){if(t!==lt)for(const a in t)Rt(a)||a in i||n(e,a,t[a],null,r,s);for(const a in i){if(Rt(a))continue;const o=i[a],l=t[a];o!==l&&"value"!==a&&n(e,a,l,o,r,s)}"value"in i&&n(e,"value",t.value,i.value,r)}},I=(e,t,i,r,n,a,l,c,d)=>{const h=t.el=e?e.el:o(""),u=t.anchor=e?e.anchor:o("");let{patchFlag:p,dynamicChildren:f,slotScopeIds:g}=t;g&&(c=c?c.concat(g):g),null==e?(s(h,i,r),s(u,i,r),S(t.children||[],i,u,n,a,l,c,d)):p>0&&64&p&&f&&e.dynamicChildren?(L(e.dynamicChildren,f,i,n,a,l,c),(null!=t.key||n&&t===n.subTree)&&ba(e,t,!0)):M(e,t,i,u,n,a,l,c,d)},_=(e,t,i,s,r,n,a,o,l)=>{t.slotScopeIds=o,null==e?512&t.shapeFlag?r.ctx.activate(t,i,s,a,l):C(t,i,s,r,n,a,l):R(e,t,l)},C=(e,t,i,s,r,n,a)=>{const o=e.component=Eo(e,s,r);if(Vr(e)&&(o.ctx.renderer=Y),Co(o,!1,a),o.asyncDep){if(r&&r.registerDep(o,P,a),!e.el){const e=o.subTree=ao(za);v(null,e,t,i)}}else P(o,e,t,i,r,n,a)},R=(e,t,i)=>{const s=t.component=e.component;if(Ba(e,t,i)){if(s.asyncDep&&!s.asyncResolved)return void D(s,t,i);s.next=t,s.update()}else t.el=e.el,s.vnode=t},P=(e,t,i,s,r,n,a)=>{const o=()=>{if(e.isMounted){let{next:t,bu:i,u:s,parent:l,vnode:c}=e;{const i=wa(e);if(i)return t&&(t.el=c.el,D(e,t,a)),void i.asyncDep.then(()=>{e.isUnmounted||o()})}let d,u=t;va(e,!1),t?(t.el=c.el,D(e,t,a)):t=c,i&&Ut(i),(d=t.props&&t.props.onVnodeBeforeUpdate)&&vo(d,l,t,c),va(e,!0);const p=Ma(e),f=e.subTree;e.subTree=p,g(f,p,h(f.el),j(f),e,r,n),t.el=p.el,null===u&&$a(e,p.el),s&&pa(s,r),(d=t.props&&t.props.onVnodeUpdated)&&pa(()=>vo(d,l,t,c),r)}else{let a;const{el:o,props:l}=t,{bm:c,m:d,parent:h,root:u,type:p}=e,f=zr(t);if(va(e,!1),c&&Ut(c),!f&&(a=l&&l.onVnodeBeforeMount)&&vo(a,h,t),va(e,!0),o&&K){const t=()=>{e.subTree=Ma(e),K(o,e.subTree,e,r,null)};f&&p.__asyncHydrate?p.__asyncHydrate(o,e,t):t()}else{u.ce&&!1!==u.ce._def.shadowRoot&&u.ce._injectChildStyle(p);const a=e.subTree=Ma(e);g(null,a,i,s,e,r,n),t.el=a.el}if(d&&pa(d,r),!f&&(a=l&&l.onVnodeMounted)){const e=t;pa(()=>vo(a,h,e),r)}(256&t.shapeFlag||h&&zr(h.vnode)&&256&h.vnode.shapeFlag)&&e.a&&pa(e.a,r),e.isMounted=!0,t=i=s=null}};e.scope.on();const l=e.effect=new ui(o);e.scope.off();const c=e.update=l.run.bind(l),d=e.job=l.runIfDirty.bind(l);d.i=e,d.id=e.uid,l.scheduler=()=>hr(d),va(e,!0),c()},D=(e,t,i)=>{t.component=e;const s=e.vnode.props;e.vnode=t,e.next=null,Jn(e,t.props,s,i),ua(e,t.children,i),ki(),fr(e),Ii()},M=(e,t,i,s,r,n,a,o,l=!1)=>{const c=e&&e.children,h=e?e.shapeFlag:0,u=t.children,{patchFlag:p,shapeFlag:f}=t;if(p>0){if(128&p)return void N(c,u,i,s,r,n,a,o,l);if(256&p)return void O(c,u,i,s,r,n,a,o,l)}8&f?(16&h&&H(c,r,n),u!==c&&d(i,u)):16&h?16&f?N(c,u,i,s,r,n,a,o,l):H(c,r,n,!0):(8&h&&d(i,""),16&f&&S(u,i,s,r,n,a,o,l))},O=(e,t,i,s,r,n,a,o,l)=>{e=e||ct,t=t||ct;const c=e.length,d=t.length,h=Math.min(c,d);let u;for(u=0;u<h;u++){const s=t[u]=l?fo(t[u]):po(t[u]);g(e[u],s,i,null,r,n,a,o,l)}c>d?H(e,r,n,!0,!1,h):S(t,i,s,r,n,a,o,l,h)},N=(e,t,i,s,r,n,a,o,l)=>{let c=0;const d=t.length;let h=e.length-1,u=d-1;while(c<=h&&c<=u){const s=e[c],d=t[c]=l?fo(t[c]):po(t[c]);if(!io(s,d))break;g(s,d,i,null,r,n,a,o,l),c++}while(c<=h&&c<=u){const s=e[h],c=t[u]=l?fo(t[u]):po(t[u]);if(!io(s,c))break;g(s,c,i,null,r,n,a,o,l),h--,u--}if(c>h){if(c<=u){const e=u+1,h=e<d?t[e].el:s;while(c<=u)g(null,t[c]=l?fo(t[c]):po(t[c]),i,h,r,n,a,o,l),c++}}else if(c>u)while(c<=h)F(e[c],r,n,!0),c++;else{const p=c,f=c,m=new Map;for(c=f;c<=u;c++){const e=t[c]=l?fo(t[c]):po(t[c]);null!=e.key&&m.set(e.key,c)}let v,y=0;const b=u-f+1;let E=!1,w=0;const A=new Array(b);for(c=0;c<b;c++)A[c]=0;for(c=p;c<=h;c++){const s=e[c];if(y>=b){F(s,r,n,!0);continue}let d;if(null!=s.key)d=m.get(s.key);else for(v=f;v<=u;v++)if(0===A[v-f]&&io(s,t[v])){d=v;break}void 0===d?F(s,r,n,!0):(A[d-f]=c+1,d>=w?w=d:E=!0,g(s,t[d],i,null,r,n,a,o,l),y++)}const T=E?Ea(A):ct;for(v=T.length-1,c=b-1;c>=0;c--){const e=f+c,h=t[e],u=e+1<d?t[e+1].el:s;0===A[c]?g(null,h,i,u,r,n,a,o,l):E&&(v<0||c!==T[v]?B(h,i,u,2):v--)}}},B=(e,t,i,n,a=null)=>{const{el:o,type:l,transition:c,children:d,shapeFlag:h}=e;if(6&h)return void B(e.component.subTree,t,i,n);if(128&h)return void e.suspense.move(t,i,n);if(64&h)return void l.move(e,t,i,Y);if(l===Ha){s(o,t,i);for(let e=0;e<d.length;e++)B(d[e],t,i,n);return void s(e.anchor,t,i)}if(l===Va)return void b(e,t,i);const u=2!==n&&1&h&&c;if(u)if(0===n)c.beforeEnter(o),s(o,t,i),pa(()=>c.enter(o),a);else{const{leave:n,delayLeave:a,afterLeave:l}=c,d=()=>{e.ctx.isUnmounted?r(o):s(o,t,i)},h=()=>{n(o,()=>{d(),l&&l()})};a?a(o,d,h):h()}else s(o,t,i)},F=(e,t,i,s=!1,r=!1)=>{const{type:n,props:a,ref:o,children:l,dynamicChildren:c,shapeFlag:d,patchFlag:h,dirs:u,cacheIndex:p}=e;if(-2===h&&(r=!1),null!=o&&(ki(),jr(o,null,i,e,!0),Ii()),null!=p&&(t.renderCache[p]=void 0),256&d)return void t.ctx.deactivate(e);const f=1&d&&u,g=!zr(e);let m;if(g&&(m=a&&a.onVnodeBeforeUnmount)&&vo(m,t,e),6&d)G(e.component,i,s);else{if(128&d)return void e.suspense.unmount(i,s);f&&Tr(e,null,t,"beforeUnmount"),64&d?e.type.remove(e,t,i,Y,s):c&&!c.hasOnce&&(n!==Ha||h>0&&64&h)?H(c,t,i,!1,!0):(n===Ha&&384&h||!r&&16&d)&&H(l,t,i),s&&$(e)}(g&&(m=a&&a.onVnodeUnmounted)||f)&&pa(()=>{m&&vo(m,t,e),f&&Tr(e,null,t,"unmounted")},i)},$=e=>{const{type:t,el:i,anchor:s,transition:n}=e;if(t===Ha)return void U(i,s);if(t===Va)return void E(e);const a=()=>{r(i),n&&!n.persisted&&n.afterLeave&&n.afterLeave()};if(1&e.shapeFlag&&n&&!n.persisted){const{leave:t,delayLeave:s}=n,r=()=>t(i,a);s?s(e.el,a,r):r()}else a()},U=(e,t)=>{let i;while(e!==t)i=u(e),r(e),e=i;r(t)},G=(e,t,i)=>{const{bum:s,scope:r,job:n,subTree:a,um:o,m:l,a:c,parent:d,slots:{__:h}}=e;Aa(l),Aa(c),s&&Ut(s),d&&yt(h)&&h.forEach(e=>{d.renderCache[e]=void 0}),r.stop(),n&&(n.flags|=8,F(a,e,t,i)),o&&pa(o,t),pa(()=>{e.isUnmounted=!0},t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},H=(e,t,i,s=!1,r=!1,n=0)=>{for(let a=n;a<e.length;a++)F(e[a],t,i,s,r)},j=e=>{if(6&e.shapeFlag)return j(e.component.subTree);if(128&e.shapeFlag)return e.suspense.next();const t=u(e.anchor||e.el),i=t&&t[Sr];return i?u(i):t};let z=!1;const V=(e,t,i)=>{null==e?t._vnode&&F(t._vnode,null,null,!0):g(t._vnode||null,e,t,null,null,null,i),t._vnode=e,z||(z=!0,fr(),gr(),z=!1)},Y={p:g,um:F,m:B,r:$,mt:C,mc:S,pc:M,pbc:L,n:j,o:e};let W,K;return t&&([W,K]=t(Y)),{render:V,hydrate:W,createApp:zn(V,W)}}function ma({type:e,props:t},i){return"svg"===i&&"foreignObject"===e||"mathml"===i&&"annotation-xml"===e&&t&&t.encoding&&t.encoding.includes("html")?void 0:i}function va({effect:e,job:t},i){i?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function ya(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ba(e,t,i=!1){const s=e.children,r=t.children;if(yt(s)&&yt(r))for(let n=0;n<s.length;n++){const e=s[n];let t=r[n];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=r[n]=fo(r[n]),t.el=e.el),i||-2===t.patchFlag||ba(e,t)),t.type===ja&&(t.el=e.el),t.type!==za||t.el||(t.el=e.el)}}function Ea(e){const t=e.slice(),i=[0];let s,r,n,a,o;const l=e.length;for(s=0;s<l;s++){const l=e[s];if(0!==l){if(r=i[i.length-1],e[r]<l){t[s]=r,i.push(s);continue}n=0,a=i.length-1;while(n<a)o=n+a>>1,e[i[o]]<l?n=o+1:a=o;l<e[i[n]]&&(n>0&&(t[s]=i[n-1]),i[n]=s)}}n=i.length,a=i[n-1];while(n-- >0)i[n]=a,a=t[a];return i}function wa(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:wa(t)}function Aa(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Ta=Symbol.for("v-scx"),Sa=()=>{{const e=Wn(Ta);return e}};function xa(e,t){return ka(e,null,t)}function La(e,t,i){return ka(e,t,i)}function ka(e,t,i=lt){const{immediate:s,deep:r,flush:n,once:a}=i,o=ft({},i),l=t&&s||!t&&"post"!==n;let c;if(_o)if("sync"===n){const e=Sa();c=e.__watcherHandles||(e.__watcherHandles=[])}else if(!l){const e=()=>{};return e.stop=dt,e.resume=dt,e.pause=dt,e}const d=wo;o.call=(e,t,i)=>Js(e,d,t,i);let h=!1;"post"===n?o.scheduler=e=>{pa(e,d&&d.suspense)}:"sync"!==n&&(h=!0,o.scheduler=(e,t)=>{t?e():hr(e)}),o.augmentJob=e=>{t&&(e.flags|=4),h&&(e.flags|=2,d&&(e.id=d.uid,e.i=d))};const u=Xs(e,t,o);return _o&&(c?c.push(u):l&&u()),u}function Ia(e,t,i){const s=this.proxy,r=At(e)?e.includes(".")?_a(s,e):()=>s[e]:e.bind(s,s);let n;wt(t)?n=t:(n=t.handler,i=t);const a=xo(this),o=ka(r,n.bind(s),i);return a(),o}function _a(e,t){const i=t.split(".");return()=>{let t=e;for(let e=0;e<i.length&&t;e++)t=t[i[e]];return t}}const Ca=(e,t)=>"modelValue"===t||"model-value"===t?e.modelModifiers:e[`${t}Modifiers`]||e[`${Mt(t)}Modifiers`]||e[`${Nt(t)}Modifiers`];function Ra(e,t,...i){if(e.isUnmounted)return;const s=e.vnode.props||lt;let r=i;const n=t.startsWith("update:"),a=n&&Ca(s,t.slice(7));let o;a&&(a.trim&&(r=i.map(e=>At(e)?e.trim():e)),a.number&&(r=i.map(Ht)));let l=s[o=Ft(t)]||s[o=Ft(Mt(t))];!l&&n&&(l=s[o=Ft(Nt(t))]),l&&Js(l,e,6,r);const c=s[o+"Once"];if(c){if(e.emitted){if(e.emitted[o])return}else e.emitted={};e.emitted[o]=!0,Js(c,e,6,r)}}function Pa(e,t,i=!1){const s=t.emitsCache,r=s.get(e);if(void 0!==r)return r;const n=e.emits;let a={},o=!1;if(!wt(e)){const s=e=>{const i=Pa(e,t,!0);i&&(o=!0,ft(a,i))};!i&&t.mixins.length&&t.mixins.forEach(s),e.extends&&s(e.extends),e.mixins&&e.mixins.forEach(s)}return n||o?(yt(n)?n.forEach(e=>a[e]=null):ft(a,n),St(e)&&s.set(e,a),a):(St(e)&&s.set(e,null),null)}function Da(e,t){return!(!e||!ut(t))&&(t=t.slice(2).replace(/Once$/,""),vt(e,t[0].toLowerCase()+t.slice(1))||vt(e,Nt(t))||vt(e,t))}function Ma(e){const{type:t,vnode:i,proxy:s,withProxy:r,propsOptions:[n],slots:a,attrs:o,emit:l,render:c,renderCache:d,props:h,data:u,setupState:p,ctx:f,inheritAttrs:g}=e,m=Er(e);let v,y;try{if(4&i.shapeFlag){const e=r||s,t=e;v=po(c.call(t,e,d,h,p,u,f)),y=o}else{const e=t;0,v=po(e.length>1?e(h,{attrs:o,slots:a,emit:l}):e(h,null)),y=t.props?o:Oa(o)}}catch(E){Ya.length=0,er(E,e,1),v=ao(za)}let b=v;if(y&&!1!==g){const e=Object.keys(y),{shapeFlag:t}=b;e.length&&7&t&&(n&&e.some(pt)&&(y=Na(y,n)),b=co(b,y,!1,!0))}return i.dirs&&(b=co(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(i.dirs):i.dirs),i.transition&&$r(b,i.transition),v=b,Er(m),v}const Oa=e=>{let t;for(const i in e)("class"===i||"style"===i||ut(i))&&((t||(t={}))[i]=e[i]);return t},Na=(e,t)=>{const i={};for(const s in e)pt(s)&&s.slice(9)in t||(i[s]=e[s]);return i};function Ba(e,t,i){const{props:s,children:r,component:n}=e,{props:a,children:o,patchFlag:l}=t,c=n.emitsOptions;if(t.dirs||t.transition)return!0;if(!(i&&l>=0))return!(!r&&!o||o&&o.$stable)||s!==a&&(s?!a||Fa(s,a,c):!!a);if(1024&l)return!0;if(16&l)return s?Fa(s,a,c):!!a;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const i=e[t];if(a[i]!==s[i]&&!Da(c,i))return!0}}return!1}function Fa(e,t,i){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let r=0;r<s.length;r++){const n=s[r];if(t[n]!==e[n]&&!Da(i,n))return!0}return!1}function $a({vnode:e,parent:t},i){while(t){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s!==e)break;(e=t.vnode).el=i,t=t.parent}}const Ua=e=>e.__isSuspense;function Ga(e,t){t&&t.pendingBranch?yt(e)?t.effects.push(...e):t.effects.push(e):pr(e)}const Ha=Symbol.for("v-fgt"),ja=Symbol.for("v-txt"),za=Symbol.for("v-cmt"),Va=Symbol.for("v-stc"),Ya=[];let Wa=null;function Ka(e=!1){Ya.push(Wa=e?null:[])}function qa(){Ya.pop(),Wa=Ya[Ya.length-1]||null}let Xa=1;function Qa(e,t=!1){Xa+=e,e<0&&Wa&&t&&(Wa.hasOnce=!0)}function Za(e){return e.dynamicChildren=Xa>0?Wa||ct:null,qa(),Xa>0&&Wa&&Wa.push(e),e}function Ja(e,t,i,s,r,n){return Za(no(e,t,i,s,r,n,!0))}function eo(e,t,i,s,r){return Za(ao(e,t,i,s,r,!0))}function to(e){return!!e&&!0===e.__v_isVNode}function io(e,t){return e.type===t.type&&e.key===t.key}const so=({key:e})=>null!=e?e:null,ro=({ref:e,ref_key:t,ref_for:i})=>("number"===typeof e&&(e=""+e),null!=e?At(e)||Ps(e)||wt(e)?{i:yr,r:e,k:t,f:!!i}:e:null);function no(e,t=null,i=null,s=0,r=null,n=(e===Ha?0:1),a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&so(t),ref:t&&ro(t),scopeId:br,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:yr};return o?(go(l,i),128&n&&e.normalize(l)):i&&(l.shapeFlag|=At(i)?8:16),Xa>0&&!a&&Wa&&(l.patchFlag>0||6&n)&&32!==l.patchFlag&&Wa.push(l),l}const ao=oo;function oo(e,t=null,i=null,s=0,r=null,n=!1){if(e&&e!==hn||(e=za),to(e)){const s=co(e,t,!0);return i&&go(s,i),Xa>0&&!n&&Wa&&(6&s.shapeFlag?Wa[Wa.indexOf(e)]=s:Wa.push(s)),s.patchFlag=-2,s}if(Fo(e)&&(e=e.__vccOpts),t){t=lo(t);let{class:e,style:i}=t;e&&!At(e)&&(t.class=Qt(e)),St(i)&&(ks(i)&&!yt(i)&&(i=ft({},i)),t.style=Yt(i))}const a=At(e)?1:Ua(e)?128:xr(e)?64:St(e)?4:wt(e)?2:0;return no(e,t,i,s,r,a,n,!0)}function lo(e){return e?ks(e)||Qn(e)?ft({},e):e:null}function co(e,t,i=!1,s=!1){const{props:r,ref:n,patchFlag:a,children:o,transition:l}=e,c=t?mo(r||{},t):r,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&so(c),ref:t&&t.ref?i&&n?yt(n)?n.concat(ro(t)):[n,ro(t)]:ro(t):n,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ha?-1===a?16:16|a:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&co(e.ssContent),ssFallback:e.ssFallback&&co(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&s&&$r(d,l.clone(d)),d}function ho(e=" ",t=0){return ao(ja,null,e,t)}function uo(e="",t=!1){return t?(Ka(),eo(za,null,e)):ao(za,null,e)}function po(e){return null==e||"boolean"===typeof e?ao(za):yt(e)?ao(Ha,null,e.slice()):to(e)?fo(e):ao(ja,null,String(e))}function fo(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:co(e)}function go(e,t){let i=0;const{shapeFlag:s}=e;if(null==t)t=null;else if(yt(t))i=16;else if("object"===typeof t){if(65&s){const i=t.default;return void(i&&(i._c&&(i._d=!1),go(e,i()),i._c&&(i._d=!0)))}{i=32;const s=t._;s||Qn(t)?3===s&&yr&&(1===yr.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=yr}}else wt(t)?(t={default:t,_ctx:yr},i=32):(t=String(t),64&s?(i=16,t=[ho(t)]):i=8);e.children=t,e.shapeFlag|=i}function mo(...e){const t={};for(let i=0;i<e.length;i++){const s=e[i];for(const e in s)if("class"===e)t.class!==s.class&&(t.class=Qt([t.class,s.class]));else if("style"===e)t.style=Yt([t.style,s.style]);else if(ut(e)){const i=t[e],r=s[e];!r||i===r||yt(i)&&i.includes(r)||(t[e]=i?[].concat(i,r):r)}else""!==e&&(t[e]=s[e])}return t}function vo(e,t,i,s=null){Js(e,t,7,[i,s])}const yo=Hn();let bo=0;function Eo(e,t,i){const s=e.type,r=(t?t.appContext:e.appContext)||yo,n={uid:bo++,vnode:e,type:s,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new oi(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:sa(s,r),emitsOptions:Pa(s,r),emit:null,emitted:null,propsDefaults:lt,inheritAttrs:s.inheritAttrs,ctx:lt,data:lt,props:lt,attrs:lt,slots:lt,refs:lt,setupState:lt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=t?t.root:n,n.emit=Ra.bind(null,n),e.ce&&e.ce(n),n}let wo=null;const Ao=()=>wo||yr;let To,So;{const e=Vt(),t=(t,i)=>{let s;return(s=e[t])||(s=e[t]=[]),s.push(i),e=>{s.length>1?s.forEach(t=>t(e)):s[0](e)}};To=t("__VUE_INSTANCE_SETTERS__",e=>wo=e),So=t("__VUE_SSR_SETTERS__",e=>_o=e)}const xo=e=>{const t=wo;return To(e),e.scope.on(),()=>{e.scope.off(),To(t)}},Lo=()=>{wo&&wo.scope.off(),To(null)};function ko(e){return 4&e.vnode.shapeFlag}let Io,_o=!1;function Co(e,t=!1,i=!1){t&&So(t);const{props:s,children:r}=e.vnode,n=ko(e);Zn(e,s,n,t),ha(e,r,i||t);const a=n?Ro(e,t):void 0;return t&&So(!1),a}function Ro(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,wn);const{setup:s}=i;if(s){ki();const i=e.setupContext=s.length>1?Oo(e):null,r=xo(e),n=Zs(s,e,0,[e.props,i]),a=xt(n);if(Ii(),r(),!a&&!e.sp||zr(e)||Hr(e),a){if(n.then(Lo,Lo),t)return n.then(i=>{Po(e,i,t)}).catch(t=>{er(t,e,0)});e.asyncDep=n}else Po(e,n,t)}else Do(e,t)}function Po(e,t,i){wt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:St(t)&&(e.setupState=Fs(t)),Do(e,i)}function Do(e,t,i){const s=e.type;if(!e.render){if(!t&&Io&&!s.render){const t=s.template||Pn(e).template;if(t){const{isCustomElement:i,compilerOptions:r}=e.appContext.config,{delimiters:n,compilerOptions:a}=s,o=ft(ft({isCustomElement:i,delimiters:n},r),a);s.render=Io(t,o)}}e.render=s.render||dt}{const t=xo(e);ki();try{In(e)}finally{Ii(),t()}}}const Mo={get(e,t){return Fi(e,"get",""),e[t]}};function Oo(e){const t=t=>{e.exposed=t||{}};return{attrs:new Proxy(e.attrs,Mo),slots:e.slots,emit:e.emit,expose:t}}function No(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Fs(_s(e.exposed)),{get(t,i){return i in t?t[i]:i in bn?bn[i](e):void 0},has(e,t){return t in e||t in bn}})):e.proxy}function Bo(e,t=!0){return wt(e)?e.displayName||e.name:e.name||t&&e.__name}function Fo(e){return wt(e)&&"__vccOpts"in e}const $o=(e,t)=>{const i=Vs(e,t,_o);return i};function Uo(e,t,i){const s=arguments.length;return 2===s?St(t)&&!yt(t)?to(t)?ao(e,null,[t]):ao(e,t):ao(e,null,t):(s>3?i=Array.prototype.slice.call(arguments,2):3===s&&to(i)&&(i=[i]),ao(e,t,i))}const Go="3.5.17";let Ho;const jo="undefined"!==typeof window&&window.trustedTypes;if(jo)try{Ho=jo.createPolicy("vue",{createHTML:e=>e})}catch(tH){}const zo=Ho?e=>Ho.createHTML(e):e=>e,Vo="http://www.w3.org/2000/svg",Yo="http://www.w3.org/1998/Math/MathML",Wo="undefined"!==typeof document?document:null,Ko=Wo&&Wo.createElement("template"),qo={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,s)=>{const r="svg"===t?Wo.createElementNS(Vo,e):"mathml"===t?Wo.createElementNS(Yo,e):i?Wo.createElement(e,{is:i}):Wo.createElement(e);return"select"===e&&s&&null!=s.multiple&&r.setAttribute("multiple",s.multiple),r},createText:e=>Wo.createTextNode(e),createComment:e=>Wo.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Wo.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,s,r,n){const a=i?i.previousSibling:t.lastChild;if(r&&(r===n||r.nextSibling)){while(1)if(t.insertBefore(r.cloneNode(!0),i),r===n||!(r=r.nextSibling))break}else{Ko.innerHTML=zo("svg"===s?`<svg>${e}</svg>`:"mathml"===s?`<math>${e}</math>`:e);const r=Ko.content;if("svg"===s||"mathml"===s){const e=r.firstChild;while(e.firstChild)r.appendChild(e.firstChild);r.removeChild(e)}t.insertBefore(r,i)}return[a?a.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}},Xo="transition",Qo="animation",Zo=Symbol("_vtc"),Jo={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},el=ft({},Cr,Jo),tl=e=>(e.displayName="Transition",e.props=el,e),il=tl((e,{slots:t})=>Uo(Mr,nl(e),t)),sl=(e,t=[])=>{yt(e)?e.forEach(e=>e(...t)):e&&e(...t)},rl=e=>!!e&&(yt(e)?e.some(e=>e.length>1):e.length>1);function nl(e){const t={};for(const I in e)I in Jo||(t[I]=e[I]);if(!1===e.css)return t;const{name:i="v",type:s,duration:r,enterFromClass:n=`${i}-enter-from`,enterActiveClass:a=`${i}-enter-active`,enterToClass:o=`${i}-enter-to`,appearFromClass:l=n,appearActiveClass:c=a,appearToClass:d=o,leaveFromClass:h=`${i}-leave-from`,leaveActiveClass:u=`${i}-leave-active`,leaveToClass:p=`${i}-leave-to`}=e,f=al(r),g=f&&f[0],m=f&&f[1],{onBeforeEnter:v,onEnter:y,onEnterCancelled:b,onLeave:E,onLeaveCancelled:w,onBeforeAppear:A=v,onAppear:T=y,onAppearCancelled:S=b}=t,x=(e,t,i,s)=>{e._enterCancelled=s,cl(e,t?d:o),cl(e,t?c:a),i&&i()},L=(e,t)=>{e._isLeaving=!1,cl(e,h),cl(e,p),cl(e,u),t&&t()},k=e=>(t,i)=>{const r=e?T:y,a=()=>x(t,e,i);sl(r,[t,a]),dl(()=>{cl(t,e?l:n),ll(t,e?d:o),rl(r)||ul(t,s,g,a)})};return ft(t,{onBeforeEnter(e){sl(v,[e]),ll(e,n),ll(e,a)},onBeforeAppear(e){sl(A,[e]),ll(e,l),ll(e,c)},onEnter:k(!1),onAppear:k(!0),onLeave(e,t){e._isLeaving=!0;const i=()=>L(e,t);ll(e,h),e._enterCancelled?(ll(e,u),ml()):(ml(),ll(e,u)),dl(()=>{e._isLeaving&&(cl(e,h),ll(e,p),rl(E)||ul(e,s,m,i))}),sl(E,[e,i])},onEnterCancelled(e){x(e,!1,void 0,!0),sl(b,[e])},onAppearCancelled(e){x(e,!0,void 0,!0),sl(S,[e])},onLeaveCancelled(e){L(e),sl(w,[e])}})}function al(e){if(null==e)return null;if(St(e))return[ol(e.enter),ol(e.leave)];{const t=ol(e);return[t,t]}}function ol(e){const t=jt(e);return t}function ll(e,t){t.split(/\s+/).forEach(t=>t&&e.classList.add(t)),(e[Zo]||(e[Zo]=new Set)).add(t)}function cl(e,t){t.split(/\s+/).forEach(t=>t&&e.classList.remove(t));const i=e[Zo];i&&(i.delete(t),i.size||(e[Zo]=void 0))}function dl(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let hl=0;function ul(e,t,i,s){const r=e._endId=++hl,n=()=>{r===e._endId&&s()};if(null!=i)return setTimeout(n,i);const{type:a,timeout:o,propCount:l}=pl(e,t);if(!a)return s();const c=a+"end";let d=0;const h=()=>{e.removeEventListener(c,u),n()},u=t=>{t.target===e&&++d>=l&&h()};setTimeout(()=>{d<l&&h()},o+1),e.addEventListener(c,u)}function pl(e,t){const i=window.getComputedStyle(e),s=e=>(i[e]||"").split(", "),r=s(`${Xo}Delay`),n=s(`${Xo}Duration`),a=fl(r,n),o=s(`${Qo}Delay`),l=s(`${Qo}Duration`),c=fl(o,l);let d=null,h=0,u=0;t===Xo?a>0&&(d=Xo,h=a,u=n.length):t===Qo?c>0&&(d=Qo,h=c,u=l.length):(h=Math.max(a,c),d=h>0?a>c?Xo:Qo:null,u=d?d===Xo?n.length:l.length:0);const p=d===Xo&&/\b(transform|all)(,|$)/.test(s(`${Xo}Property`).toString());return{type:d,timeout:h,propCount:u,hasTransform:p}}function fl(e,t){while(e.length<t.length)e=e.concat(e);return Math.max(...t.map((t,i)=>gl(t)+gl(e[i])))}function gl(e){return"auto"===e?0:1e3*Number(e.slice(0,-1).replace(",","."))}function ml(){return document.body.offsetHeight}function vl(e,t,i){const s=e[Zo];s&&(t=(t?[t,...s]:[...s]).join(" ")),null==t?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}const yl=Symbol("_vod"),bl=Symbol("_vsh"),El={beforeMount(e,{value:t},{transition:i}){e[yl]="none"===e.style.display?"":e.style.display,i&&t?i.beforeEnter(e):wl(e,t)},mounted(e,{value:t},{transition:i}){i&&t&&i.enter(e)},updated(e,{value:t,oldValue:i},{transition:s}){!t!==!i&&(s?t?(s.beforeEnter(e),wl(e,!0),s.enter(e)):s.leave(e,()=>{wl(e,!1)}):wl(e,t))},beforeUnmount(e,{value:t}){wl(e,t)}};function wl(e,t){e.style.display=t?e[yl]:"none",e[bl]=!t}const Al=Symbol(""),Tl=/(^|;)\s*display\s*:/;function Sl(e,t,i){const s=e.style,r=At(i);let n=!1;if(i&&!r){if(t)if(At(t))for(const e of t.split(";")){const t=e.slice(0,e.indexOf(":")).trim();null==i[t]&&Ll(s,t,"")}else for(const e in t)null==i[e]&&Ll(s,e,"");for(const e in i)"display"===e&&(n=!0),Ll(s,e,i[e])}else if(r){if(t!==i){const e=s[Al];e&&(i+=";"+e),s.cssText=i,n=Tl.test(i)}}else t&&e.removeAttribute("style");yl in e&&(e[yl]=n?s.display:"",e[bl]&&(s.display="none"))}const xl=/\s*!important$/;function Ll(e,t,i){if(yt(i))i.forEach(i=>Ll(e,t,i));else if(null==i&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const s=_l(e,t);xl.test(i)?e.setProperty(Nt(s),i.replace(xl,""),"important"):e[s]=i}}const kl=["Webkit","Moz","ms"],Il={};function _l(e,t){const i=Il[t];if(i)return i;let s=Mt(t);if("filter"!==s&&s in e)return Il[t]=s;s=Bt(s);for(let r=0;r<kl.length;r++){const i=kl[r]+s;if(i in e)return Il[t]=i}return t}const Cl="http://www.w3.org/1999/xlink";function Rl(e,t,i,s,r,n=Jt(t)){s&&t.startsWith("xlink:")?null==i?e.removeAttributeNS(Cl,t.slice(6,t.length)):e.setAttributeNS(Cl,t,i):null==i||n&&!ei(i)?e.removeAttribute(t):e.setAttribute(t,n?"":Tt(i)?String(i):i)}function Pl(e,t,i,s,r){if("innerHTML"===t||"textContent"===t)return void(null!=i&&(e[t]="innerHTML"===t?zo(i):i));const n=e.tagName;if("value"===t&&"PROGRESS"!==n&&!n.includes("-")){const s="OPTION"===n?e.getAttribute("value")||"":e.value,r=null==i?"checkbox"===e.type?"on":"":String(i);return s===r&&"_value"in e||(e.value=r),null==i&&e.removeAttribute(t),void(e._value=i)}let a=!1;if(""===i||null==i){const s=typeof e[t];"boolean"===s?i=ei(i):null==i&&"string"===s?(i="",a=!0):"number"===s&&(i=0,a=!0)}try{e[t]=i}catch(tH){}a&&e.removeAttribute(r||t)}function Dl(e,t,i,s){e.addEventListener(t,i,s)}function Ml(e,t,i,s){e.removeEventListener(t,i,s)}const Ol=Symbol("_vei");function Nl(e,t,i,s,r=null){const n=e[Ol]||(e[Ol]={}),a=n[t];if(s&&a)a.value=s;else{const[i,o]=Fl(t);if(s){const a=n[t]=Hl(s,r);Dl(e,i,a,o)}else a&&(Ml(e,i,a,o),n[t]=void 0)}}const Bl=/(?:Once|Passive|Capture)$/;function Fl(e){let t;if(Bl.test(e)){let i;t={};while(i=e.match(Bl))e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}const i=":"===e[2]?e.slice(3):Nt(e.slice(2));return[i,t]}let $l=0;const Ul=Promise.resolve(),Gl=()=>$l||(Ul.then(()=>$l=0),$l=Date.now());function Hl(e,t){const i=e=>{if(e._vts){if(e._vts<=i.attached)return}else e._vts=Date.now();Js(jl(e,i.value),t,5,[e])};return i.value=e,i.attached=Gl(),i}function jl(e,t){if(yt(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(e=>t=>!t._stopped&&e&&e(t))}return t}const zl=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Vl=(e,t,i,s,r,n)=>{const a="svg"===r;"class"===t?vl(e,s,a):"style"===t?Sl(e,i,s):ut(t)?pt(t)||Nl(e,t,i,s,n):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):Yl(e,t,s,a))?(Pl(e,t,s),e.tagName.includes("-")||"value"!==t&&"checked"!==t&&"selected"!==t||Rl(e,t,s,a,n,"value"!==t)):!e._isVueCE||!/[A-Z]/.test(t)&&At(s)?("true-value"===t?e._trueValue=s:"false-value"===t&&(e._falseValue=s),Rl(e,t,s,a)):Pl(e,Mt(t),s,n,t)};function Yl(e,t,i,s){if(s)return"innerHTML"===t||"textContent"===t||!!(t in e&&zl(t)&&wt(i));if("spellcheck"===t||"draggable"===t||"translate"===t||"autocorrect"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if("width"===t||"height"===t){const t=e.tagName;if("IMG"===t||"VIDEO"===t||"CANVAS"===t||"SOURCE"===t)return!1}return(!zl(t)||!At(i))&&t in e}const Wl=["ctrl","shift","alt","meta"],Kl={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>Wl.some(i=>e[`${i}Key`]&&!t.includes(i))},ql=(e,t)=>{const i=e._withMods||(e._withMods={}),s=t.join(".");return i[s]||(i[s]=(i,...s)=>{for(let e=0;e<t.length;e++){const s=Kl[t[e]];if(s&&s(i,t))return}return e(i,...s)})},Xl=ft({patchProp:Vl},qo);let Ql;function Zl(){return Ql||(Ql=fa(Xl))}const Jl=(...e)=>{const t=Zl().createApp(...e),{mount:i}=t;return t.mount=e=>{const s=tc(e);if(!s)return;const r=t._component;wt(r)||r.render||r.template||(r.template=s.innerHTML),1===s.nodeType&&(s.textContent="");const n=i(s,!1,ec(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),n},t};function ec(e){return e instanceof SVGElement?"svg":"function"===typeof MathMLElement&&e instanceof MathMLElement?"mathml":void 0}function tc(e){if(At(e)){const t=document.querySelector(e);return t}return e}function ic(e){return t=>{const i=Wn("id"),s=Ds(t);let r,n;Jr(()=>{r=$e(i),void 0===r&&(r=Object.create({$options:{}}),Fe(r,i)),r=r.$options,n=(...e)=>s.value(...e);const t=r[e];C(t)?r[e]=n:P(t)?r[e]=[r[e],n]:D(t)&&(r[e]=[...t,n])}),rn(()=>{if(!r||!n)return;const t=r[e];t===n?r[e]=void 0:D(t)&&(r[e]=t.filter(e=>e!==n)),r=null,n=null})}}const sc=ic("onShow"),rc=ic("onHide"),nc=ic("onError"),ac=ic("onUnhandledRejection"),oc=ic("onLaunch"),lc=ic("onPageNotFound"),cc=ic("onLoad"),dc=ic("onPageScroll"),hc=ic("onPullDownRefresh"),uc=ic("onPullIntercept"),pc=ic("onReachBottom"),fc=ic("onResize"),gc=ic("onUnload"),mc=ic("onAddToFavorites"),vc=ic("onOptionMenuClick"),yc=ic("onSaveExitState"),bc=ic("onShareAppMessage"),Ec=ic("onShareTimeline"),wc=ic("onTitleClick"),Ac=ic("onReady"),Tc=()=>de.router,Sc=ic("onTabItemTap");var xc=Object.freeze({__proto__:null,useAddToFavorites:mc,useDidHide:rc,useDidShow:sc,useError:nc,useLaunch:oc,useLoad:cc,useOptionMenuClick:vc,usePageNotFound:lc,usePageScroll:dc,usePullDownRefresh:hc,usePullIntercept:uc,useReachBottom:pc,useReady:Ac,useResize:fc,useRouter:Tc,useSaveExitState:yc,useShareAppMessage:bc,useShareTimeline:Ec,useTabItemTap:Sc,useTitleClick:wc,useUnhandledRejection:ac,useUnload:gc});const Lc={install:(e,t)=>{e.taroGlobalData=t}};function kc(e){return e.writable=!0,e.enumerable=!0,e}function Ic(e){de.router=Object.assign({params:null===e||void 0===e?void 0:e.query},e)}function _c(){F.tap("getLifecycle",function(e,t){return e.$options[t]}),F.tap("createPullDownComponent",(e,t,i,s,r)=>{const n={props:{tid:String},created(){const e=r?He(t,{stamp:r}):t;Fe(this,e)}};return e.mixins=D(e.mixins)?e.mixins.push(n):[n],{render(){return i("taro-pull-to-refresh-core",{class:"hydrated"},[i(e,this.$slots.default)])}}}),F.tap("getDOMNode",e=>e.$el)}function Cc(e,t){return function(i){var s,r,n,a;i=Pc(i)?i.__vccOpts:i;const o={props:{tid:String},created(){Fe(this,t)}};if(D(i.mixins)){const e=i.mixins,t=e.length-1;(null===(s=e[t].props)||void 0===s?void 0:s.tid)?i.mixins[t]=o:i.mixins.push(o)}else i.mixins=[o];const l={setup(){Yn("id",t)},render(){return this.$slots.default()}},c="div",d=Object.assign({},i),h=(null===(a=null===(n=null===(r=d.props)||void 0===r?void 0:r.option)||void 0===n?void 0:n.default)||void 0===a?void 0:a.call(n))||{};return e(l,{key:t},{default(){return[e(c,{id:t,class:"taro_page"},[e(d,{tid:t,option:h})])]}})}}function Rc(e,t,i){let s,r=[];G(!(P(e._component)&&!Pc(e._component)),"\u5165\u53e3\u7ec4\u4ef6\u4e0d\u652f\u6301\u4f7f\u7528\u51fd\u6570\u5f0f\u7ec4\u4ef6"),_c(),e._component.render=function(){return r.slice()};const[n,a,o]=F.call("getMiniLifecycleImpl").app,l=Object.create({mount(e,i,s){const n=Cc(t,i)(e);r.push(n),this.updateAppInstance(s)},unmount(e,t){r=r.filter(t=>t.key!==e),this.updateAppInstance(t)},updateAppInstance(e){s.$forceUpdate(),s.$nextTick(e)}},{config:kc({configurable:!0,value:i}),[n]:kc({value(t){var r;if(Ic(t),s=e.mount(`#${i.appId||"app"}`),e["taroGlobalData"]){const t=e["taroGlobalData"],i=Object.keys(t),s=Object.getOwnPropertyDescriptors(t);i.forEach(e=>{Object.defineProperty(this,e,{configurable:!0,enumerable:!0,get(){return t[e]},set(i){t[e]=i}})}),Object.defineProperties(this,s)}const n=null===(r=null===s||void 0===s?void 0:s.$options)||void 0===r?void 0:r.onLaunch;P(n)&&n.call(s,t)}}),[a]:kc({value(e){var t;Ic(e);const i=null===(t=null===s||void 0===s?void 0:s.$options)||void 0===t?void 0:t.onShow;P(i)&&i.call(s,e)}}),[o]:kc({value(e){var t;const i=null===(t=null===s||void 0===s?void 0:s.$options)||void 0===t?void 0:t.onHide;P(i)&&i.call(s,e)}}),onError:kc({value(e){var t;const i=null===(t=null===s||void 0===s?void 0:s.$options)||void 0===t?void 0:t.onError;P(i)&&i.call(s,e)}}),onUnhandledRejection:kc({value(e){var t;const i=null===(t=null===s||void 0===s?void 0:s.$options)||void 0===t?void 0:t.onUnhandledRejection;P(i)&&i.call(s,e)}}),onPageNotFound:kc({value(e){var t;const i=null===(t=null===s||void 0===s?void 0:s.$options)||void 0===t?void 0:t.onPageNotFound;P(i)&&i.call(s,e)}})});return de.app=l,l}function Pc(e){return P(e)&&"__vccOpts"in e}ge(),F.tap("initNativeApi",function(e){for(const t in xc)e[t]=xc[t];e.setGlobalDataPlugin=Lc}),F.tap("proxyToRaw",function(e){return Is(e)});var Dc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};function Mc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}const Oc={ASCF:"ASCF",WEAPP:"WEAPP",SWAN:"SWAN",ALIPAY:"ALIPAY",TT:"TT",QQ:"QQ",JD:"JD",WEB:"WEB",RN:"RN",HARMONY:"HARMONY",QUICKAPP:"QUICKAPP",HARMONYHYBRID:"HARMONYHYBRID"};function Nc(){return Oc.WEB}class Bc{constructor(e,t,i){this.index=i||0,this.requestParams=e||{},this.interceptors=t||[]}proceed(e={}){if(this.requestParams=e,this.index>=this.interceptors.length)throw new Error("chain \u53c2\u6570\u9519\u8bef, \u8bf7\u52ff\u76f4\u63a5\u4fee\u6539 request.chain");const t=this._getNextInterceptor(),i=this._getNextChain(),s=t(i),r=s.catch(e=>Promise.reject(e));return Object.keys(s).forEach(e=>P(s[e])&&(r[e]=s[e])),r}_getNextInterceptor(){return this.interceptors[this.index]}_getNextChain(){return new Bc(this.requestParams,this.interceptors,this.index+1)}}let Fc=class{constructor(e){this.taroInterceptor=e,this.chain=new Bc}request(e){const t=this.chain,i=this.taroInterceptor;return t.interceptors=t.interceptors.filter(e=>e!==i).concat(i),t.proceed(Object.assign({},e))}addInterceptor(e){this.chain.interceptors.push(e)}cleanInterceptors(){this.chain=new Bc}};function $c(e){return new Fc(function(t){return e(t.requestParams)})}function Uc(e){const t=e.requestParams;let i;const s=new Promise((s,r)=>{const n=setTimeout(()=>{clearTimeout(n),r(new Error("\u7f51\u7edc\u94fe\u63a5\u8d85\u65f6,\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01"))},t&&t.timeout||6e4);i=e.proceed(t),i.then(e=>{n&&(clearTimeout(n),s(e))}).catch(e=>{n&&clearTimeout(n),r(e)})});return!C(i)&&P(i.abort)&&(s.abort=i.abort),s}function Gc(e){const t=e.requestParams,{method:i,data:s,url:r}=t;console.log(`http ${i||"GET"} --\x3e ${r} data: `,s);const n=e.proceed(t),a=n.then(e=>(console.log(`http <-- ${r} result:`,e),e));return P(n.abort)&&(a.abort=n.abort),a}const Hc=Object.freeze(Object.defineProperty({__proto__:null,logInterceptor:Gc,timeoutInterceptor:Uc},Symbol.toStringTag,{value:"Module"}));function jc(e){return e}function zc(e){return function(t,i){e.preloadData=R(t)?t:{[t]:i}}}const Vc=750,Yc={640:1.17,750:1,828:.905},Wc=20,Kc=5,qc="rpx";function Xc(e){return function(t){const{designWidth:i=Vc,deviceRatio:s=Yc,baseFontSize:r=Wc,targetUnit:n=qc,unitPrecision:a=Kc}=t;e.config=e.config||{},e.config.designWidth=i,e.config.deviceRatio=s,e.config.baseFontSize=r,e.config.targetUnit=n,e.config.unitPrecision=a}}function Qc(e){return function(t){const i=e.config||{},s=i.baseFontSize,r=i.deviceRatio||Yc,n=((e=0)=>P(i.designWidth)?i.designWidth(e):i.designWidth||Vc)(t);if(!(n in r))throw new Error(`deviceRatio \u914d\u7f6e\u4e2d\u4e0d\u5b58\u5728 ${n} \u7684\u8bbe\u7f6e\uff01`);const a=i.targetUnit||qc,o=i.unitPrecision||Kc,l=~~t;let c=1/r[n];switch(a){case"rem":c*=2*s;break;case"px":c*=2;break}let d=l/c;return o>=0&&o<=100&&(d=Number(d.toFixed(o))),d+a}}const Zc={Behavior:jc,getEnv:Nc,ENV_TYPE:Oc,Link:Fc,interceptors:Hc,Current:de,getCurrentInstance:he,options:ye,nextTick:Ke,eventCenter:ne,Events:T,getInitPxTransform:Xc,interceptorify:$c};function Jc(e=300){const t=`\nbody {\n  /* \u9632\u6b62 iOS \u9875\u9762\u6eda\u52a8 */\n  overflow: hidden;\n}\n.taro_router > .taro_page {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: #fff;\n  transform: translate(100%, 0);\n  transition: transform ${e}ms;\n  z-index: 0;\n}\n\n.taro_router > .taro_page.taro_tabbar_page,\n.taro_router > .taro_page.taro_page_show.taro_page_stationed {\n  transform: none;\n  transition: none;\n}\n\n.taro_router > .taro_page.taro_page_show {\n  transform: translate(0, 0);\n}\n`;id(t)}function ed(e,t,i){const s=`\n  .taro_router {\n    position: relative;\n    width: 100%;\n    height: 100%;\n  }\n\n  .taro_page {\n    width: 100%;\n    height: 100%;\n${t?"":"\n    overflow-x: hidden;\n    overflow-y: scroll;\n    max-height: 100vh;\n"}\n  }\n${e?"\n  .taro-tabbar__container {\n      height:100%;\n  }\n  .taro-tabbar__panel {\n      height: 100%;\n  }\n  .taro-tabbar__container > .taro-tabbar__panel {\n    overflow: hidden;\n  }\n\n  .taro-tabbar__container > .taro-tabbar__panel > .taro_page.taro_tabbar_page {\n    max-height: calc(100vh - var(--taro-tabbar-height) - constant(safe-area-inset-bottom));\n    max-height: calc(100vh - var(--taro-tabbar-height) - env(safe-area-inset-bottom));\n  }\n\n":""}\n${i?".taro_page_shade:has(+.taro_page_stationed),\n  .taro_page_shade.taro_tabbar_page,\n  .taro_router > .taro_page.taro_page_show.taro_page_stationed:not(.taro_page_shade):not(.taro_tabbar_page):not(:last-child):has(+.taro_page_stationed) {\n    display: none;\n  }":" .taro_page_shade,\n  .taro_router > .taro_page.taro_page_show.taro_page_stationed:not(.taro_page_shade):not(.taro_tabbar_page):not(:last-child) {\n    display: none;\n  }"}\n`;id(s)}function td(){const e="\n  .taro-navigation-bar-show {\n    display: flex;\n    background: white;\n    position: sticky;\n    z-index: 500;\n    top: 0;\n    padding-bottom: 8px;\n    padding-top: calc(env(safe-area-inset-top) + 8px);\n    justify-content: center;\n    align-items: center;\n  }\n\n  .taro-navigation-bar-hide {\n    display: none;\n  }\n\n  .taro-navigation-bar-title-wrap {\n    display: flex;\n    height: 24px;\n  }\n\n  .taro-navigation-bar-title-wrap > .taro-navigation-bar-loading {\n    display: none;\n    animation: loading 2s linear infinite;\n  }\n\n  .taro-navigation-bar-title-wrap .taro-navigation-bar-loading.taro-navigation-bar-loading-show {\n    display: flex;\n  }\n\n  .taro-navigation-bar-title-wrap > .taro-navigation-bar-title {\n    font-size: 24px;\n    height: 24px;\n    line-height: 24px;\n    max-width: 100px;\n    white-space: nowrap;\n    overflow: hidden;\n    line-height: 24px;\n    text-overflow: ellipsis;\n  }\n\n  @keyframes loading {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n\n  @keyframes loading {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n\n  .taro-navigation-bar-no-icon > .taro-navigation-bar-home {\n    display: none;\n  }\n\n  .taro-navigation-bar-no-icon > .taro-navigation-bar-back {\n    display: none;\n  }\n\n  .taro-navigation-bar-home-icon > .taro-navigation-bar-home {\n    display: flex;\n    left: 8px;\n    position: absolute;\n    width: 24px;\n    height: 24px;\n  }\n\n  .taro-navigation-bar-back-icon > .taro-navigation-bar-back {\n    display: flex;\n    left: 8px;\n    position: absolute;\n    width: 24px;\n    height: 24px;\n  }\n";id(e)}function id(e){if(!e)return;const t=document.createElement("style");t.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(t)}Zc.initPxTransform=Xc(Zc),Zc.preload=zc(de),Zc.pxTransform=Qc(Zc);const sd='\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M23.8899 12.2737C23.8232 12.3584 23.7237 12.3997 23.6198 12.3974H20.7994V23.5996C20.7994 23.8194 20.6213 24 20.4001 24H14.7994C14.5791 24 14.4002 23.8194 14.4002 23.5996V15.6H9.59963V23.5996C9.59963 23.8194 9.42075 24 9.20033 24H3.59968C3.48981 24 3.38964 23.954 3.31764 23.8811C3.24495 23.8091 3.2004 23.7087 3.2004 23.5996V12.3975H0.398546V12.3967C0.296893 12.396 0.194446 12.3544 0.11579 12.2738C-0.0371146 12.114 -0.0400714 11.864 0.11579 11.7076L11.7201 0.117284C11.8767 -0.0390948 12.1298 -0.0390948 12.2863 0.117284L23.8899 11.7076C24.0465 11.864 24.0265 12.0995 23.8899 12.2737ZM12.0029 0.964625L1.37086 11.5854L3.59968 11.5839V11.5999C3.65537 11.5999 3.70804 11.611 3.75557 11.6307C3.89952 11.692 4.00046 11.8339 4.00046 11.9996V23.1991H8.79955V15.2003C8.79955 14.9789 8.97917 14.8002 9.20033 14.8002H14.7995C15.0207 14.8002 15.2003 14.9789 15.2003 15.2003V23.1991H20.0001V11.9996C20.0001 11.8339 20.1003 11.692 20.2443 11.6307C20.2918 11.611 20.3453 11.5999 20.4001 11.5999V11.5713L22.6193 11.5691L12.0029 0.964625Z" fill="currentColor"/>\n</svg>\n',rd='\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M17.8206 22.9016L7.45515 11.8756L17.8206 1.09845C18.0598 0.849741 18.0598 0.435233 17.8206 0.186528C17.5814 -0.0621762 17.1827 -0.0621762 16.9435 0.186528L6.1794 11.4611C5.9402 11.7098 5.9402 12.1244 6.1794 12.3731L16.9435 23.8135C17.1827 24.0622 17.5814 24.0622 17.8206 23.8135C18.0598 23.5648 18.0598 23.1503 17.8206 22.9016Z" fill="currentColor"/>\n</svg>\n',nd='\n<svg t="1709608074670" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4741" width="24" height="24"><path d="M256 529.066667H85.333333a17.066667 17.066667 0 1 1 0-34.133334h170.666667a17.066667 17.066667 0 0 1 0 34.133334z" opacity=".278" p-id="4742"></path><path d="M99.84 640a17.066667 17.066667 0 0 1-4.437333-33.553067l164.693333-44.373333a17.066667 17.066667 0 1 1 8.891733 32.9728l-164.693333 44.373333a17.544533 17.544533 0 0 1-4.4544 0.580267z" opacity=".322" p-id="4743"></path><path d="M264.533333 462.523733a16.896 16.896 0 0 1-4.369066-0.580266l-164.693334-43.52a17.0496 17.0496 0 1 1 8.721067-32.989867l164.693333 43.52a17.066667 17.066667 0 1 1-4.352 33.570133z" opacity=".239" p-id="4744"></path><path d="M384.017067 307.2a17.032533 17.032533 0 0 1-14.7968-8.533333l-85.333334-147.626667a17.066667 17.066667 0 0 1 29.559467-17.083733l85.333333 147.626666A17.066667 17.066667 0 0 1 384.017067 307.2z" opacity=".122" p-id="4745"></path><path d="M639.982933 307.2a17.0496 17.0496 0 0 1-14.762666-25.6l85.333333-147.626667a17.066667 17.066667 0 1 1 29.559467 17.066667l-85.333334 147.626667a17.032533 17.032533 0 0 1-14.7968 8.533333z" opacity=".922" p-id="4746"></path><path d="M692.906667 347.306667a17.066667 17.066667 0 0 1-12.117334-29.098667l120.337067-121.173333a17.066667 17.066667 0 1 1 24.234667 24.046933l-120.337067 121.173333a17.1008 17.1008 0 0 1-12.117333 5.051734z" opacity=".878" p-id="4747"></path><path d="M733.883733 401.066667a17.066667 17.066667 0 0 1-8.5504-31.8464l147.626667-85.333334a17.0496 17.0496 0 1 1 17.066667 29.5424l-147.626667 85.333334a16.776533 16.776533 0 0 1-8.516267 2.304z" opacity=".839" p-id="4748"></path><path d="M512 273.066667a17.066667 17.066667 0 0 1-17.066667-17.066667V85.333333a17.066667 17.066667 0 0 1 34.133334 0v170.666667a17.066667 17.066667 0 0 1-17.066667 17.066667z" p-id="4749"></path><path d="M578.577067 281.6a17.066667 17.066667 0 0 1-16.520534-21.418667l43.52-164.693333a17.066667 17.066667 0 0 1 33.006934 8.721067l-43.52 164.693333a17.066667 17.066667 0 0 1-16.4864 12.6976z" opacity=".961" p-id="4750"></path><path d="M445.44 282.453333a17.066667 17.066667 0 0 1-16.469333-12.629333l-44.373334-164.693333a17.066667 17.066667 0 0 1 32.955734-8.891734l44.373333 164.693334a17.066667 17.066667 0 0 1-16.4864 21.521066z" opacity=".078" p-id="4751"></path><path d="M924.177067 640c-1.4848 0-2.9696-0.187733-4.4544-0.580267l-164.693334-44.373333a17.066667 17.066667 0 0 1 8.874667-32.9728l164.693333 44.373333a17.066667 17.066667 0 0 1-4.420266 33.553067z" opacity=".722" p-id="4752"></path><path d="M881.476267 742.4a17.015467 17.015467 0 0 1-8.482134-2.269867l-148.48-85.333333a17.0496 17.0496 0 1 1 16.9984-29.5936l148.48 85.333333a17.0496 17.0496 0 0 1-8.516266 31.863467z" opacity=".678" p-id="4753"></path><path d="M813.226667 830.293333a17.015467 17.015467 0 0 1-12.066134-5.000533l-120.337066-120.337067a17.0496 17.0496 0 1 1 24.132266-24.132266l120.337067 120.337066a17.0496 17.0496 0 0 1-12.066133 29.1328z" opacity=".639" p-id="4754"></path><path d="M938.666667 529.066667H768a17.066667 17.066667 0 1 1 0-34.133334h170.666667a17.066667 17.066667 0 1 1 0 34.133334z" opacity=".761" p-id="4755"></path><path d="M401.066667 941.226667a17.066667 17.066667 0 0 1-16.4864-21.504l44.373333-164.693334a17.066667 17.066667 0 1 1 32.955733 8.874667l-44.373333 164.693333a17.066667 17.066667 0 0 1-16.469333 12.629334z" opacity=".478" p-id="4756"></path><path d="M298.6496 898.56a17.066667 17.066667 0 0 1-14.779733-25.565867l85.333333-148.48a17.083733 17.083733 0 0 1 29.5936 16.9984l-85.333333 148.48a17.032533 17.032533 0 0 1-14.813867 8.567467z" opacity=".439" p-id="4757"></path><path d="M512 955.733333a17.066667 17.066667 0 0 1-17.066667-17.066666V768a17.066667 17.066667 0 1 1 34.133334 0v170.666667a17.066667 17.066667 0 0 1-17.066667 17.066666z" opacity=".522" p-id="4758"></path><path d="M725.3504 898.56a17.032533 17.032533 0 0 1-14.7968-8.533333l-85.333333-147.626667a17.066667 17.066667 0 0 1 29.559466-17.066667l85.333334 147.626667a17.066667 17.066667 0 0 1-14.762667 25.6z" opacity=".6" p-id="4759"></path><path d="M622.062933 942.08c-7.509333 0-14.421333-5.0176-16.469333-12.629333l-44.3904-164.693334a17.066667 17.066667 0 1 1 32.9728-8.874666l44.3904 164.693333a17.066667 17.066667 0 0 1-16.503467 21.504z" opacity=".561" p-id="4760"></path><path d="M759.4496 463.36a17.083733 17.083733 0 0 1-4.420267-33.553067l164.693334-44.373333a17.066667 17.066667 0 0 1 8.874666 32.955733l-164.693333 44.373334a16.657067 16.657067 0 0 1-4.4544 0.597333z" opacity=".702" p-id="4761"></path><path d="M330.24 347.306667a17.015467 17.015467 0 0 1-12.066133-5.000534l-120.32-120.32a17.0496 17.0496 0 1 1 24.132266-24.132266l120.32 120.32a17.0496 17.0496 0 0 1-12.066133 29.1328z" opacity=".161" p-id="4762"></path><path d="M290.116267 401.066667a17.032533 17.032533 0 0 1-8.533334-2.286934l-147.626666-85.333333a17.066667 17.066667 0 1 1 17.083733-29.5424l147.626667 85.333333a17.066667 17.066667 0 0 1-8.5504 31.829334z" opacity=".2" p-id="4763"></path><path d="M142.523733 742.4a17.066667 17.066667 0 0 1-8.567466-31.8464l147.626666-85.333333a17.066667 17.066667 0 1 1 17.083734 29.559466l-147.626667 85.333334a16.930133 16.930133 0 0 1-8.516267 2.286933z" opacity=".361" p-id="4764"></path><path d="M209.92 830.293333a17.066667 17.066667 0 0 1-12.117333-29.098666l120.32-121.173334a17.066667 17.066667 0 0 1 24.2176 24.029867l-120.32 121.1904a16.896 16.896 0 0 1-12.100267 5.051733z" opacity=".4" p-id="4765"></path></svg>\n';function ad(e,t){if("multi"===e.router.mode)return;const i=document.createElement("div");i.classList.add("taro-navigation-bar-no-icon");const s=document.createElement("div");s.classList.add("taro-navigation-bar-back");const r=document.createElement("div");r.classList.add("taro-navigation-bar-home"),s.innerHTML=rd,r.innerHTML=sd;const n=document.createElement("div");n.classList.add("taro-navigation-bar-title-wrap");const a=document.createElement("div");a.classList.add("taro-navigation-bar-loading"),a.innerHTML=nd;const o=document.createElement("div");o.classList.add("taro-navigation-bar-title"),n.appendChild(a),n.appendChild(o),i.appendChild(r),i.appendChild(s),i.appendChild(n),i.id="taro-navigation-bar",t.insertBefore(i,t.firstChild),td()}const od={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let ld,cd,dd,hd=!1,ud=!1,pd=!1,fd=!1,gd=null,md=!1;const vd=(e,t="")=>()=>{},yd="http://www.w3.org/1999/xlink",bd={},Ed="http://www.w3.org/2000/svg",wd="http://www.w3.org/1999/xhtml",Ad=e=>null!=e,Td=e=>(e=typeof e,"object"===e||"function"===e);function Sd(e){var t,i,s;return null!==(s=null===(i=null===(t=e.head)||void 0===t?void 0:t.querySelector('meta[name="csp-nonce"]'))||void 0===i?void 0:i.getAttribute("content"))&&void 0!==s?s:void 0}const xd=(e,t,...i)=>{let s=null,r=null,n=null,a=!1,o=!1;const l=[],c=t=>{for(let i=0;i<t.length;i++)s=t[i],Array.isArray(s)?c(s):null!=s&&"boolean"!==typeof s&&((a="function"!==typeof e&&!Td(s))&&(s=String(s)),a&&o?l[l.length-1].$text$+=s:l.push(a?Ld(null,s):s),o=a)};if(c(i),t){t.key&&(r=t.key),t.name&&(n=t.name);{const e=t.className||t.class;e&&(t.class="object"!==typeof e?e:Object.keys(e).filter(t=>e[t]).join(" "))}}if("function"===typeof e)return e(null===t?{}:t,l,_d);const d=Ld(e,null);return d.$attrs$=t,l.length>0&&(d.$children$=l),d.$key$=r,d.$name$=n,d},Ld=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null};return i},kd={},Id=e=>e&&e.$tag$===kd,_d={forEach:(e,t)=>e.map(Cd).forEach(t),map:(e,t)=>e.map(Cd).map(t).map(Rd)},Cd=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),Rd=e=>{if("function"===typeof e.vtag){const t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),xd(e.vtag,t,...e.vchildren||[])}const t=Ld(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},Pd=e=>Mh.map(t=>t(e)).find(e=>!!e),Dd=(e,t)=>null==e||Td(e)?e:4&t?"false"!==e&&(""===e||!!e):2&t?parseFloat(e):1&t?String(e):e,Md=e=>e,Od=(e,t,i)=>{const s=Md(e);return{emit:e=>Nd(s,t,{bubbles:!!(4&i),composed:!!(2&i),cancelable:!!(1&i),detail:e})}},Nd=(e,t,i)=>{const s=Fh.ce(t,i);return e.dispatchEvent(s),s},Bd=new WeakMap,Fd=(e,t,i)=>{let s=Dh.get(e);Gh&&i?(s=s||new CSSStyleSheet,"string"===typeof s?s=t:s.replaceSync(t)):s=t,Dh.set(e,s)},$d=(e,t,i,s)=>{var r;let n=Gd(t,i);const a=Dh.get(n);if(e=11===e.nodeType?e:Nh,a)if("string"===typeof a){e=e.head||e;let t,i=Bd.get(e);if(i||Bd.set(e,i=new Set),!i.has(n)){{t=Nh.createElement("style"),t.innerHTML=a;const i=null!==(r=Fh.$nonce$)&&void 0!==r?r:Sd(Nh);null!=i&&t.setAttribute("nonce",i),e.insertBefore(t,e.querySelector("link"))}i&&i.add(n)}}else e.adoptedStyleSheets.includes(a)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,a]);return n},Ud=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,s=t.$flags$,r=vd("attachStyles",t.$tagName$),n=$d(i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);10&s&&(i["s-sc"]=n,i.classList.add(n+"-h"),2&s&&i.classList.add(n+"-s")),r()},Gd=(e,t)=>"sc-"+(t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$),Hd=(e,t,i,s,r,n)=>{if(i!==s){let a=Rh(e,t),o=t.toLowerCase();if("class"===t){const t=e.classList,r=zd(i),n=zd(s);t.remove(...r.filter(e=>e&&!n.includes(e))),t.add(...n.filter(e=>e&&!r.includes(e)))}else if("style"===t){for(const t in i)s&&null!=s[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in s)i&&s[t]===i[t]||(t.includes("-")?e.style.setProperty(t,s[t]):e.style[t]=s[t])}else if("key"===t);else if("ref"===t)s&&s(e);else if(e.__lookupSetter__(t)||"o"!==t[0]||"n"!==t[1]){const l=Td(s);if((a||l&&null!==s)&&!r)try{if(e.tagName.includes("-"))e[t]=s;else{const r=null==s?"":s;"list"===t?a=!1:null!=i&&e[t]==r||(e[t]=r)}}catch(tH){}let c=!1;o!==(o=o.replace(/^xlink\:?/,""))&&(t=o,c=!0),null==s||!1===s?!1===s&&""!==e.getAttribute(t)||(c?e.removeAttributeNS(yd,t):e.removeAttribute(t)):(!a||4&n||r)&&!l&&(s=!0===s?"":s,c?e.setAttributeNS(yd,t,s):e.setAttribute(t,s))}else t="-"===t[2]?t.slice(3):Rh(Oh,o)?o.slice(2):o[2]+t.slice(3),i&&Fh.rel(e,t,i,!1),s&&Fh.ael(e,t,s,!1)}},jd=/\s/,zd=e=>e?e.split(jd):[],Vd=(e,t,i,s)=>{const r=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,n=e&&e.$attrs$||bd,a=t.$attrs$||bd;for(s in n)s in a||Hd(r,s,n[s],void 0,i,t.$flags$);for(s in a)Hd(r,s,n[s],a[s],i,t.$flags$)},Yd=(e,t,i,s)=>{const r=t.$children$[i];let n,a,o,l=0;if(hd||(pd=!0,"slot"===r.$tag$&&(ld&&s.classList.add(ld+"-s"),r.$flags$|=r.$children$?2:1)),null!==r.$text$)n=r.$elm$=Nh.createTextNode(r.$text$);else if(1&r.$flags$)n=r.$elm$=Nh.createTextNode("");else{if(fd||(fd="svg"===r.$tag$),n=r.$elm$=Nh.createElementNS(fd?Ed:wd,2&r.$flags$?"slot-fb":r.$tag$),fd&&"foreignObject"===r.$tag$&&(fd=!1),Vd(null,r,fd),Ad(ld)&&n["s-si"]!==ld&&n.classList.add(n["s-si"]=ld),r.$children$)for(l=0;l<r.$children$.length;++l)a=Yd(e,r,l,n),a&&n.appendChild(a);"svg"===r.$tag$?fd=!1:"foreignObject"===n.tagName&&(fd=!0)}return n["s-hn"]=dd,3&r.$flags$&&(n["s-sr"]=!0,n["s-cr"]=cd,n["s-sn"]=r.$name$||"",o=e&&e.$children$&&e.$children$[i],o&&o.$tag$===r.$tag$&&e.$elm$&&Wd(e.$elm$,!1)),n},Wd=(e,t)=>{Fh.$flags$|=1;const i=e.childNodes;for(let s=i.length-1;s>=0;s--){const e=i[s];e["s-hn"]!==dd&&e["s-ol"]&&(Jd(e).insertBefore(e,Zd(e)),e["s-ol"].remove(),e["s-ol"]=void 0,pd=!0),t&&Wd(e,t)}Fh.$flags$&=-2},Kd=(e,t,i,s,r,n)=>{let a,o=e["s-cr"]&&e["s-cr"].parentNode||e;for(o.shadowRoot&&o.tagName===dd&&(o=o.shadowRoot);r<=n;++r)s[r]&&(a=Yd(null,i,r,e),a&&(s[r].$elm$=a,o.insertBefore(a,Zd(t))))},qd=(e,t,i,s,r)=>{for(;t<=i;++t)(s=e[t])&&(r=s.$elm$,nh(s),ud=!0,r["s-ol"]?r["s-ol"].remove():Wd(r,!0),r.remove())},Xd=(e,t,i,s)=>{let r,n,a=0,o=0,l=0,c=0,d=t.length-1,h=t[0],u=t[d],p=s.length-1,f=s[0],g=s[p];while(a<=d&&o<=p)if(null==h)h=t[++a];else if(null==u)u=t[--d];else if(null==f)f=s[++o];else if(null==g)g=s[--p];else if(Qd(h,f))eh(h,f),h=t[++a],f=s[++o];else if(Qd(u,g))eh(u,g),u=t[--d],g=s[--p];else if(Qd(h,g))"slot"!==h.$tag$&&"slot"!==g.$tag$||Wd(h.$elm$.parentNode,!1),eh(h,g),e.insertBefore(h.$elm$,u.$elm$.nextSibling),h=t[++a],g=s[--p];else if(Qd(u,f))"slot"!==h.$tag$&&"slot"!==g.$tag$||Wd(u.$elm$.parentNode,!1),eh(u,f),e.insertBefore(u.$elm$,h.$elm$),u=t[--d],f=s[++o];else{for(l=-1,c=a;c<=d;++c)if(t[c]&&null!==t[c].$key$&&t[c].$key$===f.$key$){l=c;break}l>=0?(n=t[l],n.$tag$!==f.$tag$?r=Yd(t&&t[o],i,l,e):(eh(n,f),t[l]=void 0,r=n.$elm$),f=s[++o]):(r=Yd(t&&t[o],i,o,e),f=s[++o]),r&&Jd(h.$elm$).insertBefore(r,Zd(h.$elm$))}a>d?Kd(e,null==s[p+1]?null:s[p+1].$elm$,i,s,o,p):o>p&&qd(t,a,d)},Qd=(e,t)=>e.$tag$===t.$tag$&&("slot"===e.$tag$?e.$name$===t.$name$:e.$key$===t.$key$),Zd=e=>e&&e["s-ol"]||e,Jd=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,eh=(e,t)=>{const i=t.$elm$=e.$elm$,s=e.$children$,r=t.$children$,n=t.$tag$,a=t.$text$;let o;null===a?(fd="svg"===n||"foreignObject"!==n&&fd,"slot"===n||Vd(e,t,fd),null!==s&&null!==r?Xd(i,s,t,r):null!==r?(null!==e.$text$&&(i.textContent=""),Kd(i,null,t,r,0,r.length-1)):null!==s&&qd(s,0,s.length-1),fd&&"svg"===n&&(fd=!1)):(o=i["s-cr"])?o.parentNode.textContent=a:e.$text$!==a&&(i.data=a)},th=e=>{const t=e.childNodes;let i,s,r,n,a,o;for(s=0,r=t.length;s<r;s++)if(i=t[s],1===i.nodeType){if(i["s-sr"])for(a=i["s-sn"],i.hidden=!1,n=0;n<r;n++)if(o=t[n].nodeType,t[n]["s-hn"]!==i["s-hn"]||""!==a){if(1===o&&a===t[n].getAttribute("slot")){i.hidden=!0;break}}else if(1===o||3===o&&""!==t[n].textContent.trim()){i.hidden=!0;break}th(i)}},ih=[],sh=e=>{let t,i,s,r,n,a,o=0;const l=e.childNodes,c=l.length;for(;o<c;o++){if(t=l[o],t["s-sr"]&&(i=t["s-cr"])&&i.parentNode)for(s=i.parentNode.childNodes,r=t["s-sn"],a=s.length-1;a>=0;a--)i=s[a],i["s-cn"]||i["s-nr"]||i["s-hn"]===t["s-hn"]||(rh(i,r)?(n=ih.find(e=>e.$nodeToRelocate$===i),ud=!0,i["s-sn"]=i["s-sn"]||r,n?n.$slotRefNode$=t:ih.push({$slotRefNode$:t,$nodeToRelocate$:i}),i["s-sr"]&&ih.map(e=>{rh(e.$nodeToRelocate$,i["s-sn"])&&(n=ih.find(e=>e.$nodeToRelocate$===i),n&&!e.$slotRefNode$&&(e.$slotRefNode$=n.$slotRefNode$))})):ih.some(e=>e.$nodeToRelocate$===i)||ih.push({$nodeToRelocate$:i}));1===t.nodeType&&sh(t)}},rh=(e,t)=>1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t,nh=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(nh)},ah=(e,t)=>{const i=e.$hostElement$,s=e.$cmpMeta$,r=e.$vnode$||Ld(null,null),n=Id(t)?t:xd(null,null,t);if(dd=i.tagName,s.$attrsToReflect$&&(n.$attrs$=n.$attrs$||{},s.$attrsToReflect$.map(([e,t])=>n.$attrs$[t]=i[e])),n.$tag$=null,n.$flags$|=4,e.$vnode$=n,n.$elm$=r.$elm$=i.shadowRoot||i,ld=i["s-sc"],cd=i["s-cr"],hd=0!==(1&s.$flags$),ud=!1,eh(r,n),Fh.$flags$|=1,pd){let e,t,i,s,r,a;sh(n.$elm$);let o=0;for(;o<ih.length;o++)e=ih[o],t=e.$nodeToRelocate$,t["s-ol"]||(i=Nh.createTextNode(""),i["s-nr"]=t,t.parentNode.insertBefore(t["s-ol"]=i,t));for(o=0;o<ih.length;o++)if(e=ih[o],t=e.$nodeToRelocate$,e.$slotRefNode$){s=e.$slotRefNode$.parentNode,r=e.$slotRefNode$.nextSibling,i=t["s-ol"];while(i=i.previousSibling)if(a=i["s-nr"],a&&a["s-sn"]===t["s-sn"]&&s===a.parentNode&&(a=a.nextSibling,!a||!a["s-nr"])){r=a;break}(!r&&s!==t.parentNode||t.nextSibling!==r)&&t!==r&&(!t["s-hn"]&&t["s-ol"]&&(t["s-hn"]=t["s-ol"].parentNode.nodeName),s.insertBefore(t,r))}else 1===t.nodeType&&(t.hidden=!0)}ud&&th(n.$elm$),Fh.$flags$&=-2,ih.length=0},oh=(e,t)=>{},lh=(e,t)=>{e.$flags$|=16,oh(e,e.$ancestorComponent$);const i=()=>ch(e,t);return Kh(i)},ch=(e,t)=>{const i=e.$hostElement$,s=vd("scheduleUpdate",e.$cmpMeta$.$tagName$),r=i;let n;return n=ph(r,t?"componentWillLoad":"componentWillUpdate"),n=fh(n,()=>ph(r,"componentWillRender")),s(),fh(n,()=>dh(e,r,t))},dh=(e,t,i)=>d(void 0,null,function*(){const s=e.$hostElement$,r=vd("update",e.$cmpMeta$.$tagName$);s["s-rc"],i&&Ud(e);const n=vd("render",e.$cmpMeta$.$tagName$);hh(e,t,s),n(),r(),uh(e)}),hh=(e,t,i)=>{const s=!1,r=!1,n=!0,a=!0;try{gd=t,t=(s||t.render)&&t.render(),a&&n&&(e.$flags$&=-17),(a||r)&&(e.$flags$|=2),(od.hasRenderFn||od.reflect)&&(od.vdomRender||od.reflect)&&(od.hydrateServerSide||ah(e,t))}catch(tH){Ph(tH,e.$hostElement$)}return gd=null,null},uh=e=>{const t=e.$cmpMeta$.$tagName$,i=e.$hostElement$,s=vd("postUpdate",t),r=i;e.$ancestorComponent$,ph(r,"componentDidRender"),64&e.$flags$?(ph(r,"componentDidUpdate"),s()):(e.$flags$|=64,ph(r,"componentDidLoad"),s())},ph=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(tH){Ph(tH)}},fh=(e,t)=>e&&e.then?e.then(t):t(),gh=(e,t)=>_h(e).$instanceValues$.get(t),mh=(e,t,i,s)=>{const r=_h(e),n=e,a=r.$instanceValues$.get(t),o=r.$flags$,l=n;i=Dd(i,s.$members$[t][0]);const c=Number.isNaN(a)&&Number.isNaN(i),d=i!==a&&!c;if(d){if(r.$instanceValues$.set(t,i),s.$watchers$&&128&o){const e=s.$watchers$[t];e&&e.map(e=>{try{l[e](i,a,t)}catch(tH){Ph(tH,n)}})}if(2===(18&o)){if(l.componentShouldUpdate&&!1===l.componentShouldUpdate(i,a,t))return;lh(r,!1)}}},vh=(e,t,i)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const i=Object.entries(t.$members$),s=e.prototype;i.map(([e,[i]])=>{(31&i||32&i)&&Object.defineProperty(s,e,{get(){return gh(this,e)},set(i){mh(this,e,i,t)},configurable:!0,enumerable:!0})});{const r=new Map;s.attributeChangedCallback=function(e,t,i){Fh.jmp(()=>{const t=r.get(e);if(this.hasOwnProperty(t))i=this[t],delete this[t];else if(s.hasOwnProperty(t)&&"number"===typeof this[t]&&this[t]==i)return;this[t]=(null!==i||"boolean"!==typeof this[t])&&i})},e.observedAttributes=i.filter(([e,t])=>15&t[0]).map(([e,i])=>{const s=i[1]||e;return r.set(s,e),512&i[0]&&t.$attrsToReflect$.push([e,s]),s})}}return e},yh=(e,t,i,s,r)=>d(void 0,null,function*(){if(0===(32&t.$flags$)&&(r=e.constructor,t.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>t.$flags$|=128),r.style)){let s=r.style;"string"!==typeof s&&(s=s[t.$modeName$=Pd(e)]);const n=Gd(i,t.$modeName$);if(!Dh.has(n)){const e=vd("registerStyles",i.$tagName$);Fd(n,s,!!(1&i.$flags$)),e()}}t.$ancestorComponent$;const s=()=>lh(t,!0);s()}),bh=e=>{},Eh=e=>{if(0===(1&Fh.$flags$)){const t=_h(e),i=t.$cmpMeta$,s=vd("connectedCallback",i.$tagName$);1&t.$flags$?(Sh(e,t,i.$listeners$),bh(t.$lazyInstance$)):(t.$flags$|=1,12&i.$flags$&&wh(e),i.$members$&&Object.entries(i.$members$).map(([t,[i]])=>{if(31&i&&e.hasOwnProperty(t)){const i=e[t];delete e[t],e[t]=i}}),yh(e,t,i)),s()}},wh=e=>{const t=e["s-cr"]=Nh.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},Ah=e=>{if(0===(1&Fh.$flags$)){const t=_h(e);t.$rmListeners$&&(t.$rmListeners$.map(e=>e()),t.$rmListeners$=void 0)}},Th=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};i.$members$=t[2],i.$listeners$=t[3],i.$watchers$=e.$watchers$,i.$attrsToReflect$=[];const s=e.prototype.connectedCallback,r=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){Ch(this,i)},connectedCallback(){Eh(this),s&&s.call(this)},disconnectedCallback(){Ah(this),r&&r.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(16&i.$flags$)})}}),e.is=i.$tagName$,vh(e,i)},Sh=(e,t,i,s)=>{i&&i.map(([i,s,r])=>{const n=Lh(e,i),a=xh(t,r),o=kh(i);Fh.ael(n,s,a,o),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>Fh.rel(n,s,a,o))})},xh=(e,t)=>i=>{try{od.lazyLoad||e.$hostElement$[t](i)}catch(tH){Ph(tH)}},Lh=(e,t)=>4&t?Nh:8&t?Oh:16&t?Nh.body:e,kh=e=>$h?{passive:0!==(1&e),capture:0!==(2&e)}:0!==(2&e),Ih=new WeakMap,_h=e=>Ih.get(e),Ch=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return Sh(e,i,t.$listeners$),Ih.set(e,i)},Rh=(e,t)=>t in e,Ph=(e,t)=>(0,console.error)(e,t),Dh=new Map,Mh=[],Oh="undefined"!==typeof window?window:{},Nh=Oh.document||{head:{}},Bh=Oh.HTMLElement||class{},Fh={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,s)=>e.addEventListener(t,i,s),rel:(e,t,i,s)=>e.removeEventListener(t,i,s),ce:(e,t)=>new CustomEvent(e,t)},$h=(()=>{let e=!1;try{Nh.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch(tH){}return e})(),Uh=e=>Promise.resolve(e),Gh=(()=>{try{return new CSSStyleSheet,"function"===typeof(new CSSStyleSheet).replaceSync}catch(tH){}return!1})(),Hh=[],jh=[],zh=(e,t)=>i=>{e.push(i),md||(md=!0,t&&4&Fh.$flags$?Wh(Yh):Fh.raf(Yh))},Vh=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(tH){Ph(tH)}e.length=0},Yh=()=>{Vh(Hh),Vh(jh),(md=Hh.length>0)&&Fh.raf(Yh)},Wh=e=>Uh().then(e),Kh=zh(jh,!0);function qh(e="",t={}){console.error(`H5 \u6682\u4e0d\u652f\u6301 ${e} \u7ec4\u4ef6\uff01`),US.eventCenter.trigger("__taroNotSupport",{name:e,instance:t,type:"component",category:"temporarily"})}function Xh(e){var t;null===(t=null===e||void 0===e?void 0:e.childNodes)||void 0===t||t.forEach(e=>{e.nodeType===document.COMMENT_NODE&&e["s-cn"]&&(e["s-cn"]=!1),e.nodeType!==document.COMMENT_NODE&&e["s-sr"]&&(e["s-sr"]=!1)})}const Qh=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("Ad",this)}render(){return xd(kd,null)}},[0,"taro-ad-core"]);function Zh(){if("undefined"===typeof customElements)return;const e=["taro-ad-core"];e.forEach(e=>{switch(e){case"taro-ad-core":customElements.get(e)||customElements.define(e,Qh);break}})}const Jh=Zh,eu=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("AdCustom",this)}render(){return xd(kd,null)}},[0,"taro-ad-custom-core"]);function tu(){if("undefined"===typeof customElements)return;const e=["taro-ad-custom-core"];e.forEach(e=>{switch(e){case"taro-ad-custom-core":customElements.get(e)||customElements.define(e,eu);break}})}const iu=tu,su=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("AnimationVideo",this)}render(){return xd(kd,null)}},[0,"taro-animation-video-core"]);function ru(){if("undefined"===typeof customElements)return;const e=["taro-animation-video-core"];e.forEach(e=>{switch(e){case"taro-animation-video-core":customElements.get(e)||customElements.define(e,su);break}})}const nu=ru,au=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("AnimationView",this)}render(){return xd(kd,null)}},[0,"taro-animation-view-core"]);function ou(){if("undefined"===typeof customElements)return;const e=["taro-animation-view-core"];e.forEach(e=>{switch(e){case"taro-animation-view-core":customElements.get(e)||customElements.define(e,au);break}})}const lu=ou,cu=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("ArCamera",this)}render(){return xd(kd,null)}},[0,"taro-ar-camera-core"]);function du(){if("undefined"===typeof customElements)return;const e=["taro-ar-camera-core"];e.forEach(e=>{switch(e){case"taro-ar-camera-core":customElements.get(e)||customElements.define(e,cu);break}})}const hu=du,uu="audio{outline:none;max-width:100%}",pu=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onError=Od(this,"error",7),this.onPlay=Od(this,"play",7),this.onPause=Od(this,"pause",7),this.onTimeUpdate=Od(this,"timeupdate",7),this.onEnded=Od(this,"ended",7),this.src=void 0,this.controls=!0,this.autoplay=!1,this.loop=!1,this.muted=!1,this.nativeProps={}}bindevent(){this.audio.addEventListener("timeupdate",e=>{this.onTimeUpdate.emit({duration:e.srcElement.duration,currentTime:e.srcElement.duration})}),this.audio.addEventListener("ended",()=>{this.onEnded.emit()}),this.audio.addEventListener("play",()=>{this.onPlay.emit()}),this.audio.addEventListener("pause",e=>{this.onPause.emit(e)}),this.audio.addEventListener("error",e=>{var t;this.onError.emit({errMsg:null===(t=e.srcElement.error)||void 0===t?void 0:t.code})})}componentDidLoad(){this.bindevent()}render(){const{src:e,controls:t,autoplay:i,loop:s,muted:r,nativeProps:n}=this;return xd("audio",Object.assign({src:e,controls:t,autoplay:i,loop:s,muted:r,ref:e=>{this.audio=e}},n))}static get style(){return uu}},[0,"taro-audio-core",{src:[1],controls:[4],autoplay:[4],loop:[4],muted:[4],nativeProps:[16]}]);function fu(){if("undefined"===typeof customElements)return;const e=["taro-audio-core"];e.forEach(e=>{switch(e){case"taro-audio-core":customElements.get(e)||customElements.define(e,pu);break}})}const gu=fu,mu=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("AwemeData",this)}render(){return xd(kd,null)}},[0,"taro-aweme-data-core"]);function vu(){if("undefined"===typeof customElements)return;const e=["taro-aweme-data-core"];e.forEach(e=>{switch(e){case"taro-aweme-data-core":customElements.get(e)||customElements.define(e,mu);break}})}const yu=vu;function bu(e,t,i){return i={path:t,exports:{},require:function(e,t){return Eu()}},e(i,i.exports),i.exports}function Eu(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var wu=bu(function(e){(function(){var t={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var i=arguments[t];i&&(e=r(e,s(i)))}return e}function s(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var s="";for(var n in e)t.call(e,n)&&e[n]&&(s=r(s,n));return s}function r(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):window.classNames=i})()});const Au=".weui-loading{vertical-align:middle;background:url(\"data:image/svg+xml;charset=utf8, %3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 100 100'%3E%3Cpath fill='none' d='M0 0h100v100H0z'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23E9E9E9' rx='5' ry='5' transform='translate(0 -30)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23989697' rx='5' ry='5' transform='rotate(30 105.98 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%239B999A' rx='5' ry='5' transform='rotate(60 75.98 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23A3A1A2' rx='5' ry='5' transform='rotate(90 65 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23ABA9AA' rx='5' ry='5' transform='rotate(120 58.66 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23B2B2B2' rx='5' ry='5' transform='rotate(150 54.02 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23BAB8B9' rx='5' ry='5' transform='rotate(180 50 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23C2C0C1' rx='5' ry='5' transform='rotate(-150 45.98 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23CBCBCB' rx='5' ry='5' transform='rotate(-120 41.34 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23D2D2D2' rx='5' ry='5' transform='rotate(-90 35 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23DADADA' rx='5' ry='5' transform='rotate(-60 24.02 65)'/%3E%3Crect width='7' height='20' x='46.5' y='40' fill='%23E2E2E2' rx='5' ry='5' transform='rotate(-30 -5.98 65)'/%3E%3C/svg%3E\") 0 0/100% no-repeat;width:20px;height:20px;animation:1s steps(12,end) infinite weuiLoading;display:inline-block}@-webkit-keyframes weuiLoading{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes weuiLoading{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.weui-btn_loading .weui-loading{margin:-.2em .34em 0 0}.weui-btn_loading.weui-btn_primary,.weui-btn_loading.weui-btn_warn{color:rgba(255,255,255,.6)}.weui-btn_loading.weui-btn_primary{background-color:#179b16}.weui-btn_loading.weui-btn_warn{background-color:#ce3c39}taro-button-core{box-sizing:border-box;appearance:none;text-align:center;color:#000;-webkit-tap-highlight-color:transparent;background-color:#f8f8f8;border-width:0;border-radius:5px;outline:0;width:100%;margin-left:auto;margin-right:auto;padding-left:14px;padding-right:14px;font-size:18px;line-height:2.55556;text-decoration:none;display:block;position:relative;overflow:hidden}taro-button-core:focus{outline:0}taro-button-core:not([disabled]):active{color:rgba(0,0,0,.6);background-color:#dedede}taro-button-core:after{box-sizing:border-box;content:\" \";transform-origin:0 0;border:1px solid rgba(0,0,0,.2);border-radius:10px;width:200%;height:200%;position:absolute;top:0;left:0;transform:scale(.5)}taro-button-core+taro-button-core{margin-top:15px}taro-button-core[type=default]{color:#000;background-color:#f8f8f8}taro-button-core[type=default]:not([disabled]):visited{color:#000}taro-button-core[type=default]:not([disabled]):active{color:rgba(0,0,0,.6);background-color:#dedede}taro-button-core[size=mini]{width:auto;padding:0 1.32em;font-size:13px;line-height:2.3;display:inline-block}taro-button-core[plain],taro-button-core[plain][type=default],taro-button-core[plain][type=primary]{background-color:transparent;border-width:1px}taro-button-core[disabled]{color:rgba(255,255,255,.6)}taro-button-core[disabled][type=default]{color:rgba(0,0,0,.3);background-color:#f7f7f7}taro-button-core[disabled][type=primary]{background-color:#9ed99d}taro-button-core[disabled][type=warn]{background-color:#ec8b89}taro-button-core[loading] .weui-loading{margin:-.2em .34em 0 0}taro-button-core[loading][type=primary],taro-button-core[loading][type=warn]{color:rgba(255,255,255,.6)}taro-button-core[loading][type=primary]{background-color:#179b16}taro-button-core[loading][type=warn]{background-color:#ce3c39}taro-button-core[plain][type=primary]{color:#1aad19;border:1px solid #1aad19}taro-button-core[plain][type=primary]:not([disabled]):active{color:rgba(26,173,25,.6);background-color:transparent;border-color:rgba(26,173,25,.6)}taro-button-core[plain][type=primary]:after{border-width:0}taro-button-core[plain][type=warn]{color:#e64340;border:1px solid #e64340}taro-button-core[plain][type=warn]:not([disabled]):active{color:rgba(230,67,64,.6);background-color:transparent;border-color:rgba(230,67,64,.6)}taro-button-core[plain][type=warn]:after{border-width:0}taro-button-core[plain],taro-button-core[plain][type=default]{color:#353535;border:1px solid #353535}taro-button-core[plain]:not([disabled]):active,taro-button-core[plain][type=default]:not([disabled]):active{color:rgba(53,53,53,.6);background-color:transparent;border-color:rgba(53,53,53,.6)}taro-button-core[plain]:after,taro-button-core[plain][type=default]:after{border-width:0}taro-button-core[type=primary]{color:#fff;background-color:#1aad19}taro-button-core[type=primary]:not([disabled]):visited{color:#fff}taro-button-core[type=primary]:not([disabled]):active{color:rgba(255,255,255,.6);background-color:#179b16}taro-button-core[type=warn]{color:#fff;background-color:#e64340}taro-button-core[type=warn]:not([disabled]):visited{color:#fff}taro-button-core[type=warn]:not([disabled]):active{color:rgba(255,255,255,.6);background-color:#ce3c39}taro-button-core[plain][disabled],taro-button-core[plain][disabled][type=primary]{color:rgba(0,0,0,.3);background-color:#f7f7f7;border:1px solid rgba(0,0,0,.2)}",Tu=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onSubmit=Od(this,"tarobuttonsubmit",7),this.onReset=Od(this,"tarobuttonreset",7),this.disabled=void 0,this.hoverClass="button-hover",this.type="",this.hoverStartTime=20,this.hoverStayTime=70,this.size=void 0,this.plain=void 0,this.loading=!1,this.formType=null,this.hover=!1,this.touch=!1}onClick(e){this.disabled&&e.stopPropagation()}onTouchStart(){this.disabled||(this.touch=!0,this.hoverClass&&!this.disabled&&setTimeout(()=>{this.touch&&(this.hover=!0)},this.hoverStartTime))}onTouchEnd(){this.disabled||(this.touch=!1,this.hoverClass&&!this.disabled&&setTimeout(()=>{this.touch||(this.hover=!1)},this.hoverStayTime),"submit"===this.formType?this.onSubmit.emit():"reset"===this.formType&&this.onReset.emit())}render(){const{disabled:e,hoverClass:t,type:i,size:s,plain:r,loading:n,hover:a}=this,o=wu({[`${t}`]:a&&!e});return xd(kd,{class:o,type:i,plain:r,loading:n,size:s,disabled:e},n&&xd("i",{class:"weui-loading"}),xd("slot",null))}get el(){return this}static get style(){return Au}},[4,"taro-button-core",{disabled:[4],hoverClass:[1,"hover-class"],type:[1],hoverStartTime:[2,"hover-start-time"],hoverStayTime:[2,"hover-stay-time"],size:[1],plain:[4],loading:[4],formType:[513,"form-type"],hover:[32],touch:[32]},[[0,"click","onClick"],[1,"touchstart","onTouchStart"],[1,"touchend","onTouchEnd"]]]);function Su(){if("undefined"===typeof customElements)return;const e=["taro-button-core"];e.forEach(e=>{switch(e){case"taro-button-core":customElements.get(e)||customElements.define(e,Tu);break}})}const xu=Su,Lu=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("Camera",this)}render(){return xd(kd,null)}},[0,"taro-camera-core"]);function ku(){if("undefined"===typeof customElements)return;const e=["taro-camera-core"];e.forEach(e=>{switch(e){case"taro-camera-core":customElements.get(e)||customElements.define(e,Lu);break}})}const Iu=ku,_u="taro-canvas-core{width:300px;height:150px;display:block;position:relative}",Cu=500,Ru=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onLongTap=Od(this,"longtap",7),this.onTouchStart=()=>{this.timer=setTimeout(()=>{this.onLongTap.emit()},Cu)},this.onTouchMove=()=>{clearTimeout(this.timer)},this.onTouchEnd=()=>{clearTimeout(this.timer)},this.canvasId=void 0,this.height=void 0,this.width=void 0,this.nativeProps={}}componentDidRender(){const[e]=this.el.children;if(!this.height||!this.width){let t=window.getComputedStyle(e);this.height||(this.height=t.height),this.width||(this.width=t.width)}e.height=parseInt(this.height),e.width=parseInt(this.width)}render(){const{canvasId:e,nativeProps:t}=this;return xd("canvas",Object.assign({"canvas-id":e,style:{width:"100%",height:"100%"},onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchCancel:this.onTouchEnd,onTouchEnd:this.onTouchEnd},t))}get el(){return this}static get style(){return _u}},[0,"taro-canvas-core",{canvasId:[1,"id"],height:[1537],width:[1537],nativeProps:[16]}]);function Pu(){if("undefined"===typeof customElements)return;const e=["taro-canvas-core"];e.forEach(e=>{switch(e){case"taro-canvas-core":customElements.get(e)||customElements.define(e,Ru);break}})}const Du=Pu,Mu=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("ChannelLive",this)}render(){return xd(kd,null)}},[0,"taro-channel-live-core"]);function Ou(){if("undefined"===typeof customElements)return;const e=["taro-channel-live-core"];e.forEach(e=>{switch(e){case"taro-channel-live-core":customElements.get(e)||customElements.define(e,Mu);break}})}const Nu=Ou,Bu=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("ChannelVideo",this)}render(){return xd(kd,null)}},[0,"taro-channel-video-core"]);function Fu(){if("undefined"===typeof customElements)return;const e=["taro-channel-video-core"];e.forEach(e=>{switch(e){case"taro-channel-video-core":customElements.get(e)||customElements.define(e,Bu);break}})}const $u=Fu,Uu='page,body{--weui-cellMarginLR:16px;--weui-cellPaddingLR:16px}.weui-cells__group{border:0}.weui-cells__group:first-child{margin-top:0}.weui-cells__group_form{margin-top:24px}.weui-cells__group_form .weui-cells{margin-left:var(--weui-cellMarginLR);margin-right:var(--weui-cellMarginLR)}.weui-cells__group_form .weui-cells:before,.weui-cells__group_form .weui-cells:after{left:var(--weui-cellPaddingLR);right:var(--weui-cellPaddingLR)}.weui-cells__group_form .weui-cell{padding:16px var(--weui-cellPaddingLR)}.weui-cells__group_form .weui-cell:before{left:var(--weui-cellPaddingLR);right:var(--weui-cellPaddingLR)}.weui-cells__group_form .weui-cell:not(.weui-cell_vertical) .weui-cell__hd{padding-right:16px}.weui-cells__group_form .weui-cell:not(.weui-cell_vertical) .weui-cell__ft{padding-left:16px}.weui-cells__group_form .weui-cells__title{margin-top:24px;margin-bottom:8px;padding:0 32px}.weui-cells__group_form:first-child .weui-cells__title{margin-top:0}.weui-cells__group_form .weui-cells__tips{padding:0 calc(var(--weui-cellMarginLR) + var(--weui-cellPaddingLR));color:var(--weui-FG-2);margin-top:8px}.weui-cells__group_form .weui-cells__tips a{font-weight:700}.weui-cells__group_form .weui-cells__tips_warn{color:var(--weui-RED)}.weui-cells__group_form .weui-label{max-width:5em;margin-right:8px}.weui-cells__group_form .weui-cell_access:active:after,.weui-cells__group_form .weui-cell_active:active:after{border-radius:8px}.weui-cells__group_form .weui-cell_warn input{color:#e64340}.weui-cells__group_form .weui-icon-warn,.weui-cells__group_form .weui-cell_switch:active:after,.weui-cells__group_form .weui-cell_vcode:active:after,.weui-cells__group_form .weui-cell_readonly:active:after,.weui-cells__group_form .weui-cell_disabled:active:after{display:none}.weui-cells__group_form input,.weui-cells__group_form textarea,.weui-cells__group_form label[for]{-webkit-tap-highlight-color:transparent}.weui-cells__group_form .weui-cell_wrap{align-items:initial;padding-top:8px;padding-bottom:8px}.weui-cells__group_form .weui-cell_wrap .weui-cell__hd{padding-right:0}.weui-cells__group_form .weui-cell_wrap .weui-label{margin-top:8px}.weui-cells__group_form .weui-cell_wrap .weui-cell__bd{flex-wrap:wrap;align-items:center;display:flex}.weui-cells__group_form .weui-cell__control{margin:8px 0 8px 16px}.weui-cells__group_form .weui-cell__control_flex{flex:1;min-width:30vw}.weui-cells__group_form .weui-vcode-btn{color:#000;background-color:#f8f8f8;border-radius:6px;width:auto;height:auto;padding:0 12px;font-size:16px;line-height:2}.weui-cells__group_form .weui-vcode-btn:before{display:none}.weui-cells__group_form .weui-cell_vcode.weui-cell_wrap{padding-top:4px;padding-bottom:4px}.weui-cells__group_form .weui-cell_vcode.weui-cell_wrap .weui-label{margin-top:12px}.weui-cells__group_form .weui-cell_vcode.weui-cell_wrap .weui-input{min-height:1.88235em;font-size:17px}.weui-cells__group_form .weui-cells_checkbox .weui-check__label:before{left:calc(40px + var(--weui-cellPaddingLR))}.weui-cells__group_form .weui-cell_select{padding:0}.weui-cells__group_form .weui-cell_select-before .weui-cell__hd{padding-right:0}.weui-cells__group_form .weui-cell_switch{padding:12px 16px}.weui-cells__group_form-primary{margin-top:32px}.weui-cells__group_form-primary .weui-cells{background:var(--weui-BG-1);border-radius:8px;overflow:hidden}.weui-cells__group_form-primary .weui-cells:before,.weui-cells__group_form-primary .weui-cells:after{display:none}.weui-cells__group_form-primary .weui-cell_access:active:after,.weui-cells__group_form-primary .weui-cell_active:active:after{border-radius:0}.taro-checkbox{display:inline-block;position:relative}.taro-checkbox_checked{appearance:none;vertical-align:0;color:#1aad19;background-color:#fff;border:1px solid #d1d1d1;border-radius:3px;outline:0;width:23px;height:23px;min-height:0;font-size:23px;display:inline-block;position:relative;top:5px}.taro-checkbox_checked:checked:before{vertical-align:middle;text-decoration:inherit;text-align:center;text-transform:none;font-variant:normal;font-family:weui;font-style:normal;font-weight:400;font-size:inherit;color:inherit;content:"\uea08";speak:none;display:inline-block;position:absolute;top:50%;left:50%;transform:translate(-50%,-48%)scale(.73)}',Gu=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onChange=Od(this,"checkboxchange",7),this.handleChange=e=>{e.stopPropagation(),this.onChange.emit({value:this.value})},this.name=void 0,this.value="",this.color=void 0,this.id=void 0,this.checked=!1,this.disabled=!1,this.nativeProps={},this.isWillLoadCalled=!1}watchId(e){this.isWillLoadCalled&&e&&this.inputEl.setAttribute("id",e)}componentWillLoad(){this.isWillLoadCalled=!0}componentDidRender(){this.id&&this.el.removeAttribute("id")}render(){const{checked:e,name:t,color:i,value:s,disabled:r,nativeProps:n}=this;return xd(kd,{class:"weui-cells_checkbox"},xd("input",Object.assign({ref:e=>{e&&(this.inputEl=e,this.id&&e.setAttribute("id",this.id))},type:"checkbox",value:s,name:t,class:"taro-checkbox_checked",style:{color:i},checked:e,disabled:r,onChange:this.handleChange},n)),xd("slot",null))}get el(){return this}static get watchers(){return{id:["watchId"]}}static get style(){return Uu}},[4,"taro-checkbox-core",{name:[1],value:[1032],color:[1],id:[1025],checked:[4],disabled:[4],nativeProps:[16],isWillLoadCalled:[32]}]);function Hu(){if("undefined"===typeof customElements)return;const e=["taro-checkbox-core"];e.forEach(e=>{switch(e){case"taro-checkbox-core":customElements.get(e)||customElements.define(e,Gu);break}})}const ju=Hu;var zu,Vu=function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},Yu=function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};const Wu=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onChange=Od(this,"change",7),this.uniqueName=Date.now().toString(36),zu.set(this,void 0),this.name=void 0}function(e){if(e.stopPropagation(),"TARO-CHECKBOX-CORE"!==e.target.tagName)return;const t=this.el.querySelectorAll("taro-checkbox-core");Vu(this,zu,this.getValues(t),"f"),this.onChange.emit({value:Yu(this,zu,"f")})}componentDidLoad(){const e=this.el.querySelectorAll("taro-checkbox-core");e.forEach(e=>{e.setAttribute("name",this.name||this.uniqueName)}),Object.defineProperty(this.el,"value",{get:()=>{if(!Yu(this,zu,"f")){const e=this.el.querySelectorAll("taro-checkbox-core");Vu(this,zu,this.getValues(e),"f")}return Yu(this,zu,"f")},configurable:!0})}getValues(e){return Array.from(e).filter(e=>{const t=e.querySelector("input");return null===t||void 0===t?void 0:t.checked}).map(e=>e.value)}render(){return xd(kd,null)}get el(){return this}},[0,"taro-checkbox-group-core",{name:[8]},[[0,"checkboxchange","function"]]]);function Ku(){if("undefined"===typeof customElements)return;const e=["taro-checkbox-group-core"];e.forEach(e=>{switch(e){case"taro-checkbox-group-core":customElements.get(e)||customElements.define(e,Wu);break}})}zu=new WeakMap;const qu=Ku,Xu=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("CommentDetail",this)}render(){return xd(kd,null)}},[0,"taro-comment-detail-core"]);function Qu(){if("undefined"===typeof customElements)return;const e=["taro-comment-detail-core"];e.forEach(e=>{switch(e){case"taro-comment-detail-core":customElements.get(e)||customElements.define(e,Xu);break}})}const Zu=Qu,Ju=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("CommentList",this)}render(){return xd(kd,null)}},[0,"taro-comment-list-core"]);function ep(){if("undefined"===typeof customElements)return;const e=["taro-comment-list-core"];e.forEach(e=>{switch(e){case"taro-comment-list-core":customElements.get(e)||customElements.define(e,Ju);break}})}const tp=ep,ip=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("ContactButton",this)}render(){return xd(kd,null)}},[0,"taro-contact-button-core"]);function sp(){if("undefined"===typeof customElements)return;const e=["taro-contact-button-core"];e.forEach(e=>{switch(e){case"taro-contact-button-core":customElements.get(e)||customElements.define(e,ip);break}})}const rp=sp,np="taro-cover-image-core{width:320px;height:240px;overflow:hidden}",ap=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onLoad=Od(this,"load",7),this.onError=Od(this,"error",7),this.src=void 0,this.nativeProps={}}imageOnLoad(){const{width:e,height:t}=this.imgRef;this.onLoad.emit({width:e,height:t})}imageOnError(e){this.onError.emit(e)}render(){const{src:e,imageOnLoad:t,imageOnError:i,nativeProps:s}=this;return xd("img",Object.assign({ref:e=>this.imgRef=e,src:e,onLoad:t.bind(this),onError:i.bind(this)},s))}static get style(){return np}},[0,"taro-cover-image-core",{src:[1],nativeProps:[16]}]);function op(){if("undefined"===typeof customElements)return;const e=["taro-cover-image-core"];e.forEach(e=>{switch(e){case"taro-cover-image-core":customElements.get(e)||customElements.define(e,ap);break}})}const lp=op,cp="taro-cover-view-core{display:block}",dp=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onLongPress=Od(this,"longpress",7),this.startTime=0,this.animation=void 0,this.hoverClass=void 0,this.hoverStartTime=50,this.hoverStayTime=400,this.hover=!1,this.touch=!1}onTouchStart(){this.hoverClass&&(this.touch=!0,setTimeout(()=>{this.touch&&(this.hover=!0)},this.hoverStartTime)),this.timeoutEvent=setTimeout(()=>{this.onLongPress.emit()},350),this.startTime=Date.now()}onTouchMove(){clearTimeout(this.timeoutEvent)}onTouchEnd(){const e=Date.now()-this.startTime;e<350&&clearTimeout(this.timeoutEvent),this.hoverClass&&(this.touch=!1,setTimeout(()=>{this.touch||(this.hover=!1)},this.hoverStayTime))}render(){const e=wu({[`${this.hoverClass}`]:this.hover});let t={};return this.animation&&(t["animation"]=this.animation,t["data-animation"]=this.animation),xd(kd,Object.assign({class:e},t),xd("slot",null))}static get style(){return cp}},[4,"taro-cover-view-core",{animation:[1],hoverClass:[1,"hover-class"],hoverStartTime:[2,"hover-start-time"],hoverStayTime:[2,"hover-stay-time"],hover:[32],touch:[32]},[[1,"touchstart","onTouchStart"],[1,"touchmove","onTouchMove"],[1,"touchend","onTouchEnd"]]]);function hp(){if("undefined"===typeof customElements)return;const e=["taro-cover-view-core"];e.forEach(e=>{switch(e){case"taro-cover-view-core":customElements.get(e)||customElements.define(e,dp);break}})}const up=hp,pp=Th(class extends Bh{constructor(){super(),this.__registerHost()}render(){return xd(kd,null)}},[0,"taro-custom-wrapper-core"]);function fp(){if("undefined"===typeof customElements)return;const e=["taro-custom-wrapper-core"];e.forEach(e=>{switch(e){case"taro-custom-wrapper-core":customElements.get(e)||customElements.define(e,pp);break}})}const gp=fp,mp=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("DoubleTapGestureHandler",this)}render(){return xd(kd,null)}},[0,"taro-double-tap-gesture-handler-core"]);function vp(){if("undefined"===typeof customElements)return;const e=["taro-double-tap-gesture-handler-core"];e.forEach(e=>{switch(e){case"taro-double-tap-gesture-handler-core":customElements.get(e)||customElements.define(e,mp);break}})}const yp=vp,bp=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("DraggableSheet",this)}render(){return xd(kd,null)}},[0,"taro-draggable-sheet-core"]);function Ep(){if("undefined"===typeof customElements)return;const e=["taro-draggable-sheet-core"];e.forEach(e=>{switch(e){case"taro-draggable-sheet-core":customElements.get(e)||customElements.define(e,bp);break}})}const wp=Ep,Ap=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("Editor",this)}render(){return xd(kd,null)}},[0,"taro-editor-core"]);function Tp(){if("undefined"===typeof customElements)return;const e=["taro-editor-core"];e.forEach(e=>{switch(e){case"taro-editor-core":customElements.get(e)||customElements.define(e,Ap);break}})}const Sp=Tp,xp=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("FollowSwan",this)}render(){return xd(kd,null)}},[0,"taro-follow-swan-core"]);function Lp(){if("undefined"===typeof customElements)return;const e=["taro-follow-swan-core"];e.forEach(e=>{switch(e){case"taro-follow-swan-core":customElements.get(e)||customElements.define(e,xp);break}})}const kp=Lp,Ip=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("ForcePressGestureHandler",this)}render(){return xd(kd,null)}},[0,"taro-force-press-gesture-handler-core"]);function _p(){if("undefined"===typeof customElements)return;const e=["taro-force-press-gesture-handler-core"];e.forEach(e=>{switch(e){case"taro-force-press-gesture-handler-core":customElements.get(e)||customElements.define(e,Ip);break}})}const Cp=_p;var Rp,Pp=function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},Dp=function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};const Mp=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onSubmit=Od(this,"submit",7),Rp.set(this,{})}onButtonSubmit(e){e.stopPropagation(),Pp(this,Rp,this.getFormValue(),"f"),this.onSubmit.emit({value:Dp(this,Rp,"f")})}onButtonReset(e){e.stopPropagation(),this.form.reset()}componentDidLoad(){Pp(this,Rp,this.getFormValue(),"f"),Object.defineProperty(this.el,"value",{get:()=>Dp(this,Rp,"f"),configurable:!0})}componentDidRender(){if(this.originalAppendChild||(this.originalAppendChild=this.el.appendChild,this.originalInsertBefore=this.el.insertBefore,this.originalReplaceChild=this.el.replaceChild,this.originalRemoveChild=this.el.removeChild),!this.form)return this.el.appendChild=this.originalAppendChild,this.el.insertBefore=this.originalInsertBefore,this.el.replaceChild=this.originalReplaceChild,void(this.el.removeChild=this.originalRemoveChild);this.el.appendChild=e=>this.form.appendChild(e),this.el.insertBefore=(e,t)=>this.form.insertBefore(e,t),this.el.replaceChild=(e,t)=>this.form.replaceChild(e,t),this.el.removeChild=e=>this.form.removeChild(e)}getFormValue(){const e=this.el,t=[],i=e.getElementsByTagName("input");for(let o=0;o<i.length;o++)t.push(i[o]);const s={},r={};t.forEach(e=>{"string"===typeof e.name&&(-1===e.className.indexOf("weui-switch")?"radio"!==e.type?"checkbox"!==e.type?s[e.name]=e.value:e.checked?r[e.name]?s[e.name].push(e.value):(r[e.name]=!0,s[e.name]=[e.value]):r[e.name]||(s[e.name]=[]):e.checked?(r[e.name]=!0,s[e.name]=e.value):r[e.name]||(s[e.name]=""):s[e.name]=e.checked)});const n=e.getElementsByTagName("textarea"),a=[];for(let o=0;o<n.length;o++)a.push(n[o]);return a.forEach(e=>{"string"===typeof e.name&&(s[e.name]=e.value)}),s}render(){return xd("form",{ref:e=>{this.form=e}},xd("slot",null))}get el(){return this}},[4,"taro-form-core",void 0,[[0,"tarobuttonsubmit","onButtonSubmit"],[0,"tarobuttonreset","onButtonReset"]]]);function Op(){if("undefined"===typeof customElements)return;const e=["taro-form-core"];e.forEach(e=>{switch(e){case"taro-form-core":customElements.get(e)||customElements.define(e,Mp);break}})}Rp=new WeakMap;const Np=Op,Bp=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("FunctionalPageNavigator",this)}render(){return xd(kd,null)}},[0,"taro-functional-page-navigator-core"]);function Fp(){if("undefined"===typeof customElements)return;const e=["taro-functional-page-navigator-core"];e.forEach(e=>{switch(e){case"taro-functional-page-navigator-core":customElements.get(e)||customElements.define(e,Bp);break}})}const $p=Fp,Up=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("GridBuilder",this)}render(){return xd(kd,null)}},[0,"taro-grid-builder-core"]);function Gp(){if("undefined"===typeof customElements)return;const e=["taro-grid-builder-core"];e.forEach(e=>{switch(e){case"taro-grid-builder-core":customElements.get(e)||customElements.define(e,Up);break}})}const Hp=Gp,jp=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("GridView",this)}render(){return xd(kd,null)}},[0,"taro-grid-view-core"]);function zp(){if("undefined"===typeof customElements)return;const e=["taro-grid-view-core"];e.forEach(e=>{switch(e){case"taro-grid-view-core":customElements.get(e)||customElements.define(e,jp);break}})}const Vp=zp,Yp=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("HorizontalDragGestureHandler",this)}render(){return xd(kd,null)}},[0,"taro-horizontal-drag-gesture-handler-core"]);function Wp(){if("undefined"===typeof customElements)return;const e=["taro-horizontal-drag-gesture-handler-core"];e.forEach(e=>{switch(e){case"taro-horizontal-drag-gesture-handler-core":customElements.get(e)||customElements.define(e,Yp);break}})}const Kp=Wp,qp='.weui-icon-circle:before{content:"\uea01"}.weui-icon-download:before{content:"\uea02"}.weui-icon-info:before{content:"\uea03"}.weui-icon-safe-success:before{content:"\uea04"}.weui-icon-safe-warn:before{content:"\uea05"}.weui-icon-success:before{content:"\uea06"}.weui-icon-success-circle:before{content:"\uea07"}.weui-icon-success-no-circle:before{content:"\uea08"}.weui-icon-waiting:before{content:"\uea09"}.weui-icon-waiting-circle:before{content:"\uea0a"}.weui-icon-warn:before{content:"\uea0b"}.weui-icon-info-circle:before{content:"\uea0c"}.weui-icon-cancel:before{content:"\uea0d"}.weui-icon-search:before{content:"\uea0e"}.weui-icon-clear:before{content:"\uea0f"}.weui-icon-back:before{content:"\uea10"}.weui-icon-delete:before{content:"\uea11"}.weui-icon-success{color:#09bb07;font-size:23px}.weui-icon-waiting{color:#10aeff;font-size:23px}.weui-icon-warn{color:#f43530;font-size:23px}.weui-icon-info{color:#10aeff;font-size:23px}.weui-icon-success-circle,.weui-icon-success-no-circle{color:#09bb07;font-size:23px}.weui-icon-waiting-circle{color:#10aeff;font-size:23px}.weui-icon-circle{color:#c9c9c9;font-size:23px}.weui-icon-download,.weui-icon-info-circle{color:#09bb07;font-size:23px}.weui-icon-safe-success{color:#09bb07}.weui-icon-safe-warn{color:#ffbe00}.weui-icon-cancel{color:#f43530;font-size:22px}.weui-icon-search,.weui-icon-clear{color:#b2b2b2;font-size:14px}.weui-icon-delete.weui-icon_gallery-delete{color:#fff;font-size:22px}.weui-icon_msg{font-size:93px}.weui-icon_msg.weui-icon-warn{color:#f76260}.weui-icon_msg-primary{font-size:93px}.weui-icon_msg-primary.weui-icon-warn{color:#ffbe00}',Xp=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.type=void 0,this.size="23",this.color=void 0}render(){const{type:e,size:t,color:i}=this,s=null===e||void 0===e?void 0:e.replace(/_/g,"-"),r=wu({[`weui-icon-${s}`]:!0}),n={"font-size":`${t}px`,color:i};return xd(kd,{class:r,style:n})}static get style(){return qp}},[0,"taro-icon-core",{type:[1],size:[8],color:[1]}]);function Qp(){if("undefined"===typeof customElements)return;const e=["taro-icon-core"];e.forEach(e=>{switch(e){case"taro-icon-core":customElements.get(e)||customElements.define(e,Xp);break}})}const Zp=Qp,Jp='img[src=""]{opacity:0}taro-image-core{width:320px;height:240px;font-size:0;display:inline-block;position:relative;overflow:hidden}.taro-img.taro-img__widthfix{height:100%}.taro-img__mode-scaletofill{width:100%;height:100%}.taro-img__mode-aspectfit{max-width:100%;max-height:100%;position:absolute;top:50%;transform:translateY(-50%)}.taro-img__mode-aspectfill{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.taro-img__mode-aspectfill--width{min-width:100%;height:100%}.taro-img__mode-aspectfill--height{width:100%;min-height:100%}.taro-img__mode-widthfix{width:100%}.taro-img__mode-heightfix{height:100%}.taro-img__mode-top{position:absolute;left:50%;transform:translate(-50%)}.taro-img__mode-bottom{position:absolute;bottom:0;left:50%;transform:translate(-50%)}.taro-img__mode-center{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.taro-img__mode-left{position:absolute;top:50%;transform:translateY(-50%)}.taro-img__mode-right{position:absolute;top:50%;right:0;transform:translateY(-50%)}.taro-img__mode-topright{position:absolute;right:0}.taro-img__mode-bottomleft{position:absolute;bottom:0}.taro-img__mode-bottomright{position:absolute;bottom:0;right:0}',ef=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onLoad=Od(this,"load",7),this.onError=Od(this,"error",7),this.src=void 0,this.mode="scaleToFill",this.lazyLoad=!1,this.nativeProps={},this.aspectFillMode="width",this.didLoad=!1}componentDidLoad(){if(!this.lazyLoad)return;const e=new IntersectionObserver(t=>{t[t.length-1].isIntersecting&&(e.unobserve(this.imgRef),this.didLoad=!0)},{rootMargin:"300px 0px"});e.observe(this.imgRef)}imageOnLoad(){const{width:e,height:t,naturalWidth:i,naturalHeight:s}=this.imgRef;this.onLoad.emit({width:e,height:t}),this.aspectFillMode=i>s?"width":"height"}imageOnError(e){this.onError.emit(e)}render(){const{src:e,lazyLoad:t=!1,aspectFillMode:i="width",imageOnLoad:s,imageOnError:r,nativeProps:n,didLoad:a}=this,o=this.mode||"scaleToFill",l=wu({"taro-img__widthfix":"widthFix"===o}),c=wu(`taro-img__mode-${o.toLowerCase().replace(/\s/g,"")}`,{[`taro-img__mode-aspectfill--${i}`]:"aspectFill"===o});return xd(kd,{class:l},e?xd("img",Object.assign({ref:e=>this.imgRef=e,class:c,src:t&&!a?void 0:e,onLoad:s.bind(this),onError:r.bind(this)},n)):"")}static get style(){return Jp}},[0,"taro-image-core",{src:[1],mode:[1],lazyLoad:[4,"lazy-load"],nativeProps:[16],aspectFillMode:[32],didLoad:[32]}]);function tf(){if("undefined"===typeof customElements)return;const e=["taro-image-core"];e.forEach(e=>{switch(e){case"taro-image-core":customElements.get(e)||customElements.define(e,ef);break}})}const sf=tf,rf=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("InlinePaymentPanel",this)}render(){return xd(kd,null)}},[0,"taro-inline-payment-panel-core"]);function nf(){if("undefined"===typeof customElements)return;const e=["taro-inline-payment-panel-core"];e.forEach(e=>{switch(e){case"taro-inline-payment-panel-core":customElements.get(e)||customElements.define(e,rf);break}})}const af=nf,of=".weui-input{-webkit-appearance:none;width:100%;font-size:inherit;color:inherit;background-color:transparent;border:0;outline:0;height:1.47059em;line-height:1.47059}.weui-input::-webkit-outer-spin-button,.weui-input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}taro-input-core{display:block}";function lf(e,t,i){if("search"===t&&(e="search"),i&&(e="password"),"undefined"===typeof e)return"text";if(!e)throw new Error("unexpected type");return"digit"===e&&(e="number"),e}function cf(e){return null!==e&&void 0!==e?e:""}const df=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onInput=Od(this,"input",7),this.onPaste=Od(this,"paste",7),this.onFocus=Od(this,"focus",7),this.onBlur=Od(this,"blur",7),this.onConfirm=Od(this,"confirm",7),this.onChange=Od(this,"change",7),this.onKeyDown=Od(this,"keydown",7),this.isOnComposition=!1,this.isOnPaste=!1,this.onInputExcuted=!1,this.handleInput=e=>{e.stopPropagation();const{type:t,maxlength:i,confirmType:s,password:r}=this;if(!this.isOnComposition&&!this.onInputExcuted){let n=e.target.value;const a=lf(t,s,r);this.onInputExcuted=!0,"number"===a&&n&&i>-1&&i<=n.length&&(n=n.substring(0,i),e.target.value=n),this.value=n,this.onInput.emit({value:n,cursor:n.length}),this.onInputExcuted=!1}},this.handlePaste=e=>{e.stopPropagation(),this.isOnPaste=!0,this.onPaste.emit({value:e.target.value})},this.handleFocus=e=>{e.stopPropagation(),this.onInputExcuted=!1,this.onFocus.emit({value:e.target.value})},this.handleBlur=e=>{e.stopPropagation(),this.onBlur.emit({value:e.target.value})},this.handleChange=e=>{e.stopPropagation(),this.onChange.emit({value:e.target.value}),this.isOnPaste&&(this.isOnPaste=!1,this.value=e.target.value,this.onInput.emit({value:e.target.value,cursor:e.target.value.length}))},this.handleKeyDown=e=>{e.stopPropagation();const{value:t}=e.target,i=e.keyCode||e.code;this.onInputExcuted=!1,this.onKeyDown.emit({value:t,cursor:t.length,keyCode:i}),13===i&&this.onConfirm.emit({value:t})},this.handleComposition=e=>{e.stopPropagation(),e.target instanceof HTMLInputElement&&("compositionend"===e.type?(this.isOnComposition=!1,this.value=e.target.value,this.onInput.emit({value:e.target.value,cursor:e.target.value.length})):this.isOnComposition=!0)},this.handleBeforeInput=e=>{if(!e.data)return;const t=e.data&&/[0-9]/.test(e.data);"number"!==this.type||t||e.preventDefault(),"digit"!==this.type||t||("."!==e.data||"."===e.data&&e.target.value.indexOf(".")>-1)&&e.preventDefault()},this.value="",this.type=void 0,this.password=!1,this.placeholder=void 0,this.disabled=!1,this.maxlength=140,this.autoFocus=!1,this.confirmType="done",this.name=void 0,this.nativeProps={}}focus(){return d(this,null,function*(){this.inputRef.focus()})}watchAutoFocus(e,t){var i;!t&&e&&(null===(i=this.inputRef)||void 0===i||i.focus())}watchValue(e){const t=cf(e);this.inputRef.value!==t&&(this.inputRef.value=t)}componentDidLoad(){var e,t,i,s,r;"file"===this.type?(this.fileListener=()=>{this.onInput.emit()},null===(e=this.inputRef)||void 0===e||e.addEventListener("change",this.fileListener)):(null===(t=this.inputRef)||void 0===t||t.addEventListener("compositionstart",this.handleComposition),null===(i=this.inputRef)||void 0===i||i.addEventListener("compositionend",this.handleComposition),null===(s=this.inputRef)||void 0===s||s.addEventListener("beforeinput",this.handleBeforeInput),null===(r=this.inputRef)||void 0===r||r.addEventListener("textInput",this.handleBeforeInput))}disconnectedCallback(){var e,t,i,s,r;"file"===this.type?null===(e=this.inputRef)||void 0===e||e.removeEventListener("change",this.fileListener):(null===(t=this.inputRef)||void 0===t||t.removeEventListener("compositionstart",this.handleComposition),null===(i=this.inputRef)||void 0===i||i.removeEventListener("compositionend",this.handleComposition),null===(s=this.inputRef)||void 0===s||s.removeEventListener("beforeinput",this.handleBeforeInput),null===(r=this.inputRef)||void 0===r||r.removeEventListener("textInput",this.handleBeforeInput))}render(){const{value:e,type:t,password:i,placeholder:s,autoFocus:r,disabled:n,maxlength:a,confirmType:o,name:l,nativeProps:c}=this;return xd("input",Object.assign({ref:e=>{this.inputRef=e,r&&e&&e.focus()},class:"weui-input",type:lf(t,o,i),placeholder:s,autoFocus:r,disabled:n,maxlength:a,name:l,onInput:this.handleInput,onFocus:this.handleFocus,onBlur:this.handleBlur,onChange:this.handleChange,onKeyDown:this.handleKeyDown,onPaste:this.handlePaste,onCompositionStart:this.handleComposition,onCompositionEnd:this.handleComposition},c,{value:cf(e)}))}get el(){return this}static get watchers(){return{autoFocus:["watchAutoFocus"],value:["watchValue"]}}static get style(){return of}},[0,"taro-input-core",{value:[1025],type:[1],password:[4],placeholder:[1],disabled:[4],maxlength:[2],autoFocus:[4,"focus"],confirmType:[1,"confirm-type"],name:[1],nativeProps:[16],focus:[64]}]);function hf(){if("undefined"===typeof customElements)return;const e=["taro-input-core"];e.forEach(e=>{switch(e){case"taro-input-core":customElements.get(e)||customElements.define(e,df);break}})}const uf=hf,pf=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("KeyboardAccessory",this)}render(){return xd(kd,null)}},[0,"taro-keyboard-accessory-core"]);function ff(){if("undefined"===typeof customElements)return;const e=["taro-keyboard-accessory-core"];e.forEach(e=>{switch(e){case"taro-keyboard-accessory-core":customElements.get(e)||customElements.define(e,pf);break}})}const gf=ff,mf=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.for=void 0}render(){return xd("label",{htmlFor:this.for},xd("slot",null))}},[4,"taro-label-core",{for:[1]}]);function vf(){if("undefined"===typeof customElements)return;const e=["taro-label-core"];e.forEach(e=>{switch(e){case"taro-label-core":customElements.get(e)||customElements.define(e,mf);break}})}const yf=vf,bf=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("Lifestyle",this)}render(){return xd(kd,null)}},[0,"taro-lifestyle-core"]);function Ef(){if("undefined"===typeof customElements)return;const e=["taro-lifestyle-core"];e.forEach(e=>{switch(e){case"taro-lifestyle-core":customElements.get(e)||customElements.define(e,bf);break}})}const wf=Ef,Af=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("Like",this)}render(){return xd(kd,null)}},[0,"taro-like-core"]);function Tf(){if("undefined"===typeof customElements)return;const e=["taro-like-core"];e.forEach(e=>{switch(e){case"taro-like-core":customElements.get(e)||customElements.define(e,Af);break}})}const Sf=Tf,xf=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("ListBuilder",this)}render(){return xd(kd,null)}},[0,"taro-list-builder-core"]);function Lf(){if("undefined"===typeof customElements)return;const e=["taro-list-builder-core"];e.forEach(e=>{switch(e){case"taro-list-builder-core":customElements.get(e)||customElements.define(e,xf);break}})}const kf=Lf,If=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("ListView",this)}render(){return xd(kd,null)}},[0,"taro-list-view-core"]);function _f(){if("undefined"===typeof customElements)return;const e=["taro-list-view-core"];e.forEach(e=>{switch(e){case"taro-list-view-core":customElements.get(e)||customElements.define(e,If);break}})}const Cf=_f,Rf=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("LivePlayer",this)}render(){return xd(kd,null)}},[0,"taro-live-player-core"]);function Pf(){if("undefined"===typeof customElements)return;const e=["taro-live-player-core"];e.forEach(e=>{switch(e){case"taro-live-player-core":customElements.get(e)||customElements.define(e,Rf);break}})}const Df=Pf,Mf=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("LivePusher",this)}render(){return xd(kd,null)}},[0,"taro-live-pusher-core"]);function Of(){if("undefined"===typeof customElements)return;const e=["taro-live-pusher-core"];e.forEach(e=>{switch(e){case"taro-live-pusher-core":customElements.get(e)||customElements.define(e,Mf);break}})}const Nf=Of,Bf=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("Login",this)}render(){return xd(kd,null)}},[0,"taro-login-core"]);function Ff(){if("undefined"===typeof customElements)return;const e=["taro-login-core"];e.forEach(e=>{switch(e){case"taro-login-core":customElements.get(e)||customElements.define(e,Bf);break}})}const $f=Ff,Uf=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("LongPressGestureHandler",this)}render(){return xd(kd,null)}},[0,"taro-long-press-gesture-handler-core"]);function Gf(){if("undefined"===typeof customElements)return;const e=["taro-long-press-gesture-handler-core"];e.forEach(e=>{switch(e){case"taro-long-press-gesture-handler-core":customElements.get(e)||customElements.define(e,Uf);break}})}const Hf=Gf,jf=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("Lottie",this)}render(){return xd(kd,null)}},[0,"taro-lottie-core"]);function zf(){if("undefined"===typeof customElements)return;const e=["taro-lottie-core"];e.forEach(e=>{switch(e){case"taro-lottie-core":customElements.get(e)||customElements.define(e,jf);break}})}const Vf=zf;var Yf={exports:{}};(function(e){(function(t,i,s,r){var n,a=["","webkit","Moz","MS","ms","o"],o=i.createElement("div"),l="function",c=Math.round,d=Math.abs,h=Date.now;function u(e,t,i){return setTimeout(b(e,i),t)}function p(e,t,i){return!!Array.isArray(e)&&(f(e,i[t],i),!0)}function f(e,t,i){var s;if(e)if(e.forEach)e.forEach(t,i);else if(e.length!==r){s=0;while(s<e.length)t.call(i,e[s],s,e),s++}else for(s in e)e.hasOwnProperty(s)&&t.call(i,e[s],s,e)}function g(e,i,s){var r="DEPRECATED METHOD: "+i+"\n"+s+" AT \n";return function(){var i=new Error("get-stack-trace"),s=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",n=t.console&&(t.console.warn||t.console.log);return n&&n.call(t.console,r,s),e.apply(this,arguments)}}n="function"!==typeof Object.assign?function(e){if(e===r||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var s=arguments[i];if(s!==r&&null!==s)for(var n in s)s.hasOwnProperty(n)&&(t[n]=s[n])}return t}:Object.assign;var m=g(function(e,t,i){var s=Object.keys(t),n=0;while(n<s.length)(!i||i&&e[s[n]]===r)&&(e[s[n]]=t[s[n]]),n++;return e},"extend","Use `assign`."),v=g(function(e,t){return m(e,t,!0)},"merge","Use `assign`.");function y(e,t,i){var s,r=t.prototype;s=e.prototype=Object.create(r),s.constructor=e,s._super=r,i&&n(s,i)}function b(e,t){return function(){return e.apply(t,arguments)}}function E(e,t){return typeof e==l?e.apply(t&&t[0]||r,t):e}function w(e,t){return e===r?t:e}function A(e,t,i){f(L(t),function(t){e.addEventListener(t,i,!1)})}function T(e,t,i){f(L(t),function(t){e.removeEventListener(t,i,!1)})}function S(e,t){while(e){if(e==t)return!0;e=e.parentNode}return!1}function x(e,t){return e.indexOf(t)>-1}function L(e){return e.trim().split(/\s+/g)}function k(e,t,i){if(e.indexOf&&!i)return e.indexOf(t);var s=0;while(s<e.length){if(i&&e[s][i]==t||!i&&e[s]===t)return s;s++}return-1}function I(e){return Array.prototype.slice.call(e,0)}function _(e,t,i){var s=[],r=[],n=0;while(n<e.length){var a=t?e[n][t]:e[n];k(r,a)<0&&s.push(e[n]),r[n]=a,n++}return i&&(s=t?s.sort(function(e,i){return e[t]>i[t]}):s.sort()),s}function C(e,t){var i,s,n=t[0].toUpperCase()+t.slice(1),o=0;while(o<a.length){if(i=a[o],s=i?i+n:t,s in e)return s;o++}return r}var R=1;function P(){return R++}function D(e){var i=e.ownerDocument||e;return i.defaultView||i.parentWindow||t}var M=/mobile|tablet|ip(ad|hone|od)|android/i,O="ontouchstart"in t,N=C(t,"PointerEvent")!==r,B=O&&M.test(navigator.userAgent),F="touch",$="pen",U="mouse",G="kinect",H=25,j=1,z=2,V=4,Y=8,W=1,K=2,q=4,X=8,Q=16,Z=K|q,J=X|Q,ee=Z|J,te=["x","y"],ie=["clientX","clientY"];function se(e,t){var i=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){E(e.options.enable,[e])&&i.handler(t)},this.init()}function re(e){var t,i=e.options.inputClass;return t=i||(N?xe:B?De:O?Be:Ee),new t(e,ne)}function ne(e,t,i){var s=i.pointers.length,r=i.changedPointers.length,n=t&j&&s-r===0,a=t&(V|Y)&&s-r===0;i.isFirst=!!n,i.isFinal=!!a,n&&(e.session={}),i.eventType=t,ae(e,i),e.emit("hammer.input",i),e.recognize(i),e.session.prevInput=i}function ae(e,t){var i=e.session,s=t.pointers,r=s.length;i.firstInput||(i.firstInput=ce(t)),r>1&&!i.firstMultiple?i.firstMultiple=ce(t):1===r&&(i.firstMultiple=!1);var n=i.firstInput,a=i.firstMultiple,o=a?a.center:n.center,l=t.center=de(s);t.timeStamp=h(),t.deltaTime=t.timeStamp-n.timeStamp,t.angle=fe(o,l),t.distance=pe(o,l),oe(i,t),t.offsetDirection=ue(t.deltaX,t.deltaY);var c=he(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=c.x,t.overallVelocityY=c.y,t.overallVelocity=d(c.x)>d(c.y)?c.x:c.y,t.scale=a?me(a.pointers,s):1,t.rotation=a?ge(a.pointers,s):0,t.maxPointers=i.prevInput?t.pointers.length>i.prevInput.maxPointers?t.pointers.length:i.prevInput.maxPointers:t.pointers.length,le(i,t);var u=e.element;S(t.srcEvent.target,u)&&(u=t.srcEvent.target),t.target=u}function oe(e,t){var i=t.center,s=e.offsetDelta||{},r=e.prevDelta||{},n=e.prevInput||{};t.eventType!==j&&n.eventType!==V||(r=e.prevDelta={x:n.deltaX||0,y:n.deltaY||0},s=e.offsetDelta={x:i.x,y:i.y}),t.deltaX=r.x+(i.x-s.x),t.deltaY=r.y+(i.y-s.y)}function le(e,t){var i,s,n,a,o=e.lastInterval||t,l=t.timeStamp-o.timeStamp;if(t.eventType!=Y&&(l>H||o.velocity===r)){var c=t.deltaX-o.deltaX,h=t.deltaY-o.deltaY,u=he(l,c,h);s=u.x,n=u.y,i=d(u.x)>d(u.y)?u.x:u.y,a=ue(c,h),e.lastInterval=t}else i=o.velocity,s=o.velocityX,n=o.velocityY,a=o.direction;t.velocity=i,t.velocityX=s,t.velocityY=n,t.direction=a}function ce(e){var t=[],i=0;while(i<e.pointers.length)t[i]={clientX:c(e.pointers[i].clientX),clientY:c(e.pointers[i].clientY)},i++;return{timeStamp:h(),pointers:t,center:de(t),deltaX:e.deltaX,deltaY:e.deltaY}}function de(e){var t=e.length;if(1===t)return{x:c(e[0].clientX),y:c(e[0].clientY)};var i=0,s=0,r=0;while(r<t)i+=e[r].clientX,s+=e[r].clientY,r++;return{x:c(i/t),y:c(s/t)}}function he(e,t,i){return{x:t/e||0,y:i/e||0}}function ue(e,t){return e===t?W:d(e)>=d(t)?e<0?K:q:t<0?X:Q}function pe(e,t,i){i||(i=te);var s=t[i[0]]-e[i[0]],r=t[i[1]]-e[i[1]];return Math.sqrt(s*s+r*r)}function fe(e,t,i){i||(i=te);var s=t[i[0]]-e[i[0]],r=t[i[1]]-e[i[1]];return 180*Math.atan2(r,s)/Math.PI}function ge(e,t){return fe(t[1],t[0],ie)+fe(e[1],e[0],ie)}function me(e,t){return pe(t[0],t[1],ie)/pe(e[0],e[1],ie)}se.prototype={handler:function(){},init:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(D(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(D(this.element),this.evWin,this.domHandler)}};var ve={mousedown:j,mousemove:z,mouseup:V},ye="mousedown",be="mousemove mouseup";function Ee(){this.evEl=ye,this.evWin=be,this.pressed=!1,se.apply(this,arguments)}y(Ee,se,{handler:function(e){var t=ve[e.type];t&j&&0===e.button&&(this.pressed=!0),t&z&&1!==e.which&&(t=V),this.pressed&&(t&V&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:U,srcEvent:e}))}});var we={pointerdown:j,pointermove:z,pointerup:V,pointercancel:Y,pointerout:Y},Ae={2:F,3:$,4:U,5:G},Te="pointerdown",Se="pointermove pointerup pointercancel";function xe(){this.evEl=Te,this.evWin=Se,se.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}t.MSPointerEvent&&!t.PointerEvent&&(Te="MSPointerDown",Se="MSPointerMove MSPointerUp MSPointerCancel"),y(xe,se,{handler:function(e){var t=this.store,i=!1,s=e.type.toLowerCase().replace("ms",""),r=we[s],n=Ae[e.pointerType]||e.pointerType,a=n==F,o=k(t,e.pointerId,"pointerId");r&j&&(0===e.button||a)?o<0&&(t.push(e),o=t.length-1):r&(V|Y)&&(i=!0),o<0||(t[o]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:n,srcEvent:e}),i&&t.splice(o,1))}});var Le={touchstart:j,touchmove:z,touchend:V,touchcancel:Y},ke="touchstart",Ie="touchstart touchmove touchend touchcancel";function _e(){this.evTarget=ke,this.evWin=Ie,this.started=!1,se.apply(this,arguments)}function Ce(e,t){var i=I(e.touches),s=I(e.changedTouches);return t&(V|Y)&&(i=_(i.concat(s),"identifier",!0)),[i,s]}y(_e,se,{handler:function(e){var t=Le[e.type];if(t===j&&(this.started=!0),this.started){var i=Ce.call(this,e,t);t&(V|Y)&&i[0].length-i[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:F,srcEvent:e})}}});var Re={touchstart:j,touchmove:z,touchend:V,touchcancel:Y},Pe="touchstart touchmove touchend touchcancel";function De(){this.evTarget=Pe,this.targetIds={},se.apply(this,arguments)}function Me(e,t){var i=I(e.touches),s=this.targetIds;if(t&(j|z)&&1===i.length)return s[i[0].identifier]=!0,[i,i];var r,n,a=I(e.changedTouches),o=[],l=this.target;if(n=i.filter(function(e){return S(e.target,l)}),t===j){r=0;while(r<n.length)s[n[r].identifier]=!0,r++}r=0;while(r<a.length)s[a[r].identifier]&&o.push(a[r]),t&(V|Y)&&delete s[a[r].identifier],r++;return o.length?[_(n.concat(o),"identifier",!0),o]:void 0}y(De,se,{handler:function(e){var t=Re[e.type],i=Me.call(this,e,t);i&&this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:F,srcEvent:e})}});var Oe=2500,Ne=25;function Be(){se.apply(this,arguments);var e=b(this.handler,this);this.touch=new De(this.manager,e),this.mouse=new Ee(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function Fe(e,t){e&j?(this.primaryTouch=t.changedPointers[0].identifier,$e.call(this,t)):e&(V|Y)&&$e.call(this,t)}function $e(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var i={x:t.clientX,y:t.clientY};this.lastTouches.push(i);var s=this.lastTouches,r=function(){var e=s.indexOf(i);e>-1&&s.splice(e,1)};setTimeout(r,Oe)}}function Ue(e){for(var t=e.srcEvent.clientX,i=e.srcEvent.clientY,s=0;s<this.lastTouches.length;s++){var r=this.lastTouches[s],n=Math.abs(t-r.x),a=Math.abs(i-r.y);if(n<=Ne&&a<=Ne)return!0}return!1}y(Be,se,{handler:function(e,t,i){var s=i.pointerType==F,r=i.pointerType==U;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(s)Fe.call(this,t,i);else if(r&&Ue.call(this,i))return;this.callback(e,t,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ge=C(o.style,"touchAction"),He=Ge!==r,je="compute",ze="auto",Ve="manipulation",Ye="none",We="pan-x",Ke="pan-y",qe=Ze();function Xe(e,t){this.manager=e,this.set(t)}function Qe(e){if(x(e,Ye))return Ye;var t=x(e,We),i=x(e,Ke);return t&&i?Ye:t||i?t?We:Ke:x(e,Ve)?Ve:ze}function Ze(){if(!He)return!1;var e={},i=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(s){e[s]=!i||t.CSS.supports("touch-action",s)}),e}Xe.prototype={set:function(e){e==je&&(e=this.compute()),He&&this.manager.element.style&&qe[e]&&(this.manager.element.style[Ge]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return f(this.manager.recognizers,function(t){E(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),Qe(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,i=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var s=this.actions,r=x(s,Ye)&&!qe[Ye],n=x(s,Ke)&&!qe[Ke],a=x(s,We)&&!qe[We];if(r){var o=1===e.pointers.length,l=e.distance<2,c=e.deltaTime<250;if(o&&l&&c)return}if(!a||!n)return r||n&&i&Z||a&&i&J?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Je=1,et=2,tt=4,it=8,st=it,rt=16,nt=32;function at(e){this.options=n({},this.defaults,e||{}),this.id=P(),this.manager=null,this.options.enable=w(this.options.enable,!0),this.state=Je,this.simultaneous={},this.requireFail=[]}function ot(e){return e&rt?"cancel":e&it?"end":e&tt?"move":e&et?"start":""}function lt(e){return e==Q?"down":e==X?"up":e==K?"left":e==q?"right":""}function ct(e,t){var i=t.manager;return i?i.get(e):e}function dt(){at.apply(this,arguments)}function ht(){dt.apply(this,arguments),this.pX=null,this.pY=null}function ut(){dt.apply(this,arguments)}function pt(){at.apply(this,arguments),this._timer=null,this._input=null}function ft(){dt.apply(this,arguments)}function gt(){dt.apply(this,arguments)}function mt(){at.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function vt(e,t){return t=t||{},t.recognizers=w(t.recognizers,vt.defaults.preset),new Et(e,t)}at.prototype={defaults:{},set:function(e){return n(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(p(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=ct(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return p(e,"dropRecognizeWith",this)||(e=ct(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(p(e,"requireFailure",this))return this;var t=this.requireFail;return e=ct(e,this),-1===k(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(p(e,"dropRequireFailure",this))return this;e=ct(e,this);var t=k(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,i=this.state;function s(i){t.manager.emit(i,e)}i<it&&s(t.options.event+ot(i)),s(t.options.event),e.additionalEvent&&s(e.additionalEvent),i>=it&&s(t.options.event+ot(i))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=nt},canEmit:function(){var e=0;while(e<this.requireFail.length){if(!(this.requireFail[e].state&(nt|Je)))return!1;e++}return!0},recognize:function(e){var t=n({},e);if(!E(this.options.enable,[this,t]))return this.reset(),void(this.state=nt);this.state&(st|rt|nt)&&(this.state=Je),this.state=this.process(t),this.state&(et|tt|it|rt)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},y(dt,at,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,i=e.eventType,s=t&(et|tt),r=this.attrTest(e);return s&&(i&Y||!r)?t|rt:s||r?i&V?t|it:t&et?t|tt:et:nt}}),y(ht,dt,{defaults:{event:"pan",threshold:10,pointers:1,direction:ee},getTouchAction:function(){var e=this.options.direction,t=[];return e&Z&&t.push(Ke),e&J&&t.push(We),t},directionTest:function(e){var t=this.options,i=!0,s=e.distance,r=e.direction,n=e.deltaX,a=e.deltaY;return r&t.direction||(t.direction&Z?(r=0===n?W:n<0?K:q,i=n!=this.pX,s=Math.abs(e.deltaX)):(r=0===a?W:a<0?X:Q,i=a!=this.pY,s=Math.abs(e.deltaY))),e.direction=r,i&&s>t.threshold&&r&t.direction},attrTest:function(e){return dt.prototype.attrTest.call(this,e)&&(this.state&et||!(this.state&et)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=lt(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),y(ut,dt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ye]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&et)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),y(pt,at,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ze]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,s=e.distance<t.threshold,r=e.deltaTime>t.time;if(this._input=e,!s||!i||e.eventType&(V|Y)&&!r)this.reset();else if(e.eventType&j)this.reset(),this._timer=u(function(){this.state=st,this.tryEmit()},t.time,this);else if(e.eventType&V)return st;return nt},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===st&&(e&&e.eventType&V?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=h(),this.manager.emit(this.options.event,this._input)))}}),y(ft,dt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ye]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&et)}}),y(gt,dt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Z|J,pointers:1},getTouchAction:function(){return ht.prototype.getTouchAction.call(this)},attrTest:function(e){var t,i=this.options.direction;return i&(Z|J)?t=e.overallVelocity:i&Z?t=e.overallVelocityX:i&J&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&i&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&d(t)>this.options.velocity&&e.eventType&V},emit:function(e){var t=lt(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),y(mt,at,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ve]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,s=e.distance<t.threshold,r=e.deltaTime<t.time;if(this.reset(),e.eventType&j&&0===this.count)return this.failTimeout();if(s&&r&&i){if(e.eventType!=V)return this.failTimeout();var n=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||pe(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,a&&n?this.count+=1:this.count=1,this._input=e;var o=this.count%t.taps;if(0===o)return this.hasRequireFailures()?(this._timer=u(function(){this.state=st,this.tryEmit()},t.interval,this),et):st}return nt},failTimeout:function(){return this._timer=u(function(){this.state=nt},this.options.interval,this),nt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==st&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),vt.VERSION="2.0.7",vt.defaults={domEvents:!1,touchAction:je,enable:!0,inputTarget:null,inputClass:null,preset:[[ft,{enable:!1}],[ut,{enable:!1},["rotate"]],[gt,{direction:Z}],[ht,{direction:Z},["swipe"]],[mt],[mt,{event:"doubletap",taps:2},["tap"]],[pt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var yt=1,bt=2;function Et(e,t){this.options=n({},vt.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=re(this),this.touchAction=new Xe(this,this.options.touchAction),wt(this,!0),f(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function wt(e,t){var i,s=e.element;s.style&&(f(e.options.cssProps,function(r,n){i=C(s.style,n),t?(e.oldCssProps[i]=s.style[i],s.style[i]=r):s.style[i]=e.oldCssProps[i]||""}),t||(e.oldCssProps={}))}function At(e,t){var s=i.createEvent("Event");s.initEvent(e,!0,!0),s.gesture=t,t.target.dispatchEvent(s)}Et.prototype={set:function(e){return n(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?bt:yt},recognize:function(e){var t=this.session;if(!t.stopped){var i;this.touchAction.preventDefaults(e);var s=this.recognizers,r=t.curRecognizer;(!r||r&&r.state&st)&&(r=t.curRecognizer=null);var n=0;while(n<s.length)i=s[n],t.stopped===bt||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(e),!r&&i.state&(et|tt|it)&&(r=t.curRecognizer=i),n++}},get:function(e){if(e instanceof at)return e;for(var t=this.recognizers,i=0;i<t.length;i++)if(t[i].options.event==e)return t[i];return null},add:function(e){if(p(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(p(e,"remove",this))return this;if(e=this.get(e),e){var t=this.recognizers,i=k(t,e);-1!==i&&(t.splice(i,1),this.touchAction.update())}return this},on:function(e,t){if(e!==r&&t!==r){var i=this.handlers;return f(L(e),function(e){i[e]=i[e]||[],i[e].push(t)}),this}},off:function(e,t){if(e!==r){var i=this.handlers;return f(L(e),function(e){t?i[e]&&i[e].splice(k(i[e],t),1):delete i[e]}),this}},emit:function(e,t){this.options.domEvents&&At(e,t);var i=this.handlers[e]&&this.handlers[e].slice();if(i&&i.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};var s=0;while(s<i.length)i[s](t),s++}},destroy:function(){this.element&&wt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},n(vt,{INPUT_START:j,INPUT_MOVE:z,INPUT_END:V,INPUT_CANCEL:Y,STATE_POSSIBLE:Je,STATE_BEGAN:et,STATE_CHANGED:tt,STATE_ENDED:it,STATE_RECOGNIZED:st,STATE_CANCELLED:rt,STATE_FAILED:nt,DIRECTION_NONE:W,DIRECTION_LEFT:K,DIRECTION_RIGHT:q,DIRECTION_UP:X,DIRECTION_DOWN:Q,DIRECTION_HORIZONTAL:Z,DIRECTION_VERTICAL:J,DIRECTION_ALL:ee,Manager:Et,Input:se,TouchAction:Xe,TouchInput:De,MouseInput:Ee,PointerEventInput:xe,TouchMouseInput:Be,SingleTouchInput:_e,Recognizer:at,AttrRecognizer:dt,Tap:mt,Pan:ht,Swipe:gt,Pinch:ut,Rotate:ft,Press:pt,on:A,off:T,each:f,merge:v,extend:m,assign:n,inherit:y,bindFn:b,prefixed:C});var Tt="undefined"!==typeof t?t:"undefined"!==typeof self?self:{};Tt.Hammer=vt,"function"===typeof r&&r.amd?r(function(){return vt}):e.exports?e.exports=vt:t[s]=vt})(window,document,"Hammer")})(Yf);var Wf=Yf.exports;const Kf=Mc(Wf),qf=".BMap_cpyCtrl,.anchorBL img,.BMap_bubble_buttons{display:none}",Xf=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onTap=Od(this,"tap",7),this.currentRotation=0,this._getCenterLocation=e=>{this.map.getOverlays().forEach(e=>{e instanceof BMapGL.Marker&&e.isCenterMarker&&this.map.removeOverlay(e)}),e.iconPath="https://img0.baidu.com/it/u=2604176863,3349829508&fm=253&fmt=auto&app=138&f=PNG?w=243&h=243";const t=new BMapGL.Icon(e.iconPath,new BMapGL.Size(20,30)),i=[this.longitude,this.latitude],s=new BMapGL.Marker(new BMapGL.Point(this.longitude,this.latitude),{icon:t});return s.isCenterMarker=!0,this.map.addOverlay(s),i},this._setLocMarkerIcon=e=>{const t=new BMapGL.Icon(e.iconPath,new BMapGL.Size(20,30)),i=new BMapGL.Point(116.404,39.915),s=new BMapGL.Marker(i,{icon:t});this.map.addOverlay(s)},this._translateMarker=e=>{let t=e.destination.latitude;const i=e.destination.longitude;t<-80&&t>=-90&&(t=e.destination.latitude+10);const s=new BMapGL.Point(i,t),r={flagId:!0,flagCoordinate:!0},n={errMsg:"animationEnd:ok"},a=this.map.getOverlays(),o=a.find(t=>t instanceof BMapGL.Marker&&t.id===e.markerId);if(!o)return console.error(`Marker "${e.markerId}" not found.`),r.flagId=!1,r;if(t>90||t<-90||i>180||i<-180||isNaN(t)||isNaN(i))return r.flagCoordinate=!1,r;const l=o.getPosition(),c={lng:(s.lng-l.lng)/(e.duration/16),lat:(s.lat-l.lat)/(e.duration/16)},d=o.getRotation(),h=e.rotate;this.currentRotation?this.currentRotation+=h:this.currentRotation=h;const u=(this.currentRotation-d)/(e.duration/16);let p=l,f=d;if(!e.moveWithRotate&&e.autoRotate){let t=0;const i=setInterval(()=>{if(p=new BMapGL.Point(p.lng+c.lng,p.lat+c.lat),o.setPosition(p),t++,t>=e.duration/16){clearInterval(i);let t=0;const s=setInterval(()=>{f+=u,o.setRotation(f),t++,t>=e.duration/16&&(clearInterval(s),null===e||void 0===e||e.animationEnd(n))},16)}},16)}else if(e.moveWithRotate&&e.autoRotate){let t=0;const i=setInterval(()=>{p=new BMapGL.Point(p.lng+c.lng,p.lat+c.lat),o.setPosition(p),f+=u,o.setRotation(f),t++,t>=e.duration/16&&(clearInterval(i),null===e||void 0===e||e.animationEnd(n))},16)}else if(e.moveWithRotate&&!e.autoRotate){let t=0;const i=setInterval(()=>{p=new BMapGL.Point(p.lng+c.lng,p.lat+c.lat),o.setPosition(p),t++,t>=e.duration/16&&(clearInterval(i),null===e||void 0===e||e.animationEnd(n))},16)}return r},this._includePoints=e=>{const t=e.points.map(e=>new BMapGL.Point(e.longitude,e.latitude)),i=this.map.getZoom(),s=this.map.getCenter(),r=this.map.getViewport(t);this.map.centerAndZoom(r.center,r.zoom);const n=this.map.getBounds();let a=!0;for(let o=0;o<t.length;o++)if(!n.containsPoint(t[o])){this.map.centerAndZoom(s,i),a=!1;break}return a},this._getRegion=()=>{const e=this.map.getBounds(),t=e.getSouthWest(),i=e.getNorthEast();return{southwest:{lat:t.lat,lng:t.lng},northeast:{lat:i.lat,lng:i.lng}}},this._getRotate=()=>{let e=this.rotate;return(e<0||e>360)&&(e=0),e},this._getSkew=()=>{let e=this.skew;return(e<0||e>40)&&(e=0),e},this._getScale=()=>{const e=this.scale;return e},this._setCenterOffset=e=>{const[t,i]=e.offset,s=this.map.getSize(),r=Math.max(.25*s.width,Math.min(.75*s.width,t*s.width)),n=Math.max(.25*s.height,Math.min(.75*s.height,i*s.height)),a=new BMapGL.Pixel(r,n),o=this.map.pixelToPoint(a);this.map.panTo(o)},this._addMarkers=e=>{e.clear&&this.map.clearOverlays(this.markers),e.markers.forEach(t=>{var i,s,r,n,a,o,l,c,d,h,u,p,f,g;if(t.latitude&&t.longitude&&t.iconPath){const m=new BMapGL.Point(t.longitude,t.latitude),v=new BMapGL.Marker(m,{enableClicking:!0});if(this.map.addOverlay(v),v.id=t.id,v.alpha=t.alpha,t.zIndex&&v.setZIndex(t.zIndex),t.width&&t.height&&t.iconPath){const e=new BMapGL.Icon(t.iconPath,new BMapGL.Size(t.width,t.height));v.setIcon(e)}else{if(!t.iconPath)return void console.error("\u6ca1\u6709\u627e\u5230iconPath\u56fe\u7247\u8def\u5f84");{const e=new Image;e.src=t.iconPath,e.style.opacity=String(t.alpha),e.onload=()=>{const i=new BMapGL.Size(e.width,e.height),s=new BMapGL.Icon(e.src,i);s.imageOffset=new BMapGL.Size(0,0,t.alpha||1),v.setIcon(s)}}}const y=t.rotate?t.rotate:0;if(y&&v.setRotation(y),t.anchor){const e=(null!==(s=null===(i=t.anchor)||void 0===i?void 0:i.x)&&void 0!==s?s:0)*(t.width||0),a=(null!==(n=null===(r=t.anchor)||void 0===r?void 0:r.y)&&void 0!==n?n:0)*(t.height||0);v.setOffset(new BMapGL.Size(e,a))}if(!t.callout&&t.title){const t=new Kf(this.mapRef);t.on("tap",t=>{const i=t.center,s=i.x,r=i.y,n=15;e.markers.forEach(e=>{const t=document.getElementsByClassName("bmap-container")[0],i=t.getBoundingClientRect(),a=i.left,o=i.top,l=new BMapGL.Point(e.longitude,e.latitude),c=this.map.pointToPixel(l),d=c.x+a,h=c.y+o,u=Math.sqrt(Math.pow(s-d,2)+Math.pow(r-h,2));if(u<n&&e.id===v.id){const t=`<div style="text-align:center">${e.title}</div>`,i=new BMapGL.InfoWindow(t);this.map.openInfoWindow(i,m)}})})}if(t.callout){const i=(null===(a=t.callout)||void 0===a?void 0:a.anchorX)?null===(o=t.callout)||void 0===o?void 0:o.anchorX:0,s=(null===(l=t.callout)||void 0===l?void 0:l.anchorY)?null===(c=t.callout)||void 0===c?void 0:c.anchorY:0,r=new BMapGL.InfoWindow(`<div style="\n              padding: ${null===(d=t.callout)||void 0===d?void 0:d.padding}px;\n              color:${null===(h=t.callout)||void 0===h?void 0:h.color};\n              text-align:${null===(u=t.callout)||void 0===u?void 0:u.textAlign};"\n              >\n             <p style="font-size:${null===(p=t.callout)||void 0===p?void 0:p.fontSize}px">${(null===(f=t.callout)||void 0===f?void 0:f.content)||""}</p>\n             </div>`,{width:200,height:100,offset:new BMapGL.Size(i-24,s-20)});if(v.callout=r,this.map.addOverlay(v),"ALWAYS"===(null===(g=t.callout)||void 0===g?void 0:g.display)){v.callout.disableCloseOnClick();const e=v.getPosition();v.callout.addEventListener("open",function(){var i,s,r,n;console.log(v.callout);const a=document.querySelector(".BMap_bubble_pop");if(a){let o=a.querySelector(".triangle");o||(o=document.createElement("div"),o.className="triangle",a.appendChild(o));const l=document.querySelector(".BMap_bubble_pop>img");l&&l.setAttribute("style",`position: absolute;transform: translate(-50%, 0); top: ${e.lat-100}px; left: ${e.lng-20}px;display:none`);const c=null===(i=t.callout)||void 0===i?void 0:i.bgColor;let d=(null===(s=t.callout)||void 0===s?void 0:s.borderWidth)||5;const h=null===(r=t.callout)||void 0===r?void 0:r.borderColor,u=null===(n=t.callout)||void 0===n?void 0:n.borderRadius;d=Math.min(d,15),o.setAttribute("style",`width:0;height:0;border-left:${d}px solid transparent;border-right:${d}px solid transparent;border-top:${d}px solid ${h};position:absolute;left:83px;bottom:-${2*d}px`),a.setAttribute("style",`background-color:${c};top:${e.lat-120}px; left:${e.lng-100}px;position: absolute;border: ${d}px solid ${h};border-radius:${u}px; `)}}),this.map.openInfoWindow(v.callout,m)}else{const t=new Kf(this.mapRef);t.on("tap",t=>{const i=t.center,s=i.x,r=i.y,n=15;e.markers.forEach(e=>{const t=document.getElementsByClassName("bmap-container")[0],i=t.getBoundingClientRect(),a=i.left,o=i.top,l=new BMapGL.Point(e.longitude,e.latitude),c=this.map.pointToPixel(l),d=c.x+a,h=c.y+o,u=Math.sqrt(Math.pow(s-d,2)+Math.pow(r-h,2));if(u<n&&e.id===v.id){const t=v.getPosition();v.callout.addEventListener("open",function(){var i,s,r,n;console.log(v.callout);const a=document.querySelector(".BMap_bubble_pop");if(a){let o=a.querySelector(".triangle");o||(o=document.createElement("div"),o.className="triangle",a.appendChild(o));const l=document.querySelector(".BMap_bubble_pop>img");l&&l.setAttribute("style",`position: absolute;transform: translate(-50%, 0); top: ${t.lat-100}px; left: ${t.lng-20}px;display:none`);const c=null===(i=e.callout)||void 0===i?void 0:i.bgColor;let d=(null===(s=e.callout)||void 0===s?void 0:s.borderWidth)||5;const h=null===(r=e.callout)||void 0===r?void 0:r.borderColor,u=null===(n=e.callout)||void 0===n?void 0:n.borderRadius;d=Math.min(d,15),o.setAttribute("style",`width:0;height:0;border-left:${d}px solid transparent;border-right:${d}px solid transparent;border-top:${d}px solid ${h};position:absolute;left:83px;bottom:-${2*d}px`),a.setAttribute("style",`background-color:${c};top:${t.lat-120}px; left:${t.lng-100}px;position: absolute;border: ${d}px solid ${h};border-radius:${u}px; `)}}),this.map.openInfoWindow(v.callout,m)}else v.callout.enableCloseOnClick()})})}}if(t.label){const e=t.label.content||"",i={position:m,offset:new BMapGL.Size(t.label.anchorX||0,t.label.anchorY||0)},s=new BMapGL.Label(e,i);s.setStyle({color:t.label.color,fontSize:t.label.fontSize+"px",borderWidth:t.label.borderWidth+"px",borderColor:t.label.borderColor,borderRadius:t.label.borderRadius+"px",background:t.label.bgColor,padding:t.label.padding+"px"}),v.setLabel(s)}}})},this._removeMarkers=e=>{const t=this.map.getOverlays();let i={};return e.markerIds.forEach(e=>{const s=t.find(t=>t instanceof BMapGL.Marker&&String(t.id)===e);i=s,this.map.removeOverlay(s)}),i},this._moveAlong=e=>{const t=e.path,i=e.markerId,s=e.duration,r=e.autoRotate,n=this.map.getOverlays().find(e=>e instanceof BMapGL.Marker&&e.id===i),a=t.map(e=>new BMapGL.Point(e.longitude,e.latitude)),o={flagId:!0,flagCoordinate:!0};if(!n)return console.error(`Marker "${i}" not found.`),o.flagId=!1,o;for(let l=0;l<a.length;l++){const e=a[l];if(e.lat<-80&&e.lat>=-90&&(e.lat+=10),e.lng<-180||e.lng>180||e.lat<-90||e.lat>90||isNaN(e.lng)||isNaN(e.lat))return o.flagCoordinate=!1,o}if(o.flagId&&o.flagCoordinate){const e=performance.now(),t=i=>{const o=i-e,l=Math.min(o/s,1),c=this.getPointOnPath(a,l);if(n.setPosition(c),r&&l<1){const e=this.getPointOnPath(a,Math.min(l+.01,1)),t=this.calculateRotation(c,e);n.setRotation(t)}l<1?requestAnimationFrame(t):(n.setPosition(a[a.length-1]),n.setRotation(0))};requestAnimationFrame(t)}return o},this.getPointOnPath=(e,t)=>{const i=this.calculateTotalLength(e),s=i*t;let r=0;for(let n=0;n<e.length-1;n++){const t=this.map.getDistance(e[n],e[n+1]);if(r+t>=s){const i=(s-r)/t,a=e[n+1].lng-e[n].lng,o=e[n+1].lat-e[n].lat,l=e[n].lng+a*i,c=e[n].lat+o*i;return new BMapGL.Point(l,c)}r+=t}return e[e.length-1]},this.calculateTotalLength=e=>{let t=0;for(let i=0;i<e.length-1;i++)t+=this.map.getDistance(e[i],e[i+1]);return t},this.calculateRotation=(e,t)=>{const i=t.lng-e.lng,s=t.lat-e.lat;let r=Math.atan2(s,i)*(180/Math.PI);return r=90-r,r},this._addGroundOverlay=e=>{const{src:t,opacity:i,bounds:s,visible:r,id:n,zIndex:a}=e;let o=!0;if(s.southwest.longitude>=s.northeast.longitude||s.southwest.latitude>=s.northeast.latitude)return void(o=!1);if(s.southwest.latitude>90||s.southwest.latitude<-90||s.southwest.longitude>180||s.southwest.longitude<-180||isNaN(s.southwest.latitude)||isNaN(s.southwest.longitude))return void(o=!1);if(s.northeast.latitude>90||s.northeast.latitude<-90||s.northeast.longitude>180||s.northeast.longitude<-180||isNaN(s.northeast.latitude)||isNaN(s.northeast.longitude))return void(o=!1);const l=new BMapGL.Bounds(new BMapGL.Point(s.southwest.longitude,s.southwest.latitude),new BMapGL.Point(s.northeast.longitude,s.northeast.latitude));function c(e,t,i,s,r,n,a){this._bounds=e,this._imageUrl=t,this._map=i,this._visible=s,this._opacity=r,this._zIndex=n,this._id=a}c.prototype=new BMapGL.Overlay,c.prototype.initialize=function(e){if(document.getElementById(this._id)){const e=document.getElementById(this._id);null===e||void 0===e||e.remove()}if(this._map=e,!this._div){const e=document.createElement("div");e.id=this._id,e.style.position="absolute",e.style.border="none",e.style.zIndex=this._zIndex;const t=document.createElement("img");t.src=this._imageUrl;const i=this._opacity<0?"1":this._opacity;t.style.opacity=i,e.appendChild(t),this._div=e}return e.addEventListener("zoomend",()=>{const t=e.pointToOverlayPixel(this._bounds.getSouthWest()),i=e.pointToOverlayPixel(this._bounds.getNorthEast()),s=i.x-t.x,r=t.y-i.y;this._div.style.width=s+"px",this._div.style.height=r+"px";const n=this._div.querySelector("img");n.style.width=s+"px",n.style.height=r+"px"}),e.getPanes().labelPane.appendChild(this._div),this._div},c.prototype.draw=function(){const t={lat:e.bounds.northeast.latitude,lng:e.bounds.southwest.longitude},i=this._map.pointToOverlayPixel(t);this._div.style.left=i.x+"px",this._div.style.top=i.y+"px";const s=this._map.getBounds(),r=this._map.pointToPixel(s.getSouthWest()),n=this._map.pointToPixel(s.getNorthEast()),a=n.x-r.x,o=n.y-r.y,l=this._map.getZoom(),c=a*Math.pow(2,18-l),d=o*Math.pow(2,18-l);this._div.style.width=c+"px",this._div.style.height=d+"px",this._div.style.display=this._visible?"block":"none";const h=this._opacity<0?"1":this._opacity;this._div.getElementsByTagName("img")[0].style.opacity=h};const d=new c(l,t,this.map,r,i,a,n);this.map.addOverlay(d);const h=this.map.getOverlays().sort((e,t)=>e._zIndex-t._zIndex);this.groundOverlay=d,h.forEach(e=>e.draw());const u=this.map.getZoom();return u<20?(this.map.setZoom(u+1),this.map.setZoom(u)):(this.map.setZoom(u-1),this.map.setZoom(u)),o},this._updateGroundOverlay=e=>{const{src:t,opacity:i,bounds:s,visible:r,id:n,zIndex:a}=e;let o,l=!0,c=!0,d={};const h=this.map.getOverlays(),u=h.find(e=>e._id===n);if(!u)return l=!1,d={flagId:l,flagCoordinate:c},o=Object.assign({},d),o;if((s.southwest.longitude>=s.northeast.longitude||s.southwest.latitude>=s.northeast.latitude)&&(c=!1,d={flagId:l,flagCoordinate:c},o=Object.assign({},d)),(s.southwest.latitude>90||s.southwest.latitude<-90||s.southwest.longitude>180||s.southwest.longitude<-180||isNaN(s.southwest.latitude)||isNaN(s.southwest.longitude))&&(c=!1,d={flagId:l,flagCoordinate:c},o=Object.assign({},d)),(s.northeast.latitude>90||s.northeast.latitude<-90||s.northeast.longitude>180||s.northeast.longitude<-180||isNaN(s.northeast.latitude)||isNaN(s.northeast.longitude))&&(c=!1,d={flagId:l,flagCoordinate:c},o=Object.assign({},d)),l&&c){const e=new BMapGL.Bounds(new BMapGL.Point(s.southwest.longitude,s.southwest.latitude),new BMapGL.Point(s.northeast.longitude,s.northeast.latitude)),h=this.map.getZoom();if(u){const s=document.getElementById(n);if(s){const n=s.querySelector("img");if(n){const o=i<0?"1":i;s.style.opacity=o,n.style.display=r?"block":"none",s.style.zIndex=a;const l=new Image;l.onload=()=>{n.src=t;const i=e.getNorthEast().lng-e.getSouthWest().lng,s=this.map.getSize().width,r=s/Math.pow(2,18-h)*i,a=l.naturalHeight/l.naturalWidth,o=r*a;n.style.width=`${r}px`,n.style.height=`${o}px`,u._bounds=e,u.draw(),this.map.panTo(this.map.getCenter()),u.draw()},l.src=t}}}else console.error(`\u672a\u627e\u5230id\u4e3a${n}\u7684\u5143\u7d20`);return d={flagId:l,flagCoordinate:c},o=Object.assign({},d),o}return o},this._removeGroundOverlay=e=>{const t=this.map.getOverlays();let i="";const s=t.find(t=>t._id===e.id);return i=s,s&&this.map.removeOverlay(s),i},this._setBoundary=e=>{let t=e.northeast.latitude,i=e.southwest.latitude,s=!0;if(e.northeast.latitude<=-80&&e.northeast.latitude>=-90&&(t=e.northeast.latitude+10),e.southwest.latitude<=-80&&e.southwest.latitude>=-90&&(i=e.southwest.latitude+10),e.northeast.latitude<-90||e.northeast.latitude>90||e.northeast.longitude<-180||e.northeast.longitude>180||isNaN(e.northeast.latitude)||isNaN(e.northeast.longitude)||e.northeast.longitude<e.southwest.longitude||e.northeast.latitude<e.southwest.latitude)return void(s=!1);if(e.southwest.latitude<-90||e.southwest.latitude>90||e.southwest.longitude<-180||e.southwest.longitude>180||isNaN(e.southwest.latitude)||isNaN(e.southwest.longitude))return void(s=!1);const r=new BMapGL.Point(e.northeast.longitude,t),n=new BMapGL.Point(e.southwest.longitude,i),a=new BMapGL.Bounds(n,r),o=this.map.getViewport([r,n]);return this.map.centerAndZoom(new BMapGL.Point(o.center.lng,o.center.lat),o.zoom+2),this.map.addOverlay(new BMapGL.Polygon([new BMapGL.Point(a.sw.lng,a.sw.lat),new BMapGL.Point(a.sw.lng,a.ne.lat),new BMapGL.Point(a.ne.lng,a.ne.lat),new BMapGL.Point(a.ne.lng,a.sw.lat)],{fillOpacity:0})),BMapGLLib.AreaRestriction.setBounds(this.map,a),s},this.latitude=void 0,this.longitude=void 0,this.scale=void 0,this.minScale=void 0,this.maxScale=void 0,this.markers=void 0,this.polyline=void 0,this.circles=void 0,this.polygons=void 0,this.subkey=void 0,this.layerStyle=void 0,this.rotate=void 0,this.skew=void 0,this.showCompass=void 0,this.showScale=void 0,this.enableOverlooking=void 0,this.enableZoom=void 0,this.enableScroll=void 0,this.enableRotate=void 0,this.enableSatellite=void 0,this.enableTraffic=void 0,this.enableBuilding=void 0,this.enableAutoMaxOverlooking=void 0,this.enable3D=void 0,this.width="100%",this.height="100%"}componentDidLoad(){return d(this,null,function*(){if(yield this.loadMapScript(),yield this.LoadBmapLibScript(),this.mapRef){if(this.mapRef.addEventListener("touchmove",e=>{e.cancelable&&e.preventDefault()}),this.map=new BMapGL.Map(this.mapRef),this.map.removeControl(this.map.getMapType()),this.latitude<-90||this.latitude>90||this.longitude<-180||this.longitude>180||isNaN(this.latitude)||isNaN(this.longitude))return void console.error("\u8bf7\u6b63\u786e\u8bbe\u7f6e\u4e2d\u5fc3\u7ecf\u7eac\u5ea6");let e=isNaN(this.scale)?16:this.scale,t=isNaN(this.minScale)?3:this.minScale,i=isNaN(this.maxScale)?16:this.maxScale;const s=new BMapGL.Point(this.longitude,this.latitude);if(t<3||t>20?(t=3,this.map.setMinZoom(3)):this.map.setMinZoom(t),i>20||i<3?(i=20,this.map.setMaxZoom(20)):this.map.setMaxZoom(i),t>i&&(t=3,this.map.setMinZoom(3),i=20,this.map.setMaxZoom(20)),t<=16&&i>=16?(e>=t&&e<=i||(e=16),this.map.centerAndZoom(s,e)):e>=t&&e<=i?this.map.centerAndZoom(s,e):e<t?(e=t,this.map.centerAndZoom(s,t)):(e=i,this.map.centerAndZoom(s,i)),Array.isArray(this.markers)&&this.addMarkers(this.markers),Array.isArray(this.polyline)&&this.polyline.forEach(e=>{if(e.points){const t=e.points.map(e=>new BMapGL.Point(e.longitude,e.latitude)),i=new BMapGL.Polyline(t,{strokeColor:e.color,strokeWeight:e.width,strokeStyle:e.dottedLine?"dashed":"solid",strokeOpacity:1});this.map.addOverlay(i)}}),Array.isArray(this.circles)&&this.circles.forEach(e=>{if(e.latitude&&e.longitude&&e.radius){const t=new BMapGL.Point(e.longitude,e.latitude),i=new BMapGL.Circle(t,e.radius,{strokeColor:e.color,fillColor:e.fillColor,strokeWeight:e.strokeWidth});this.map.addOverlay(i)}}),Array.isArray(this.polygons)&&this.polygons.forEach(e=>{const t=e.points.map(e=>new BMapGL.Point(e.longitude,e.latitude)),i=new BMapGL.Polygon(t,{strokeColor:e.strokeColor,fillColor:e.fillColor,strokeWeight:e.strokeWidth});this.map.addOverlay(i)}),0===this.layerStyle){const e=this.layerStyle;e&&this.map.setMapStyleV2({styleId:this.subkey})}else{const e=this.layerStyle?this.layerStyle:1;1===e&&this.map.setMapStyleV2({styleId:this.subkey})}const r=!0===this.enable3D&&this.enable3D,n=!0===this.enableOverlooking&&this.enableOverlooking,a=!0===this.enableAutoMaxOverlooking&&this.enableAutoMaxOverlooking,o=this.skew?this.skew:0;!0===r?!0===n?!0===a?this.map.setTilt(75):this.map.setTilt(45):o>=0&&o<=40?this.map.setTilt(o):this.map.setTilt(0):this.map.setTilt(0);const l=!0===this.showCompass&&this.showCompass;if(!0===l){const e=new BMapGL.NavigationControl3D({anchor:BMAP_ANCHOR_TOP_RIGHT,type:3});this.map.addControl(e)}const c=!0===this.showScale&&this.showScale;if(!0===c){const e=new BMapGL.ScaleControl({anchor:BMAP_ANCHOR_BOTTOM_RIGHT});this.map.addControl(e)}const d=!1!==this.enableZoom||this.enableZoom;!0===d&&this.map.enableScrollWheelZoom(this.enableZoom),!0===this.enableZoom&&this.mapRef?this.map.enablePinchToZoom():this.map.disablePinchToZoom();const h=!1!==this.enableScroll||this.enableScroll;!0===h?this.map.enableDragging():this.map.disableDragging();const u=this.rotate?this.rotate:0;u>=0&&this.rotate<=360?this.map.setHeading(this.rotate):this.map.setHeading(0),!0===this.enableRotate&&this.map.enableRotateGestures();const p=!0===this.enableSatellite&&this.enableSatellite;if(!0===p&&this.mapRef){const e=new BMapGL.MapTypeControl({mapTypes:[BMAP_NORMAL_MAP,BMAP_SATELLITE_MAP]});this.map.addControl(e)}const f=!0===this.enableTraffic&&this.enableTraffic;!0===f&&this.mapRef&&this.map.setTrafficOn();const g=!1!==this.enableBuilding||this.enableBuilding;!1===g&&this.map.setDisplayOptions({building:!1})}if(this.map){const e=new Kf(this.mapRef);e.on("tap",e=>{const t=this.map.pixelToPoint({x:e.center.x,y:e.center.y});this.onTap.emit({longitude:t.lng,latitude:t.lat})})}})}disconnectedCallback(){this.map&&this.map.destroy()}addMarkers(e){const t=[];e.forEach(e=>{var i,s,r,n,a,o,l,c,d,h,u,p,f,g;if(t.includes(e.id))console.error("\u8bf7\u8f93\u5165\u4e0d\u540c\u7684marker\u7684id");else if(t.push(e.id),e.latitude&&e.longitude&&e.iconPath&&e.id){if(e.latitude<-90||e.latitude>90||e.longitude<-180||e.longitude>180)return void console.error("\u8bf7\u6b63\u786e\u8bbe\u7f6emarker\u7684\u7ecf\u7eac\u5ea6");const t=new BMapGL.Point(e.longitude,e.latitude),m=new BMapGL.Marker(t,{enableClicking:!0});if(m.id=e.id,m.alpha=e.alpha,e.zIndex&&m.setZIndex(e.zIndex),e.width&&e.height){const t=document.createElement("canvas");t.width=2*e.width,t.height=2*e.height;const i=t.getContext("2d"),s=new Image;s.crossOrigin="Anonymous",s.src=e.iconPath,s.onload=function(){i.drawImage(s,0,0,2*e.width,2*e.height);const r=new BMapGL.Icon(t.toDataURL(),new BMapGL.Size(e.width,e.height),{anchor:new BMapGL.Size(0,0)});m.setIcon(r)}}else{const t=new Image;t.src=e.iconPath,t.style.opacity=String(e.alpha),t.onload=()=>{const i=new BMapGL.Size(t.width,t.height),s=new BMapGL.Icon(t.src,i);s.imageOffset=new BMapGL.Size(0,0,e.alpha||1),m.setIcon(s)}}const v=e.rotate?e.rotate:0;v>=0&&v<=360&&m.setRotation(v);const y=null!==(s=null===(i=e.anchor)||void 0===i?void 0:i.x)&&void 0!==s?s:.5,b=null!==(n=null===(r=e.anchor)||void 0===r?void 0:r.y)&&void 0!==n?n:1;if(y>=0&&y<=1&&b>=0&&b<=1){const t=-y*(e.width||0),i=-b*(e.height||0);m.setOffset(new BMapGL.Size(t,i))}else{const t=-.5*(e.width||0),i=-1*(e.height||0);m.setOffset(new BMapGL.Size(t,i))}if(!e.callout&&e.title){const e=new Kf(this.mapRef);e.on("tap",e=>{const i=e.center,s=i.x,r=i.y,n=15;this.markers.forEach(e=>{const i=document.getElementsByClassName("bmap-container")[0],a=i.getBoundingClientRect(),o=a.left,l=a.top,c=new BMapGL.Point(e.longitude,e.latitude),d=this.map.pointToPixel(c),h=d.x+o,u=d.y+l,p=Math.sqrt(Math.pow(s-h,2)+Math.pow(r-u,2));if(p<n&&e.id===m.id){const i=`<div style="text-align:center">${e.title}</div>`,s=new BMapGL.InfoWindow(i);this.map.openInfoWindow(s,t)}})})}if(e.callout){const i=(null===(a=e.callout)||void 0===a?void 0:a.anchorX)?null===(o=e.callout)||void 0===o?void 0:o.anchorX:0,s=(null===(l=e.callout)||void 0===l?void 0:l.anchorY)?null===(c=e.callout)||void 0===c?void 0:c.anchorY:0,r=new BMapGL.InfoWindow(`<div style="\n              padding: ${null===(d=e.callout)||void 0===d?void 0:d.padding}px;\n              color:${null===(h=e.callout)||void 0===h?void 0:h.color};\n              text-align:${null===(u=e.callout)||void 0===u?void 0:u.textAlign};"\n              >\n             <p style="font-size:${null===(p=e.callout)||void 0===p?void 0:p.fontSize}px">${(null===(f=e.callout)||void 0===f?void 0:f.content)||""}</p>\n             </div>`,{width:200,height:100,offset:new BMapGL.Size(i-24,s-20)});if(m.callout=r,this.map.addOverlay(m),"ALWAYS"===(null===(g=e.callout)||void 0===g?void 0:g.display)){m.callout.disableCloseOnClick();const i=m.getPosition();m.callout.addEventListener("open",function(){var t,s,r,n;const a=document.querySelector(".BMap_bubble_pop");if(a){let o=a.querySelector(".triangle");o||(o=document.createElement("div"),o.className="triangle",a.appendChild(o));const l=document.querySelector(".BMap_bubble_pop>img");l&&l.setAttribute("style",`position: absolute;transform: translate(-50%, 0); top: ${i.lat-100}px; left: ${i.lng-20}px;display:none`);const c=null===(t=e.callout)||void 0===t?void 0:t.bgColor;let d=(null===(s=e.callout)||void 0===s?void 0:s.borderWidth)||5;const h=null===(r=e.callout)||void 0===r?void 0:r.borderColor,u=null===(n=e.callout)||void 0===n?void 0:n.borderRadius;d=Math.min(d,15),o.setAttribute("style",`width:0;height:0;borderLeft:${d}px solid transparent;borderRight:${d}px solid transparent;borderTop:${d}px solid ${h};position:absolute;left:83px;bottom:-${2*d}px`),a.setAttribute("style",`background-color:${c};top:${i.lat-120}px; left:${i.lng-100}px;position: absolute;border: ${d}px solid ${h};border-radius:${u}px; `)}}),this.map.openInfoWindow(m.callout,t)}else{const e=new Kf(this.mapRef);e.on("tap",e=>{const i=e.center,s=i.x,r=i.y,n=15;this.markers.forEach(e=>{const i=document.getElementsByClassName("bmap-container")[0],a=i.getBoundingClientRect(),o=a.left,l=a.top,c=new BMapGL.Point(e.longitude,e.latitude),d=this.map.pointToPixel(c),h=d.x+o,u=d.y+l,p=Math.sqrt(Math.pow(s-h,2)+Math.pow(r-u,2));if(p<n&&e.id===m.id){const i=m.getPosition();m.callout.addEventListener("open",function(){var t,s,r,n;const a=document.querySelector(".BMap_bubble_pop");if(a){let o=a.querySelector(".triangle");o||(o=document.createElement("div"),o.className="triangle",a.appendChild(o));const l=document.querySelector(".BMap_bubble_pop>img");l&&l.setAttribute("style",`position: absolute;transform: translate(-50%, 0); top: ${i.lat-100}px; left: ${i.lng-20}px;display:none`);const c=null===(t=e.callout)||void 0===t?void 0:t.bgColor;let d=(null===(s=e.callout)||void 0===s?void 0:s.borderWidth)||5;const h=null===(r=e.callout)||void 0===r?void 0:r.borderColor,u=null===(n=e.callout)||void 0===n?void 0:n.borderRadius;d=Math.min(d,15),o.setAttribute("style",`width:0;height:0;border-left:${d}px solid transparent;border-right:${d}px solid transparent;border-top:${d}px solid ${h};position:absolute;left:83px;bottom:-${2*d}px`),a.setAttribute("style",`background-color:${c};top:${i.lat-120}px; left:${i.lng-100}px;position: absolute;border: ${d}px solid ${h};border-radius:${u}px; `)}}),this.map.openInfoWindow(m.callout,t)}else m.callout.enableCloseOnClick()})})}}if(e.label){const i=e.label.content||"",s={position:t,offset:new BMapGL.Size(e.label.anchorX||0,e.label.anchorY||0)},r=new BMapGL.Label(i,s),n=e.label.borderColor?e.label.borderColor:"white";r.setStyle({color:e.label.color,fontSize:e.label.fontSize+"px",borderWidth:e.label.borderWidth+"px",borderColor:n,borderRadius:e.label.borderRadius+"px",background:e.label.bgColor,padding:e.label.padding+"px"}),m.setLabel(r)}this.map.addOverlay(m)}else console.error("\u8bf7\u68c0\u67e5marker\u7ecf\u7eac\u5ea6\u548cmarker\u81ea\u5b9a\u4e49\u56fe\u6807\u8def\u5f84\u548cid\u503c")})}loadMapScript(){return new Promise((e,t)=>{const i=document.createElement("script");i.src="https://api.map.baidu.com/getscript?v=3.0&type=webgl&ak=Mb1FLBD3gfnY6bup4v6zEWh6MXwsZ9eo",i.defer=!0,i.onload=()=>e(),i.onerror=t,i.type="text/javascript",document.head.appendChild(i)})}LoadBmapLibScript(){return d(this,null,function*(){return new Promise((e,t)=>{const i=document.createElement("script");i.src="//mapopen.bj.bcebos.com/github/BMapGLLib/AreaRestriction/src/AreaRestriction.min.js",i.defer=!0,i.type="text/javascript",i.onload=()=>{e()},i.onerror=t,document.head.appendChild(i)})})}render(){return xd(kd,null,xd("div",{id:"mapContainer",ref:e=>{e&&(this.mapRef=e)},style:{width:this.width,height:this.height}}))}get el(){return this}static get style(){return qf}},[0,"taro-map-core",{latitude:[2],longitude:[2],scale:[2],minScale:[2,"min-scale"],maxScale:[2,"max-scale"],markers:[16],polyline:[16],circles:[16],polygons:[16],subkey:[1],layerStyle:[2,"layer-style"],rotate:[2],skew:[2],showCompass:[4,"show-compass"],showScale:[4,"show-scale"],enableOverlooking:[4,"enable-overlooking"],enableZoom:[4,"enable-zoom"],enableScroll:[4,"enable-scroll"],enableRotate:[4,"enable-rotate"],enableSatellite:[4,"enable-satellite"],enableTraffic:[4,"enable-traffic"],enableBuilding:[4,"enable-building"],enableAutoMaxOverlooking:[4,"enable-auto-max-overlooking"],enable3D:[4,"enable-3-d"],width:[1],height:[1]}]);function Qf(){if("undefined"===typeof customElements)return;const e=["taro-map-core"];e.forEach(e=>{switch(e){case"taro-map-core":customElements.get(e)||customElements.define(e,Xf);break}})}const Zf=Qf,Jf=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("MatchMedia",this)}render(){return xd(kd,null)}},[0,"taro-match-media-core"]);function eg(){if("undefined"===typeof customElements)return;const e=["taro-match-media-core"];e.forEach(e=>{switch(e){case"taro-match-media-core":customElements.get(e)||customElements.define(e,Jf);break}})}const tg=eg;function ig(e,t=250,i){let s,r=0;return function(...n){const a=i||this,o=Date.now();o-r>t?(e.apply(this,n),r=o):(clearTimeout(s),s=setTimeout(()=>{r=o,e.apply(a,n)},t))}}function sg(e,t=250,i){let s;return function(...r){const n=i||this;clearTimeout(s),s=setTimeout(function(){e.apply(n,r)},t)}}function rg(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function ng(e){return"object"===typeof HTMLElement?e instanceof HTMLElement:e&&"object"===typeof e&&null!==e&&1===e.nodeType&&"string"===typeof e.nodeName}const ag="taro-movable-area-core{width:10px;height:10px;display:block;position:relative}",og=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.views=[],this.scaleLength=0,this.viewsChanged=()=>{this.views=[];const e=this.element.querySelectorAll("taro-movable-view-core");Array.from(e).forEach(e=>{this.views.push(e)}),this.updateArea()},this.handleTouchStart=e=>{const t=e.touches;if(!t||t.length<=1)return;const i={width:t[1].pageX-t[0].pageX,height:t[1].pageY-t[0].pageY};if(this.scaleLength=Math.sqrt(i.width*i.width+i.height*i.height),this.scaleArea)return;const s=(e,t)=>{const i=(e,t)=>!!(e=e.parentNode)&&((!ng(e)||e!==document.body)&&(e===t||e===t.element||e.element===t||i(e,t)));for(let s=0;s<t.length;s++){const r=t[s];if(e===r["element"]||i(e,r))return r}},r=s(t[0].target,this.views),n=s(t[1].target,this.views);this.scaleTarget=r&&r===n?r:void 0},this.handleTouchMove=e=>{const t=e.touches;if(!t||t.length<=1)return;e.preventDefault();const i={width:t[1].pageX-t[0].pageX,height:t[1].pageY-t[0].pageY};this.scaleLength>0&&this.updateScale(Math.sqrt(i.width*i.width+i.height*i.height)/this.scaleLength)},this.handleTouchEnd=e=>{var t,i;e.touches&&e.touches.length||!e.changedTouches||(this.scaleLength=0,this.scaleArea?this.views.forEach(e=>{var t;null===(t=e["endScale"])||void 0===t||t.call(e)}):null===(i=null===(t=this.scaleTarget)||void 0===t?void 0:t["endScale"])||void 0===i||i.call(t),this.scaleTarget=void 0)},this.updateScale=e=>{var t,i;e&&1!==e&&(this.scaleArea?this.views.forEach(t=>{var i;null===(i=t["setScale"])||void 0===i||i.call(t,e)}):null===(i=null===(t=this.scaleTarget)||void 0===t?void 0:t["setScale"])||void 0===i||i.call(t,e))},this.updateArea=()=>{const e=window.getComputedStyle(this.element),t=this.element.getBoundingClientRect(),i=["Left","Right"].map(t=>parseFloat(e["border"+t+"Width"])+parseFloat(e["padding"+t])),s=["Top","Bottom"].map(t=>parseFloat(e["border"+t+"Width"])+parseFloat(e["padding"+t]));this.views.forEach(e=>{var r;null===(r=e["setParent"])||void 0===r||r.call(e,{element:this.element,area:{height:t.height-s[0]-s[1],width:t.width-i[0]-i[1]}})})},this.scaleArea=void 0}connectedCallback(){this.observer=new MutationObserver(e=>{e.forEach(e=>{var t,i;if("class"===e.attributeName||"style"===e.attributeName){const e=this.element.offsetWidth,s=this.element.offsetHeight;e===(null===(t=this.offset)||void 0===t?void 0:t.width)&&s===(null===(i=this.offset)||void 0===i?void 0:i.height)||this.updateArea(),this.offset={width:e,height:s}}})}),this.observer.observe(this.element,{attributes:!0})}disconnectedCallback(){var e;null===(e=this.observer)||void 0===e||e.disconnect()}componentDidLoad(){this.viewsChanged()}render(){return xd(kd,{onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd})}get element(){return this}static get style(){return ag}},[0,"taro-movable-area-core",{scaleArea:[4,"scale-area"]}]);function lg(){if("undefined"===typeof customElements)return;const e=["taro-movable-area-core"];e.forEach(e=>{switch(e){case"taro-movable-area-core":customElements.get(e)||customElements.define(e,og);break}})}const cg=lg,dg="taro-movable-view-core{width:10px;height:10px;display:inline-block;position:absolute;top:0;left:0}",hg=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onChange=Od(this,"change",7),this.onScale=Od(this,"scale",7),this.onHTouchMove=Od(this,"htouchmove",7),this.onVTouchMove=Od(this,"vtouchmove",7),this.translateX=0,this.translateY=0,this.origin={x:0,y:0},this.area={width:0,height:0},this.originScale=1,this.currentScale=1,this.width=0,this.height=0,this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.baseX=0,this.baseY=0,this.offset={x:0,y:0},this.scaleOffset={x:0,y:0},this.getLimitXY=(e,t)=>{let i=!1;return e>this.maxX?(e=this.maxX,i=!0):e<this.minX&&(e=this.minX,i=!0),t>this.maxY?(t=this.maxY,i=!0):t<this.minY&&(t=this.minY,i=!0),{x:e,y:t,outOfBounds:i}},this.animationTo=(e,t,i,s,r,n,a)=>{this.animation?(this.setTransform(e,t,i,s,r,n),null===a||void 0===a||a()):this.setTransform(e,t,i,s,r,n)},this.setTransform=(e,t,i,s,r,n)=>{if(e=Number(e.toFixed(1)),t=Number(t.toFixed(1)),i=Number((null!==i&&void 0!==i?i:this.currentScale).toFixed(3)),!this.outOfBounds){const i=this.getLimitXY(e,t);e=i.x,t=i.y}const a=(e,t)=>+((1e3*e-1e3*t)/1e3).toFixed(1),o=a(e,this.scaleOffset.x),l=a(t,this.scaleOffset.y);this.translateX===e&&this.translateY===t||!r&&this.onChange.emit({x:o,y:l,source:s}),i!==this.currentScale&&n&&this.onScale.emit({scale:i,x:o,y:l});const c=`translateX(${e}px) translateY(${t}px) translateZ(0px) scale(${i})`;this.element.style.transform=c,this.element.style.webkitTransform=c,this.translateX=e,this.translateY=t,this.currentScale=i},this.updateOffset=()=>{const e=(t,i)=>{if(t===i||!t.offsetParent)return{left:0,top:0};const s=e(t.offsetParent,i);return{left:t.offsetLeft+s.left,top:t.offsetTop+s.top}};if(!this.parent)return;const t=e(this.element,this.parent);this.offset.x=t.left,this.offset.y=t.top},this.updateScaleOffset=(e=this.currentScale)=>{const t=this.element.getBoundingClientRect();this.height=t.height/this.currentScale,this.width=t.width/this.currentScale,this.scaleOffset.x=(this.width*e-this.width)/2,this.scaleOffset.y=(this.height*e-this.height)/2},this.updateBoundary=()=>{const e=0-this.offset.x+this.scaleOffset.x,t=this.area.width-this.width-this.offset.x-this.scaleOffset.x;this.minX=Math.min(e,t),this.maxX=Math.max(e,t);const i=0-this.offset.y+this.scaleOffset.y,s=this.area.height-this.height-this.offset.y-this.scaleOffset.y;this.minY=Math.min(i,s),this.maxY=Math.max(i,s)},this.updateScale=(e,t,i)=>{if(!this.scale)return;const s=this.adjustScale(e);this.updateScaleOffset(s),this.updateBoundary();const{x:r,y:n}=this.getLimitXY(this.translateX,this.translateY);t?this.animationTo(r,n,s,"",!0,!0,i):this.updating||(this.updating=!0,requestAnimationFrame(()=>{this.setTransform(r,n,s,"",!0,!0),this.updating=!1}))},this.setOriginScale=e=>{this.originScale=e},this.adjustScale=e=>Math.min(10,this.scaleMax,Math.max(.5,this.scaleMin,e)),this.handleTouchStart=e=>{const t=e.touches;if(this.disabled||t.length>1||!this.element)return;const i=t[0];this.touching=!0,this.firstMoveFireEvent=!1,this.origin.x=i.screenX,this.origin.y=i.screenY,this.baseX=this.translateX,this.baseY=this.translateY,this.element.style.willChange="transform"},this.handleTouchMove=e=>{const t=e.touches;if(this.disabled||!this.element||this.scaling||!this.touching||t.length>1)return;"horizontal"!==this.direction&&e.preventDefault();const i=t[0],s=i.screenX-this.origin.x,r=i.screenY-this.origin.y;if(this.setTransform(this.xMove?s+this.baseX:0,this.yMove?r+this.baseY:0),!this.firstMoveFireEvent){this.firstMoveFireEvent=!0;const t=Math.abs(s)>Math.abs(r)?this.onHTouchMove:this.onVTouchMove;t.emit({originalEvent:e,bubbles:!1,capturePhase:!1,composed:!0,extraFields:{touches:e.touches||{},changedTouches:e.changedTouches||{}}})}},this.handleTouchEnd=e=>{const t=e.changedTouches[0];if(this.disabled||!this.touching||!t)return;this.touching=!1;const i=t.screenX-this.origin.x,s=t.screenY-this.origin.y;this.setTransform(this.xMove?i+this.baseX:0,this.yMove?s+this.baseY:0)},this.x=0,this.y=0,this.direction="none",this.outOfBounds=!1,this.inertia=!1,this.friction=2,this.damping=20,this.disabled=!1,this.scale=!1,this.scaleMin=.5,this.scaleMax=10,this.scaleValue=1,this.animation=!0}watchX(e){this.setTransform(parseFloat(`${e||0}`),this.translateY)}watchY(e){this.setTransform(this.translateX,parseFloat(`${e||0}`))}watchScaleMinOrMax(){if(!this.scale)return!1;this.updateScale(this.currentScale,!0),this.setOriginScale(this.currentScale)}watchScaleValue(e){return!!this.scale&&(this.updateScale(e,!0),this.setOriginScale(e),e)}setParent(e){return d(this,arguments,function*({element:e,area:t}){const i=this.scale?this.scaleValue:1;this.area=t,this.parent=e,this.updateOffset(),this.updateScaleOffset(i),this.updateBoundary(),this.setTransform(Number(this.x)+this.scaleOffset.x,Number(this.y)+this.scaleOffset.y,i,"",!0),this.setOriginScale(i)})}endScale(){return d(this,null,function*(){this.scaling=!1,this.setOriginScale(this.currentScale)})}setScale(e){return d(this,null,function*(){this.scale&&(this.scaling=!0,this.updateScale(e*this.originScale))})}connectedCallback(){this.observer=new MutationObserver(e=>{e.forEach(e=>{const t=e.attributeName;if(t&&["class","style"].includes(t)){const i=e.oldValue,s=e.target.getAttribute(t);if(i===s)return;const r=e=>null===e||void 0===e?void 0:e.split(";").filter(e=>!["transform","will-change"].find(t=>e.trim().startsWith(t))).join(";");if("style"===t&&r(s)===r(i))return;this.updateOffset(),this.updateScaleOffset(),this.updateBoundary(),this.setTransform(this.translateX,this.translateY)}})}),this.observer.observe(this.element,{attributes:!0,attributeOldValue:!0})}disconnectedCallback(){var e;null===(e=this.observer)||void 0===e||e.disconnect()}componentDidLoad(){if(this.element.style.transformOrigin="center",this.xMove=["horizontal","all"].includes(this.direction),this.yMove=["vertical","all"].includes(this.direction),this.friction<=0&&(this.friction=2),this.x||this.y){const e=parseFloat(`${this.x||0}`),t=parseFloat(`${this.y||0}`);this.setTransform(e,t)}}render(){return xd(kd,{onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd})}get element(){return this}static get watchers(){return{x:["watchX"],y:["watchY"],scaleMin:["watchScaleMinOrMax"],scaleMax:["watchScaleMinOrMax"],scaleValue:["watchScaleValue"]}}static get style(){return dg}},[0,"taro-movable-view-core",{x:[8],y:[8],direction:[1],outOfBounds:[4,"out-of-bounds"],inertia:[4],friction:[2],damping:[2],disabled:[4],scale:[4],scaleMin:[2,"scale-min"],scaleMax:[2,"scale-max"],scaleValue:[2,"scale-value"],animation:[4],setParent:[64],endScale:[64],setScale:[64]}]);function ug(){if("undefined"===typeof customElements)return;const e=["taro-movable-view-core"];e.forEach(e=>{switch(e){case"taro-movable-view-core":customElements.get(e)||customElements.define(e,hg);break}})}const pg=ug,fg=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("NativeSlot",this)}render(){return xd(kd,null)}},[0,"taro-native-slot-core"]);function gg(){if("undefined"===typeof customElements)return;const e=["taro-native-slot-core"];e.forEach(e=>{switch(e){case"taro-native-slot-core":customElements.get(e)||customElements.define(e,fg);break}})}const mg=gg,vg=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("NavigationBar",this)}render(){return xd(kd,null)}},[0,"taro-navigation-bar-core"]);function yg(){if("undefined"===typeof customElements)return;const e=["taro-navigation-bar-core"];e.forEach(e=>{switch(e){case"taro-navigation-bar-core":customElements.get(e)||customElements.define(e,vg);break}})}const bg=yg,Eg=".navigator-hover{background:#efefef}",wg=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onSuccess=Od(this,"cuccess",7),this.onFail=Od(this,"fail",7),this.onComplete=Od(this,"complete",7),this.hoverClass=void 0,this.url=void 0,this.openType="navigate",this.isHover=!1,this.delta=0}onClick(){const{openType:e,onSuccess:t,onFail:i,onComplete:s}=this;let r=Promise.resolve();switch(e){case"navigate":r=US.navigateTo({url:this.url});break;case"redirect":r=US.redirectTo({url:this.url});break;case"switchTab":r=US.switchTab({url:this.url});break;case"reLaunch":r=US.reLaunch({url:this.url});break;case"navigateBack":r=US.navigateBack({delta:this.delta});break;case"exit":r=Promise.reject(new Error('navigator:fail \u6682\u4e0d\u652f\u6301"openType: exit"'));break}r&&r.then(e=>{t.emit(e)}).catch(e=>{i.emit(e)}).finally(()=>{s.emit()})}render(){const{isHover:e,hoverClass:t}=this;return xd(kd,{class:wu({[t]:e})})}static get style(){return Eg}},[0,"taro-navigator-core",{hoverClass:[1,"hover-class"],url:[1],openType:[1,"open-type"],isHover:[4,"is-hover"],delta:[2]},[[0,"click","onClick"]]]);function Ag(){if("undefined"===typeof customElements)return;const e=["taro-navigator-core"];e.forEach(e=>{switch(e){case"taro-navigator-core":customElements.get(e)||customElements.define(e,wg);break}})}const Tg=Ag,Sg=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("NestedScrollBody",this)}render(){return xd(kd,null)}},[0,"taro-nested-scroll-body-core"]);function xg(){if("undefined"===typeof customElements)return;const e=["taro-nested-scroll-body-core"];e.forEach(e=>{switch(e){case"taro-nested-scroll-body-core":customElements.get(e)||customElements.define(e,Sg);break}})}const Lg=xg,kg=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("NestedScrollHeader",this)}render(){return xd(kd,null)}},[0,"taro-nested-scroll-header-core"]);function Ig(){if("undefined"===typeof customElements)return;const e=["taro-nested-scroll-header-core"];e.forEach(e=>{switch(e){case"taro-nested-scroll-header-core":customElements.get(e)||customElements.define(e,kg);break}})}const _g=Ig,Cg=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("OfficialAccount",this)}render(){return xd(kd,null)}},[0,"taro-official-account-core"]);function Rg(){if("undefined"===typeof customElements)return;const e=["taro-official-account-core"];e.forEach(e=>{switch(e){case"taro-official-account-core":customElements.get(e)||customElements.define(e,Cg);break}})}const Pg=Rg,Dg=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("OpenContainer",this)}render(){return xd(kd,null)}},[0,"taro-open-container-core"]);function Mg(){if("undefined"===typeof customElements)return;const e=["taro-open-container-core"];e.forEach(e=>{switch(e){case"taro-open-container-core":customElements.get(e)||customElements.define(e,Dg);break}})}const Og=Mg,Ng=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("OpenData",this)}render(){return xd(kd,null)}},[0,"taro-open-data-core"]);function Bg(){if("undefined"===typeof customElements)return;const e=["taro-open-data-core"];e.forEach(e=>{switch(e){case"taro-open-data-core":customElements.get(e)||customElements.define(e,Ng);break}})}const Fg=Bg,$g=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("PageContainer",this)}render(){return xd(kd,null)}},[0,"taro-page-container-core"]);function Ug(){if("undefined"===typeof customElements)return;const e=["taro-page-container-core"];e.forEach(e=>{switch(e){case"taro-page-container-core":customElements.get(e)||customElements.define(e,$g);break}})}const Gg=Ug,Hg=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("PageMeta",this)}render(){return xd(kd,null)}},[0,"taro-page-meta-core"]);function jg(){if("undefined"===typeof customElements)return;const e=["taro-page-meta-core"];e.forEach(e=>{switch(e){case"taro-page-meta-core":customElements.get(e)||customElements.define(e,Hg);break}})}const zg=jg,Vg=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("PanGestureHandler",this)}render(){return xd(kd,null)}},[0,"taro-pan-gesture-handler-core"]);function Yg(){if("undefined"===typeof customElements)return;const e=["taro-pan-gesture-handler-core"];e.forEach(e=>{switch(e){case"taro-pan-gesture-handler-core":customElements.get(e)||customElements.define(e,Vg);break}})}const Wg=Yg,Kg=102,qg=34,Xg=7*qg,Qg=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onColumnChange=Od(this,"columnChange",7),this.mode=void 0,this.range=[],this.rangeKey=void 0,this.height=void 0,this.columnId=void 0,this.updateHeight=void 0,this.updateDay=void 0,this.startY=void 0,this.preY=void 0,this.hadMove=void 0,this.touchEnd=void 0,this.isMove=void 0}getPosition(){const e=this.touchEnd?.3:0,t=`translate3d(0, ${this.height}px, 0)`,i=`transform ${e}s`;return{transform:t,"-webkit-transform":t,transition:i,"-webkit-transition":i}}formulaUnlimitedScroll(e,t,i){const{height:s,updateHeight:r,columnId:n}=this,a="up"===i?1:-1;this.touchEnd=!1,r(-e*a*qg+s,n),requestAnimationFrame(()=>{this.touchEnd=!0;const i=Math.round(t/-qg)+e*a,s=Kg-qg*i;r(s,n,!0)})}handleMoveStart(e){return d(this,null,function*(){this.startY=e,this.preY=e,this.hadMove=!1})}handleMoving(e){return d(this,null,function*(){const t=e,i=t-this.preY;this.preY=t,this.touchEnd=!1,Math.abs(t-this.startY)>10&&(this.hadMove=!0);let s=this.height+i;"time"===this.mode&&("0"===this.columnId?(s>Kg-3*qg&&(s=Kg-27*qg+i),s<Kg-28*qg&&(s=Kg-4*qg+i)):"1"===this.columnId&&(s>Kg-3*qg&&(s=Kg-63*qg+i),s<Kg-64*qg&&(s=Kg-4*qg+i))),this.updateHeight(s,this.columnId)})}handleMoveEnd(e){return d(this,null,function*(){const{mode:t,range:i,height:s,updateHeight:r,columnId:n}=this,a=0,o=-qg*(i.length-1),l=e;let c;if(this.touchEnd=!0,this.hadMove)c=s-Kg;else{const e=window.innerHeight,i=e-Xg/2;if(c=s-Kg-(l-i),"time"===t)if("0"===n){if(c>2.5*-qg)return this.formulaUnlimitedScroll(24,c,"up");if(c<28.5*-qg)return this.formulaUnlimitedScroll(24,c,"down")}else if("1"===n){if(c>2.5*-qg)return this.formulaUnlimitedScroll(60,c,"up");if(c<64.5*-qg)return this.formulaUnlimitedScroll(60,c,"down")}}c>a&&(c=0),c<o&&(c=o);const d=Math.round(c/-qg),h=Kg-qg*d;"date"===this.mode&&"function"===typeof this.updateDay&&("0"===this.columnId&&this.updateDay(+this.range[d].replace(/[^0-9]/gi,""),0),"1"===this.columnId&&this.updateDay(+this.range[d].replace(/[^0-9]/gi,""),1),"2"===this.columnId&&this.updateDay(+this.range[d].replace(/[^0-9]/gi,""),2)),r(h,n,"time"===t),this.onColumnChange.emit({columnId:n,height:h})})}onMouseDown(e){this.isMove=!0,this.handleMoveStart(e.clientY)}onMouseMove(e){this.isMove&&this.handleMoving(e.clientY)}onMouseMoveEnd(e){this.isMove&&(this.isMove=!1,this.handleMoveEnd(e.clientY))}onTouchStart(e){this.handleMoveStart(e.changedTouches[0].clientY)}onTouchMove(e){this.handleMoving(e.changedTouches[0].clientY)}onTouchEnd(e){this.handleMoveEnd(e.changedTouches[0].clientY)}render(){const{range:e,rangeKey:t}=this,i=e.map(e=>{const i=t?e[t]:e;return xd("div",{class:"weui-picker__item"},i)});return xd(kd,{class:"weui-picker__group"},xd("div",{class:"weui-picker__mask"}),xd("div",{class:"weui-picker__indicator"}),xd("div",{class:"weui-picker__content",style:this.getPosition()},i))}},[0,"taro-picker-group",{mode:[1],range:[16],rangeKey:[1,"range-key"],height:[2],columnId:[1,"column-id"],updateHeight:[16],updateDay:[16],startY:[32],preY:[32],hadMove:[32],touchEnd:[32],isMove:[32],handleMoveStart:[64],handleMoving:[64],handleMoveEnd:[64]},[[1,"mousedown","onMouseDown"],[3,"mousemove","onMouseMove"],[1,"mouseup","onMouseMoveEnd"],[1,"mouseleave","onMouseMoveEnd"],[1,"touchstart","onTouchStart"],[3,"touchmove","onTouchMove"],[1,"touchend","onTouchEnd"]]]);function Zg(){if("undefined"===typeof customElements)return;const e=["taro-picker-group"];e.forEach(e=>{switch(e){case"taro-picker-group":customElements.get(e)||customElements.define(e,Qg);break}})}function Jg(e,t){const i=[];for(let s=e;s<=t;s++)i.push(`${s<10?"0":""}${s}`);return i}const em=["20","21","22","23",...Jg(0,23),"00","01","02","03"],tm=["56","57","58","59",...Jg(0,59),"00","01","02","03"];function im(e,t){return!isNaN(+e)&&e>=0&&e<t.length}function sm(e){if(!/^\d{1,2}:\d{1,2}$/.test(e))return!1;const t=e.split(":").map(e=>+e);return!(t[0]<0||t[0]>23)&&!(t[1]<0||t[1]>59)}function rm(e,t){const i=e.split(":").map(e=>+e),s=t.split(":").map(e=>+e);return i[0]<s[0]||i[0]===s[0]&&i[1]<=s[1]}function nm(e){if(!e)return!1;const t=new Date(e.replace(/-/g,"/"));return!isNaN(t.getMonth())&&t}function am(e,t){return 4===t||6===t||9===t||11===t?30:2===t?e%4===0&&e%100!==0||e%400===0?29:28:31}function om(e){let t;return t=Array.isArray(e)?e.map(e=>String(e)):e,t}function lm(e,t){const i=[];for(let s=e;s<=t;s++)i.push(s);return i}function cm(e,t){return lm(e,t)}function dm(e,t,i){let s=1,r=12;return e.getFullYear()===i&&(s=e.getMonth()+1),t.getFullYear()===i&&(r=t.getMonth()+1),lm(s,r)}function hm(e,t,i,s){let r=1,n=am(i,s);return e.getFullYear()===i&&e.getMonth()+1===s&&(r=e.getDate()),t.getFullYear()===i&&t.getMonth()+1===s&&(n=t.getDate()),lm(r,n)}const um='.weui-mask{z-index:1000;background:rgba(0,0,0,.6);position:fixed;inset:0}.weui-mask_transparent{z-index:1000;position:fixed;inset:0}@keyframes weuiSlideUp{0%{transform:translateY(100%)}to{transform:translate(0,0)}}.weui-animate-slide-up{animation:.3s forwards weuiSlideUp}@keyframes weuiSlideDown{0%{transform:translate(0,0)}to{transform:translateY(100%)}}.weui-animate-slide-down{animation:.3s forwards weuiSlideDown}@keyframes weuiFadeIn{0%{opacity:0}to{opacity:1}}.weui-animate-fade-in{animation:.3s forwards weuiFadeIn}@keyframes weuiFadeOut{0%{opacity:1}to{opacity:0}}.weui-animate-fade-out{animation:.3s forwards weuiFadeOut}.weui-picker{box-sizing:border-box;z-index:5000;background-color:var(--weui-BG-2);width:100%;padding-left:0;padding-left:constant(safe-area-inset-left);padding-left:env(safe-area-inset-left);padding-right:0;padding-right:constant(safe-area-inset-right);padding-right:env(safe-area-inset-right);backface-visibility:hidden;transition:transform .3s;position:fixed;bottom:0;left:0;transform:translateY(100%)}.weui-picker__hd{text-align:center;background-color:#fff;padding:9px 15px;font-size:17px;display:flex;position:relative}.weui-picker__hd:after{content:" ";color:#e5e5e5;transform-origin:0 100%;border-bottom:1px solid #e5e5e5;height:1px;position:absolute;bottom:0;left:0;right:0;transform:scaleY(.5)}.weui-picker__action{color:#1aad19;flex:1;display:block}.weui-picker__action:first-child{text-align:left;color:#888}.weui-picker__action:last-child{text-align:right}.weui-picker__bd{background-color:#fff;height:238px;display:flex;position:relative;overflow:hidden}.weui-picker__group{flex:1;height:100%;position:relative}.weui-picker__mask{z-index:3;background-color:transparent;background-image:linear-gradient(rgba(255,255,255,.95),rgba(255,255,255,.6)),linear-gradient(rgba(255,255,255,.6),rgba(255,255,255,.95));background-position:top,bottom;background-repeat:no-repeat;background-size:100% 102px;background-attachment:scroll,scroll;background-origin:padding-box,padding-box;background-clip:border-box,border-box;width:100%;height:100%;margin:0 auto;position:absolute;top:0;left:0;transform:translateZ(0)}.weui-picker__indicator{z-index:3;width:100%;height:34px;position:absolute;top:102px;left:0}.weui-picker__indicator:before{content:" ";color:#e5e5e5;transform-origin:0 0;border-top:1px solid #e5e5e5;height:1px;position:absolute;top:0;left:0;right:0;transform:scaleY(.5)}.weui-picker__indicator:after{content:" ";color:#e5e5e5;transform-origin:0 100%;border-bottom:1px solid #e5e5e5;height:1px;position:absolute;bottom:0;left:0;right:0;transform:scaleY(.5)}.weui-picker__content{width:100%;position:absolute;top:0;left:0}.weui-picker__item{text-align:center;color:#000;text-overflow:ellipsis;white-space:nowrap;height:34px;padding:0;line-height:34px;overflow:hidden}.weui-picker__item_disabled{color:#999}.weui-picker,.weui-picker__hd{font-size:12px}',pm=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onChange=Od(this,"change",7),this.onColumnChange=Od(this,"columnchange",7),this.onCancel=Od(this,"cancel",7),this.index=[],this.showPicker=()=>{this.disabled||(this.height=this.getHeightByIndex(),this.hidden=!1)},this.getHeightByIndex=()=>{const e=this.index.map(e=>{let t=0;return"time"===this.mode&&(t=4*qg),Kg-qg*e-t});return e},this.hidePicker=()=>{this.fadeOut=!0,setTimeout(()=>{this.hidden=!0,this.fadeOut=!1},350)},this.handleChange=()=>{this.hidePicker(),this.index=this.height.map(e=>(Kg-e)/qg);let e=this.index.length&&"selector"!==this.mode?this.index:this.index[0];if("time"===this.mode){const t=[em.slice(),tm.slice()],i=this.index.map((e,i)=>t[i][e]);this.index=i.map(e=>parseInt(e)),e=i.join(":")}if("date"===this.mode){const{_start:t,_end:i,_updateValue:s}=this.pickerDate,r=s[0],n=s[1],a=cm(t.getFullYear(),i.getFullYear()),o=dm(t,i,r),l=hm(t,i,r,n),c=a[this.index[0]],d=o[this.index[1]],h=l[this.index[2]];e="year"===this.fields?[c]:"month"===this.fields?[c,d]:[c,d,h],e=e.map(e=>e<10?`0${e}`:e).join("-")}this.value=e,this.pickerValue=this.value,this.onChange.emit({value:e})},this.handleColumnChange=e=>{const{columnId:t,height:i}=e.detail;this.onColumnChange.emit({column:Number(t),value:(Kg-i)/qg})},this.handleCancel=()=>{this.hidePicker(),this.onCancel.emit()},this.updateHeight=(e,t,i=!1)=>{const s=[...this.height];if(s[t]=e,this.height=s,i){let{start:e,end:t}=this;if(sm(e)||(e="00:00"),sm(t)||(t="23:59"),!rm(e,t))return;const i=[em.slice(),tm.slice()],s=this.height.map(e=>(Kg-e)/qg),r=s.map((e,t)=>i[t][e]).join(":");if(rm(e,r)){if(!rm(r,t)){const e=t.split(":").map(e=>Kg-qg*(+e+4));requestAnimationFrame(()=>this.height=e)}}else{const t=e.split(":").map(e=>Kg-qg*(+e+4));requestAnimationFrame(()=>this.height=t)}}},this.updateDay=(e,t)=>{const{_start:i,_end:s,_updateValue:r}=this.pickerDate;r[t]=e;const n=r[0],a=r[1],o=r[2];if(0===t){const e=dm(i,s,n),t=e[e.length-1],o=e[0];a>t&&(r[1]=t),a<o&&(r[1]=o);const l=e.indexOf(r[1]),c=Kg-qg*l;this.updateDay(r[1],1),this.updateHeight(c,"1")}else if(1===t){const e=hm(i,s,n,a),t=e[e.length-1],l=e[0];o>t&&(r[2]=t),o<l&&(r[2]=l);const c=e.indexOf(r[2]),d=Kg-qg*c;this.updateDay(r[2],2),this.updateHeight(d,"2")}},this.getSelector=()=>xd("taro-picker-group",{range:this.range,rangeKey:this.rangeKey,height:this.height[0],updateHeight:this.updateHeight,columnId:"0"}),this.getMultiSelector=()=>this.range.map((e,t)=>xd("taro-picker-group",{range:e,rangeKey:this.rangeKey,height:this.height[t],updateHeight:this.updateHeight,onColumnChange:this.handleColumnChange,columnId:String(t)})),this.getTimeSelector=()=>{const e=em.slice(),t=tm.slice();return[xd("taro-picker-group",{mode:"time",range:e,height:this.height[0],updateHeight:this.updateHeight,columnId:"0"}),xd("taro-picker-group",{mode:"time",range:t,height:this.height[1],updateHeight:this.updateHeight,columnId:"1"})]},this.getDateSelector=()=>{const{fields:e,height:t}=this,{_start:i,_end:s,_updateValue:r}=this.pickerDate,n=r[0],a=r[1],o=cm(i.getFullYear(),s.getFullYear()).map(e=>`${e}\u5e74`),l=dm(i,s,n).map(e=>`${e<10?`0${e}`:e}\u6708`),c=hm(i,s,n,a).map(e=>`${e<10?`0${e}`:e}\u65e5`),d=[xd("taro-picker-group",{mode:"date",range:o,height:t[0],updateDay:this.updateDay,updateHeight:this.updateHeight,columnId:"0"})];return"month"!==e&&"day"!==e||d.push(xd("taro-picker-group",{mode:"date",range:l,height:t[1],updateDay:this.updateDay,updateHeight:this.updateHeight,columnId:"1"})),"day"===e&&d.push(xd("taro-picker-group",{mode:"date",range:c,height:t[2],updateDay:this.updateDay,updateHeight:this.updateHeight,columnId:"2"})),d},this.mode="selector",this.disabled=!1,this.range=[],this.rangeKey=void 0,this.value=void 0,this.start="",this.end="",this.fields="day",this.name="",this.textProps={},this.pickerValue=[],this.height=[],this.hidden=!0,this.fadeOut=!1,this.isWillLoadCalled=!1}componentWillLoad(){this.isWillLoadCalled=!0,this.handleProps()}componentDidLoad(){this.overlay&&document.body.appendChild(this.overlay)}disconnectedCallback(){var e;this.overlay&&(null===(e=this.overlay.parentNode)||void 0===e||e.removeChild(this.overlay))}onPropsChange(){this.isWillLoadCalled&&this.handleProps()}handleProps(){const{mode:e,start:t,end:i}=this;if("selector"===e){const e=this.value;this.index=[im(e,this.range)?Math.floor(e):0]}else if("multiSelector"===e){const e=this.value;this.index=[],this.range.forEach((t,i)=>{const s=null===e||void 0===e?void 0:e[i],r=im(s,t)?Math.floor(s):0;this.index.push(r)})}else if("time"===e){let e=this.value;sm(e)||(console.warn("time picker value illegal"),e="0:0");const t=e.split(":").map(e=>+e);this.index=t}else{if("date"!==e)throw new Error(`Picker not support "${e}" mode.`);{const e=this.value;let s=nm(e)||new Date((new Date).setHours(0,0,0,0));const r=nm(t)||new Date("1970/01/01"),n=nm(i)||new Date("2999/01/01");if(!(r<=n))throw new Error("Picker start time must be less than end time.");s>=r&&s<=n||(s=r);const a=s.getFullYear(),o=s.getMonth()+1,l=s.getDate(),c=cm(r.getFullYear(),n.getFullYear()),d=dm(r,n,a),h=hm(r,n,a,o);this.index=[c.indexOf(a),d.indexOf(o),h.indexOf(l)],this.pickerDate&&this.pickerDate._value.getTime()===s.getTime()&&this.pickerDate._start.getTime()===r.getTime()&&this.pickerDate._end.getTime()===n.getTime()||(this.pickerDate={_value:s,_start:r,_end:n,_updateValue:[a,o,l]})}}if(this.height=this.getHeightByIndex(),this.pickerValue=this.value,"date"===e){const e=this.pickerValue;"month"===this.fields?this.pickerValue=e.split("-").slice(0,2).join("-"):"year"===this.fields&&(this.pickerValue=e.split("-")[0])}}render(){var e,t;const{name:i,mode:s,fadeOut:r,hidden:n}=this;let a;switch(s){case"multiSelector":a=this.getMultiSelector();break;case"time":a=this.getTimeSelector();break;case"date":a=this.getDateSelector();break;default:a=this.getSelector()}const o=wu("weui-mask","weui-animate-fade-in",{"weui-animate-fade-out":r}),l=wu("weui-picker","weui-animate-slide-up",{"weui-animate-slide-down":r}),c=n?{display:"none"}:{};return xd(kd,null,xd("div",{onClick:this.showPicker},xd("slot",null),xd("input",{type:"hidden",name:i,value:om(this.pickerValue)})),xd("div",{class:"weui-picker__overlay",style:c,ref:e=>{this.overlay=e}},xd("div",{class:o,onClick:this.handleCancel}),xd("div",{class:l},xd("div",{class:"weui-picker__hd"},xd("div",{class:"weui-picker__action",onClick:this.handleCancel},null!==(e=this.textProps.cancelText)&&void 0!==e?e:"\u53d6\u6d88"),xd("div",{class:"weui-picker__action",onClick:this.handleChange},null!==(t=this.textProps.okText)&&void 0!==t?t:"\u786e\u5b9a")),xd("div",{class:"weui-picker__bd"},a),xd("input",{type:"hidden",name:i,value:om(this.pickerValue)}))))}get el(){return this}static get watchers(){return{mode:["onPropsChange"],value:["onPropsChange"],range:["onPropsChange"],start:["onPropsChange"],end:["onPropsChange"]}}static get style(){return um}},[4,"taro-picker-core",{mode:[1],disabled:[4],range:[16],rangeKey:[1,"range-key"],value:[1032],start:[1],end:[1],fields:[1],name:[1],textProps:[16],pickerValue:[32],height:[32],hidden:[32],fadeOut:[32],isWillLoadCalled:[32]}]);function fm(){if("undefined"===typeof customElements)return;const e=["taro-picker-core","taro-picker-group"];e.forEach(e=>{switch(e){case"taro-picker-core":customElements.get(e)||customElements.define(e,pm);break;case"taro-picker-group":customElements.get(e)||Zg();break}})}const gm=fm,mm=Zg,vm=".taro-picker-view-column-container{text-align:center;flex-direction:column;flex:1;display:flex;position:relative;overflow:hidden scroll}.taro-picker-view-column-container::-webkit-scrollbar{display:none}",ym=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onChange=Od(this,"onselect",7),this.onSelectStart=Od(this,"onselectstart",7),this.onSelectEnd=Od(this,"onselectend",7),this.handleSelected=sg(()=>{const e=this.el.childNodes;let t=0,i="0";for(const s in e){const r=e[s],n=r.offsetHeight;if(t+n/2>this.el.scrollTop){i=s;break}t+=n}this.el.scrollTo({top:t,behavior:"smooth"}),this.onChange.emit({curIndex:this.col,selectedIndex:i}),this.onSelectEnd.emit()},500),this.col=void 0,this.initialPosition="0",this.paddingVertical=0,this.isInit=!1}onTouchStart(){this.onSelectStart.emit()}onTouchEnd(){this.handleSelected()}componentDidLoad(){this.handleChange()}componentDidUpdate(){this.handleChange()}handleChange(){const e=this.el.childNodes;let t=0,i=0;for(const s in e){const r=e[s];if(this.initialPosition===s||!r||"number"!==typeof r.offsetHeight)break;i+=r.offsetHeight,t++}this.el.scrollTo({top:i}),t>=e.length&&this.onChange.emit({curIndex:this.col,selectedIndex:t-1})}render(){const{paddingVertical:e=0}=this;return xd(kd,{class:"taro-picker-view-column-container",style:{"padding-top":`${e}px`,"padding-bottom":`${e}px`}})}get el(){return this}static get style(){return vm}},[0,"taro-picker-view-column-core",{col:[1],initialPosition:[1,"initial-position"],paddingVertical:[2,"padding-vertical"],isInit:[32]},[[1,"touchstart","onTouchStart"],[1,"touchend","onTouchEnd"]]]);function bm(){if("undefined"===typeof customElements)return;const e=["taro-picker-view-column-core"];e.forEach(e=>{switch(e){case"taro-picker-view-column-core":customElements.get(e)||customElements.define(e,ym);break}})}const Em=bm;function wm(e){if(e){const t=/([\w-]*)\s*:\s*([^;]*)/g,i={};let s;while(s=t.exec(e))i[`${s[1]}`]=s[2].trim();return i}}const Am=".taro-picker-view-container{display:flex;position:relative}.taro-picker-view-mask-container{pointer-events:none;flex-direction:column;display:flex;position:absolute;inset:0}.taro-picker-view-mask-indicator{border-top:1px solid #ddd;border-bottom:1px solid #ddd;height:50px;display:flex}.taro-picker-view-mask-top{background-image:linear-gradient(rgba(255,255,255,.95),rgba(255,255,255,.6));flex:1}.taro-picker-view-mask-bottom{background:linear-gradient(rgba(255,255,255,.6),rgba(255,255,255,.95));flex:1}",Tm=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onChange=Od(this,"change",7),this.onPickStart=Od(this,"pickstart",7),this.onPickEnd=Od(this,"pickend",7),this.indicatorStyle=void 0,this.indicatorClass=void 0,this.value=void 0,this.maskStyle=void 0,this.maskClass=void 0}onPropsChange(){this.handleValueChange()}onSelect(e){if(e.stopPropagation(),"TARO-PICKER-VIEW-COLUMN-CORE"!==e.target.tagName)return;let t=+e.detail.curIndex,i=+e.detail.selectedIndex;this.value[t]=i,this.onChange.emit({value:this.value})}onSelectStart(e){e.stopPropagation(),"TARO-PICKER-VIEW-COLUMN-CORE"===e.target.tagName&&this.onPickStart.emit()}onPickerColEnd(e){e.stopPropagation(),"TARO-PICKER-VIEW-COLUMN-CORE"===e.target.tagName&&this.onPickEnd.emit()}componentDidLoad(){this.handleValueChange()}handleValueChange(){const e=this.el.querySelectorAll("taro-picker-view-column-core");e.forEach((e,t)=>{var i;e.setAttribute("col",`${t}`);let s=0;this.value&&this.value.length>t&&(s=this.value[t]);const r=this.el.getBoundingClientRect().height,n=(null===(i=this.indicator)||void 0===i?void 0:i.offsetHeight)||0,a=(r-n)/2;e.setAttribute("initial-position",`${s}`),e.setAttribute("padding-vertical",`${a}`)})}componentDidRender(){this.el.childNodes.forEach(e=>{const t=e;"TARO-PICKER-VIEW-COLUMN-CORE"!==t.tagName&&"taro-picker-view-mask-container"!==t.className&&this.el.removeChild(e)})}render(){const e=wu("taro-picker-view-mask-indicator",this.indicatorClass),t=wu("taro-picker-view-mask-top",this.maskClass),i=wu("taro-picker-view-mask-bottom",this.maskClass),s=wm(this.indicatorStyle),r=wm(this.maskStyle),n=wm(this.maskStyle);return xd(kd,{class:"taro-picker-view-container"},xd("slot",null),xd("div",{class:"taro-picker-view-mask-container"},xd("div",{class:t,style:r}),xd("div",{class:e,style:s,ref:e=>this.indicator=e}),xd("div",{class:i,style:n})))}get el(){return this}static get watchers(){return{value:["onPropsChange"]}}static get style(){return Am}},[4,"taro-picker-view-core",{indicatorStyle:[1,"indicator-style"],indicatorClass:[1,"indicator-class"],value:[16],maskStyle:[1,"mask-style"],maskClass:[1,"mask-class"]},[[0,"onselect","onSelect"],[0,"onselectstart","onSelectStart"],[0,"onselectend","onPickerColEnd"]]]);function Sm(){if("undefined"===typeof customElements)return;const e=["taro-picker-view-core"];e.forEach(e=>{switch(e){case"taro-picker-view-core":customElements.get(e)||customElements.define(e,Tm);break}})}const xm=Sm,Lm=".weui-progress{align-items:center;display:flex}.weui-progress__bar{background-color:#ebebeb;flex:1;height:3px}.weui-progress__inner-bar{background-color:#09bb07;width:0;height:100%}.weui-progress__opr{margin-left:15px;font-size:0;display:block}",km=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.percent=0,this.showInfo=!1,this.borderRadius=0,this.fontSize=16,this.strokeWidth=6,this.activeColor="#09BB07",this.backgroundColor="#EBEBEB",this.active=!1}render(){const{percent:e,showInfo:t,borderRadius:i,fontSize:s,strokeWidth:r,activeColor:n,backgroundColor:a,active:o}=this,l=e>100?100:e<0?0:e,c={height:r+"px",backgroundColor:a},d=o?"width 1s ease-in-out":"none",h={width:`${l}%`,transition:d,WebkitTransition:d,backgroundColor:n,borderRadius:i?`${i}px`:"0px"};return xd(kd,{class:"weui-progress"},xd("div",{class:"weui-progress__bar",style:c},xd("div",{class:"weui-progress__inner-bar",style:h})),t&&xd("div",{class:"weui-progress__opr",style:{"font-size":`${s}px`}},xd("span",null,l,"%")))}static get style(){return Lm}},[0,"taro-progress-core",{percent:[2],showInfo:[4,"show-info"],borderRadius:[8,"border-radius"],fontSize:[8,"font-size"],strokeWidth:[8,"stroke-width"],activeColor:[1,"active-color"],backgroundColor:[1,"background-color"],active:[4]}]);function Im(){if("undefined"===typeof customElements)return;const e=["taro-progress-core"];e.forEach(e=>{switch(e){case"taro-progress-core":customElements.get(e)||customElements.define(e,km);break}})}const _m=Im,Cm=".rmc-pull-to-refresh-content{transform-origin:0 0}.rmc-pull-to-refresh-content-wrapper{min-height:100%}.rmc-pull-to-refresh-transition{transition:transform .3s}@keyframes rmc-pull-to-refresh-indicator{50%{opacity:.2}to{opacity:1}}.rmc-pull-to-refresh-indicator{text-align:center;height:30px;line-height:10px}.rmc-pull-to-refresh-indicator>div{background-color:gray;border-radius:100%;width:6px;height:6px;margin:3px;animation:.5s linear infinite both rmc-pull-to-refresh-indicator;display:inline-block}.rmc-pull-to-refresh-indicator>div:nth-child(0){animation-delay:-.1s!important}.rmc-pull-to-refresh-indicator>div:first-child{animation-delay:-.2s!important}.rmc-pull-to-refresh-indicator>div:nth-child(2){animation-delay:-.3s!important}.rmc-pull-to-refresh-down .rmc-pull-to-refresh-indicator{margin-top:-25px}";function Rm(e,t){e.transform=t,e.webkitTransform=t,e.MozTransform=t}const Pm="undefined"!==typeof navigator&&/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),Dm={activate:"release",deactivate:"pull",release:"loading",finish:"finish"};let Mm=!1;try{const e=Object.defineProperty({},"passive",{get(){Mm=!0}});window.addEventListener("cancel",()=>({}),e)}catch(tH){}const Om=!!Mm&&{passive:!1},Nm=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onRefresh=Od(this,"refresh",7),this._ScreenY=0,this._startScreenY=0,this._lastScreenY=0,this._isMounted=!1,this.triggerPullDownRefresh=e=>{!this.dragOnEdge&&this._isMounted&&(e?(this._lastScreenY=this.distanceToRefresh+1,this.currSt="release",this.setContentStyle(this._lastScreenY)):(this.currSt="finish",this.reset()))},this.init=()=>{const e=this.scrollContainer,t=this.el.querySelector(".rmc-pull-to-refresh-content");this.el.appendChild=null===t||void 0===t?void 0:t.appendChild.bind(t),this.el.insertBefore=null===t||void 0===t?void 0:t.insertBefore.bind(t),this.el.replaceChild=null===t||void 0===t?void 0:t.replaceChild.bind(t),this.el.removeChild=null===t||void 0===t?void 0:t.removeChild.bind(t),this._to={touchstart:this.onTouchStart.bind(this,e),touchmove:this.onTouchMove.bind(this,e),touchend:this.onTouchEnd.bind(this,e),touchcancel:this.onTouchEnd.bind(this,e)},Object.keys(this._to).forEach(t=>{e.addEventListener(t,this._to[t],Om)})},this.destroy=()=>{if(!this._to)return;const e=this.scrollContainer;Object.keys(this._to).forEach(t=>{e.removeEventListener(t,this._to[t])})},this.onTouchStart=(e,t)=>{this._ScreenY=this._startScreenY=t.touches[0].screenY,this._lastScreenY=this._lastScreenY||0},this.isEdge=e=>{const t=this.scrollContainer;if(t&&t===document.body){const e=document.scrollingElement?document.scrollingElement:document.body;return e.scrollTop<=0}return e.scrollTop<=0},this.damp=e=>{if(Math.abs(this._lastScreenY)>this.damping)return 0;const t=Math.abs(this._ScreenY-this._startScreenY)/window.screen.height;return e*=.6*(1-t),e},this.onTouchMove=(e,t)=>{const i=t.touches[0].screenY;if(!(this._startScreenY>i)&&this.isEdge(e)){this.dragOnEdge||(this._ScreenY=this._startScreenY=t.touches[0].screenY,this.dragOnEdge=!0),t.cancelable&&t.preventDefault();const e=Math.round(i-this._ScreenY);this._ScreenY=i,this._lastScreenY+=this.damp(e),this.setContentStyle(this._lastScreenY),Math.abs(this._lastScreenY)<this.distanceToRefresh?"deactivate"!==this.currSt&&(this.currSt="deactivate"):"deactivate"===this.currSt&&(this.currSt="activate"),Pm&&t.changedTouches[0].clientY<0&&this.onTouchEnd()}},this.onTouchEnd=()=>{this.dragOnEdge&&(this.dragOnEdge=!1),"activate"===this.currSt?(this.currSt="release",this.onRefresh.emit(this),this._lastScreenY=this.distanceToRefresh+1,this.setContentStyle(this._lastScreenY)):"release"===this.currSt?(this._lastScreenY=this.distanceToRefresh+1,this.setContentStyle(this._lastScreenY)):this.reset()},this.reset=()=>{this._lastScreenY=0,this.setContentStyle(0)},this.setContentStyle=e=>{this.contentRef&&Rm(this.contentRef.style,e?`translate3d(0px,${e}px,0)`:"")},this.prefixCls="rmc-pull-to-refresh",this.distanceToRefresh=50,this.damping=100,this.indicator=Dm,this.currSt="deactivate",this.dragOnEdge=!1}get scrollContainer(){return this.el.parentElement||this.el.closest(".taro_page_stationed")||document.querySelector(".taro_page_stationed")||document.querySelector(".taro_page")||document.querySelector(".taro_router")||document.querySelector(".taro-tabbar__panel")||document.body}statusChange(){var e,t,i,s;const r=this.scrollContainer;switch(this.currSt){case"release":null===(t=null===(e=null===r||void 0===r?void 0:r.__page)||void 0===e?void 0:e.onPullDownRefresh)||void 0===t||t.call(e);break;case"deactivate":null===(s=null===(i=null===r||void 0===r?void 0:r.__page)||void 0===i?void 0:i.onPullIntercept)||void 0===s||s.call(i)}}disconnectedCallback(){this.destroy()}componentDidLoad(){this.init(),this._isMounted=!0,US.eventCenter.on("__taroStartPullDownRefresh",({successHandler:e,errorHandler:t})=>{try{this.triggerPullDownRefresh(!0),e({errMsg:"startPullDownRefresh: ok"})}catch(tH){t({errMsg:"startPullDownRefresh: fail"})}}),US.eventCenter.on("__taroStopPullDownRefresh",({successHandler:e,errorHandler:t})=>{setTimeout(()=>{try{this.triggerPullDownRefresh(!1),e({errMsg:"stopPullDownRefresh: ok"})}catch(tH){t({errMsg:"stopPullDownRefresh: fail"})}},0)})}render(){const e=e=>{const{currSt:t,dragOnEdge:i,prefixCls:s}=this,r=wu(e,!i&&`${s}-transition`),n="activate"===t||"release"===t;return xd("div",{class:`${s}-content-wrapper`},xd("div",{class:r,ref:e=>{this.contentRef=e}},n&&xd("div",{class:`${s}-indicator`},xd("div",null),xd("div",null),xd("div",null)),xd("slot",null)))};return this.scrollContainer?e(`${this.prefixCls}-content ${this.prefixCls}-down`):xd(kd,{class:wu(this.prefixCls,`${this.prefixCls}-down`)},e(`${this.prefixCls}-content`))}get el(){return this}static get watchers(){return{currSt:["statusChange"]}}static get style(){return Cm}},[4,"taro-pull-to-refresh-core",{prefixCls:[1,"prefix-cls"],distanceToRefresh:[2,"distance-to-refresh"],damping:[2],indicator:[16],currSt:[32],dragOnEdge:[32]}]);function Bm(){if("undefined"===typeof customElements)return;const e=["taro-pull-to-refresh-core"];e.forEach(e=>{switch(e){case"taro-pull-to-refresh-core":customElements.get(e)||customElements.define(e,Nm);break}})}const Fm=Bm,$m=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onChange=Od(this,"radiochange",7),this.handleClick=e=>{e.stopPropagation(),this.disabled||this.checked||(this.checked=!0)},this.name=void 0,this.value="",this.id=void 0,this.checked=!1,this.disabled=!1,this.nativeProps={},this.isWillLoadCalled=!1}watchChecked(e){this.isWillLoadCalled&&e&&this.onChange.emit({value:this.value})}watchId(e){this.isWillLoadCalled&&e&&this.inputEl.setAttribute("id",e)}componentDidRender(){this.id&&this.el.removeAttribute("id")}componentWillLoad(){this.isWillLoadCalled=!0}render(){const{checked:e,name:t,value:i,disabled:s,nativeProps:r}=this;return xd(kd,{class:"weui-cells_checkbox",onClick:this.handleClick},xd("input",Object.assign({ref:e=>{e&&(this.inputEl=e,this.id&&e.setAttribute("id",this.id))},type:"radio",name:t,value:i,class:"weui-check",checked:e,disabled:s,onChange:e=>e.stopPropagation()},r)),xd("i",{class:"weui-icon-checked"}),xd("slot",null))}get el(){return this}static get watchers(){return{checked:["watchChecked"],id:["watchId"]}}},[4,"taro-radio-core",{name:[1],value:[1],id:[1025],checked:[1540],disabled:[4],nativeProps:[16],isWillLoadCalled:[32]}]);function Um(){if("undefined"===typeof customElements)return;const e=["taro-radio-core"];e.forEach(e=>{switch(e){case"taro-radio-core":customElements.get(e)||customElements.define(e,$m);break}})}const Gm=Um;var Hm,jm=function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i},zm=function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};const Vm=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onChange=Od(this,"change",7),this.uniqueName=Date.now().toString(36),Hm.set(this,void 0),this.name=void 0}function(e){if(e.stopPropagation(),"TARO-RADIO-CORE"!==e.target.tagName)return;const t=e.target;if(t.checked){const i=this.el.querySelectorAll("taro-radio-core");i.forEach(e=>{e!==t&&(e.checked=!1)}),jm(this,Hm,e.detail.value,"f"),this.onChange.emit({value:zm(this,Hm,"f")})}}componentDidLoad(){const e=this.el.querySelectorAll("taro-radio-core");e.forEach(e=>{e.setAttribute("name",this.name||this.uniqueName)}),Object.defineProperty(this.el,"value",{get:()=>{if(!zm(this,Hm,"f")){const e=this.el.querySelectorAll("taro-radio-core");jm(this,Hm,this.getValues(e),"f")}return zm(this,Hm,"f")},configurable:!0})}getValues(e){let t="";return Array.from(e).forEach(e=>{const i=e.querySelector("input");(null===i||void 0===i?void 0:i.checked)&&(t=i.value||"")}),t}render(){return xd(kd,{class:"weui-cells_radiogroup"})}get el(){return this}},[0,"taro-radio-group-core",{name:[8]},[[0,"radiochange","function"]]]);function Ym(){if("undefined"===typeof customElements)return;const e=["taro-radio-group-core"];e.forEach(e=>{switch(e){case"taro-radio-group-core":customElements.get(e)||customElements.define(e,Vm);break}})}Hm=new WeakMap;const Wm=Ym,Km="taro-rich-text-core{user-select:none}taro-rich-text-core[selectable=true],taro-rich-text-core[user-select=true]{user-select:text;display:block}taro-rich-text-core[space]{white-space:pre-wrap}taro-rich-text-core[space=ensp]{word-spacing:.5em}taro-rich-text-core[space=nbsp]{word-spacing:1em}",qm=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.renderNode=e=>{if("type"in e&&"text"===e.type){const t=(e.text||"").replace(/&nbsp;/g,"\xa0");return t}if("name"in e&&e.name){const{name:t,attrs:i,children:s}=e,r={};let n=[];if(i&&"object"===typeof i)for(const e in i){const t=i[e];if("style"===e&&"string"===typeof t){const e=t.split(";").map(e=>e.trim()).filter(e=>e),i={};e.forEach(e=>{if(!e)return;const t=/(.+): *(.+)/g.exec(e);if(!t)return;const[,s,r]=t,n=s.replace(/-([a-z])/g,(...e)=>e[1].toUpperCase());i[n]=r}),Object.keys(i).length&&(r.style=i);continue}r[e]=t}return s&&s.length&&(n=s.map(e=>this.renderNode(e))),xd(t,r,n)}return null},this.nodes=void 0,this.selectable=!1,this.userSelect=!1,this.space=void 0}render(){const{nodes:e,renderNode:t}=this;return Array.isArray(e)?xd(kd,null,e.map(e=>t(e))):xd(kd,{innerHTML:e})}static get style(){return Km}},[0,"taro-rich-text-core",{nodes:[1],selectable:[1028],userSelect:[1028,"user-select"],space:[1]}]);function Xm(){if("undefined"===typeof customElements)return;const e=["taro-rich-text-core"];e.forEach(e=>{switch(e){case"taro-rich-text-core":customElements.get(e)||customElements.define(e,qm);break}})}const Qm=Xm,Zm=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("RootPortal",this)}render(){return xd(kd,null)}},[0,"taro-root-portal-core"]);function Jm(){if("undefined"===typeof customElements)return;const e=["taro-root-portal-core"];e.forEach(e=>{switch(e){case"taro-root-portal-core":customElements.get(e)||customElements.define(e,Zm);break}})}const ev=Jm,tv=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("RtcRoom",this)}render(){return xd(kd,null)}},[0,"taro-rtc-room-core"]);function iv(){if("undefined"===typeof customElements)return;const e=["taro-rtc-room-core"];e.forEach(e=>{switch(e){case"taro-rtc-room-core":customElements.get(e)||customElements.define(e,tv);break}})}const sv=iv,rv=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("RtcRoomItem",this)}render(){return xd(kd,null)}},[0,"taro-rtc-room-item-core"]);function nv(){if("undefined"===typeof customElements)return;const e=["taro-rtc-room-item-core"];e.forEach(e=>{switch(e){case"taro-rtc-room-item-core":customElements.get(e)||customElements.define(e,rv);break}})}const av=nv,ov=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("ScaleGestureHandler",this)}render(){return xd(kd,null)}},[0,"taro-scale-gesture-handler-core"]);function lv(){if("undefined"===typeof customElements)return;const e=["taro-scale-gesture-handler-core"];e.forEach(e=>{switch(e){case"taro-scale-gesture-handler-core":customElements.get(e)||customElements.define(e,ov);break}})}const cv=lv,dv=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("Script",this)}render(){return xd(kd,null)}},[0,"taro-script-core"]);function hv(){if("undefined"===typeof customElements)return;const e=["taro-script-core"];e.forEach(e=>{switch(e){case"taro-script-core":customElements.get(e)||customElements.define(e,dv);break}})}const uv=hv,pv="taro-scroll-view-core{-webkit-overflow-scrolling:touch;width:100%;display:block}taro-scroll-view-core::-webkit-scrollbar{display:none}.taro-scroll-view__scroll-x{overflow:scroll hidden}.taro-scroll-view__scroll-y{overflow:hidden scroll}";function fv(e,t,i=500,s){if(e===t||"number"!==typeof e)return;const r=t-e,n=Date.now(),a=t>=e;function o(e,t,i,s){return i*e/s+t}function l(){e=o(Date.now()-n,e,r,i),a&&e>=t||!a&&t>=e?s(t):(s(e),requestAnimationFrame(l))}l()}const gv=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onScroll=Od(this,"scroll",3),this.onScrollToUpper=Od(this,"scrolltoupper",3),this.onScrollToLower=Od(this,"scrolltolower",3),this._scrollLeft=0,this._scrollTop=0,this.upperAndLower=sg(()=>{const{offsetWidth:e,offsetHeight:t,scrollLeft:i,scrollTop:s,scrollHeight:r,scrollWidth:n}=this.el,a=Number(this.lowerThreshold),o=Number(this.upperThreshold);!isNaN(a)&&(this.scrollY&&t+s+a>=r||this.scrollX&&e+i+a>=n)&&this.onScrollToLower.emit({direction:this.scrollX?"right":this.scrollY?"bottom":""}),!isNaN(o)&&(this.scrollY&&s<=o||this.scrollX&&i<=o)&&this.onScrollToUpper.emit({direction:this.scrollX?"left":this.scrollY?"top":""})},200),this.scrollX=!1,this.scrollY=!1,this.upperThreshold=50,this.lowerThreshold=50,this.mpScrollTop=void 0,this.mpScrollLeft=void 0,this.mpScrollIntoView=void 0,this.mpScrollIntoViewAlignment=void 0,this.animated=!1}watchScrollLeft(e){const t=Number(e),{animated:i}=this;this.mpScrollToMethod({left:t,animated:i})}watchScrollTop(e){const t=Number(e),{animated:i}=this;this.mpScrollToMethod({top:t,animated:i})}watchScrollIntoView(e){this.mpScrollIntoViewMethod(e)}handleScroll(e){var t;if(e instanceof CustomEvent)return;e.stopPropagation(),null===(t=e.stopImmediatePropagation)||void 0===t||t.call(e);const{scrollLeft:i,scrollTop:s,scrollHeight:r,scrollWidth:n}=this.el;this._scrollLeft=i,this._scrollTop=s,this.upperAndLower(),this.onScroll.emit({scrollLeft:i,scrollTop:s,scrollHeight:r,scrollWidth:n})}handleTouchMove(e){e instanceof CustomEvent||e.stopPropagation()}mpScrollToMethod(e){return d(this,null,function*(){let{top:t,left:i,duration:s,animated:r=!1}=e;this.scrollY&&"number"===typeof t&&!isNaN(t)&&t!==this._scrollTop&&(r?fv(this._scrollTop,t,s,e=>this.el.scrollTop=e):this.el.scrollTop=t,this._scrollTop=t),this.scrollX&&"number"===typeof i&&!isNaN(i)&&i!==this._scrollLeft&&(r?fv(this._scrollLeft,i,s,e=>this.el.scrollLeft=e):this.el.scrollLeft=i,this._scrollLeft=i)})}mpScrollIntoViewMethod(e){return d(this,null,function*(){var t;"string"===typeof e&&e&&(null===(t=document.querySelector(`#${e}`))||void 0===t||t.scrollIntoView({behavior:this.animated?"smooth":"auto",block:this.scrollY&&this.mpScrollIntoViewAlignment||"center",inline:this.scrollX&&this.mpScrollIntoViewAlignment||"start"}))})}componentDidLoad(){const e=Number(this.mpScrollTop),t=Number(this.mpScrollLeft),{animated:i}=this;this.mpScrollToMethod({top:e,left:t,animated:i})}componentDidRender(){Xh(this.el)}render(){const{scrollX:e,scrollY:t}=this,i=wu({"taro-scroll-view__scroll-x":e,"taro-scroll-view__scroll-y":t});return xd(kd,{class:i},xd("slot",null))}get el(){return this}static get watchers(){return{mpScrollLeft:["watchScrollLeft"],mpScrollTop:["watchScrollTop"],mpScrollIntoView:["watchScrollIntoView"]}}static get style(){return pv}},[4,"taro-scroll-view-core",{scrollX:[4,"scroll-x"],scrollY:[4,"scroll-y"],upperThreshold:[8,"upper-threshold"],lowerThreshold:[8,"lower-threshold"],mpScrollTop:[520,"scroll-top"],mpScrollLeft:[520,"scroll-left"],mpScrollIntoView:[513,"scroll-into-view"],mpScrollIntoViewAlignment:[1,"scroll-into-view-alignment"],animated:[4,"scroll-with-animation"],mpScrollToMethod:[64],mpScrollIntoViewMethod:[64]},[[1,"scroll","handleScroll"],[1,"touchmove","handleTouchMove"]]]);function mv(){if("undefined"===typeof customElements)return;const e=["taro-scroll-view-core"];e.forEach(e=>{switch(e){case"taro-scroll-view-core":customElements.get(e)||customElements.define(e,gv);break}})}const vv=mv,yv=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("ShareElement",this)}render(){return xd(kd,null)}},[0,"taro-share-element-core"]);function bv(){if("undefined"===typeof customElements)return;const e=["taro-share-element-core"];e.forEach(e=>{switch(e){case"taro-share-element-core":customElements.get(e)||customElements.define(e,yv);break}})}const Ev=bv,wv=".weui-slider{user-select:none;padding:15px 18px}.weui-slider__inner{background-color:#e9e9e9;height:2px;position:relative}.weui-slider__track{background-color:#1aad19;width:0;height:2px}.weui-slider__handler{background-color:#fff;border-radius:50%;width:28px;height:28px;margin-top:-14px;margin-left:-14px;position:absolute;top:50%;left:0;box-shadow:0 0 4px rgba(0,0,0,.2)}.weui-slider-box{align-items:center;display:flex}.weui-slider-box .weui-slider{flex:1}.weui-slider-box__value{color:#888;text-align:center;min-width:24px;margin-left:.5em;font-size:14px}",Av=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onChange=Od(this,"change",7),this.onChanging=Od(this,"changing",7),this.handleTouchStart=e=>{this.touching||this.disabled||(this.touching=!0,this.touchId=e.targetTouches[0].identifier,this.totalWidth=this.sliderInsRef.clientWidth||1,this.ogX=e.targetTouches[0].pageX,this.ogPercent=this.percent)},this.handleTouchMove=e=>{const{disabled:t,touching:i,touchId:s,totalWidth:r,max:n,min:a,ogX:o,ogPercent:l}=this;if(!i||t)return;if(e.targetTouches[0].identifier!==s)return;e.preventDefault();const c=e.targetTouches[0].pageX,d=c-o;let h=d/r*100+l;h=this.handleValueUpdate(h,0,100);const u=a+.01*h*(n-a);this.updateByStep(u),this.onChanging.emit({detail:e.detail,value:this.value})},this.handleTouchEnd=e=>{const{disabled:t,touching:i}=this;i&&!t&&(this.percent!==this.ogPercent&&this.onChange.emit({detail:e.detail,value:this.value}),this.touching=!1,this.touchId=null,this.ogX=0,this.ogPercent=0)},this.handleValueUpdate=(e,t=this.min,i=this.max)=>(e=isNaN(e)?0:e,Math.max(t,Math.min(e,i))),this.min=0,this.max=100,this.step=1,this.disabled=!1,this.value=0,this.activeColor="#1aad19",this.backgroundColor="#e9e9e9",this.blockSize=28,this.blockColor="#ffffff",this.showValue=!1,this.name="",this.totalWidth=1,this.touching=!1,this.ogX=0,this.touchId=null,this.percent=0,this.ogPercent=void 0,this.isWillLoadCalled=!1}function(e){if(!this.isWillLoadCalled)return;const{max:t,min:i}=this;if(null!==e){const s=this.handleValueUpdate(e,i,t);this.updateByStep(s)}}componentDidLoad(){this.handler.addEventListener("touchstart",this.handleTouchStart),this.handler.addEventListener("touchmove",this.handleTouchMove),this.handler.addEventListener("touchend",this.handleTouchEnd)}componentWillLoad(){this.isWillLoadCalled=!0;const{value:e,max:t,min:i}=this,s=this.handleValueUpdate(e,i,t);this.updateByStep(s)}updateByStep(e){const{max:t,min:i,step:s}=this,r=Math.floor((t-i)/s);for(let a=0;a<=r;a++){const t=i+s*a,n=a===r?null:i+s*(a+1);if(e===t)break;if(!n&&e>t&&(e=t),n&&e>t&&e<n){e=e-t<s/2?t:n;break}}const n=(e-i)/(t-i)*100;this.value=e,this.percent=n}render(){const{showValue:e,backgroundColor:t,activeColor:i,blockColor:s,name:r,percent:n,value:a}=this;let o=this.blockSize;const l={backgroundColor:t},c=n>100?100:n,d={width:`${c}%`,backgroundColor:i};o<12&&(o=12),o>28&&(o=28);const h={left:`${c}%`,width:`${o}px`,height:`${o}px`,backgroundColor:s,marginTop:`-${Math.floor(o/2)}px`,marginLeft:`-${Math.floor(o/2)}px`};return xd(kd,{class:"weui-slider-box"},xd("div",{class:"weui-slider"},xd("div",{class:"weui-slider__inner",style:l,ref:e=>this.sliderInsRef=e},xd("div",{style:d,class:"weui-slider__track"}),xd("div",{class:"weui-slider__handler",ref:e=>{e&&(this.handler=e)},style:h}),xd("input",{type:"hidden",name:r,value:a}))),e&&xd("div",{class:"weui-slider-box__value"},a))}get el(){return this}static get watchers(){return{value:["function"]}}static get style(){return wv}},[0,"taro-slider-core",{min:[2],max:[2],step:[2],disabled:[4],value:[1538],activeColor:[1,"active-color"],backgroundColor:[1,"background-color"],blockSize:[2,"block-size"],blockColor:[1,"block-color"],showValue:[4,"show-value"],name:[1],totalWidth:[32],touching:[32],ogX:[32],touchId:[32],percent:[32],ogPercent:[32],isWillLoadCalled:[32]}]);function Tv(){if("undefined"===typeof customElements)return;const e=["taro-slider-core"];e.forEach(e=>{switch(e){case"taro-slider-core":customElements.get(e)||customElements.define(e,Av);break}})}const Sv=Tv,xv=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("Slot",this)}render(){return xd(kd,null)}},[0,"taro-slot-core"]);function Lv(){if("undefined"===typeof customElements)return;const e=["taro-slot-core"];e.forEach(e=>{switch(e){case"taro-slot-core":customElements.get(e)||customElements.define(e,xv);break}})}const kv=Lv,Iv=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("Snapshot",this)}render(){return xd(kd,null)}},[0,"taro-snapshot-core"]);function _v(){if("undefined"===typeof customElements)return;const e=["taro-snapshot-core"];e.forEach(e=>{switch(e){case"taro-snapshot-core":customElements.get(e)||customElements.define(e,Iv);break}})}const Cv=_v,Rv=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("Span",this)}render(){return xd(kd,null)}},[0,"taro-span-core"]);function Pv(){if("undefined"===typeof customElements)return;const e=["taro-span-core"];e.forEach(e=>{switch(e){case"taro-span-core":customElements.get(e)||customElements.define(e,Rv);break}})}const Dv=Pv,Mv=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("StickyHeader",this)}render(){return xd(kd,null)}},[0,"taro-sticky-header-core"]);function Ov(){if("undefined"===typeof customElements)return;const e=["taro-sticky-header-core"];e.forEach(e=>{switch(e){case"taro-sticky-header-core":customElements.get(e)||customElements.define(e,Mv);break}})}const Nv=Ov,Bv=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("StickySection",this)}render(){return xd(kd,null)}},[0,"taro-sticky-section-core"]);function Fv(){if("undefined"===typeof customElements)return;const e=["taro-sticky-section-core"];e.forEach(e=>{switch(e){case"taro-sticky-section-core":customElements.get(e)||customElements.define(e,Bv);break}})}const $v=Fv;function Uv(e){return null!==e&&"object"===typeof e&&"constructor"in e&&e.constructor===Object}function Gv(e,t){void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(t).forEach(i=>{"undefined"===typeof e[i]?e[i]=t[i]:Uv(t[i])&&Uv(e[i])&&Object.keys(t[i]).length>0&&Gv(e[i],t[i])})}const Hv={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function jv(){const e="undefined"!==typeof document?document:{};return Gv(e,Hv),e}const zv={document:Hv,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(e){return"undefined"===typeof setTimeout?(e(),null):setTimeout(e,0)},cancelAnimationFrame(e){"undefined"!==typeof setTimeout&&clearTimeout(e)}};function Vv(){const e="undefined"!==typeof window?window:{};return Gv(e,zv),e}function Yv(e){return void 0===e&&(e=""),e.trim().split(" ").filter(e=>!!e.trim())}function Wv(e){const t=e;Object.keys(t).forEach(e=>{try{t[e]=null}catch(tH){}try{delete t[e]}catch(tH){}})}function Kv(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function qv(){return Date.now()}function Xv(e){const t=Vv();let i;return t.getComputedStyle&&(i=t.getComputedStyle(e,null)),!i&&e.currentStyle&&(i=e.currentStyle),i||(i=e.style),i}function Qv(e,t){void 0===t&&(t="x");const i=Vv();let s,r,n;const a=Xv(e);return i.WebKitCSSMatrix?(r=a.transform||a.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(e=>e.replace(",",".")).join(", ")),n=new i.WebKitCSSMatrix("none"===r?"":r)):(n=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),s=n.toString().split(",")),"x"===t&&(r=i.WebKitCSSMatrix?n.m41:16===s.length?parseFloat(s[12]):parseFloat(s[4])),"y"===t&&(r=i.WebKitCSSMatrix?n.m42:16===s.length?parseFloat(s[13]):parseFloat(s[5])),r||0}function Zv(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function Jv(e){return"undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement?e instanceof HTMLElement:e&&(1===e.nodeType||11===e.nodeType)}function ey(){const e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let i=1;i<arguments.length;i+=1){const s=i<0||arguments.length<=i?void 0:arguments[i];if(void 0!==s&&null!==s&&!Jv(s)){const i=Object.keys(Object(s)).filter(e=>t.indexOf(e)<0);for(let t=0,r=i.length;t<r;t+=1){const r=i[t],n=Object.getOwnPropertyDescriptor(s,r);void 0!==n&&n.enumerable&&(Zv(e[r])&&Zv(s[r])?s[r].__swiper__?e[r]=s[r]:ey(e[r],s[r]):!Zv(e[r])&&Zv(s[r])?(e[r]={},s[r].__swiper__?e[r]=s[r]:ey(e[r],s[r])):e[r]=s[r])}}}return e}function ty(e,t,i){e.style.setProperty(t,i)}function iy(e){let{swiper:t,targetPosition:i,side:s}=e;const r=Vv(),n=-t.translate;let a,o=null;const l=t.params.speed;t.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(t.cssModeFrameID);const c=i>n?"next":"prev",d=(e,t)=>"next"===c&&e>=t||"prev"===c&&e<=t,h=()=>{a=(new Date).getTime(),null===o&&(o=a);const e=Math.max(Math.min((a-o)/l,1),0),c=.5-Math.cos(e*Math.PI)/2;let u=n+c*(i-n);if(d(u,i)&&(u=i),t.wrapperEl.scrollTo({[s]:u}),d(u,i))return t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[s]:u})}),void r.cancelAnimationFrame(t.cssModeFrameID);t.cssModeFrameID=r.requestAnimationFrame(h)};h()}function sy(e){return e.querySelector(".swiper-slide-transform")||e.shadowRoot&&e.shadowRoot.querySelector(".swiper-slide-transform")||e}function ry(e,t){void 0===t&&(t="");const i=[...e.children];return e instanceof HTMLSlotElement&&i.push(...e.assignedElements()),t?i.filter(e=>e.matches(t)):i}function ny(e,t){const i=t.contains(e);if(!i&&t instanceof HTMLSlotElement){const i=[...t.assignedElements()];return i.includes(e)}return i}function ay(e){try{return void console.warn(e)}catch(t){}}function oy(e,t){void 0===t&&(t=[]);const i=document.createElement(e);return i.classList.add(...Array.isArray(t)?t:Yv(t)),i}function ly(e){const t=Vv(),i=jv(),s=e.getBoundingClientRect(),r=i.body,n=e.clientTop||r.clientTop||0,a=e.clientLeft||r.clientLeft||0,o=e===t?t.scrollY:e.scrollTop,l=e===t?t.scrollX:e.scrollLeft;return{top:s.top+o-n,left:s.left+l-a}}function cy(e,t){const i=[];while(e.previousElementSibling){const s=e.previousElementSibling;t?s.matches(t)&&i.push(s):i.push(s),e=s}return i}function dy(e,t){const i=[];while(e.nextElementSibling){const s=e.nextElementSibling;t?s.matches(t)&&i.push(s):i.push(s),e=s}return i}function hy(e,t){const i=Vv();return i.getComputedStyle(e,null).getPropertyValue(t)}function uy(e){let t,i=e;if(i){t=0;while(null!==(i=i.previousSibling))1===i.nodeType&&(t+=1);return t}}function py(e,t){const i=[];let s=e.parentElement;while(s)t?s.matches(t)&&i.push(s):i.push(s),s=s.parentElement;return i}function fy(e,t){function i(s){s.target===e&&(t.call(e,s),e.removeEventListener("transitionend",i))}t&&e.addEventListener("transitionend",i)}function gy(e,t,i){const s=Vv();return i?e["width"===t?"offsetWidth":"offsetHeight"]+parseFloat(s.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-right":"margin-top"))+parseFloat(s.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-left":"margin-bottom")):e.offsetWidth}function my(e){return(Array.isArray(e)?e:[e]).filter(e=>!!e)}function vy(e){return t=>Math.abs(t)>0&&e.browser&&e.browser.need3dFix&&Math.abs(t)%90===0?t+.001:t}let yy,by,Ey;function wy(){const e=Vv(),t=jv();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}function Ay(){return yy||(yy=wy()),yy}function Ty(e){let{userAgent:t}=void 0===e?{}:e;const i=Ay(),s=Vv(),r=s.navigator.platform,n=t||s.navigator.userAgent,a={ios:!1,android:!1},o=s.screen.width,l=s.screen.height,c=n.match(/(Android);?[\s\/]+([\d.]+)?/);let d=n.match(/(iPad).*OS\s([\d_]+)/);const h=n.match(/(iPod)(.*OS\s([\d_]+))?/),u=!d&&n.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p="Win32"===r;let f="MacIntel"===r;const g=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!d&&f&&i.touch&&g.indexOf(`${o}x${l}`)>=0&&(d=n.match(/(Version)\/([\d.]+)/),d||(d=[0,1,"13_0_0"]),f=!1),c&&!p&&(a.os="android",a.android=!0),(d||u||h)&&(a.os="ios",a.ios=!0),a}function Sy(e){return void 0===e&&(e={}),by||(by=Ty(e)),by}function xy(){const e=Vv(),t=Sy();let i=!1;function s(){const t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}if(s()){const t=String(e.navigator.userAgent);if(t.includes("Version/")){const[e,s]=t.split("Version/")[1].split(" ")[0].split(".").map(e=>Number(e));i=e<16||16===e&&s<2}}const r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent),n=s(),a=n||r&&t.ios;return{isSafari:i||n,needPerspectiveFix:i,need3dFix:a,isWebView:r}}function Ly(){return Ey||(Ey=xy()),Ey}function ky(e){let{swiper:t,on:i,emit:s}=e;const r=Vv();let n=null,a=null;const o=()=>{t&&!t.destroyed&&t.initialized&&(s("beforeResize"),s("resize"))},l=()=>{t&&!t.destroyed&&t.initialized&&(n=new ResizeObserver(e=>{a=r.requestAnimationFrame(()=>{const{width:i,height:s}=t;let r=i,n=s;e.forEach(e=>{let{contentBoxSize:i,contentRect:s,target:a}=e;a&&a!==t.el||(r=s?s.width:(i[0]||i).inlineSize,n=s?s.height:(i[0]||i).blockSize)}),r===i&&n===s||o()})}),n.observe(t.el))},c=()=>{a&&r.cancelAnimationFrame(a),n&&n.unobserve&&t.el&&(n.unobserve(t.el),n=null)},d=()=>{t&&!t.destroyed&&t.initialized&&s("orientationchange")};i("init",()=>{t.params.resizeObserver&&"undefined"!==typeof r.ResizeObserver?l():(r.addEventListener("resize",o),r.addEventListener("orientationchange",d))}),i("destroy",()=>{c(),r.removeEventListener("resize",o),r.removeEventListener("orientationchange",d)})}function Iy(e){let{swiper:t,extendParams:i,on:s,emit:r}=e;const n=[],a=Vv(),o=function(e,i){void 0===i&&(i={});const s=a.MutationObserver||a.WebkitMutationObserver,o=new s(e=>{if(t.__preventObserver__)return;if(1===e.length)return void r("observerUpdate",e[0]);const i=function(){r("observerUpdate",e[0])};a.requestAnimationFrame?a.requestAnimationFrame(i):a.setTimeout(i,0)});o.observe(e,{attributes:"undefined"===typeof i.attributes||i.attributes,childList:t.isElement||("undefined"===typeof i.childList||i).childList,characterData:"undefined"===typeof i.characterData||i.characterData}),n.push(o)},l=()=>{if(t.params.observer){if(t.params.observeParents){const e=py(t.hostEl);for(let t=0;t<e.length;t+=1)o(e[t])}o(t.hostEl,{childList:t.params.observeSlideChildren}),o(t.wrapperEl,{attributes:!1})}},c=()=>{n.forEach(e=>{e.disconnect()}),n.splice(0,n.length)};i({observer:!1,observeParents:!1,observeSlideChildren:!1}),s("init",l),s("destroy",c)}var _y={on(e,t,i){const s=this;if(!s.eventsListeners||s.destroyed)return s;if("function"!==typeof t)return s;const r=i?"unshift":"push";return e.split(" ").forEach(e=>{s.eventsListeners[e]||(s.eventsListeners[e]=[]),s.eventsListeners[e][r](t)}),s},once(e,t,i){const s=this;if(!s.eventsListeners||s.destroyed)return s;if("function"!==typeof t)return s;function r(){s.off(e,r),r.__emitterProxy&&delete r.__emitterProxy;for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];t.apply(s,n)}return r.__emitterProxy=t,s.on(e,r,i)},onAny(e,t){const i=this;if(!i.eventsListeners||i.destroyed)return i;if("function"!==typeof e)return i;const s=t?"unshift":"push";return i.eventsAnyListeners.indexOf(e)<0&&i.eventsAnyListeners[s](e),i},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsAnyListeners)return t;const i=t.eventsAnyListeners.indexOf(e);return i>=0&&t.eventsAnyListeners.splice(i,1),t},off(e,t){const i=this;return!i.eventsListeners||i.destroyed?i:i.eventsListeners?(e.split(" ").forEach(e=>{"undefined"===typeof t?i.eventsListeners[e]=[]:i.eventsListeners[e]&&i.eventsListeners[e].forEach((s,r)=>{(s===t||s.__emitterProxy&&s.__emitterProxy===t)&&i.eventsListeners[e].splice(r,1)})}),i):i},emit(){const e=this;if(!e.eventsListeners||e.destroyed)return e;if(!e.eventsListeners)return e;let t,i,s;for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];"string"===typeof n[0]||Array.isArray(n[0])?(t=n[0],i=n.slice(1,n.length),s=e):(t=n[0].events,i=n[0].data,s=n[0].context||e),i.unshift(s);const o=Array.isArray(t)?t:t.split(" ");return o.forEach(t=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(e=>{e.apply(s,[t,...i])}),e.eventsListeners&&e.eventsListeners[t]&&e.eventsListeners[t].forEach(e=>{e.apply(s,i)})}),e}};function Cy(){const e=this;let t,i;const s=e.el;t="undefined"!==typeof e.params.width&&null!==e.params.width?e.params.width:s.clientWidth,i="undefined"!==typeof e.params.height&&null!==e.params.height?e.params.height:s.clientHeight,0===t&&e.isHorizontal()||0===i&&e.isVertical()||(t=t-parseInt(hy(s,"padding-left")||0,10)-parseInt(hy(s,"padding-right")||0,10),i=i-parseInt(hy(s,"padding-top")||0,10)-parseInt(hy(s,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(i)&&(i=0),Object.assign(e,{width:t,height:i,size:e.isHorizontal()?t:i}))}function Ry(){const e=this;function t(t,i){return parseFloat(t.getPropertyValue(e.getDirectionLabel(i))||0)}const i=e.params,{wrapperEl:s,slidesEl:r,size:n,rtlTranslate:a,wrongRTL:o}=e,l=e.virtual&&i.virtual.enabled,c=l?e.virtual.slides.length:e.slides.length,d=ry(r,`.${e.params.slideClass}, swiper-slide`),h=l?e.virtual.slides.length:d.length;let u=[];const p=[],f=[];let g=i.slidesOffsetBefore;"function"===typeof g&&(g=i.slidesOffsetBefore.call(e));let m=i.slidesOffsetAfter;"function"===typeof m&&(m=i.slidesOffsetAfter.call(e));const v=e.snapGrid.length,y=e.slidesGrid.length;let b=i.spaceBetween,E=-g,w=0,A=0;if("undefined"===typeof n)return;"string"===typeof b&&b.indexOf("%")>=0?b=parseFloat(b.replace("%",""))/100*n:"string"===typeof b&&(b=parseFloat(b)),e.virtualSize=-b,d.forEach(e=>{a?e.style.marginLeft="":e.style.marginRight="",e.style.marginBottom="",e.style.marginTop=""}),i.centeredSlides&&i.cssMode&&(ty(s,"--swiper-centered-offset-before",""),ty(s,"--swiper-centered-offset-after",""));const T=i.grid&&i.grid.rows>1&&e.grid;let S;T?e.grid.initSlides(d):e.grid&&e.grid.unsetSlides();const x="auto"===i.slidesPerView&&i.breakpoints&&Object.keys(i.breakpoints).filter(e=>"undefined"!==typeof i.breakpoints[e].slidesPerView).length>0;for(let L=0;L<h;L+=1){let s;if(S=0,d[L]&&(s=d[L]),T&&e.grid.updateSlide(L,s,d),!d[L]||"none"!==hy(s,"display")){if("auto"===i.slidesPerView){x&&(d[L].style[e.getDirectionLabel("width")]="");const r=getComputedStyle(s),n=s.style.transform,a=s.style.webkitTransform;if(n&&(s.style.transform="none"),a&&(s.style.webkitTransform="none"),i.roundLengths)S=e.isHorizontal()?gy(s,"width",!0):gy(s,"height",!0);else{const e=t(r,"width"),i=t(r,"padding-left"),n=t(r,"padding-right"),a=t(r,"margin-left"),o=t(r,"margin-right"),l=r.getPropertyValue("box-sizing");if(l&&"border-box"===l)S=e+a+o;else{const{clientWidth:t,offsetWidth:r}=s;S=e+i+n+a+o+(r-t)}}n&&(s.style.transform=n),a&&(s.style.webkitTransform=a),i.roundLengths&&(S=Math.floor(S))}else S=(n-(i.slidesPerView-1)*b)/i.slidesPerView,i.roundLengths&&(S=Math.floor(S)),d[L]&&(d[L].style[e.getDirectionLabel("width")]=`${S}px`);d[L]&&(d[L].swiperSlideSize=S),f.push(S),i.centeredSlides?(E=E+S/2+w/2+b,0===w&&0!==L&&(E=E-n/2-b),0===L&&(E=E-n/2-b),Math.abs(E)<.001&&(E=0),i.roundLengths&&(E=Math.floor(E)),A%i.slidesPerGroup===0&&u.push(E),p.push(E)):(i.roundLengths&&(E=Math.floor(E)),(A-Math.min(e.params.slidesPerGroupSkip,A))%e.params.slidesPerGroup===0&&u.push(E),p.push(E),E=E+S+b),e.virtualSize+=S+b,w=S,A+=1}}if(e.virtualSize=Math.max(e.virtualSize,n)+m,a&&o&&("slide"===i.effect||"coverflow"===i.effect)&&(s.style.width=`${e.virtualSize+b}px`),i.setWrapperSize&&(s.style[e.getDirectionLabel("width")]=`${e.virtualSize+b}px`),T&&e.grid.updateWrapperSize(S,u),!i.centeredSlides){const t=[];for(let s=0;s<u.length;s+=1){let r=u[s];i.roundLengths&&(r=Math.floor(r)),u[s]<=e.virtualSize-n&&t.push(r)}u=t,Math.floor(e.virtualSize-n)-Math.floor(u[u.length-1])>1&&u.push(e.virtualSize-n)}if(l&&i.loop){const t=f[0]+b;if(i.slidesPerGroup>1){const s=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/i.slidesPerGroup),r=t*i.slidesPerGroup;for(let e=0;e<s;e+=1)u.push(u[u.length-1]+r)}for(let s=0;s<e.virtual.slidesBefore+e.virtual.slidesAfter;s+=1)1===i.slidesPerGroup&&u.push(u[u.length-1]+t),p.push(p[p.length-1]+t),e.virtualSize+=t}if(0===u.length&&(u=[0]),0!==b){const t=e.isHorizontal()&&a?"marginLeft":e.getDirectionLabel("marginRight");d.filter((e,t)=>!(i.cssMode&&!i.loop)||t!==d.length-1).forEach(e=>{e.style[t]=`${b}px`})}if(i.centeredSlides&&i.centeredSlidesBounds){let e=0;f.forEach(t=>{e+=t+(b||0)}),e-=b;const t=e>n?e-n:0;u=u.map(e=>e<=0?-g:e>t?t+m:e)}if(i.centerInsufficientSlides){let e=0;f.forEach(t=>{e+=t+(b||0)}),e-=b;const t=(i.slidesOffsetBefore||0)+(i.slidesOffsetAfter||0);if(e+t<n){const i=(n-e-t)/2;u.forEach((e,t)=>{u[t]=e-i}),p.forEach((e,t)=>{p[t]=e+i})}}if(Object.assign(e,{slides:d,snapGrid:u,slidesGrid:p,slidesSizesGrid:f}),i.centeredSlides&&i.cssMode&&!i.centeredSlidesBounds){ty(s,"--swiper-centered-offset-before",-u[0]+"px"),ty(s,"--swiper-centered-offset-after",e.size/2-f[f.length-1]/2+"px");const t=-e.snapGrid[0],i=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(e=>e+t),e.slidesGrid=e.slidesGrid.map(e=>e+i)}if(h!==c&&e.emit("slidesLengthChange"),u.length!==v&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),p.length!==y&&e.emit("slidesGridLengthChange"),i.watchSlidesProgress&&e.updateSlidesOffset(),e.emit("slidesUpdated"),!l&&!i.cssMode&&("slide"===i.effect||"fade"===i.effect)){const t=`${i.containerModifierClass}backface-hidden`,s=e.el.classList.contains(t);h<=i.maxBackfaceHiddenSlides?s||e.el.classList.add(t):s&&e.el.classList.remove(t)}}function Py(e){const t=this,i=[],s=t.virtual&&t.params.virtual.enabled;let r,n=0;"number"===typeof e?t.setTransition(e):!0===e&&t.setTransition(t.params.speed);const a=e=>s?t.slides[t.getSlideIndexByData(e)]:t.slides[e];if("auto"!==t.params.slidesPerView&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach(e=>{i.push(e)});else for(r=0;r<Math.ceil(t.params.slidesPerView);r+=1){const e=t.activeIndex+r;if(e>t.slides.length&&!s)break;i.push(a(e))}else i.push(a(t.activeIndex));for(r=0;r<i.length;r+=1)if("undefined"!==typeof i[r]){const e=i[r].offsetHeight;n=e>n?e:n}(n||0===n)&&(t.wrapperEl.style.height=`${n}px`)}function Dy(){const e=this,t=e.slides,i=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let s=0;s<t.length;s+=1)t[s].swiperSlideOffset=(e.isHorizontal()?t[s].offsetLeft:t[s].offsetTop)-i-e.cssOverflowAdjustment()}const My=(e,t,i)=>{t&&!e.classList.contains(i)?e.classList.add(i):!t&&e.classList.contains(i)&&e.classList.remove(i)};function Oy(e){void 0===e&&(e=this&&this.translate||0);const t=this,i=t.params,{slides:s,rtlTranslate:r,snapGrid:n}=t;if(0===s.length)return;"undefined"===typeof s[0].swiperSlideOffset&&t.updateSlidesOffset();let a=-e;r&&(a=e),t.visibleSlidesIndexes=[],t.visibleSlides=[];let o=i.spaceBetween;"string"===typeof o&&o.indexOf("%")>=0?o=parseFloat(o.replace("%",""))/100*t.size:"string"===typeof o&&(o=parseFloat(o));for(let l=0;l<s.length;l+=1){const e=s[l];let c=e.swiperSlideOffset;i.cssMode&&i.centeredSlides&&(c-=s[0].swiperSlideOffset);const d=(a+(i.centeredSlides?t.minTranslate():0)-c)/(e.swiperSlideSize+o),h=(a-n[0]+(i.centeredSlides?t.minTranslate():0)-c)/(e.swiperSlideSize+o),u=-(a-c),p=u+t.slidesSizesGrid[l],f=u>=0&&u<=t.size-t.slidesSizesGrid[l],g=u>=0&&u<t.size-1||p>1&&p<=t.size||u<=0&&p>=t.size;g&&(t.visibleSlides.push(e),t.visibleSlidesIndexes.push(l)),My(e,g,i.slideVisibleClass),My(e,f,i.slideFullyVisibleClass),e.progress=r?-d:d,e.originalProgress=r?-h:h}}function Ny(e){const t=this;if("undefined"===typeof e){const i=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*i||0}const i=t.params,s=t.maxTranslate()-t.minTranslate();let{progress:r,isBeginning:n,isEnd:a,progressLoop:o}=t;const l=n,c=a;if(0===s)r=0,n=!0,a=!0;else{r=(e-t.minTranslate())/s;const i=Math.abs(e-t.minTranslate())<1,o=Math.abs(e-t.maxTranslate())<1;n=i||r<=0,a=o||r>=1,i&&(r=0),o&&(r=1)}if(i.loop){const i=t.getSlideIndexByData(0),s=t.getSlideIndexByData(t.slides.length-1),r=t.slidesGrid[i],n=t.slidesGrid[s],a=t.slidesGrid[t.slidesGrid.length-1],l=Math.abs(e);o=l>=r?(l-r)/a:(l+a-n)/a,o>1&&(o-=1)}Object.assign(t,{progress:r,progressLoop:o,isBeginning:n,isEnd:a}),(i.watchSlidesProgress||i.centeredSlides&&i.autoHeight)&&t.updateSlidesProgress(e),n&&!l&&t.emit("reachBeginning toEdge"),a&&!c&&t.emit("reachEnd toEdge"),(l&&!n||c&&!a)&&t.emit("fromEdge"),t.emit("progress",r)}const By=(e,t,i)=>{t&&!e.classList.contains(i)?e.classList.add(i):!t&&e.classList.contains(i)&&e.classList.remove(i)};function Fy(){const e=this,{slides:t,params:i,slidesEl:s,activeIndex:r}=e,n=e.virtual&&i.virtual.enabled,a=e.grid&&i.grid&&i.grid.rows>1,o=e=>ry(s,`.${i.slideClass}${e}, swiper-slide${e}`)[0];let l,c,d;if(n)if(i.loop){let t=r-e.virtual.slidesBefore;t<0&&(t=e.virtual.slides.length+t),t>=e.virtual.slides.length&&(t-=e.virtual.slides.length),l=o(`[data-swiper-slide-index="${t}"]`)}else l=o(`[data-swiper-slide-index="${r}"]`);else a?(l=t.filter(e=>e.column===r)[0],d=t.filter(e=>e.column===r+1)[0],c=t.filter(e=>e.column===r-1)[0]):l=t[r];l&&(a||(d=dy(l,`.${i.slideClass}, swiper-slide`)[0],i.loop&&!d&&(d=t[0]),c=cy(l,`.${i.slideClass}, swiper-slide`)[0],i.loop&&0===!c&&(c=t[t.length-1]))),t.forEach(e=>{By(e,e===l,i.slideActiveClass),By(e,e===d,i.slideNextClass),By(e,e===c,i.slidePrevClass)}),e.emitSlidesClasses()}const $y=(e,t)=>{if(!e||e.destroyed||!e.params)return;const i=()=>e.isElement?"swiper-slide":`.${e.params.slideClass}`,s=t.closest(i());if(s){let t=s.querySelector(`.${e.params.lazyPreloaderClass}`);!t&&e.isElement&&(s.shadowRoot?t=s.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{s.shadowRoot&&(t=s.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`),t&&t.remove())})),t&&t.remove()}},Uy=(e,t)=>{if(!e.slides[t])return;const i=e.slides[t].querySelector('[loading="lazy"]');i&&i.removeAttribute("loading")},Gy=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext;const i=e.slides.length;if(!i||!t||t<0)return;t=Math.min(t,i);const s="auto"===e.params.slidesPerView?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),r=e.activeIndex;if(e.params.grid&&e.params.grid.rows>1){const i=r,n=[i-t];return n.push(...Array.from({length:t}).map((e,t)=>i+s+t)),void e.slides.forEach((t,i)=>{n.includes(t.column)&&Uy(e,i)})}const n=r+s-1;if(e.params.rewind||e.params.loop)for(let a=r-t;a<=n+t;a+=1){const t=(a%i+i)%i;(t<r||t>n)&&Uy(e,t)}else for(let a=Math.max(r-t,0);a<=Math.min(n+t,i-1);a+=1)a!==r&&(a>n||a<r)&&Uy(e,a)};function Hy(e){const{slidesGrid:t,params:i}=e,s=e.rtlTranslate?e.translate:-e.translate;let r;for(let n=0;n<t.length;n+=1)"undefined"!==typeof t[n+1]?s>=t[n]&&s<t[n+1]-(t[n+1]-t[n])/2?r=n:s>=t[n]&&s<t[n+1]&&(r=n+1):s>=t[n]&&(r=n);return i.normalizeSlideIndex&&(r<0||"undefined"===typeof r)&&(r=0),r}function jy(e){const t=this,i=t.rtlTranslate?t.translate:-t.translate,{snapGrid:s,params:r,activeIndex:n,realIndex:a,snapIndex:o}=t;let l,c=e;const d=e=>{let i=e-t.virtual.slidesBefore;return i<0&&(i=t.virtual.slides.length+i),i>=t.virtual.slides.length&&(i-=t.virtual.slides.length),i};if("undefined"===typeof c&&(c=Hy(t)),s.indexOf(i)>=0)l=s.indexOf(i);else{const e=Math.min(r.slidesPerGroupSkip,c);l=e+Math.floor((c-e)/r.slidesPerGroup)}if(l>=s.length&&(l=s.length-1),c===n&&!t.params.loop)return void(l!==o&&(t.snapIndex=l,t.emit("snapIndexChange")));if(c===n&&t.params.loop&&t.virtual&&t.params.virtual.enabled)return void(t.realIndex=d(c));const h=t.grid&&r.grid&&r.grid.rows>1;let u;if(t.virtual&&r.virtual.enabled&&r.loop)u=d(c);else if(h){const e=t.slides.filter(e=>e.column===c)[0];let i=parseInt(e.getAttribute("data-swiper-slide-index"),10);Number.isNaN(i)&&(i=Math.max(t.slides.indexOf(e),0)),u=Math.floor(i/r.grid.rows)}else if(t.slides[c]){const e=t.slides[c].getAttribute("data-swiper-slide-index");u=e?parseInt(e,10):c}else u=c;Object.assign(t,{previousSnapIndex:o,snapIndex:l,previousRealIndex:a,realIndex:u,previousIndex:n,activeIndex:c}),t.initialized&&Gy(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&(a!==u&&t.emit("realIndexChange"),t.emit("slideChange"))}function zy(e,t){const i=this,s=i.params;let r=e.closest(`.${s.slideClass}, swiper-slide`);!r&&i.isElement&&t&&t.length>1&&t.includes(e)&&[...t.slice(t.indexOf(e)+1,t.length)].forEach(e=>{!r&&e.matches&&e.matches(`.${s.slideClass}, swiper-slide`)&&(r=e)});let n,a=!1;if(r)for(let o=0;o<i.slides.length;o+=1)if(i.slides[o]===r){a=!0,n=o;break}if(!r||!a)return i.clickedSlide=void 0,void(i.clickedIndex=void 0);i.clickedSlide=r,i.virtual&&i.params.virtual.enabled?i.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):i.clickedIndex=n,s.slideToClickedSlide&&void 0!==i.clickedIndex&&i.clickedIndex!==i.activeIndex&&i.slideToClickedSlide()}var Vy={updateSize:Cy,updateSlides:Ry,updateAutoHeight:Py,updateSlidesOffset:Dy,updateSlidesProgress:Oy,updateProgress:Ny,updateSlidesClasses:Fy,updateActiveIndex:jy,updateClickedSlide:zy};function Yy(e){void 0===e&&(e=this.isHorizontal()?"x":"y");const t=this,{params:i,rtlTranslate:s,translate:r,wrapperEl:n}=t;if(i.virtualTranslate)return s?-r:r;if(i.cssMode)return r;let a=Qv(n,e);return a+=t.cssOverflowAdjustment(),s&&(a=-a),a||0}function Wy(e,t){const i=this,{rtlTranslate:s,params:r,wrapperEl:n,progress:a}=i;let o=0,l=0;const c=0;let d;i.isHorizontal()?o=s?-e:e:l=e,r.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),i.previousTranslate=i.translate,i.translate=i.isHorizontal()?o:l,r.cssMode?n[i.isHorizontal()?"scrollLeft":"scrollTop"]=i.isHorizontal()?-o:-l:r.virtualTranslate||(i.isHorizontal()?o-=i.cssOverflowAdjustment():l-=i.cssOverflowAdjustment(),n.style.transform=`translate3d(${o}px, ${l}px, ${c}px)`);const h=i.maxTranslate()-i.minTranslate();d=0===h?0:(e-i.minTranslate())/h,d!==a&&i.updateProgress(e),i.emit("setTranslate",i.translate,t)}function Ky(){return-this.snapGrid[0]}function qy(){return-this.snapGrid[this.snapGrid.length-1]}function Xy(e,t,i,s,r){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===i&&(i=!0),void 0===s&&(s=!0);const n=this,{params:a,wrapperEl:o}=n;if(n.animating&&a.preventInteractionOnTransition)return!1;const l=n.minTranslate(),c=n.maxTranslate();let d;if(d=s&&e>l?l:s&&e<c?c:e,n.updateProgress(d),a.cssMode){const e=n.isHorizontal();if(0===t)o[e?"scrollLeft":"scrollTop"]=-d;else{if(!n.support.smoothScroll)return iy({swiper:n,targetPosition:-d,side:e?"left":"top"}),!0;o.scrollTo({[e?"left":"top"]:-d,behavior:"smooth"})}return!0}return 0===t?(n.setTransition(0),n.setTranslate(d),i&&(n.emit("beforeTransitionStart",t,r),n.emit("transitionEnd"))):(n.setTransition(t),n.setTranslate(d),i&&(n.emit("beforeTransitionStart",t,r),n.emit("transitionStart")),n.animating||(n.animating=!0,n.onTranslateToWrapperTransitionEnd||(n.onTranslateToWrapperTransitionEnd=function(e){n&&!n.destroyed&&e.target===this&&(n.wrapperEl.removeEventListener("transitionend",n.onTranslateToWrapperTransitionEnd),n.onTranslateToWrapperTransitionEnd=null,delete n.onTranslateToWrapperTransitionEnd,n.animating=!1,i&&n.emit("transitionEnd"))}),n.wrapperEl.addEventListener("transitionend",n.onTranslateToWrapperTransitionEnd))),!0}var Qy={getTranslate:Yy,setTranslate:Wy,minTranslate:Ky,maxTranslate:qy,translateTo:Xy};function Zy(e,t){const i=this;i.params.cssMode||(i.wrapperEl.style.transitionDuration=`${e}ms`,i.wrapperEl.style.transitionDelay=0===e?"0ms":""),i.emit("setTransition",e,t)}function Jy(e){let{swiper:t,runCallbacks:i,direction:s,step:r}=e;const{activeIndex:n,previousIndex:a}=t;let o=s;if(o||(o=n>a?"next":n<a?"prev":"reset"),t.emit(`transition${r}`),i&&n!==a){if("reset"===o)return void t.emit(`slideResetTransition${r}`);t.emit(`slideChangeTransition${r}`),"next"===o?t.emit(`slideNextTransition${r}`):t.emit(`slidePrevTransition${r}`)}}function eb(e,t){void 0===e&&(e=!0);const i=this,{params:s}=i;s.cssMode||(s.autoHeight&&i.updateAutoHeight(),Jy({swiper:i,runCallbacks:e,direction:t,step:"Start"}))}function tb(e,t){void 0===e&&(e=!0);const i=this,{params:s}=i;i.animating=!1,s.cssMode||(i.setTransition(0),Jy({swiper:i,runCallbacks:e,direction:t,step:"End"}))}var ib={setTransition:Zy,transitionStart:eb,transitionEnd:tb};function sb(e,t,i,s,r){void 0===e&&(e=0),void 0===i&&(i=!0),"string"===typeof e&&(e=parseInt(e,10));const n=this;let a=e;a<0&&(a=0);const{params:o,snapGrid:l,slidesGrid:c,previousIndex:d,activeIndex:h,rtlTranslate:u,wrapperEl:p,enabled:f}=n;if(!f&&!s&&!r||n.destroyed||n.animating&&o.preventInteractionOnTransition)return!1;"undefined"===typeof t&&(t=n.params.speed);const g=Math.min(n.params.slidesPerGroupSkip,a);let m=g+Math.floor((a-g)/n.params.slidesPerGroup);m>=l.length&&(m=l.length-1);const v=-l[m];if(o.normalizeSlideIndex)for(let w=0;w<c.length;w+=1){const e=-Math.floor(100*v),t=Math.floor(100*c[w]),i=Math.floor(100*c[w+1]);"undefined"!==typeof c[w+1]?e>=t&&e<i-(i-t)/2?a=w:e>=t&&e<i&&(a=w+1):e>=t&&(a=w)}if(n.initialized&&a!==h){if(!n.allowSlideNext&&(u?v>n.translate&&v>n.minTranslate():v<n.translate&&v<n.minTranslate()))return!1;if(!n.allowSlidePrev&&v>n.translate&&v>n.maxTranslate()&&(h||0)!==a)return!1}let y;a!==(d||0)&&i&&n.emit("beforeSlideChangeStart"),n.updateProgress(v),y=a>h?"next":a<h?"prev":"reset";const b=n.virtual&&n.params.virtual.enabled,E=b&&r;if(!E&&(u&&-v===n.translate||!u&&v===n.translate))return n.updateActiveIndex(a),o.autoHeight&&n.updateAutoHeight(),n.updateSlidesClasses(),"slide"!==o.effect&&n.setTranslate(v),"reset"!==y&&(n.transitionStart(i,y),n.transitionEnd(i,y)),!1;if(o.cssMode){const e=n.isHorizontal(),i=u?v:-v;if(0===t)b&&(n.wrapperEl.style.scrollSnapType="none",n._immediateVirtual=!0),b&&!n._cssModeVirtualInitialSet&&n.params.initialSlide>0?(n._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{p[e?"scrollLeft":"scrollTop"]=i})):p[e?"scrollLeft":"scrollTop"]=i,b&&requestAnimationFrame(()=>{n.wrapperEl.style.scrollSnapType="",n._immediateVirtual=!1});else{if(!n.support.smoothScroll)return iy({swiper:n,targetPosition:i,side:e?"left":"top"}),!0;p.scrollTo({[e?"left":"top"]:i,behavior:"smooth"})}return!0}return n.setTransition(t),n.setTranslate(v),n.updateActiveIndex(a),n.updateSlidesClasses(),n.emit("beforeTransitionStart",t,s),n.transitionStart(i,y),0===t?n.transitionEnd(i,y):n.animating||(n.animating=!0,n.onSlideToWrapperTransitionEnd||(n.onSlideToWrapperTransitionEnd=function(e){n&&!n.destroyed&&e.target===this&&(n.wrapperEl.removeEventListener("transitionend",n.onSlideToWrapperTransitionEnd),n.onSlideToWrapperTransitionEnd=null,delete n.onSlideToWrapperTransitionEnd,n.transitionEnd(i,y))}),n.wrapperEl.addEventListener("transitionend",n.onSlideToWrapperTransitionEnd)),!0}function rb(e,t,i,s){if(void 0===e&&(e=0),void 0===i&&(i=!0),"string"===typeof e){const t=parseInt(e,10);e=t}const r=this;if(r.destroyed)return;"undefined"===typeof t&&(t=r.params.speed);const n=r.grid&&r.params.grid&&r.params.grid.rows>1;let a=e;if(r.params.loop)if(r.virtual&&r.params.virtual.enabled)a+=r.virtual.slidesBefore;else{let e;if(n){const t=a*r.params.grid.rows;e=r.slides.filter(e=>1*e.getAttribute("data-swiper-slide-index")===t)[0].column}else e=r.getSlideIndexByData(a);const t=n?Math.ceil(r.slides.length/r.params.grid.rows):r.slides.length,{centeredSlides:i}=r.params;let o=r.params.slidesPerView;"auto"===o?o=r.slidesPerViewDynamic():(o=Math.ceil(parseFloat(r.params.slidesPerView,10)),i&&o%2===0&&(o+=1));let l=t-e<o;if(i&&(l=l||e<Math.ceil(o/2)),s&&i&&"auto"!==r.params.slidesPerView&&!n&&(l=!1),l){const s=i?e<r.activeIndex?"prev":"next":e-r.activeIndex-1<r.params.slidesPerView?"next":"prev";r.loopFix({direction:s,slideTo:!0,activeSlideIndex:"next"===s?e+1:e-t+1,slideRealIndex:"next"===s?r.realIndex:void 0})}if(n){const e=a*r.params.grid.rows;a=r.slides.filter(t=>1*t.getAttribute("data-swiper-slide-index")===e)[0].column}else a=r.getSlideIndexByData(a)}return requestAnimationFrame(()=>{r.slideTo(a,t,i,s)}),r}function nb(e,t,i){void 0===t&&(t=!0);const s=this,{enabled:r,params:n,animating:a}=s;if(!r||s.destroyed)return s;"undefined"===typeof e&&(e=s.params.speed);let o=n.slidesPerGroup;"auto"===n.slidesPerView&&1===n.slidesPerGroup&&n.slidesPerGroupAuto&&(o=Math.max(s.slidesPerViewDynamic("current",!0),1));const l=s.activeIndex<n.slidesPerGroupSkip?1:o,c=s.virtual&&n.virtual.enabled;if(n.loop){if(a&&!c&&n.loopPreventsSliding)return!1;if(s.loopFix({direction:"next"}),s._clientLeft=s.wrapperEl.clientLeft,s.activeIndex===s.slides.length-1&&n.cssMode)return requestAnimationFrame(()=>{s.slideTo(s.activeIndex+l,e,t,i)}),!0}return n.rewind&&s.isEnd?s.slideTo(0,e,t,i):s.slideTo(s.activeIndex+l,e,t,i)}function ab(e,t,i){void 0===t&&(t=!0);const s=this,{params:r,snapGrid:n,slidesGrid:a,rtlTranslate:o,enabled:l,animating:c}=s;if(!l||s.destroyed)return s;"undefined"===typeof e&&(e=s.params.speed);const d=s.virtual&&r.virtual.enabled;if(r.loop){if(c&&!d&&r.loopPreventsSliding)return!1;s.loopFix({direction:"prev"}),s._clientLeft=s.wrapperEl.clientLeft}const h=o?s.translate:-s.translate;function u(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}const p=u(h),f=n.map(e=>u(e));let g=n[f.indexOf(p)-1];if("undefined"===typeof g&&r.cssMode){let e;n.forEach((t,i)=>{p>=t&&(e=i)}),"undefined"!==typeof e&&(g=n[e>0?e-1:e])}let m=0;if("undefined"!==typeof g&&(m=a.indexOf(g),m<0&&(m=s.activeIndex-1),"auto"===r.slidesPerView&&1===r.slidesPerGroup&&r.slidesPerGroupAuto&&(m=m-s.slidesPerViewDynamic("previous",!0)+1,m=Math.max(m,0))),r.rewind&&s.isBeginning){const r=s.params.virtual&&s.params.virtual.enabled&&s.virtual?s.virtual.slides.length-1:s.slides.length-1;return s.slideTo(r,e,t,i)}return r.loop&&0===s.activeIndex&&r.cssMode?(requestAnimationFrame(()=>{s.slideTo(m,e,t,i)}),!0):s.slideTo(m,e,t,i)}function ob(e,t,i){void 0===t&&(t=!0);const s=this;if(!s.destroyed)return"undefined"===typeof e&&(e=s.params.speed),s.slideTo(s.activeIndex,e,t,i)}function lb(e,t,i,s){void 0===t&&(t=!0),void 0===s&&(s=.5);const r=this;if(r.destroyed)return;"undefined"===typeof e&&(e=r.params.speed);let n=r.activeIndex;const a=Math.min(r.params.slidesPerGroupSkip,n),o=a+Math.floor((n-a)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[o]){const e=r.snapGrid[o],t=r.snapGrid[o+1];l-e>(t-e)*s&&(n+=r.params.slidesPerGroup)}else{const e=r.snapGrid[o-1],t=r.snapGrid[o];l-e<=(t-e)*s&&(n-=r.params.slidesPerGroup)}return n=Math.max(n,0),n=Math.min(n,r.slidesGrid.length-1),r.slideTo(n,e,t,i)}function cb(){const e=this;if(e.destroyed)return;const{params:t,slidesEl:i}=e,s="auto"===t.slidesPerView?e.slidesPerViewDynamic():t.slidesPerView;let r,n=e.clickedIndex;const a=e.isElement?"swiper-slide":`.${t.slideClass}`;if(t.loop){if(e.animating)return;r=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?n<e.loopedSlides-s/2||n>e.slides.length-e.loopedSlides+s/2?(e.loopFix(),n=e.getSlideIndex(ry(i,`${a}[data-swiper-slide-index="${r}"]`)[0]),Kv(()=>{e.slideTo(n)})):e.slideTo(n):n>e.slides.length-s?(e.loopFix(),n=e.getSlideIndex(ry(i,`${a}[data-swiper-slide-index="${r}"]`)[0]),Kv(()=>{e.slideTo(n)})):e.slideTo(n)}else e.slideTo(n)}var db={slideTo:sb,slideToLoop:rb,slideNext:nb,slidePrev:ab,slideReset:ob,slideToClosest:lb,slideToClickedSlide:cb};function hb(e){const t=this,{params:i,slidesEl:s}=t;if(!i.loop||t.virtual&&t.params.virtual.enabled)return;const r=()=>{const e=ry(s,`.${i.slideClass}, swiper-slide`);e.forEach((e,t)=>{e.setAttribute("data-swiper-slide-index",t)})},n=t.grid&&i.grid&&i.grid.rows>1,a=i.slidesPerGroup*(n?i.grid.rows:1),o=t.slides.length%a!==0,l=n&&t.slides.length%i.grid.rows!==0,c=e=>{for(let s=0;s<e;s+=1){const e=t.isElement?oy("swiper-slide",[i.slideBlankClass]):oy("div",[i.slideClass,i.slideBlankClass]);t.slidesEl.append(e)}};if(o){if(i.loopAddBlankSlides){const e=a-t.slides.length%a;c(e),t.recalcSlides(),t.updateSlides()}else ay("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else if(l){if(i.loopAddBlankSlides){const e=i.grid.rows-t.slides.length%i.grid.rows;c(e),t.recalcSlides(),t.updateSlides()}else ay("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else r();t.loopFix({slideRealIndex:e,direction:i.centeredSlides?void 0:"next"})}function ub(e){let{slideRealIndex:t,slideTo:i=!0,direction:s,setTranslate:r,activeSlideIndex:n,byController:a,byMousewheel:o}=void 0===e?{}:e;const d=this;if(!d.params.loop)return;d.emit("beforeLoopFix");const{slides:h,allowSlidePrev:u,allowSlideNext:p,slidesEl:f,params:g}=d,{centeredSlides:m}=g;if(d.allowSlidePrev=!0,d.allowSlideNext=!0,d.virtual&&g.virtual.enabled)return i&&(g.centeredSlides||0!==d.snapIndex?g.centeredSlides&&d.snapIndex<g.slidesPerView?d.slideTo(d.virtual.slides.length+d.snapIndex,0,!1,!0):d.snapIndex===d.snapGrid.length-1&&d.slideTo(d.virtual.slidesBefore,0,!1,!0):d.slideTo(d.virtual.slides.length,0,!1,!0)),d.allowSlidePrev=u,d.allowSlideNext=p,void d.emit("loopFix");let v=g.slidesPerView;"auto"===v?v=d.slidesPerViewDynamic():(v=Math.ceil(parseFloat(g.slidesPerView,10)),m&&v%2===0&&(v+=1));const y=g.slidesPerGroupAuto?v:g.slidesPerGroup;let b=y;b%y!==0&&(b+=y-b%y),b+=g.loopAdditionalSlides,d.loopedSlides=b;const E=d.grid&&g.grid&&g.grid.rows>1;h.length<v+b?ay("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):E&&"row"===g.grid.fill&&ay("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const w=[],A=[];let T=d.activeIndex;"undefined"===typeof n?n=d.getSlideIndex(h.filter(e=>e.classList.contains(g.slideActiveClass))[0]):T=n;const S="next"===s||!s,x="prev"===s||!s;let L=0,k=0;const I=E?Math.ceil(h.length/g.grid.rows):h.length,_=E?h[n].column:n,C=_+(m&&"undefined"===typeof r?-v/2+.5:0);if(C<b){L=Math.max(b-C,y);for(let e=0;e<b-C;e+=1){const t=e-Math.floor(e/I)*I;if(E){const e=I-t-1;for(let t=h.length-1;t>=0;t-=1)h[t].column===e&&w.push(t)}else w.push(I-t-1)}}else if(C+v>I-b){k=Math.max(C-(I-2*b),y);for(let e=0;e<k;e+=1){const t=e-Math.floor(e/I)*I;E?h.forEach((e,i)=>{e.column===t&&A.push(i)}):A.push(t)}}if(d.__preventObserver__=!0,requestAnimationFrame(()=>{d.__preventObserver__=!1}),x&&w.forEach(e=>{h[e].swiperLoopMoveDOM=!0,f.prepend(h[e]),h[e].swiperLoopMoveDOM=!1}),S&&A.forEach(e=>{h[e].swiperLoopMoveDOM=!0,f.append(h[e]),h[e].swiperLoopMoveDOM=!1}),d.recalcSlides(),"auto"===g.slidesPerView?d.updateSlides():E&&(w.length>0&&x||A.length>0&&S)&&d.slides.forEach((e,t)=>{d.grid.updateSlide(t,e,d.slides)}),g.watchSlidesProgress&&d.updateSlidesOffset(),i)if(w.length>0&&x){if("undefined"===typeof t){const e=d.slidesGrid[T],t=d.slidesGrid[T+L],i=t-e;o?d.setTranslate(d.translate-i):(d.slideTo(T+Math.ceil(L),0,!1,!0),r&&(d.touchEventsData.startTranslate=d.touchEventsData.startTranslate-i,d.touchEventsData.currentTranslate=d.touchEventsData.currentTranslate-i))}else if(r){const e=E?w.length/g.grid.rows:w.length;d.slideTo(d.activeIndex+e,0,!1,!0),d.touchEventsData.currentTranslate=d.translate}}else if(A.length>0&&S)if("undefined"===typeof t){const e=d.slidesGrid[T],t=d.slidesGrid[T-k],i=t-e;o?d.setTranslate(d.translate-i):(d.slideTo(T-k,0,!1,!0),r&&(d.touchEventsData.startTranslate=d.touchEventsData.startTranslate-i,d.touchEventsData.currentTranslate=d.touchEventsData.currentTranslate-i))}else{const e=E?A.length/g.grid.rows:A.length;d.slideTo(d.activeIndex-e,0,!1,!0)}if(d.allowSlidePrev=u,d.allowSlideNext=p,d.controller&&d.controller.control&&!a){const e={slideRealIndex:t,direction:s,setTranslate:r,activeSlideIndex:n,byController:!0};Array.isArray(d.controller.control)?d.controller.control.forEach(t=>{!t.destroyed&&t.params.loop&&t.loopFix(c(l({},e),{slideTo:t.params.slidesPerView===g.slidesPerView&&i}))}):d.controller.control instanceof d.constructor&&d.controller.control.params.loop&&d.controller.control.loopFix(c(l({},e),{slideTo:d.controller.control.params.slidesPerView===g.slidesPerView&&i}))}d.emit("loopFix")}function pb(){const e=this,{params:t,slidesEl:i}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const s=[];e.slides.forEach(e=>{const t="undefined"===typeof e.swiperSlideIndex?1*e.getAttribute("data-swiper-slide-index"):e.swiperSlideIndex;s[t]=e}),e.slides.forEach(e=>{e.removeAttribute("data-swiper-slide-index")}),s.forEach(e=>{i.append(e)}),e.recalcSlides(),e.slideTo(e.realIndex,0)}var fb={loopCreate:hb,loopFix:ub,loopDestroy:pb};function gb(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const i="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),i.style.cursor="move",i.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1})}function mb(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1}))}var vb={setGrabCursor:gb,unsetGrabCursor:mb};function yb(e,t){function i(t){if(!t||t===jv()||t===Vv())return null;t.assignedSlot&&(t=t.assignedSlot);const s=t.closest(e);return s||t.getRootNode?s||i(t.getRootNode().host):null}return void 0===t&&(t=this),i(t)}function bb(e,t,i){const s=Vv(),{params:r}=e,n=r.edgeSwipeDetection,a=r.edgeSwipeThreshold;return!n||!(i<=a||i>=s.innerWidth-a)||"prevent"===n&&(t.preventDefault(),!0)}function Eb(e){const t=this,i=jv();let s=e;s.originalEvent&&(s=s.originalEvent);const r=t.touchEventsData;if("pointerdown"===s.type){if(null!==r.pointerId&&r.pointerId!==s.pointerId)return;r.pointerId=s.pointerId}else"touchstart"===s.type&&1===s.targetTouches.length&&(r.touchId=s.targetTouches[0].identifier);if("touchstart"===s.type)return void bb(t,s,s.targetTouches[0].pageX);const{params:n,touches:a,enabled:o}=t;if(!o)return;if(!n.simulateTouch&&"mouse"===s.pointerType)return;if(t.animating&&n.preventInteractionOnTransition)return;!t.animating&&n.cssMode&&n.loop&&t.loopFix();let l=s.target;if("wrapper"===n.touchEventsTarget&&!ny(l,t.wrapperEl))return;if("which"in s&&3===s.which)return;if("button"in s&&s.button>0)return;if(r.isTouched&&r.isMoved)return;const c=!!n.noSwipingClass&&""!==n.noSwipingClass,d=s.composedPath?s.composedPath():s.path;c&&s.target&&s.target.shadowRoot&&d&&(l=d[0]);const h=n.noSwipingSelector?n.noSwipingSelector:`.${n.noSwipingClass}`,u=!(!s.target||!s.target.shadowRoot);if(n.noSwiping&&(u?yb(h,l):l.closest(h)))return void(t.allowClick=!0);if(n.swipeHandler&&!l.closest(n.swipeHandler))return;a.currentX=s.pageX,a.currentY=s.pageY;const p=a.currentX,f=a.currentY;if(!bb(t,s,p))return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=p,a.startY=f,r.touchStartTime=qv(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,n.threshold>0&&(r.allowThresholdMove=!1);let g=!0;l.matches(r.focusableElements)&&(g=!1,"SELECT"===l.nodeName&&(r.isTouched=!1)),i.activeElement&&i.activeElement.matches(r.focusableElements)&&i.activeElement!==l&&("mouse"===s.pointerType||"mouse"!==s.pointerType&&!l.matches(r.focusableElements))&&i.activeElement.blur();const m=g&&t.allowTouchMove&&n.touchStartPreventDefault;!n.touchStartForcePreventDefault&&!m||l.isContentEditable||s.preventDefault(),n.freeMode&&n.freeMode.enabled&&t.freeMode&&t.animating&&!n.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",s)}function wb(e){const t=jv(),i=this,s=i.touchEventsData,{params:r,touches:n,rtlTranslate:o,enabled:l}=i;if(!l)return;if(!r.simulateTouch&&"mouse"===e.pointerType)return;let c,d=e;if(d.originalEvent&&(d=d.originalEvent),"pointermove"===d.type){if(null!==s.touchId)return;const e=d.pointerId;if(e!==s.pointerId)return}if("touchmove"===d.type){if(c=[...d.changedTouches].filter(e=>e.identifier===s.touchId)[0],!c||c.identifier!==s.touchId)return}else c=d;if(!s.isTouched)return void(s.startMoving&&s.isScrolling&&i.emit("touchMoveOpposite",d));const h=c.pageX,u=c.pageY;if(d.preventedByNestedSwiper)return n.startX=h,void(n.startY=u);if(!i.allowTouchMove)return d.target.matches(s.focusableElements)||(i.allowClick=!1),void(s.isTouched&&(Object.assign(n,{startX:h,startY:u,currentX:h,currentY:u}),s.touchStartTime=qv()));if(r.touchReleaseOnEdges&&!r.loop)if(i.isVertical()){if(u<n.startY&&i.translate<=i.maxTranslate()||u>n.startY&&i.translate>=i.minTranslate())return s.isTouched=!1,void(s.isMoved=!1)}else if(h<n.startX&&i.translate<=i.maxTranslate()||h>n.startX&&i.translate>=i.minTranslate())return;if(t.activeElement&&t.activeElement.matches(s.focusableElements)&&t.activeElement!==d.target&&"mouse"!==d.pointerType&&t.activeElement.blur(),t.activeElement&&d.target===t.activeElement&&d.target.matches(s.focusableElements))return s.isMoved=!0,void(i.allowClick=!1);s.allowTouchCallbacks&&i.emit("touchMove",d),n.previousX=n.currentX,n.previousY=n.currentY,n.currentX=h,n.currentY=u;const p=n.currentX-n.startX,f=n.currentY-n.startY;if(i.params.threshold&&Math.sqrt(a(p,2)+a(f,2))<i.params.threshold)return;if("undefined"===typeof s.isScrolling){let e;i.isHorizontal()&&n.currentY===n.startY||i.isVertical()&&n.currentX===n.startX?s.isScrolling=!1:p*p+f*f>=25&&(e=180*Math.atan2(Math.abs(f),Math.abs(p))/Math.PI,s.isScrolling=i.isHorizontal()?e>r.touchAngle:90-e>r.touchAngle)}if(s.isScrolling&&i.emit("touchMoveOpposite",d),"undefined"===typeof s.startMoving&&(n.currentX===n.startX&&n.currentY===n.startY||(s.startMoving=!0)),s.isScrolling||"touchmove"===d.type&&s.preventTouchMoveFromPointerMove)return void(s.isTouched=!1);if(!s.startMoving)return;i.allowClick=!1,!r.cssMode&&d.cancelable&&d.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&d.stopPropagation();let g=i.isHorizontal()?p:f,m=i.isHorizontal()?n.currentX-n.previousX:n.currentY-n.previousY;r.oneWayMovement&&(g=Math.abs(g)*(o?1:-1),m=Math.abs(m)*(o?1:-1)),n.diff=g,g*=r.touchRatio,o&&(g=-g,m=-m);const v=i.touchesDirection;i.swipeDirection=g>0?"prev":"next",i.touchesDirection=m>0?"prev":"next";const y=i.params.loop&&!r.cssMode,b="next"===i.touchesDirection&&i.allowSlideNext||"prev"===i.touchesDirection&&i.allowSlidePrev;if(!s.isMoved){if(y&&b&&i.loopFix({direction:i.swipeDirection}),s.startTranslate=i.getTranslate(),i.setTransition(0),i.animating){const e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});i.wrapperEl.dispatchEvent(e)}s.allowMomentumBounce=!1,!r.grabCursor||!0!==i.allowSlideNext&&!0!==i.allowSlidePrev||i.setGrabCursor(!0),i.emit("sliderFirstMove",d)}let E;if((new Date).getTime(),s.isMoved&&s.allowThresholdMove&&v!==i.touchesDirection&&y&&b&&Math.abs(g)>=1)return Object.assign(n,{startX:h,startY:u,currentX:h,currentY:u,startTranslate:s.currentTranslate}),s.loopSwapReset=!0,void(s.startTranslate=s.currentTranslate);i.emit("sliderMove",d),s.isMoved=!0,s.currentTranslate=g+s.startTranslate;let w=!0,A=r.resistanceRatio;if(r.touchReleaseOnEdges&&(A=0),g>0?(y&&b&&!E&&s.allowThresholdMove&&s.currentTranslate>(r.centeredSlides?i.minTranslate()-i.slidesSizesGrid[i.activeIndex+1]-("auto"!==r.slidesPerView&&i.slides.length-r.slidesPerView>=2?i.slidesSizesGrid[i.activeIndex+1]+i.params.spaceBetween:0)-i.params.spaceBetween:i.minTranslate())&&i.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),s.currentTranslate>i.minTranslate()&&(w=!1,r.resistance&&(s.currentTranslate=i.minTranslate()-1+a(-i.minTranslate()+s.startTranslate+g,A)))):g<0&&(y&&b&&!E&&s.allowThresholdMove&&s.currentTranslate<(r.centeredSlides?i.maxTranslate()+i.slidesSizesGrid[i.slidesSizesGrid.length-1]+i.params.spaceBetween+("auto"!==r.slidesPerView&&i.slides.length-r.slidesPerView>=2?i.slidesSizesGrid[i.slidesSizesGrid.length-1]+i.params.spaceBetween:0):i.maxTranslate())&&i.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:i.slides.length-("auto"===r.slidesPerView?i.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),s.currentTranslate<i.maxTranslate()&&(w=!1,r.resistance&&(s.currentTranslate=i.maxTranslate()+1-a(i.maxTranslate()-s.startTranslate-g,A)))),w&&(d.preventedByNestedSwiper=!0),!i.allowSlideNext&&"next"===i.swipeDirection&&s.currentTranslate<s.startTranslate&&(s.currentTranslate=s.startTranslate),!i.allowSlidePrev&&"prev"===i.swipeDirection&&s.currentTranslate>s.startTranslate&&(s.currentTranslate=s.startTranslate),i.allowSlidePrev||i.allowSlideNext||(s.currentTranslate=s.startTranslate),r.threshold>0){if(!(Math.abs(g)>r.threshold||s.allowThresholdMove))return void(s.currentTranslate=s.startTranslate);if(!s.allowThresholdMove)return s.allowThresholdMove=!0,n.startX=n.currentX,n.startY=n.currentY,s.currentTranslate=s.startTranslate,void(n.diff=i.isHorizontal()?n.currentX-n.startX:n.currentY-n.startY)}r.followFinger&&!r.cssMode&&((r.freeMode&&r.freeMode.enabled&&i.freeMode||r.watchSlidesProgress)&&(i.updateActiveIndex(),i.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&i.freeMode&&i.freeMode.onTouchMove(),i.updateProgress(s.currentTranslate),i.setTranslate(s.currentTranslate))}function Ab(e){const t=this,i=t.touchEventsData;let s,r=e;r.originalEvent&&(r=r.originalEvent);const n="touchend"===r.type||"touchcancel"===r.type;if(n){if(s=[...r.changedTouches].filter(e=>e.identifier===i.touchId)[0],!s||s.identifier!==i.touchId)return}else{if(null!==i.touchId)return;if(r.pointerId!==i.pointerId)return;s=r}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(r.type)){const e=["pointercancel","contextmenu"].includes(r.type)&&(t.browser.isSafari||t.browser.isWebView);if(!e)return}i.pointerId=null,i.touchId=null;const{params:a,touches:o,rtlTranslate:l,slidesGrid:c,enabled:d}=t;if(!d)return;if(!a.simulateTouch&&"mouse"===r.pointerType)return;if(i.allowTouchCallbacks&&t.emit("touchEnd",r),i.allowTouchCallbacks=!1,!i.isTouched)return i.isMoved&&a.grabCursor&&t.setGrabCursor(!1),i.isMoved=!1,void(i.startMoving=!1);a.grabCursor&&i.isMoved&&i.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);const h=qv(),u=h-i.touchStartTime;if(t.allowClick){const e=r.path||r.composedPath&&r.composedPath();t.updateClickedSlide(e&&e[0]||r.target,e),t.emit("tap click",r),u<300&&h-i.lastClickTime<300&&t.emit("doubleTap doubleClick",r)}if(i.lastClickTime=qv(),Kv(()=>{t.destroyed||(t.allowClick=!0)}),!i.isTouched||!i.isMoved||!t.swipeDirection||0===o.diff&&!i.loopSwapReset||i.currentTranslate===i.startTranslate&&!i.loopSwapReset)return i.isTouched=!1,i.isMoved=!1,void(i.startMoving=!1);let p;if(i.isTouched=!1,i.isMoved=!1,i.startMoving=!1,p=a.followFinger?l?t.translate:-t.translate:-i.currentTranslate,a.cssMode)return;if(a.freeMode&&a.freeMode.enabled)return void t.freeMode.onTouchEnd({currentPos:p});const f=p>=-t.maxTranslate()&&!t.params.loop;let g=0,m=t.slidesSizesGrid[0];for(let w=0;w<c.length;w+=w<a.slidesPerGroupSkip?1:a.slidesPerGroup){const e=w<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;"undefined"!==typeof c[w+e]?(f||p>=c[w]&&p<c[w+e])&&(g=w,m=c[w+e]-c[w]):(f||p>=c[w])&&(g=w,m=c[c.length-1]-c[c.length-2])}let v=null,y=null;a.rewind&&(t.isBeginning?y=a.virtual&&a.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(v=0));const b=(p-c[g])/m,E=g<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;if(u>a.longSwipesMs){if(!a.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(b>=a.longSwipesRatio?t.slideTo(a.rewind&&t.isEnd?v:g+E):t.slideTo(g)),"prev"===t.swipeDirection&&(b>1-a.longSwipesRatio?t.slideTo(g+E):null!==y&&b<0&&Math.abs(b)>a.longSwipesRatio?t.slideTo(y):t.slideTo(g))}else{if(!a.shortSwipes)return void t.slideTo(t.activeIndex);const e=t.navigation&&(r.target===t.navigation.nextEl||r.target===t.navigation.prevEl);e?r.target===t.navigation.nextEl?t.slideTo(g+E):t.slideTo(g):("next"===t.swipeDirection&&t.slideTo(null!==v?v:g+E),"prev"===t.swipeDirection&&t.slideTo(null!==y?y:g))}}function Tb(){const e=this,{params:t,el:i}=e;if(i&&0===i.offsetWidth)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:s,allowSlidePrev:r,snapGrid:n}=e,a=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const o=a&&t.loop;!("auto"===t.slidesPerView||t.slidesPerView>1)||!e.isEnd||e.isBeginning||e.params.centeredSlides||o?e.params.loop&&!a?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0):e.slideTo(e.slides.length-1,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout(()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()},500)),e.allowSlidePrev=r,e.allowSlideNext=s,e.params.watchOverflow&&n!==e.snapGrid&&e.checkOverflow()}function Sb(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function xb(){const e=this,{wrapperEl:t,rtlTranslate:i,enabled:s}=e;if(!s)return;let r;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();const n=e.maxTranslate()-e.minTranslate();r=0===n?0:(e.translate-e.minTranslate())/n,r!==e.progress&&e.updateProgress(i?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function Lb(e){const t=this;$y(t,e.target),t.params.cssMode||"auto"!==t.params.slidesPerView&&!t.params.autoHeight||t.update()}function kb(){const e=this;e.documentTouchHandlerProceeded||(e.documentTouchHandlerProceeded=!0,e.params.touchReleaseOnEdges&&(e.el.style.touchAction="auto"))}const Ib=(e,t)=>{const i=jv(),{params:s,el:r,wrapperEl:n,device:a}=e,o=!!s.nested,l="on"===t?"addEventListener":"removeEventListener",c=t;r&&"string"!==typeof r&&(i[l]("touchstart",e.onDocumentTouchStart,{passive:!1,capture:o}),r[l]("touchstart",e.onTouchStart,{passive:!1}),r[l]("pointerdown",e.onTouchStart,{passive:!1}),i[l]("touchmove",e.onTouchMove,{passive:!1,capture:o}),i[l]("pointermove",e.onTouchMove,{passive:!1,capture:o}),i[l]("touchend",e.onTouchEnd,{passive:!0}),i[l]("pointerup",e.onTouchEnd,{passive:!0}),i[l]("pointercancel",e.onTouchEnd,{passive:!0}),i[l]("touchcancel",e.onTouchEnd,{passive:!0}),i[l]("pointerout",e.onTouchEnd,{passive:!0}),i[l]("pointerleave",e.onTouchEnd,{passive:!0}),i[l]("contextmenu",e.onTouchEnd,{passive:!0}),(s.preventClicks||s.preventClicksPropagation)&&r[l]("click",e.onClick,!0),s.cssMode&&n[l]("scroll",e.onScroll),s.updateOnWindowResize?e[c](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",Tb,!0):e[c]("observerUpdate",Tb,!0),r[l]("load",e.onLoad,{capture:!0}))};function _b(){const e=this,{params:t}=e;e.onTouchStart=Eb.bind(e),e.onTouchMove=wb.bind(e),e.onTouchEnd=Ab.bind(e),e.onDocumentTouchStart=kb.bind(e),t.cssMode&&(e.onScroll=xb.bind(e)),e.onClick=Sb.bind(e),e.onLoad=Lb.bind(e),Ib(e,"on")}function Cb(){const e=this;Ib(e,"off")}var Rb={attachEvents:_b,detachEvents:Cb};const Pb=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;function Db(){const e=this,{realIndex:t,initialized:i,params:s,el:r}=e,n=s.breakpoints;if(!n||n&&0===Object.keys(n).length)return;const a=e.getBreakpoint(n,e.params.breakpointsBase,e.el);if(!a||e.currentBreakpoint===a)return;const o=a in n?n[a]:void 0,l=o||e.originalParams,c=Pb(e,s),d=Pb(e,l),h=e.params.grabCursor,u=l.grabCursor,p=s.enabled;c&&!d?(r.classList.remove(`${s.containerModifierClass}grid`,`${s.containerModifierClass}grid-column`),e.emitContainerClasses()):!c&&d&&(r.classList.add(`${s.containerModifierClass}grid`),(l.grid.fill&&"column"===l.grid.fill||!l.grid.fill&&"column"===s.grid.fill)&&r.classList.add(`${s.containerModifierClass}grid-column`),e.emitContainerClasses()),h&&!u?e.unsetGrabCursor():!h&&u&&e.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(t=>{if("undefined"===typeof l[t])return;const i=s[t]&&s[t].enabled,r=l[t]&&l[t].enabled;i&&!r&&e[t].disable(),!i&&r&&e[t].enable()});const f=l.direction&&l.direction!==s.direction,g=s.loop&&(l.slidesPerView!==s.slidesPerView||f),m=s.loop;f&&i&&e.changeDirection(),ey(e.params,l);const v=e.params.enabled,y=e.params.loop;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),p&&!v?e.disable():!p&&v&&e.enable(),e.currentBreakpoint=a,e.emit("_beforeBreakpoint",l),i&&(g?(e.loopDestroy(),e.loopCreate(t),e.updateSlides()):!m&&y?(e.loopCreate(t),e.updateSlides()):m&&!y&&e.loopDestroy()),e.emit("breakpoint",l)}function Mb(e,t,i){if(void 0===t&&(t="window"),!e||"container"===t&&!i)return;let s=!1;const r=Vv(),n="window"===t?r.innerHeight:i.clientHeight,a=Object.keys(e).map(e=>{if("string"===typeof e&&0===e.indexOf("@")){const t=parseFloat(e.substr(1)),i=n*t;return{value:i,point:e}}return{value:e,point:e}});a.sort((e,t)=>parseInt(e.value,10)-parseInt(t.value,10));for(let o=0;o<a.length;o+=1){const{point:e,value:n}=a[o];"window"===t?r.matchMedia(`(min-width: ${n}px)`).matches&&(s=e):n<=i.clientWidth&&(s=e)}return s||"max"}var Ob={setBreakpoint:Db,getBreakpoint:Mb};function Nb(e,t){const i=[];return e.forEach(e=>{"object"===typeof e?Object.keys(e).forEach(s=>{e[s]&&i.push(t+s)}):"string"===typeof e&&i.push(t+e)}),i}function Bb(){const e=this,{classNames:t,params:i,rtl:s,el:r,device:n}=e,a=Nb(["initialized",i.direction,{"free-mode":e.params.freeMode&&i.freeMode.enabled},{autoheight:i.autoHeight},{rtl:s},{grid:i.grid&&i.grid.rows>1},{"grid-column":i.grid&&i.grid.rows>1&&"column"===i.grid.fill},{android:n.android},{ios:n.ios},{"css-mode":i.cssMode},{centered:i.cssMode&&i.centeredSlides},{"watch-progress":i.watchSlidesProgress}],i.containerModifierClass);t.push(...a),r.classList.add(...t),e.emitContainerClasses()}function Fb(){const e=this,{el:t,classNames:i}=e;t&&"string"!==typeof t&&(t.classList.remove(...i),e.emitContainerClasses())}var $b={addClasses:Bb,removeClasses:Fb};function Ub(){const e=this,{isLocked:t,params:i}=e,{slidesOffsetBefore:s}=i;if(s){const t=e.slides.length-1,i=e.slidesGrid[t]+e.slidesSizesGrid[t]+2*s;e.isLocked=e.size>i}else e.isLocked=1===e.snapGrid.length;!0===i.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===i.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}var Gb={checkOverflow:Ub},Hb={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function jb(e,t){return function(i){void 0===i&&(i={});const s=Object.keys(i)[0],r=i[s];"object"===typeof r&&null!==r?(!0===e[s]&&(e[s]={enabled:!0}),"navigation"===s&&e[s]&&e[s].enabled&&!e[s].prevEl&&!e[s].nextEl&&(e[s].auto=!0),["pagination","scrollbar"].indexOf(s)>=0&&e[s]&&e[s].enabled&&!e[s].el&&(e[s].auto=!0),s in e&&"enabled"in r?("object"!==typeof e[s]||"enabled"in e[s]||(e[s].enabled=!0),e[s]||(e[s]={enabled:!1}),ey(t,i)):ey(t,i)):ey(t,i)}}const zb={eventsEmitter:_y,update:Vy,translate:Qy,transition:ib,slide:db,loop:fb,grabCursor:vb,events:Rb,breakpoints:Ob,checkOverflow:Gb,classes:$b},Vb={};let Yb=class e{constructor(){let t,i;for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];1===r.length&&r[0].constructor&&"Object"===Object.prototype.toString.call(r[0]).slice(8,-1)?i=r[0]:[t,i]=r,i||(i={}),i=ey({},i),t&&!i.el&&(i.el=t);const o=jv();if(i.el&&"string"===typeof i.el&&o.querySelectorAll(i.el).length>1){const t=[];return o.querySelectorAll(i.el).forEach(s=>{const r=ey({},i,{el:s});t.push(new e(r))}),t}const l=this;l.__swiper__=!0,l.support=Ay(),l.device=Sy({userAgent:i.userAgent}),l.browser=Ly(),l.eventsListeners={},l.eventsAnyListeners=[],l.modules=[...l.__modules__],i.modules&&Array.isArray(i.modules)&&l.modules.push(...i.modules);const c={};l.modules.forEach(e=>{e({params:i,swiper:l,extendParams:jb(i,c),on:l.on.bind(l),once:l.once.bind(l),off:l.off.bind(l),emit:l.emit.bind(l)})});const d=ey({},Hb,c);return l.params=ey({},d,Vb,i),l.originalParams=ey({},l.params),l.passedParams=ey({},i),l.params&&l.params.on&&Object.keys(l.params.on).forEach(e=>{l.on(e,l.params.on[e])}),l.params&&l.params.onAny&&l.onAny(l.params.onAny),Object.assign(l,{enabled:l.params.enabled,el:t,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return"horizontal"===l.params.direction},isVertical(){return"vertical"===l.params.direction},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/a(2,23))*a(2,23)},allowSlideNext:l.params.allowSlideNext,allowSlidePrev:l.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:l.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:l.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),l.emit("_swiper"),l.params.init&&l.init(),l}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:i}=this,s=ry(t,`.${i.slideClass}, swiper-slide`),r=uy(s[0]);return uy(e)-r}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>1*t.getAttribute("data-swiper-slide-index")===e)[0])}recalcSlides(){const e=this,{slidesEl:t,params:i}=e;e.slides=ry(t,`.${i.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const i=this;e=Math.min(Math.max(e,0),1);const s=i.minTranslate(),r=i.maxTranslate(),n=(r-s)*e+s;i.translateTo(n,"undefined"===typeof t?0:t),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(t=>0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass));e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(e=>0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(i=>{const s=e.getSlideClasses(i);t.push({slideEl:i,classNames:s}),e.emit("_slideClass",i,s)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){void 0===e&&(e="current"),void 0===t&&(t=!1);const i=this,{params:s,slides:r,slidesGrid:n,slidesSizesGrid:a,size:o,activeIndex:l}=i;let c=1;if("number"===typeof s.slidesPerView)return s.slidesPerView;if(s.centeredSlides){let e,t=r[l]?Math.ceil(r[l].swiperSlideSize):0;for(let i=l+1;i<r.length;i+=1)r[i]&&!e&&(t+=Math.ceil(r[i].swiperSlideSize),c+=1,t>o&&(e=!0));for(let i=l-1;i>=0;i-=1)r[i]&&!e&&(t+=r[i].swiperSlideSize,c+=1,t>o&&(e=!0))}else if("current"===e)for(let d=l+1;d<r.length;d+=1){const e=t?n[d]+a[d]-n[l]<o:n[d]-n[l]<o;e&&(c+=1)}else for(let d=l-1;d>=0;d-=1){const e=n[l]-n[d]<o;e&&(c+=1)}return c}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:i}=e;function s(){const t=e.rtlTranslate?-1*e.translate:e.translate,i=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(i),e.updateActiveIndex(),e.updateSlidesClasses()}let r;if(i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(t=>{t.complete&&$y(e,t)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),i.freeMode&&i.freeMode.enabled&&!i.cssMode)s(),i.autoHeight&&e.updateAutoHeight();else{if(("auto"===i.slidesPerView||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){const t=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;r=e.slideTo(t.length-1,0,!1,!0)}else r=e.slideTo(e.activeIndex,0,!1,!0);r||s()}i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){void 0===t&&(t=!0);const i=this,s=i.params.direction;return e||(e="horizontal"===s?"vertical":"horizontal"),e===s||"horizontal"!==e&&"vertical"!==e||(i.el.classList.remove(`${i.params.containerModifierClass}${s}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(t=>{"vertical"===e?t.style.width="":t.style.height=""}),i.emit("changeDirection"),t&&i.update()),i}changeLanguageDirection(e){const t=this;t.rtl&&"rtl"===e||!t.rtl&&"ltr"===e||(t.rtl="rtl"===e,t.rtlTranslate="horizontal"===t.params.direction&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let i=e||t.params.el;if("string"===typeof i&&(i=document.querySelector(i)),!i)return!1;i.swiper=t,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const s=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`,r=()=>{if(i&&i.shadowRoot&&i.shadowRoot.querySelector){const e=i.shadowRoot.querySelector(s());return e}return ry(i,s())[0]};let n=r();return!n&&t.params.createElements&&(n=oy("div",t.params.wrapperClass),i.append(n),ry(i,`.${t.params.slideClass}`).forEach(e=>{n.append(e)})),Object.assign(t,{el:i,wrapperEl:n,slidesEl:t.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:n,hostEl:t.isElement?i.parentNode.host:i,mounted:!0,rtl:"rtl"===i.dir.toLowerCase()||"rtl"===hy(i,"direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===i.dir.toLowerCase()||"rtl"===hy(i,"direction")),wrongRTL:"-webkit-box"===hy(n,"display")}),!0}init(e){const t=this;if(t.initialized)return t;const i=t.mount(e);if(!1===i)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const s=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&s.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),s.forEach(e=>{e.complete?$y(t,e):e.addEventListener("load",e=>{$y(t,e.target)})}),Gy(t),t.initialized=!0,Gy(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);const i=this,{params:s,el:r,wrapperEl:n,slides:a}=i;return"undefined"===typeof i.params||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),s.loop&&i.loopDestroy(),t&&(i.removeClasses(),r&&"string"!==typeof r&&r.removeAttribute("style"),n&&n.removeAttribute("style"),a&&a.length&&a.forEach(e=>{e.classList.remove(s.slideVisibleClass,s.slideFullyVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass),e.removeAttribute("style"),e.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(e=>{i.off(e)}),!1!==e&&(i.el&&"string"!==typeof i.el&&(i.el.swiper=null),Wv(i)),i.destroyed=!0),null}static extendDefaults(e){ey(Vb,e)}static get extendedDefaults(){return Vb}static get defaults(){return Hb}static installModule(t){e.prototype.__modules__||(e.prototype.__modules__=[]);const i=e.prototype.__modules__;"function"===typeof t&&i.indexOf(t)<0&&i.push(t)}static use(t){return Array.isArray(t)?(t.forEach(t=>e.installModule(t)),e):(e.installModule(t),e)}};function Wb(e){let t,{swiper:i,extendParams:s,on:r,emit:n}=e;s({virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}});const a=jv();i.virtual={cache:{},from:void 0,to:void 0,slides:[],offset:0,slidesGrid:[]};const o=a.createElement("div");function l(e,t){const s=i.params.virtual;if(s.cache&&i.virtual.cache[t])return i.virtual.cache[t];let r;return s.renderSlide?(r=s.renderSlide.call(i,e,t),"string"===typeof r&&(o.innerHTML=r,r=o.children[0])):r=i.isElement?oy("swiper-slide"):oy("div",i.params.slideClass),r.setAttribute("data-swiper-slide-index",t),s.renderSlide||(r.innerHTML=e),s.cache&&(i.virtual.cache[t]=r),r}function c(e,t){const{slidesPerView:s,slidesPerGroup:r,centeredSlides:a,loop:o,initialSlide:c}=i.params;if(t&&!o&&c>0)return;const{addSlidesBefore:d,addSlidesAfter:h}=i.params.virtual,{from:u,to:p,slides:f,slidesGrid:g,offset:m}=i.virtual;i.params.cssMode||i.updateActiveIndex();const v=i.activeIndex||0;let y,b,E;y=i.rtlTranslate?"right":i.isHorizontal()?"left":"top",a?(b=Math.floor(s/2)+r+h,E=Math.floor(s/2)+r+d):(b=s+(r-1)+h,E=(o?s:r)+d);let w=v-E,A=v+b;o||(w=Math.max(w,0),A=Math.min(A,f.length-1));let T=(i.slidesGrid[w]||0)-(i.slidesGrid[0]||0);function S(){i.updateSlides(),i.updateProgress(),i.updateSlidesClasses(),n("virtualUpdate")}if(o&&v>=E?(w-=E,a||(T+=i.slidesGrid[0])):o&&v<E&&(w=-E,a&&(T+=i.slidesGrid[0])),Object.assign(i.virtual,{from:w,to:A,offset:T,slidesGrid:i.slidesGrid,slidesBefore:E,slidesAfter:b}),u===w&&p===A&&!e)return i.slidesGrid!==g&&T!==m&&i.slides.forEach(e=>{e.style[y]=T-Math.abs(i.cssOverflowAdjustment())+"px"}),i.updateProgress(),void n("virtualUpdate");if(i.params.virtual.renderExternal)return i.params.virtual.renderExternal.call(i,{offset:T,from:w,to:A,slides:function(){const e=[];for(let t=w;t<=A;t+=1)e.push(f[t]);return e}()}),void(i.params.virtual.renderExternalUpdate?S():n("virtualUpdate"));const x=[],L=[],k=e=>{let t=e;return e<0?t=f.length+e:t>=f.length&&(t-=f.length),t};if(e)i.slides.filter(e=>e.matches(`.${i.params.slideClass}, swiper-slide`)).forEach(e=>{e.remove()});else for(let n=u;n<=p;n+=1)if(n<w||n>A){const e=k(n);i.slides.filter(t=>t.matches(`.${i.params.slideClass}[data-swiper-slide-index="${e}"], swiper-slide[data-swiper-slide-index="${e}"]`)).forEach(e=>{e.remove()})}const I=o?-f.length:0,_=o?2*f.length:f.length;for(let i=I;i<_;i+=1)if(i>=w&&i<=A){const t=k(i);"undefined"===typeof p||e?L.push(t):(i>p&&L.push(t),i<u&&x.push(t))}if(L.forEach(e=>{i.slidesEl.append(l(f[e],e))}),o)for(let n=x.length-1;n>=0;n-=1){const e=x[n];i.slidesEl.prepend(l(f[e],e))}else x.sort((e,t)=>t-e),x.forEach(e=>{i.slidesEl.prepend(l(f[e],e))});ry(i.slidesEl,".swiper-slide, swiper-slide").forEach(e=>{e.style[y]=T-Math.abs(i.cssOverflowAdjustment())+"px"}),S()}function d(e){if("object"===typeof e&&"length"in e)for(let t=0;t<e.length;t+=1)e[t]&&i.virtual.slides.push(e[t]);else i.virtual.slides.push(e);c(!0)}function h(e){const t=i.activeIndex;let s=t+1,r=1;if(Array.isArray(e)){for(let t=0;t<e.length;t+=1)e[t]&&i.virtual.slides.unshift(e[t]);s=t+e.length,r=e.length}else i.virtual.slides.unshift(e);if(i.params.virtual.cache){const e=i.virtual.cache,t={};Object.keys(e).forEach(i=>{const s=e[i],n=s.getAttribute("data-swiper-slide-index");n&&s.setAttribute("data-swiper-slide-index",parseInt(n,10)+r),t[parseInt(i,10)+r]=s}),i.virtual.cache=t}c(!0),i.slideTo(s,0)}function u(e){if("undefined"===typeof e||null===e)return;let t=i.activeIndex;if(Array.isArray(e))for(let s=e.length-1;s>=0;s-=1)i.params.virtual.cache&&(delete i.virtual.cache[e[s]],Object.keys(i.virtual.cache).forEach(t=>{t>e&&(i.virtual.cache[t-1]=i.virtual.cache[t],i.virtual.cache[t-1].setAttribute("data-swiper-slide-index",t-1),delete i.virtual.cache[t])})),i.virtual.slides.splice(e[s],1),e[s]<t&&(t-=1),t=Math.max(t,0);else i.params.virtual.cache&&(delete i.virtual.cache[e],Object.keys(i.virtual.cache).forEach(t=>{t>e&&(i.virtual.cache[t-1]=i.virtual.cache[t],i.virtual.cache[t-1].setAttribute("data-swiper-slide-index",t-1),delete i.virtual.cache[t])})),i.virtual.slides.splice(e,1),e<t&&(t-=1),t=Math.max(t,0);c(!0),i.slideTo(t,0)}function p(){i.virtual.slides=[],i.params.virtual.cache&&(i.virtual.cache={}),c(!0),i.slideTo(0,0)}r("beforeInit",()=>{if(!i.params.virtual.enabled)return;let e;if("undefined"===typeof i.passedParams.virtual.slides){const t=[...i.slidesEl.children].filter(e=>e.matches(`.${i.params.slideClass}, swiper-slide`));t&&t.length&&(i.virtual.slides=[...t],e=!0,t.forEach((e,t)=>{e.setAttribute("data-swiper-slide-index",t),i.virtual.cache[t]=e,e.remove()}))}e||(i.virtual.slides=i.params.virtual.slides),i.classNames.push(`${i.params.containerModifierClass}virtual`),i.params.watchSlidesProgress=!0,i.originalParams.watchSlidesProgress=!0,c(!1,!0)}),r("setTranslate",()=>{i.params.virtual.enabled&&(i.params.cssMode&&!i._immediateVirtual?(clearTimeout(t),t=setTimeout(()=>{c()},100)):c())}),r("init update resize",()=>{i.params.virtual.enabled&&i.params.cssMode&&ty(i.wrapperEl,"--swiper-virtual-size",`${i.virtualSize}px`)}),Object.assign(i.virtual,{appendSlide:d,prependSlide:h,removeSlide:u,removeAllSlides:p,update:c})}function Kb(e){let{swiper:t,extendParams:i,on:s,emit:r}=e;const n=jv(),a=Vv();function o(e){if(!t.enabled)return;const{rtlTranslate:i}=t;let s=e;s.originalEvent&&(s=s.originalEvent);const o=s.keyCode||s.charCode,l=t.params.keyboard.pageUpDown,c=l&&33===o,d=l&&34===o,h=37===o,u=39===o,p=38===o,f=40===o;if(!t.allowSlideNext&&(t.isHorizontal()&&u||t.isVertical()&&f||d))return!1;if(!t.allowSlidePrev&&(t.isHorizontal()&&h||t.isVertical()&&p||c))return!1;if(!(s.shiftKey||s.altKey||s.ctrlKey||s.metaKey)&&(!n.activeElement||!n.activeElement.nodeName||"input"!==n.activeElement.nodeName.toLowerCase()&&"textarea"!==n.activeElement.nodeName.toLowerCase())){if(t.params.keyboard.onlyInViewport&&(c||d||h||u||p||f)){let e=!1;if(py(t.el,`.${t.params.slideClass}, swiper-slide`).length>0&&0===py(t.el,`.${t.params.slideActiveClass}`).length)return;const s=t.el,r=s.clientWidth,n=s.clientHeight,o=a.innerWidth,l=a.innerHeight,c=ly(s);i&&(c.left-=s.scrollLeft);const d=[[c.left,c.top],[c.left+r,c.top],[c.left,c.top+n],[c.left+r,c.top+n]];for(let t=0;t<d.length;t+=1){const i=d[t];if(i[0]>=0&&i[0]<=o&&i[1]>=0&&i[1]<=l){if(0===i[0]&&0===i[1])continue;e=!0}}if(!e)return}t.isHorizontal()?((c||d||h||u)&&(s.preventDefault?s.preventDefault():s.returnValue=!1),((d||u)&&!i||(c||h)&&i)&&t.slideNext(),((c||h)&&!i||(d||u)&&i)&&t.slidePrev()):((c||d||p||f)&&(s.preventDefault?s.preventDefault():s.returnValue=!1),(d||f)&&t.slideNext(),(c||p)&&t.slidePrev()),r("keyPress",o)}}function l(){t.keyboard.enabled||(n.addEventListener("keydown",o),t.keyboard.enabled=!0)}function c(){t.keyboard.enabled&&(n.removeEventListener("keydown",o),t.keyboard.enabled=!1)}t.keyboard={enabled:!1},i({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}}),s("init",()=>{t.params.keyboard.enabled&&l()}),s("destroy",()=>{t.keyboard.enabled&&c()}),Object.assign(t.keyboard,{enable:l,disable:c})}function qb(e){let{swiper:t,extendParams:i,on:s,emit:r}=e;const n=Vv();let a;i({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),t.mousewheel={enabled:!1};let o,l=qv();const c=[];function d(e){const t=10,i=40,s=800;let r=0,n=0,a=0,o=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(r=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(r=n,n=0),a=r*t,o=n*t,"deltaY"in e&&(o=e.deltaY),"deltaX"in e&&(a=e.deltaX),e.shiftKey&&!a&&(a=o,o=0),(a||o)&&e.deltaMode&&(1===e.deltaMode?(a*=i,o*=i):(a*=s,o*=s)),a&&!r&&(r=a<1?-1:1),o&&!n&&(n=o<1?-1:1),{spinX:r,spinY:n,pixelX:a,pixelY:o}}function h(){t.enabled&&(t.mouseEntered=!0)}function u(){t.enabled&&(t.mouseEntered=!1)}function p(e){return!(t.params.mousewheel.thresholdDelta&&e.delta<t.params.mousewheel.thresholdDelta)&&(!(t.params.mousewheel.thresholdTime&&qv()-l<t.params.mousewheel.thresholdTime)&&(e.delta>=6&&qv()-l<60||(e.direction<0?t.isEnd&&!t.params.loop||t.animating||(t.slideNext(),r("scroll",e.raw)):t.isBeginning&&!t.params.loop||t.animating||(t.slidePrev(),r("scroll",e.raw)),l=(new n.Date).getTime(),!1)))}function f(e){const i=t.params.mousewheel;if(e.direction<0){if(t.isEnd&&!t.params.loop&&i.releaseOnEdges)return!0}else if(t.isBeginning&&!t.params.loop&&i.releaseOnEdges)return!0;return!1}function g(e){let i=e,s=!0;if(!t.enabled)return;if(e.target.closest(`.${t.params.mousewheel.noMousewheelClass}`))return;const n=t.params.mousewheel;t.params.cssMode&&i.preventDefault();let l=t.el;"container"!==t.params.mousewheel.eventsTarget&&(l=document.querySelector(t.params.mousewheel.eventsTarget));const h=l&&l.contains(i.target);if(!t.mouseEntered&&!h&&!n.releaseOnEdges)return!0;i.originalEvent&&(i=i.originalEvent);let u=0;const g=t.rtlTranslate?-1:1,m=d(i);if(n.forceToAxis)if(t.isHorizontal()){if(!(Math.abs(m.pixelX)>Math.abs(m.pixelY)))return!0;u=-m.pixelX*g}else{if(!(Math.abs(m.pixelY)>Math.abs(m.pixelX)))return!0;u=-m.pixelY}else u=Math.abs(m.pixelX)>Math.abs(m.pixelY)?-m.pixelX*g:-m.pixelY;if(0===u)return!0;n.invert&&(u=-u);let v=t.getTranslate()+u*n.sensitivity;if(v>=t.minTranslate()&&(v=t.minTranslate()),v<=t.maxTranslate()&&(v=t.maxTranslate()),s=!!t.params.loop||!(v===t.minTranslate()||v===t.maxTranslate()),s&&t.params.nested&&i.stopPropagation(),t.params.freeMode&&t.params.freeMode.enabled){const e={time:qv(),delta:Math.abs(u),direction:Math.sign(u)},s=o&&e.time<o.time+500&&e.delta<=o.delta&&e.direction===o.direction;if(!s){o=void 0;let l=t.getTranslate()+u*n.sensitivity;const d=t.isBeginning,h=t.isEnd;if(l>=t.minTranslate()&&(l=t.minTranslate()),l<=t.maxTranslate()&&(l=t.maxTranslate()),t.setTransition(0),t.setTranslate(l),t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses(),(!d&&t.isBeginning||!h&&t.isEnd)&&t.updateSlidesClasses(),t.params.loop&&t.loopFix({direction:e.direction<0?"next":"prev",byMousewheel:!0}),t.params.freeMode.sticky){clearTimeout(a),a=void 0,c.length>=15&&c.shift();const i=c.length?c[c.length-1]:void 0,s=c[0];if(c.push(e),i&&(e.delta>i.delta||e.direction!==i.direction))c.splice(0);else if(c.length>=15&&e.time-s.time<500&&s.delta-e.delta>=1&&e.delta<=6){const i=u>0?.8:.2;o=e,c.splice(0),a=Kv(()=>{!t.destroyed&&t.params&&t.slideToClosest(t.params.speed,!0,void 0,i)},0)}a||(a=Kv(()=>{if(t.destroyed||!t.params)return;const i=.5;o=e,c.splice(0),t.slideToClosest(t.params.speed,!0,void 0,i)},500))}if(s||r("scroll",i),t.params.autoplay&&t.params.autoplayDisableOnInteraction&&t.autoplay.stop(),n.releaseOnEdges&&(l===t.minTranslate()||l===t.maxTranslate()))return!0}}else{const t={time:qv(),delta:Math.abs(u),direction:Math.sign(u),raw:e};c.length>=2&&c.shift();const i=c.length?c[c.length-1]:void 0;if(c.push(t),i?(t.direction!==i.direction||t.delta>i.delta||t.time>i.time+150)&&p(t):p(t),f(t))return!0}return i.preventDefault?i.preventDefault():i.returnValue=!1,!1}function m(e){let i=t.el;"container"!==t.params.mousewheel.eventsTarget&&(i=document.querySelector(t.params.mousewheel.eventsTarget)),i[e]("mouseenter",h),i[e]("mouseleave",u),i[e]("wheel",g)}function v(){return t.params.cssMode?(t.wrapperEl.removeEventListener("wheel",g),!0):!t.mousewheel.enabled&&(m("addEventListener"),t.mousewheel.enabled=!0,!0)}function y(){return t.params.cssMode?(t.wrapperEl.addEventListener(event,g),!0):!!t.mousewheel.enabled&&(m("removeEventListener"),t.mousewheel.enabled=!1,!0)}s("init",()=>{!t.params.mousewheel.enabled&&t.params.cssMode&&y(),t.params.mousewheel.enabled&&v()}),s("destroy",()=>{t.params.cssMode&&v(),t.mousewheel.enabled&&y()}),Object.assign(t.mousewheel,{enable:v,disable:y})}function Xb(e,t,i,s){return e.params.createElements&&Object.keys(s).forEach(r=>{if(!i[r]&&!0===i.auto){let n=ry(e.el,`.${s[r]}`)[0];n||(n=oy("div",s[r]),n.className=s[r],e.el.append(n)),i[r]=n,t[r]=n}}),i}function Qb(e){let{swiper:t,extendParams:i,on:s,emit:r}=e;function n(e){let i;return e&&"string"===typeof e&&t.isElement&&(i=t.el.querySelector(e)||t.hostEl.querySelector(e),i)?i:(e&&("string"===typeof e&&(i=[...document.querySelectorAll(e)]),t.params.uniqueNavElements&&"string"===typeof e&&i&&i.length>1&&1===t.el.querySelectorAll(e).length?i=t.el.querySelector(e):i&&1===i.length&&(i=i[0])),e&&!i?e:i)}function a(e,i){const s=t.params.navigation;e=my(e),e.forEach(e=>{e&&(e.classList[i?"add":"remove"](...s.disabledClass.split(" ")),"BUTTON"===e.tagName&&(e.disabled=i),t.params.watchOverflow&&t.enabled&&e.classList[t.isLocked?"add":"remove"](s.lockClass))})}function o(){const{nextEl:e,prevEl:i}=t.navigation;if(t.params.loop)return a(i,!1),void a(e,!1);a(i,t.isBeginning&&!t.params.rewind),a(e,t.isEnd&&!t.params.rewind)}function l(e){e.preventDefault(),(!t.isBeginning||t.params.loop||t.params.rewind)&&(t.slidePrev(),r("navigationPrev"))}function c(e){e.preventDefault(),(!t.isEnd||t.params.loop||t.params.rewind)&&(t.slideNext(),r("navigationNext"))}function d(){const e=t.params.navigation;if(t.params.navigation=Xb(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!e.nextEl&&!e.prevEl)return;let i=n(e.nextEl),s=n(e.prevEl);Object.assign(t.navigation,{nextEl:i,prevEl:s}),i=my(i),s=my(s);const r=(i,s)=>{i&&i.addEventListener("click","next"===s?c:l),!t.enabled&&i&&i.classList.add(...e.lockClass.split(" "))};i.forEach(e=>r(e,"next")),s.forEach(e=>r(e,"prev"))}function h(){let{nextEl:e,prevEl:i}=t.navigation;e=my(e),i=my(i);const s=(e,i)=>{e.removeEventListener("click","next"===i?c:l),e.classList.remove(...t.params.navigation.disabledClass.split(" "))};e.forEach(e=>s(e,"next")),i.forEach(e=>s(e,"prev"))}i({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,prevEl:null},s("init",()=>{!1===t.params.navigation.enabled?p():(d(),o())}),s("toEdge fromEdge lock unlock",()=>{o()}),s("destroy",()=>{h()}),s("enable disable",()=>{let{nextEl:e,prevEl:i}=t.navigation;e=my(e),i=my(i),t.enabled?o():[...e,...i].filter(e=>!!e).forEach(e=>e.classList.add(t.params.navigation.lockClass))}),s("click",(e,i)=>{let{nextEl:s,prevEl:n}=t.navigation;s=my(s),n=my(n);const a=i.target;let o=n.includes(a)||s.includes(a);if(t.isElement&&!o){const e=i.path||i.composedPath&&i.composedPath();e&&(o=e.find(e=>s.includes(e)||n.includes(e)))}if(t.params.navigation.hideOnClick&&!o){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===a||t.pagination.el.contains(a)))return;let e;s.length?e=s[0].classList.contains(t.params.navigation.hiddenClass):n.length&&(e=n[0].classList.contains(t.params.navigation.hiddenClass)),r(!0===e?"navigationShow":"navigationHide"),[...s,...n].filter(e=>!!e).forEach(e=>e.classList.toggle(t.params.navigation.hiddenClass))}});const u=()=>{t.el.classList.remove(...t.params.navigation.navigationDisabledClass.split(" ")),d(),o()},p=()=>{t.el.classList.add(...t.params.navigation.navigationDisabledClass.split(" ")),h()};Object.assign(t.navigation,{enable:u,disable:p,update:o,init:d,destroy:h})}function Zb(e){return void 0===e&&(e=""),`.${e.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function Jb(e){let{swiper:t,extendParams:i,on:s,emit:r}=e;const n="swiper-pagination";let a;i({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:e=>e,formatFractionTotal:e=>e,bulletClass:`${n}-bullet`,bulletActiveClass:`${n}-bullet-active`,modifierClass:`${n}-`,currentClass:`${n}-current`,totalClass:`${n}-total`,hiddenClass:`${n}-hidden`,progressbarFillClass:`${n}-progressbar-fill`,progressbarOppositeClass:`${n}-progressbar-opposite`,clickableClass:`${n}-clickable`,lockClass:`${n}-lock`,horizontalClass:`${n}-horizontal`,verticalClass:`${n}-vertical`,paginationDisabledClass:`${n}-disabled`}}),t.pagination={el:null,bullets:[]};let o=0;function l(){return!t.params.pagination.el||!t.pagination.el||Array.isArray(t.pagination.el)&&0===t.pagination.el.length}function c(e,i){const{bulletActiveClass:s}=t.params.pagination;e&&(e=e[("prev"===i?"previous":"next")+"ElementSibling"],e&&(e.classList.add(`${s}-${i}`),e=e[("prev"===i?"previous":"next")+"ElementSibling"],e&&e.classList.add(`${s}-${i}-${i}`)))}function d(e,t,i){return e%=i,t%=i,t===e+1?"next":t===e-1?"previous":void 0}function h(e){const i=e.target.closest(Zb(t.params.pagination.bulletClass));if(!i)return;e.preventDefault();const s=uy(i)*t.params.slidesPerGroup;if(t.params.loop){if(t.realIndex===s)return;const e=d(t.realIndex,s,t.slides.length);"next"===e?t.slideNext():"previous"===e?t.slidePrev():t.slideToLoop(s)}else t.slideTo(s)}function u(){const e=t.rtl,i=t.params.pagination;if(l())return;let s,n,d=t.pagination.el;d=my(d);const h=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,u=t.params.loop?Math.ceil(h/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?(n=t.previousRealIndex||0,s=t.params.slidesPerGroup>1?Math.floor(t.realIndex/t.params.slidesPerGroup):t.realIndex):"undefined"!==typeof t.snapIndex?(s=t.snapIndex,n=t.previousSnapIndex):(n=t.previousIndex||0,s=t.activeIndex||0),"bullets"===i.type&&t.pagination.bullets&&t.pagination.bullets.length>0){const r=t.pagination.bullets;let l,h,u;if(i.dynamicBullets&&(a=gy(r[0],t.isHorizontal()?"width":"height",!0),d.forEach(e=>{e.style[t.isHorizontal()?"width":"height"]=a*(i.dynamicMainBullets+4)+"px"}),i.dynamicMainBullets>1&&void 0!==n&&(o+=s-(n||0),o>i.dynamicMainBullets-1?o=i.dynamicMainBullets-1:o<0&&(o=0)),l=Math.max(s-o,0),h=l+(Math.min(r.length,i.dynamicMainBullets)-1),u=(h+l)/2),r.forEach(e=>{const t=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(e=>`${i.bulletActiveClass}${e}`)].map(e=>"string"===typeof e&&e.includes(" ")?e.split(" "):e).flat();e.classList.remove(...t)}),d.length>1)r.forEach(e=>{const r=uy(e);r===s?e.classList.add(...i.bulletActiveClass.split(" ")):t.isElement&&e.setAttribute("part","bullet"),i.dynamicBullets&&(r>=l&&r<=h&&e.classList.add(...`${i.bulletActiveClass}-main`.split(" ")),r===l&&c(e,"prev"),r===h&&c(e,"next"))});else{const e=r[s];if(e&&e.classList.add(...i.bulletActiveClass.split(" ")),t.isElement&&r.forEach((e,t)=>{e.setAttribute("part",t===s?"bullet-active":"bullet")}),i.dynamicBullets){const e=r[l],t=r[h];for(let s=l;s<=h;s+=1)r[s]&&r[s].classList.add(...`${i.bulletActiveClass}-main`.split(" "));c(e,"prev"),c(t,"next")}}if(i.dynamicBullets){const s=Math.min(r.length,i.dynamicMainBullets+4),n=(a*s-a)/2-u*a,o=e?"right":"left";r.forEach(e=>{e.style[t.isHorizontal()?o:"top"]=`${n}px`})}}d.forEach((e,n)=>{if("fraction"===i.type&&(e.querySelectorAll(Zb(i.currentClass)).forEach(e=>{e.textContent=i.formatFractionCurrent(s+1)}),e.querySelectorAll(Zb(i.totalClass)).forEach(e=>{e.textContent=i.formatFractionTotal(u)})),"progressbar"===i.type){let r;r=i.progressbarOpposite?t.isHorizontal()?"vertical":"horizontal":t.isHorizontal()?"horizontal":"vertical";const n=(s+1)/u;let a=1,o=1;"horizontal"===r?a=n:o=n,e.querySelectorAll(Zb(i.progressbarFillClass)).forEach(e=>{e.style.transform=`translate3d(0,0,0) scaleX(${a}) scaleY(${o})`,e.style.transitionDuration=`${t.params.speed}ms`})}"custom"===i.type&&i.renderCustom?(e.innerHTML=i.renderCustom(t,s+1,u),0===n&&r("paginationRender",e)):(0===n&&r("paginationRender",e),r("paginationUpdate",e)),t.params.watchOverflow&&t.enabled&&e.classList[t.isLocked?"add":"remove"](i.lockClass)})}function p(){const e=t.params.pagination;if(l())return;const i=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.grid&&t.params.grid.rows>1?t.slides.length/Math.ceil(t.params.grid.rows):t.slides.length;let s=t.pagination.el;s=my(s);let n="";if("bullets"===e.type){let s=t.params.loop?Math.ceil(i/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&s>i&&(s=i);for(let i=0;i<s;i+=1)e.renderBullet?n+=e.renderBullet.call(t,i,e.bulletClass):n+=`<${e.bulletElement} ${t.isElement?'part="bullet"':""} class="${e.bulletClass}"></${e.bulletElement}>`}"fraction"===e.type&&(n=e.renderFraction?e.renderFraction.call(t,e.currentClass,e.totalClass):`<span class="${e.currentClass}"></span> / <span class="${e.totalClass}"></span>`),"progressbar"===e.type&&(n=e.renderProgressbar?e.renderProgressbar.call(t,e.progressbarFillClass):`<span class="${e.progressbarFillClass}"></span>`),t.pagination.bullets=[],s.forEach(i=>{"custom"!==e.type&&(i.innerHTML=n||""),"bullets"===e.type&&t.pagination.bullets.push(...i.querySelectorAll(Zb(e.bulletClass)))}),"custom"!==e.type&&r("paginationRender",s[0])}function f(){t.params.pagination=Xb(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const e=t.params.pagination;if(!e.el)return;let i;"string"===typeof e.el&&t.isElement&&(i=t.el.querySelector(e.el)),i||"string"!==typeof e.el||(i=[...document.querySelectorAll(e.el)]),i||(i=e.el),i&&0!==i.length&&(t.params.uniqueNavElements&&"string"===typeof e.el&&Array.isArray(i)&&i.length>1&&(i=[...t.el.querySelectorAll(e.el)],i.length>1&&(i=i.filter(e=>py(e,".swiper")[0]===t.el)[0])),Array.isArray(i)&&1===i.length&&(i=i[0]),Object.assign(t.pagination,{el:i}),i=my(i),i.forEach(i=>{"bullets"===e.type&&e.clickable&&i.classList.add(...(e.clickableClass||"").split(" ")),i.classList.add(e.modifierClass+e.type),i.classList.add(t.isHorizontal()?e.horizontalClass:e.verticalClass),"bullets"===e.type&&e.dynamicBullets&&(i.classList.add(`${e.modifierClass}${e.type}-dynamic`),o=0,e.dynamicMainBullets<1&&(e.dynamicMainBullets=1)),"progressbar"===e.type&&e.progressbarOpposite&&i.classList.add(e.progressbarOppositeClass),e.clickable&&i.addEventListener("click",h),t.enabled||i.classList.add(e.lockClass)}))}function g(){const e=t.params.pagination;if(l())return;let i=t.pagination.el;i&&(i=my(i),i.forEach(i=>{i.classList.remove(e.hiddenClass),i.classList.remove(e.modifierClass+e.type),i.classList.remove(t.isHorizontal()?e.horizontalClass:e.verticalClass),e.clickable&&(i.classList.remove(...(e.clickableClass||"").split(" ")),i.removeEventListener("click",h))})),t.pagination.bullets&&t.pagination.bullets.forEach(t=>t.classList.remove(...e.bulletActiveClass.split(" ")))}s("changeDirection",()=>{if(!t.pagination||!t.pagination.el)return;const e=t.params.pagination;let{el:i}=t.pagination;i=my(i),i.forEach(i=>{i.classList.remove(e.horizontalClass,e.verticalClass),i.classList.add(t.isHorizontal()?e.horizontalClass:e.verticalClass)})}),s("init",()=>{!1===t.params.pagination.enabled?v():(f(),p(),u())}),s("activeIndexChange",()=>{"undefined"===typeof t.snapIndex&&u()}),s("snapIndexChange",()=>{u()}),s("snapGridLengthChange",()=>{p(),u()}),s("destroy",()=>{g()}),s("enable disable",()=>{let{el:e}=t.pagination;e&&(e=my(e),e.forEach(e=>e.classList[t.enabled?"remove":"add"](t.params.pagination.lockClass)))}),s("lock unlock",()=>{u()}),s("click",(e,i)=>{const s=i.target,n=my(t.pagination.el);if(t.params.pagination.el&&t.params.pagination.hideOnClick&&n&&n.length>0&&!s.classList.contains(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&s===t.navigation.nextEl||t.navigation.prevEl&&s===t.navigation.prevEl))return;const e=n[0].classList.contains(t.params.pagination.hiddenClass);r(!0===e?"paginationShow":"paginationHide"),n.forEach(e=>e.classList.toggle(t.params.pagination.hiddenClass))}});const m=()=>{t.el.classList.remove(t.params.pagination.paginationDisabledClass);let{el:e}=t.pagination;e&&(e=my(e),e.forEach(e=>e.classList.remove(t.params.pagination.paginationDisabledClass))),f(),p(),u()},v=()=>{t.el.classList.add(t.params.pagination.paginationDisabledClass);let{el:e}=t.pagination;e&&(e=my(e),e.forEach(e=>e.classList.add(t.params.pagination.paginationDisabledClass))),g()};Object.assign(t.pagination,{enable:m,disable:v,render:p,update:u,init:f,destroy:g})}function eE(e){let{swiper:t,extendParams:i,on:s,emit:r}=e;const n=jv();let a,o,l,c,d=!1,h=null,u=null;function p(){if(!t.params.scrollbar.el||!t.scrollbar.el)return;const{scrollbar:e,rtlTranslate:i}=t,{dragEl:s,el:r}=e,n=t.params.scrollbar,a=t.params.loop?t.progressLoop:t.progress;let c=o,d=(l-o)*a;i?(d=-d,d>0?(c=o-d,d=0):-d+o>l&&(c=l+d)):d<0?(c=o+d,d=0):d+o>l&&(c=l-d),t.isHorizontal()?(s.style.transform=`translate3d(${d}px, 0, 0)`,s.style.width=`${c}px`):(s.style.transform=`translate3d(0px, ${d}px, 0)`,s.style.height=`${c}px`),n.hide&&(clearTimeout(h),r.style.opacity=1,h=setTimeout(()=>{r.style.opacity=0,r.style.transitionDuration="400ms"},1e3))}function f(e){t.params.scrollbar.el&&t.scrollbar.el&&(t.scrollbar.dragEl.style.transitionDuration=`${e}ms`)}function g(){if(!t.params.scrollbar.el||!t.scrollbar.el)return;const{scrollbar:e}=t,{dragEl:i,el:s}=e;i.style.width="",i.style.height="",l=t.isHorizontal()?s.offsetWidth:s.offsetHeight,c=t.size/(t.virtualSize+t.params.slidesOffsetBefore-(t.params.centeredSlides?t.snapGrid[0]:0)),o="auto"===t.params.scrollbar.dragSize?l*c:parseInt(t.params.scrollbar.dragSize,10),t.isHorizontal()?i.style.width=`${o}px`:i.style.height=`${o}px`,s.style.display=c>=1?"none":"",t.params.scrollbar.hide&&(s.style.opacity=0),t.params.watchOverflow&&t.enabled&&e.el.classList[t.isLocked?"add":"remove"](t.params.scrollbar.lockClass)}function m(e){return t.isHorizontal()?e.clientX:e.clientY}function v(e){const{scrollbar:i,rtlTranslate:s}=t,{el:r}=i;let n;n=(m(e)-ly(r)[t.isHorizontal()?"left":"top"]-(null!==a?a:o/2))/(l-o),n=Math.max(Math.min(n,1),0),s&&(n=1-n);const c=t.minTranslate()+(t.maxTranslate()-t.minTranslate())*n;t.updateProgress(c),t.setTranslate(c),t.updateActiveIndex(),t.updateSlidesClasses()}function y(e){const i=t.params.scrollbar,{scrollbar:s,wrapperEl:n}=t,{el:o,dragEl:l}=s;d=!0,a=e.target===l?m(e)-e.target.getBoundingClientRect()[t.isHorizontal()?"left":"top"]:null,e.preventDefault(),e.stopPropagation(),n.style.transitionDuration="100ms",l.style.transitionDuration="100ms",v(e),clearTimeout(u),o.style.transitionDuration="0ms",i.hide&&(o.style.opacity=1),t.params.cssMode&&(t.wrapperEl.style["scroll-snap-type"]="none"),r("scrollbarDragStart",e)}function b(e){const{scrollbar:i,wrapperEl:s}=t,{el:n,dragEl:a}=i;d&&(e.preventDefault&&e.cancelable?e.preventDefault():e.returnValue=!1,v(e),s.style.transitionDuration="0ms",n.style.transitionDuration="0ms",a.style.transitionDuration="0ms",r("scrollbarDragMove",e))}function E(e){const i=t.params.scrollbar,{scrollbar:s,wrapperEl:n}=t,{el:a}=s;d&&(d=!1,t.params.cssMode&&(t.wrapperEl.style["scroll-snap-type"]="",n.style.transitionDuration=""),i.hide&&(clearTimeout(u),u=Kv(()=>{a.style.opacity=0,a.style.transitionDuration="400ms"},1e3)),r("scrollbarDragEnd",e),i.snapOnRelease&&t.slideToClosest())}function w(e){const{scrollbar:i,params:s}=t,r=i.el;if(!r)return;const a=r,o=!!s.passiveListeners&&{passive:!1,capture:!1},l=!!s.passiveListeners&&{passive:!0,capture:!1};if(!a)return;const c="on"===e?"addEventListener":"removeEventListener";a[c]("pointerdown",y,o),n[c]("pointermove",b,o),n[c]("pointerup",E,l)}function A(){t.params.scrollbar.el&&t.scrollbar.el&&w("on")}function T(){t.params.scrollbar.el&&t.scrollbar.el&&w("off")}function S(){const{scrollbar:e,el:i}=t;t.params.scrollbar=Xb(t,t.originalParams.scrollbar,t.params.scrollbar,{el:"swiper-scrollbar"});const s=t.params.scrollbar;if(!s.el)return;let r,a;if("string"===typeof s.el&&t.isElement&&(r=t.el.querySelector(s.el)),r||"string"!==typeof s.el)r||(r=s.el);else if(r=n.querySelectorAll(s.el),!r.length)return;t.params.uniqueNavElements&&"string"===typeof s.el&&r.length>1&&1===i.querySelectorAll(s.el).length&&(r=i.querySelector(s.el)),r.length>0&&(r=r[0]),r.classList.add(t.isHorizontal()?s.horizontalClass:s.verticalClass),r&&(a=r.querySelector(Zb(t.params.scrollbar.dragClass)),a||(a=oy("div",t.params.scrollbar.dragClass),r.append(a))),Object.assign(e,{el:r,dragEl:a}),s.draggable&&A(),r&&r.classList[t.enabled?"remove":"add"](...Yv(t.params.scrollbar.lockClass))}function x(){const e=t.params.scrollbar,i=t.scrollbar.el;i&&i.classList.remove(...Yv(t.isHorizontal()?e.horizontalClass:e.verticalClass)),T()}i({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),t.scrollbar={el:null,dragEl:null},s("changeDirection",()=>{if(!t.scrollbar||!t.scrollbar.el)return;const e=t.params.scrollbar;let{el:i}=t.scrollbar;i=my(i),i.forEach(i=>{i.classList.remove(e.horizontalClass,e.verticalClass),i.classList.add(t.isHorizontal()?e.horizontalClass:e.verticalClass)})}),s("init",()=>{!1===t.params.scrollbar.enabled?k():(S(),g(),p())}),s("update resize observerUpdate lock unlock changeDirection",()=>{g()}),s("setTranslate",()=>{p()}),s("setTransition",(e,t)=>{f(t)}),s("enable disable",()=>{const{el:e}=t.scrollbar;e&&e.classList[t.enabled?"remove":"add"](...Yv(t.params.scrollbar.lockClass))}),s("destroy",()=>{x()});const L=()=>{t.el.classList.remove(...Yv(t.params.scrollbar.scrollbarDisabledClass)),t.scrollbar.el&&t.scrollbar.el.classList.remove(...Yv(t.params.scrollbar.scrollbarDisabledClass)),S(),g(),p()},k=()=>{t.el.classList.add(...Yv(t.params.scrollbar.scrollbarDisabledClass)),t.scrollbar.el&&t.scrollbar.el.classList.add(...Yv(t.params.scrollbar.scrollbarDisabledClass)),x()};Object.assign(t.scrollbar,{enable:L,disable:k,updateSize:g,setTranslate:p,init:S,destroy:x})}function tE(e){let{swiper:t,extendParams:i,on:s}=e;i({parallax:{enabled:!1}});const r="[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]",n=(e,i)=>{const{rtl:s}=t,r=s?-1:1,n=e.getAttribute("data-swiper-parallax")||"0";let a=e.getAttribute("data-swiper-parallax-x"),o=e.getAttribute("data-swiper-parallax-y");const l=e.getAttribute("data-swiper-parallax-scale"),c=e.getAttribute("data-swiper-parallax-opacity"),d=e.getAttribute("data-swiper-parallax-rotate");if(a||o?(a=a||"0",o=o||"0"):t.isHorizontal()?(a=n,o="0"):(o=n,a="0"),a=a.indexOf("%")>=0?parseInt(a,10)*i*r+"%":a*i*r+"px",o=o.indexOf("%")>=0?parseInt(o,10)*i+"%":o*i+"px","undefined"!==typeof c&&null!==c){const t=c-(c-1)*(1-Math.abs(i));e.style.opacity=t}let h=`translate3d(${a}, ${o}, 0px)`;if("undefined"!==typeof l&&null!==l){const e=l-(l-1)*(1-Math.abs(i));h+=` scale(${e})`}if(d&&"undefined"!==typeof d&&null!==d){const e=d*i*-1;h+=` rotate(${e}deg)`}e.style.transform=h},a=()=>{const{el:e,slides:i,progress:s,snapGrid:a,isElement:o}=t,l=ry(e,r);t.isElement&&l.push(...ry(t.hostEl,r)),l.forEach(e=>{n(e,s)}),i.forEach((e,i)=>{let o=e.progress;t.params.slidesPerGroup>1&&"auto"!==t.params.slidesPerView&&(o+=Math.ceil(i/2)-s*(a.length-1)),o=Math.min(Math.max(o,-1),1),e.querySelectorAll(`${r}, [data-swiper-parallax-rotate]`).forEach(e=>{n(e,o)})})},o=function(e){void 0===e&&(e=t.params.speed);const{el:i,hostEl:s}=t,n=[...i.querySelectorAll(r)];t.isElement&&n.push(...s.querySelectorAll(r)),n.forEach(t=>{let i=parseInt(t.getAttribute("data-swiper-parallax-duration"),10)||e;0===e&&(i=0),t.style.transitionDuration=`${i}ms`})};s("beforeInit",()=>{t.params.parallax.enabled&&(t.params.watchSlidesProgress=!0,t.originalParams.watchSlidesProgress=!0)}),s("init",()=>{t.params.parallax.enabled&&a()}),s("setTranslate",()=>{t.params.parallax.enabled&&a()}),s("setTransition",(e,i)=>{t.params.parallax.enabled&&o(i)})}function iE(e){let{swiper:t,extendParams:i,on:s,emit:r}=e;const n=Vv();i({zoom:{enabled:!1,limitToOriginalSize:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}}),t.zoom={enabled:!1};let o,l,c=1,d=!1;const h=[],u={originX:0,originY:0,slideEl:void 0,slideWidth:void 0,slideHeight:void 0,imageEl:void 0,imageWrapEl:void 0,maxRatio:3},p={isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},f={x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0};let g,m=1;function v(){if(h.length<2)return 1;const e=h[0].pageX,t=h[0].pageY,i=h[1].pageX,s=h[1].pageY,r=Math.sqrt(a(i-e,2)+a(s-t,2));return r}function y(){const e=t.params.zoom,i=u.imageWrapEl.getAttribute("data-swiper-zoom")||e.maxRatio;if(e.limitToOriginalSize&&u.imageEl&&u.imageEl.naturalWidth){const e=u.imageEl.naturalWidth/u.imageEl.offsetWidth;return Math.min(e,i)}return i}function b(){if(h.length<2)return{x:null,y:null};const e=u.imageEl.getBoundingClientRect();return[(h[0].pageX+(h[1].pageX-h[0].pageX)/2-e.x-n.scrollX)/c,(h[0].pageY+(h[1].pageY-h[0].pageY)/2-e.y-n.scrollY)/c]}function E(){return t.isElement?"swiper-slide":`.${t.params.slideClass}`}function w(e){const i=E();return!!e.target.matches(i)||t.slides.filter(t=>t.contains(e.target)).length>0}function A(e){const i=`.${t.params.zoom.containerClass}`;return!!e.target.matches(i)||[...t.hostEl.querySelectorAll(i)].filter(t=>t.contains(e.target)).length>0}function T(e){if("mouse"===e.pointerType&&h.splice(0,h.length),!w(e))return;const i=t.params.zoom;if(o=!1,l=!1,h.push(e),!(h.length<2)){if(o=!0,u.scaleStart=v(),!u.slideEl){u.slideEl=e.target.closest(`.${t.params.slideClass}, swiper-slide`),u.slideEl||(u.slideEl=t.slides[t.activeIndex]);let s=u.slideEl.querySelector(`.${i.containerClass}`);if(s&&(s=s.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),u.imageEl=s,u.imageWrapEl=s?py(u.imageEl,`.${i.containerClass}`)[0]:void 0,!u.imageWrapEl)return void(u.imageEl=void 0);u.maxRatio=y()}if(u.imageEl){const[e,t]=b();u.originX=e,u.originY=t,u.imageEl.style.transitionDuration="0ms"}d=!0}}function S(e){if(!w(e))return;const i=t.params.zoom,s=t.zoom,r=h.findIndex(t=>t.pointerId===e.pointerId);r>=0&&(h[r]=e),h.length<2||(l=!0,u.scaleMove=v(),u.imageEl&&(s.scale=u.scaleMove/u.scaleStart*c,s.scale>u.maxRatio&&(s.scale=u.maxRatio-1+a(s.scale-u.maxRatio+1,.5)),s.scale<i.minRatio&&(s.scale=i.minRatio+1-a(i.minRatio-s.scale+1,.5)),u.imageEl.style.transform=`translate3d(0,0,0) scale(${s.scale})`))}function x(e){if(!w(e))return;if("mouse"===e.pointerType&&"pointerout"===e.type)return;const i=t.params.zoom,s=t.zoom,r=h.findIndex(t=>t.pointerId===e.pointerId);r>=0&&h.splice(r,1),o&&l&&(o=!1,l=!1,u.imageEl&&(s.scale=Math.max(Math.min(s.scale,u.maxRatio),i.minRatio),u.imageEl.style.transitionDuration=`${t.params.speed}ms`,u.imageEl.style.transform=`translate3d(0,0,0) scale(${s.scale})`,c=s.scale,d=!1,s.scale>1&&u.slideEl?u.slideEl.classList.add(`${i.zoomedSlideClass}`):s.scale<=1&&u.slideEl&&u.slideEl.classList.remove(`${i.zoomedSlideClass}`),1===s.scale&&(u.originX=0,u.originY=0,u.slideEl=void 0)))}function L(){t.touchEventsData.preventTouchMoveFromPointerMove=!1}function k(){clearTimeout(g),t.touchEventsData.preventTouchMoveFromPointerMove=!0,g=setTimeout(()=>{t.destroyed||L()})}function I(e){const i=t.device;if(!u.imageEl)return;if(p.isTouched)return;i.android&&e.cancelable&&e.preventDefault(),p.isTouched=!0;const s=h.length>0?h[0]:e;p.touchesStart.x=s.pageX,p.touchesStart.y=s.pageY}function _(e){if(!w(e)||!A(e))return;const i=t.zoom;if(!u.imageEl)return;if(!p.isTouched||!u.slideEl)return;p.isMoved||(p.width=u.imageEl.offsetWidth||u.imageEl.clientWidth,p.height=u.imageEl.offsetHeight||u.imageEl.clientHeight,p.startX=Qv(u.imageWrapEl,"x")||0,p.startY=Qv(u.imageWrapEl,"y")||0,u.slideWidth=u.slideEl.offsetWidth,u.slideHeight=u.slideEl.offsetHeight,u.imageWrapEl.style.transitionDuration="0ms");const s=p.width*i.scale,r=p.height*i.scale;p.minX=Math.min(u.slideWidth/2-s/2,0),p.maxX=-p.minX,p.minY=Math.min(u.slideHeight/2-r/2,0),p.maxY=-p.minY,p.touchesCurrent.x=h.length>0?h[0].pageX:e.pageX,p.touchesCurrent.y=h.length>0?h[0].pageY:e.pageY;const n=Math.max(Math.abs(p.touchesCurrent.x-p.touchesStart.x),Math.abs(p.touchesCurrent.y-p.touchesStart.y));if(n>5&&(t.allowClick=!1),!p.isMoved&&!d){if(t.isHorizontal()&&(Math.floor(p.minX)===Math.floor(p.startX)&&p.touchesCurrent.x<p.touchesStart.x||Math.floor(p.maxX)===Math.floor(p.startX)&&p.touchesCurrent.x>p.touchesStart.x))return p.isTouched=!1,void L();if(!t.isHorizontal()&&(Math.floor(p.minY)===Math.floor(p.startY)&&p.touchesCurrent.y<p.touchesStart.y||Math.floor(p.maxY)===Math.floor(p.startY)&&p.touchesCurrent.y>p.touchesStart.y))return p.isTouched=!1,void L()}e.cancelable&&e.preventDefault(),e.stopPropagation(),k(),p.isMoved=!0;const o=(i.scale-c)/(u.maxRatio-t.params.zoom.minRatio),{originX:l,originY:g}=u;p.currentX=p.touchesCurrent.x-p.touchesStart.x+p.startX+o*(p.width-2*l),p.currentY=p.touchesCurrent.y-p.touchesStart.y+p.startY+o*(p.height-2*g),p.currentX<p.minX&&(p.currentX=p.minX+1-a(p.minX-p.currentX+1,.8)),p.currentX>p.maxX&&(p.currentX=p.maxX-1+a(p.currentX-p.maxX+1,.8)),p.currentY<p.minY&&(p.currentY=p.minY+1-a(p.minY-p.currentY+1,.8)),p.currentY>p.maxY&&(p.currentY=p.maxY-1+a(p.currentY-p.maxY+1,.8)),f.prevPositionX||(f.prevPositionX=p.touchesCurrent.x),f.prevPositionY||(f.prevPositionY=p.touchesCurrent.y),f.prevTime||(f.prevTime=Date.now()),f.x=(p.touchesCurrent.x-f.prevPositionX)/(Date.now()-f.prevTime)/2,f.y=(p.touchesCurrent.y-f.prevPositionY)/(Date.now()-f.prevTime)/2,Math.abs(p.touchesCurrent.x-f.prevPositionX)<2&&(f.x=0),Math.abs(p.touchesCurrent.y-f.prevPositionY)<2&&(f.y=0),f.prevPositionX=p.touchesCurrent.x,f.prevPositionY=p.touchesCurrent.y,f.prevTime=Date.now(),u.imageWrapEl.style.transform=`translate3d(${p.currentX}px, ${p.currentY}px,0)`}function C(){const e=t.zoom;if(!u.imageEl)return;if(!p.isTouched||!p.isMoved)return p.isTouched=!1,void(p.isMoved=!1);p.isTouched=!1,p.isMoved=!1;let i=300,s=300;const r=f.x*i,n=p.currentX+r,a=f.y*s,o=p.currentY+a;0!==f.x&&(i=Math.abs((n-p.currentX)/f.x)),0!==f.y&&(s=Math.abs((o-p.currentY)/f.y));const l=Math.max(i,s);p.currentX=n,p.currentY=o;const c=p.width*e.scale,d=p.height*e.scale;p.minX=Math.min(u.slideWidth/2-c/2,0),p.maxX=-p.minX,p.minY=Math.min(u.slideHeight/2-d/2,0),p.maxY=-p.minY,p.currentX=Math.max(Math.min(p.currentX,p.maxX),p.minX),p.currentY=Math.max(Math.min(p.currentY,p.maxY),p.minY),u.imageWrapEl.style.transitionDuration=`${l}ms`,u.imageWrapEl.style.transform=`translate3d(${p.currentX}px, ${p.currentY}px,0)`}function R(){const e=t.zoom;u.slideEl&&t.activeIndex!==t.slides.indexOf(u.slideEl)&&(u.imageEl&&(u.imageEl.style.transform="translate3d(0,0,0) scale(1)"),u.imageWrapEl&&(u.imageWrapEl.style.transform="translate3d(0,0,0)"),u.slideEl.classList.remove(`${t.params.zoom.zoomedSlideClass}`),e.scale=1,c=1,u.slideEl=void 0,u.imageEl=void 0,u.imageWrapEl=void 0,u.originX=0,u.originY=0)}function P(e){const i=t.zoom,s=t.params.zoom;if(!u.slideEl){e&&e.target&&(u.slideEl=e.target.closest(`.${t.params.slideClass}, swiper-slide`)),u.slideEl||(t.params.virtual&&t.params.virtual.enabled&&t.virtual?u.slideEl=ry(t.slidesEl,`.${t.params.slideActiveClass}`)[0]:u.slideEl=t.slides[t.activeIndex]);let i=u.slideEl.querySelector(`.${s.containerClass}`);i&&(i=i.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),u.imageEl=i,u.imageWrapEl=i?py(u.imageEl,`.${s.containerClass}`)[0]:void 0}if(!u.imageEl||!u.imageWrapEl)return;let r,a,o,l,d,h,f,g,m,v,b,E,w,A,T,S,x,L;t.params.cssMode&&(t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.touchAction="none"),u.slideEl.classList.add(`${s.zoomedSlideClass}`),"undefined"===typeof p.touchesStart.x&&e?(r=e.pageX,a=e.pageY):(r=p.touchesStart.x,a=p.touchesStart.y);const k="number"===typeof e?e:null;1===c&&k&&(r=void 0,a=void 0,p.touchesStart.x=void 0,p.touchesStart.y=void 0);const I=y();i.scale=k||I,c=k||I,!e||1===c&&k?(f=0,g=0):(x=u.slideEl.offsetWidth,L=u.slideEl.offsetHeight,o=ly(u.slideEl).left+n.scrollX,l=ly(u.slideEl).top+n.scrollY,d=o+x/2-r,h=l+L/2-a,m=u.imageEl.offsetWidth||u.imageEl.clientWidth,v=u.imageEl.offsetHeight||u.imageEl.clientHeight,b=m*i.scale,E=v*i.scale,w=Math.min(x/2-b/2,0),A=Math.min(L/2-E/2,0),T=-w,S=-A,f=d*i.scale,g=h*i.scale,f<w&&(f=w),f>T&&(f=T),g<A&&(g=A),g>S&&(g=S)),k&&1===i.scale&&(u.originX=0,u.originY=0),u.imageWrapEl.style.transitionDuration="300ms",u.imageWrapEl.style.transform=`translate3d(${f}px, ${g}px,0)`,u.imageEl.style.transitionDuration="300ms",u.imageEl.style.transform=`translate3d(0,0,0) scale(${i.scale})`}function D(){const e=t.zoom,i=t.params.zoom;if(!u.slideEl){t.params.virtual&&t.params.virtual.enabled&&t.virtual?u.slideEl=ry(t.slidesEl,`.${t.params.slideActiveClass}`)[0]:u.slideEl=t.slides[t.activeIndex];let e=u.slideEl.querySelector(`.${i.containerClass}`);e&&(e=e.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),u.imageEl=e,u.imageWrapEl=e?py(u.imageEl,`.${i.containerClass}`)[0]:void 0}u.imageEl&&u.imageWrapEl&&(t.params.cssMode&&(t.wrapperEl.style.overflow="",t.wrapperEl.style.touchAction=""),e.scale=1,c=1,p.touchesStart.x=void 0,p.touchesStart.y=void 0,u.imageWrapEl.style.transitionDuration="300ms",u.imageWrapEl.style.transform="translate3d(0,0,0)",u.imageEl.style.transitionDuration="300ms",u.imageEl.style.transform="translate3d(0,0,0) scale(1)",u.slideEl.classList.remove(`${i.zoomedSlideClass}`),u.slideEl=void 0,u.originX=0,u.originY=0)}function M(e){const i=t.zoom;i.scale&&1!==i.scale?D():P(e)}function O(){const e=!!t.params.passiveListeners&&{passive:!0,capture:!1},i=!t.params.passiveListeners||{passive:!1,capture:!0};return{passiveListener:e,activeListenerWithCapture:i}}function N(){const e=t.zoom;if(e.enabled)return;e.enabled=!0;const{passiveListener:i,activeListenerWithCapture:s}=O();t.wrapperEl.addEventListener("pointerdown",T,i),t.wrapperEl.addEventListener("pointermove",S,s),["pointerup","pointercancel","pointerout"].forEach(e=>{t.wrapperEl.addEventListener(e,x,i)}),t.wrapperEl.addEventListener("pointermove",_,s)}function B(){const e=t.zoom;if(!e.enabled)return;e.enabled=!1;const{passiveListener:i,activeListenerWithCapture:s}=O();t.wrapperEl.removeEventListener("pointerdown",T,i),t.wrapperEl.removeEventListener("pointermove",S,s),["pointerup","pointercancel","pointerout"].forEach(e=>{t.wrapperEl.removeEventListener(e,x,i)}),t.wrapperEl.removeEventListener("pointermove",_,s)}Object.defineProperty(t.zoom,"scale",{get(){return m},set(e){if(m!==e){const t=u.imageEl,i=u.slideEl;r("zoomChange",e,t,i)}m=e}}),s("init",()=>{t.params.zoom.enabled&&N()}),s("destroy",()=>{B()}),s("touchStart",(e,i)=>{t.zoom.enabled&&I(i)}),s("touchEnd",(e,i)=>{t.zoom.enabled&&C()}),s("doubleTap",(e,i)=>{!t.animating&&t.params.zoom.enabled&&t.zoom.enabled&&t.params.zoom.toggle&&M(i)}),s("transitionEnd",()=>{t.zoom.enabled&&t.params.zoom.enabled&&R()}),s("slideChange",()=>{t.zoom.enabled&&t.params.zoom.enabled&&t.params.cssMode&&R()}),Object.assign(t.zoom,{enable:N,disable:B,in:P,out:D,toggle:M})}function sE(e){let{swiper:t,extendParams:i,on:s}=e;function r(e,t){const i=function(){let e,t,i;return(s,r)=>{t=-1,e=s.length;while(e-t>1)i=e+t>>1,s[i]<=r?t=i:e=i;return e}}();let s,r;return this.x=e,this.y=t,this.lastIndex=e.length-1,this.interpolate=function(e){return e?(r=i(this.x,e),s=r-1,(e-this.x[s])*(this.y[r]-this.y[s])/(this.x[r]-this.x[s])+this.y[s]):0},this}function n(e){t.controller.spline=t.params.loop?new r(t.slidesGrid,e.slidesGrid):new r(t.snapGrid,e.snapGrid)}function a(e,i){const s=t.controller.control;let r,a;const o=t.constructor;function l(e){if(e.destroyed)return;const i=t.rtlTranslate?-t.translate:t.translate;"slide"===t.params.controller.by&&(n(e),a=-t.controller.spline.interpolate(-i)),a&&"container"!==t.params.controller.by||(r=(e.maxTranslate()-e.minTranslate())/(t.maxTranslate()-t.minTranslate()),!Number.isNaN(r)&&Number.isFinite(r)||(r=1),a=(i-t.minTranslate())*r+e.minTranslate()),t.params.controller.inverse&&(a=e.maxTranslate()-a),e.updateProgress(a),e.setTranslate(a,t),e.updateActiveIndex(),e.updateSlidesClasses()}if(Array.isArray(s))for(let t=0;t<s.length;t+=1)s[t]!==i&&s[t]instanceof o&&l(s[t]);else s instanceof o&&i!==s&&l(s)}function o(e,i){const s=t.constructor,r=t.controller.control;let n;function a(i){i.destroyed||(i.setTransition(e,t),0!==e&&(i.transitionStart(),i.params.autoHeight&&Kv(()=>{i.updateAutoHeight()}),fy(i.wrapperEl,()=>{r&&i.transitionEnd()})))}if(Array.isArray(r))for(n=0;n<r.length;n+=1)r[n]!==i&&r[n]instanceof s&&a(r[n]);else r instanceof s&&i!==r&&a(r)}function l(){t.controller.control&&t.controller.spline&&(t.controller.spline=void 0,delete t.controller.spline)}i({controller:{control:void 0,inverse:!1,by:"slide"}}),t.controller={control:void 0},s("beforeInit",()=>{if("undefined"!==typeof window&&("string"===typeof t.params.controller.control||t.params.controller.control instanceof HTMLElement)){const e="string"===typeof t.params.controller.control?[...document.querySelectorAll(t.params.controller.control)]:[t.params.controller.control];return void e.forEach(e=>{if(t.controller.control||(t.controller.control=[]),e&&e.swiper)t.controller.control.push(e.swiper);else if(e){const i=`${t.params.eventsPrefix}init`,s=r=>{t.controller.control.push(r.detail[0]),t.update(),e.removeEventListener(i,s)};e.addEventListener(i,s)}})}t.controller.control=t.params.controller.control}),s("update",()=>{l()}),s("resize",()=>{l()}),s("observerUpdate",()=>{l()}),s("setTranslate",(e,i,s)=>{t.controller.control&&!t.controller.control.destroyed&&t.controller.setTranslate(i,s)}),s("setTransition",(e,i,s)=>{t.controller.control&&!t.controller.control.destroyed&&t.controller.setTransition(i,s)}),Object.assign(t.controller,{setTranslate:a,setTransition:o})}function rE(e){let{swiper:t,extendParams:i,on:s}=e;i({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,containerRole:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null,scrollOnFocus:!0}}),t.a11y={clicked:!1};let r,n,a=null,o=(new Date).getTime();function l(e){const t=a;0!==t.length&&(t.innerHTML="",t.innerHTML=e)}function c(e){void 0===e&&(e=16);const t=()=>Math.round(16*Math.random()).toString(16);return"x".repeat(e).replace(/x/g,t)}function d(e){e=my(e),e.forEach(e=>{e.setAttribute("tabIndex","0")})}function h(e){e=my(e),e.forEach(e=>{e.setAttribute("tabIndex","-1")})}function u(e,t){e=my(e),e.forEach(e=>{e.setAttribute("role",t)})}function p(e,t){e=my(e),e.forEach(e=>{e.setAttribute("aria-roledescription",t)})}function f(e,t){e=my(e),e.forEach(e=>{e.setAttribute("aria-controls",t)})}function g(e,t){e=my(e),e.forEach(e=>{e.setAttribute("aria-label",t)})}function m(e,t){e=my(e),e.forEach(e=>{e.setAttribute("id",t)})}function v(e,t){e=my(e),e.forEach(e=>{e.setAttribute("aria-live",t)})}function y(e){e=my(e),e.forEach(e=>{e.setAttribute("aria-disabled",!0)})}function b(e){e=my(e),e.forEach(e=>{e.setAttribute("aria-disabled",!1)})}function E(e){if(13!==e.keyCode&&32!==e.keyCode)return;const i=t.params.a11y,s=e.target;if(!t.pagination||!t.pagination.el||s!==t.pagination.el&&!t.pagination.el.contains(e.target)||e.target.matches(Zb(t.params.pagination.bulletClass))){if(t.navigation&&t.navigation.prevEl&&t.navigation.nextEl){const e=my(t.navigation.prevEl),r=my(t.navigation.nextEl);r.includes(s)&&(t.isEnd&&!t.params.loop||t.slideNext(),t.isEnd?l(i.lastSlideMessage):l(i.nextSlideMessage)),e.includes(s)&&(t.isBeginning&&!t.params.loop||t.slidePrev(),t.isBeginning?l(i.firstSlideMessage):l(i.prevSlideMessage))}t.pagination&&s.matches(Zb(t.params.pagination.bulletClass))&&s.click()}}function w(){if(t.params.loop||t.params.rewind||!t.navigation)return;const{nextEl:e,prevEl:i}=t.navigation;i&&(t.isBeginning?(y(i),h(i)):(b(i),d(i))),e&&(t.isEnd?(y(e),h(e)):(b(e),d(e)))}function A(){return t.pagination&&t.pagination.bullets&&t.pagination.bullets.length}function T(){return A()&&t.params.pagination.clickable}function S(){const e=t.params.a11y;A()&&t.pagination.bullets.forEach(i=>{t.params.pagination.clickable&&(d(i),t.params.pagination.renderBullet||(u(i,"button"),g(i,e.paginationBulletMessage.replace(/\{\{index\}\}/,uy(i)+1)))),i.matches(Zb(t.params.pagination.bulletActiveClass))?i.setAttribute("aria-current","true"):i.removeAttribute("aria-current")})}const x=(e,t,i)=>{d(e),"BUTTON"!==e.tagName&&(u(e,"button"),e.addEventListener("keydown",E)),g(e,i),f(e,t)},L=e=>{n&&n!==e.target&&!n.contains(e.target)&&(r=!0),t.a11y.clicked=!0},k=()=>{r=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>{t.destroyed||(t.a11y.clicked=!1)})})},I=e=>{o=(new Date).getTime()},_=e=>{if(t.a11y.clicked||!t.params.a11y.scrollOnFocus)return;if((new Date).getTime()-o<100)return;const i=e.target.closest(`.${t.params.slideClass}, swiper-slide`);if(!i||!t.slides.includes(i))return;n=i;const s=t.slides.indexOf(i)===t.activeIndex,a=t.params.watchSlidesProgress&&t.visibleSlides&&t.visibleSlides.includes(i);s||a||e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents||(t.isHorizontal()?t.el.scrollLeft=0:t.el.scrollTop=0,requestAnimationFrame(()=>{r||(t.params.loop?t.slideToLoop(parseInt(i.getAttribute("data-swiper-slide-index")),0):t.slideTo(t.slides.indexOf(i),0),r=!1)}))},C=()=>{const e=t.params.a11y;e.itemRoleDescriptionMessage&&p(t.slides,e.itemRoleDescriptionMessage),e.slideRole&&u(t.slides,e.slideRole);const i=t.slides.length;e.slideLabelMessage&&t.slides.forEach((s,r)=>{const n=t.params.loop?parseInt(s.getAttribute("data-swiper-slide-index"),10):r,a=e.slideLabelMessage.replace(/\{\{index\}\}/,n+1).replace(/\{\{slidesLength\}\}/,i);g(s,a)})},R=()=>{const e=t.params.a11y;t.el.append(a);const i=t.el;e.containerRoleDescriptionMessage&&p(i,e.containerRoleDescriptionMessage),e.containerMessage&&g(i,e.containerMessage),e.containerRole&&u(i,e.containerRole);const s=t.wrapperEl,r=e.id||s.getAttribute("id")||`swiper-wrapper-${c(16)}`,n=t.params.autoplay&&t.params.autoplay.enabled?"off":"polite";m(s,r),v(s,n),C();let{nextEl:o,prevEl:l}=t.navigation?t.navigation:{};if(o=my(o),l=my(l),o&&o.forEach(t=>x(t,r,e.nextSlideMessage)),l&&l.forEach(t=>x(t,r,e.prevSlideMessage)),T()){const e=my(t.pagination.el);e.forEach(e=>{e.addEventListener("keydown",E)})}const d=jv();d.addEventListener("visibilitychange",I),t.el.addEventListener("focus",_,!0),t.el.addEventListener("focus",_,!0),t.el.addEventListener("pointerdown",L,!0),t.el.addEventListener("pointerup",k,!0)};function P(){a&&a.remove();let{nextEl:e,prevEl:i}=t.navigation?t.navigation:{};if(e=my(e),i=my(i),e&&e.forEach(e=>e.removeEventListener("keydown",E)),i&&i.forEach(e=>e.removeEventListener("keydown",E)),T()){const e=my(t.pagination.el);e.forEach(e=>{e.removeEventListener("keydown",E)})}const s=jv();s.removeEventListener("visibilitychange",I),t.el&&"string"!==typeof t.el&&(t.el.removeEventListener("focus",_,!0),t.el.removeEventListener("pointerdown",L,!0),t.el.removeEventListener("pointerup",k,!0))}s("beforeInit",()=>{a=oy("span",t.params.a11y.notificationClass),a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true")}),s("afterInit",()=>{t.params.a11y.enabled&&R()}),s("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{t.params.a11y.enabled&&C()}),s("fromEdge toEdge afterInit lock unlock",()=>{t.params.a11y.enabled&&w()}),s("paginationUpdate",()=>{t.params.a11y.enabled&&S()}),s("destroy",()=>{t.params.a11y.enabled&&P()})}function nE(e){let{swiper:t,extendParams:i,on:s}=e;i({history:{enabled:!1,root:"",replaceState:!1,key:"slides",keepQuery:!1}});let r=!1,n={};const a=e=>e.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),o=e=>{const t=Vv();let i;i=e?new URL(e):t.location;const s=i.pathname.slice(1).split("/").filter(e=>""!==e),r=s.length,n=s[r-2],a=s[r-1];return{key:n,value:a}},l=(e,i)=>{const s=Vv();if(!r||!t.params.history.enabled)return;let n;n=t.params.url?new URL(t.params.url):s.location;const o=t.virtual&&t.params.virtual.enabled?t.slidesEl.querySelector(`[data-swiper-slide-index="${i}"]`):t.slides[i];let l=a(o.getAttribute("data-history"));if(t.params.history.root.length>0){let i=t.params.history.root;"/"===i[i.length-1]&&(i=i.slice(0,i.length-1)),l=`${i}/${e?`${e}/`:""}${l}`}else n.pathname.includes(e)||(l=`${e?`${e}/`:""}${l}`);t.params.history.keepQuery&&(l+=n.search);const c=s.history.state;c&&c.value===l||(t.params.history.replaceState?s.history.replaceState({value:l},null,l):s.history.pushState({value:l},null,l))},c=(e,i,s)=>{if(i)for(let r=0,n=t.slides.length;r<n;r+=1){const n=t.slides[r],o=a(n.getAttribute("data-history"));if(o===i){const i=t.getSlideIndex(n);t.slideTo(i,e,s)}}else t.slideTo(0,e,s)},d=()=>{n=o(t.params.url),c(t.params.speed,n.value,!1)},h=()=>{const e=Vv();if(t.params.history){if(!e.history||!e.history.pushState)return t.params.history.enabled=!1,void(t.params.hashNavigation.enabled=!0);r=!0,n=o(t.params.url),n.key||n.value?(c(0,n.value,t.params.runCallbacksOnInit),t.params.history.replaceState||e.addEventListener("popstate",d)):t.params.history.replaceState||e.addEventListener("popstate",d)}},u=()=>{const e=Vv();t.params.history.replaceState||e.removeEventListener("popstate",d)};s("init",()=>{t.params.history.enabled&&h()}),s("destroy",()=>{t.params.history.enabled&&u()}),s("transitionEnd _freeModeNoMomentumRelease",()=>{r&&l(t.params.history.key,t.activeIndex)}),s("slideChange",()=>{r&&t.params.cssMode&&l(t.params.history.key,t.activeIndex)})}function aE(e){let{swiper:t,extendParams:i,emit:s,on:r}=e,n=!1;const a=jv(),o=Vv();i({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(e,i){if(t.virtual&&t.params.virtual.enabled){const e=t.slides.filter(e=>e.getAttribute("data-hash")===i)[0];if(!e)return 0;const s=parseInt(e.getAttribute("data-swiper-slide-index"),10);return s}return t.getSlideIndex(ry(t.slidesEl,`.${t.params.slideClass}[data-hash="${i}"], swiper-slide[data-hash="${i}"]`)[0])}}});const l=()=>{s("hashChange");const e=a.location.hash.replace("#",""),i=t.virtual&&t.params.virtual.enabled?t.slidesEl.querySelector(`[data-swiper-slide-index="${t.activeIndex}"]`):t.slides[t.activeIndex],r=i?i.getAttribute("data-hash"):"";if(e!==r){const i=t.params.hashNavigation.getSlideIndex(t,e);if("undefined"===typeof i||Number.isNaN(i))return;t.slideTo(i)}},c=()=>{if(!n||!t.params.hashNavigation.enabled)return;const e=t.virtual&&t.params.virtual.enabled?t.slidesEl.querySelector(`[data-swiper-slide-index="${t.activeIndex}"]`):t.slides[t.activeIndex],i=e?e.getAttribute("data-hash")||e.getAttribute("data-history"):"";t.params.hashNavigation.replaceState&&o.history&&o.history.replaceState?(o.history.replaceState(null,null,`#${i}`||""),s("hashSet")):(a.location.hash=i||"",s("hashSet"))},d=()=>{if(!t.params.hashNavigation.enabled||t.params.history&&t.params.history.enabled)return;n=!0;const e=a.location.hash.replace("#","");if(e){const i=0,s=t.params.hashNavigation.getSlideIndex(t,e);t.slideTo(s||0,i,t.params.runCallbacksOnInit,!0)}t.params.hashNavigation.watchState&&o.addEventListener("hashchange",l)},h=()=>{t.params.hashNavigation.watchState&&o.removeEventListener("hashchange",l)};r("init",()=>{t.params.hashNavigation.enabled&&d()}),r("destroy",()=>{t.params.hashNavigation.enabled&&h()}),r("transitionEnd _freeModeNoMomentumRelease",()=>{n&&c()}),r("slideChange",()=>{n&&t.params.cssMode&&c()})}function oE(e){let t,i,{swiper:s,extendParams:r,on:n,emit:a,params:o}=e;s.autoplay={running:!1,paused:!1,timeLeft:0},r({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let l,c,d,h,u,p,f,g,m=o&&o.autoplay?o.autoplay.delay:3e3,v=o&&o.autoplay?o.autoplay.delay:3e3,y=(new Date).getTime();function b(e){s&&!s.destroyed&&s.wrapperEl&&e.target===s.wrapperEl&&(s.wrapperEl.removeEventListener("transitionend",b),g||e.detail&&e.detail.bySwiperTouchMove||L())}const E=()=>{if(s.destroyed||!s.autoplay.running)return;s.autoplay.paused?c=!0:c&&(v=l,c=!1);const e=s.autoplay.paused?l:y+v-(new Date).getTime();s.autoplay.timeLeft=e,a("autoplayTimeLeft",e,e/m),i=requestAnimationFrame(()=>{E()})},w=()=>{let e;if(e=s.virtual&&s.params.virtual.enabled?s.slides.filter(e=>e.classList.contains("swiper-slide-active"))[0]:s.slides[s.activeIndex],!e)return;const t=parseInt(e.getAttribute("data-swiper-autoplay"),10);return t},A=e=>{if(s.destroyed||!s.autoplay.running)return;cancelAnimationFrame(i),E();let r="undefined"===typeof e?s.params.autoplay.delay:e;m=s.params.autoplay.delay,v=s.params.autoplay.delay;const n=w();!Number.isNaN(n)&&n>0&&"undefined"===typeof e&&(r=n,m=n,v=n),l=r;const o=s.params.speed,c=()=>{s&&!s.destroyed&&(s.params.autoplay.reverseDirection?!s.isBeginning||s.params.loop||s.params.rewind?(s.slidePrev(o,!0,!0),a("autoplay")):s.params.autoplay.stopOnLastSlide||(s.slideTo(s.slides.length-1,o,!0,!0),a("autoplay")):!s.isEnd||s.params.loop||s.params.rewind?(s.slideNext(o,!0,!0),a("autoplay")):s.params.autoplay.stopOnLastSlide||(s.slideTo(0,o,!0,!0),a("autoplay")),s.params.cssMode&&(y=(new Date).getTime(),requestAnimationFrame(()=>{A()})))};return r>0?(clearTimeout(t),t=setTimeout(()=>{c()},r)):requestAnimationFrame(()=>{c()}),r},T=()=>{y=(new Date).getTime(),s.autoplay.running=!0,A(),a("autoplayStart")},S=()=>{s.autoplay.running=!1,clearTimeout(t),cancelAnimationFrame(i),a("autoplayStop")},x=(e,i)=>{if(s.destroyed||!s.autoplay.running)return;clearTimeout(t),e||(f=!0);const r=()=>{a("autoplayPause"),s.params.autoplay.waitForTransition?s.wrapperEl.addEventListener("transitionend",b):L()};if(s.autoplay.paused=!0,i)return p&&(l=s.params.autoplay.delay),p=!1,void r();const n=l||s.params.autoplay.delay;l=n-((new Date).getTime()-y),s.isEnd&&l<0&&!s.params.loop||(l<0&&(l=0),r())},L=()=>{s.isEnd&&l<0&&!s.params.loop||s.destroyed||!s.autoplay.running||(y=(new Date).getTime(),f?(f=!1,A(l)):A(),s.autoplay.paused=!1,a("autoplayResume"))},k=()=>{if(s.destroyed||!s.autoplay.running)return;const e=jv();"hidden"===e.visibilityState&&(f=!0,x(!0)),"visible"===e.visibilityState&&L()},I=e=>{"mouse"===e.pointerType&&(f=!0,g=!0,s.animating||s.autoplay.paused||x(!0))},_=e=>{"mouse"===e.pointerType&&(g=!1,s.autoplay.paused&&L())},C=()=>{s.params.autoplay.pauseOnMouseEnter&&(s.el.addEventListener("pointerenter",I),s.el.addEventListener("pointerleave",_))},R=()=>{s.el&&"string"!==typeof s.el&&(s.el.removeEventListener("pointerenter",I),s.el.removeEventListener("pointerleave",_))},P=()=>{const e=jv();e.addEventListener("visibilitychange",k)},D=()=>{const e=jv();e.removeEventListener("visibilitychange",k)};n("init",()=>{s.params.autoplay.enabled&&(C(),P(),T())}),n("destroy",()=>{R(),D(),s.autoplay.running&&S()}),n("_freeModeStaticRelease",()=>{(h||f)&&L()}),n("_freeModeNoMomentumRelease",()=>{s.params.autoplay.disableOnInteraction?S():x(!0,!0)}),n("beforeTransitionStart",(e,t,i)=>{!s.destroyed&&s.autoplay.running&&(i||!s.params.autoplay.disableOnInteraction?x(!0,!0):S())}),n("sliderFirstMove",()=>{!s.destroyed&&s.autoplay.running&&(s.params.autoplay.disableOnInteraction?S():(d=!0,h=!1,f=!1,u=setTimeout(()=>{f=!0,h=!0,x(!0)},200)))}),n("touchEnd",()=>{if(!s.destroyed&&s.autoplay.running&&d){if(clearTimeout(u),clearTimeout(t),s.params.autoplay.disableOnInteraction)return h=!1,void(d=!1);h&&s.params.cssMode&&L(),h=!1,d=!1}}),n("slideChange",()=>{!s.destroyed&&s.autoplay.running&&(p=!0)}),Object.assign(s.autoplay,{start:T,stop:S,pause:x,resume:L})}function lE(e){let{swiper:t,extendParams:i,on:s}=e;i({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let r=!1,n=!1;function a(){const e=t.thumbs.swiper;if(!e||e.destroyed)return;const i=e.clickedIndex,s=e.clickedSlide;if(s&&s.classList.contains(t.params.thumbs.slideThumbActiveClass))return;if("undefined"===typeof i||null===i)return;let r;r=e.params.loop?parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10):i,t.params.loop?t.slideToLoop(r):t.slideTo(r)}function o(){const{thumbs:e}=t.params;if(r)return!1;r=!0;const i=t.constructor;if(e.swiper instanceof i)t.thumbs.swiper=e.swiper,Object.assign(t.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(t.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),t.thumbs.swiper.update();else if(Zv(e.swiper)){const s=Object.assign({},e.swiper);Object.assign(s,{watchSlidesProgress:!0,slideToClickedSlide:!1}),t.thumbs.swiper=new i(s),n=!0}return t.thumbs.swiper.el.classList.add(t.params.thumbs.thumbsContainerClass),t.thumbs.swiper.on("tap",a),!0}function l(e){const i=t.thumbs.swiper;if(!i||i.destroyed)return;const s="auto"===i.params.slidesPerView?i.slidesPerViewDynamic():i.params.slidesPerView;let r=1;const n=t.params.thumbs.slideThumbActiveClass;if(t.params.slidesPerView>1&&!t.params.centeredSlides&&(r=t.params.slidesPerView),t.params.thumbs.multipleActiveThumbs||(r=1),r=Math.floor(r),i.slides.forEach(e=>e.classList.remove(n)),i.params.loop||i.params.virtual&&i.params.virtual.enabled)for(let l=0;l<r;l+=1)ry(i.slidesEl,`[data-swiper-slide-index="${t.realIndex+l}"]`).forEach(e=>{e.classList.add(n)});else for(let l=0;l<r;l+=1)i.slides[t.realIndex+l]&&i.slides[t.realIndex+l].classList.add(n);const a=t.params.thumbs.autoScrollOffset,o=a&&!i.params.loop;if(t.realIndex!==i.realIndex||o){const r=i.activeIndex;let n,l;if(i.params.loop){const e=i.slides.filter(e=>e.getAttribute("data-swiper-slide-index")===`${t.realIndex}`)[0];n=i.slides.indexOf(e),l=t.activeIndex>t.previousIndex?"next":"prev"}else n=t.realIndex,l=n>t.previousIndex?"next":"prev";o&&(n+="next"===l?a:-1*a),i.visibleSlidesIndexes&&i.visibleSlidesIndexes.indexOf(n)<0&&(i.params.centeredSlides?n=n>r?n-Math.floor(s/2)+1:n+Math.floor(s/2)-1:n>r&&i.params.slidesPerGroup,i.slideTo(n,e?0:void 0))}}t.thumbs={swiper:null},s("beforeInit",()=>{const{thumbs:e}=t.params;if(e&&e.swiper)if("string"===typeof e.swiper||e.swiper instanceof HTMLElement){const i=jv(),s=()=>{const s="string"===typeof e.swiper?i.querySelector(e.swiper):e.swiper;if(s&&s.swiper)e.swiper=s.swiper,o(),l(!0);else if(s){const i=`${t.params.eventsPrefix}init`,r=n=>{e.swiper=n.detail[0],s.removeEventListener(i,r),o(),l(!0),e.swiper.update(),t.update()};s.addEventListener(i,r)}return s},r=()=>{if(t.destroyed)return;const e=s();e||requestAnimationFrame(r)};requestAnimationFrame(r)}else o(),l(!0)}),s("slideChange update resize observerUpdate",()=>{l()}),s("setTransition",(e,i)=>{const s=t.thumbs.swiper;s&&!s.destroyed&&s.setTransition(i)}),s("beforeDestroy",()=>{const e=t.thumbs.swiper;e&&!e.destroyed&&n&&e.destroy()}),Object.assign(t.thumbs,{init:o,update:l})}function cE(e){let{swiper:t,extendParams:i,emit:s,once:r}=e;function n(){if(t.params.cssMode)return;const e=t.getTranslate();t.setTranslate(e),t.setTransition(0),t.touchEventsData.velocities.length=0,t.freeMode.onTouchEnd({currentPos:t.rtl?t.translate:-t.translate})}function a(){if(t.params.cssMode)return;const{touchEventsData:e,touches:i}=t;0===e.velocities.length&&e.velocities.push({position:i[t.isHorizontal()?"startX":"startY"],time:e.touchStartTime}),e.velocities.push({position:i[t.isHorizontal()?"currentX":"currentY"],time:qv()})}function o(e){let{currentPos:i}=e;if(t.params.cssMode)return;const{params:n,wrapperEl:a,rtlTranslate:o,snapGrid:l,touchEventsData:c}=t,d=qv(),h=d-c.touchStartTime;if(i<-t.minTranslate())t.slideTo(t.activeIndex);else if(i>-t.maxTranslate())t.slides.length<l.length?t.slideTo(l.length-1):t.slideTo(t.slides.length-1);else{if(n.freeMode.momentum){if(c.velocities.length>1){const e=c.velocities.pop(),i=c.velocities.pop(),s=e.position-i.position,r=e.time-i.time;t.velocity=s/r,t.velocity/=2,Math.abs(t.velocity)<n.freeMode.minimumVelocity&&(t.velocity=0),(r>150||qv()-e.time>300)&&(t.velocity=0)}else t.velocity=0;t.velocity*=n.freeMode.momentumVelocityRatio,c.velocities.length=0;let e=1e3*n.freeMode.momentumRatio;const i=t.velocity*e;let d=t.translate+i;o&&(d=-d);let h,u=!1;const p=20*Math.abs(t.velocity)*n.freeMode.momentumBounceRatio;let f;if(d<t.maxTranslate())n.freeMode.momentumBounce?(d+t.maxTranslate()<-p&&(d=t.maxTranslate()-p),h=t.maxTranslate(),u=!0,c.allowMomentumBounce=!0):d=t.maxTranslate(),n.loop&&n.centeredSlides&&(f=!0);else if(d>t.minTranslate())n.freeMode.momentumBounce?(d-t.minTranslate()>p&&(d=t.minTranslate()+p),h=t.minTranslate(),u=!0,c.allowMomentumBounce=!0):d=t.minTranslate(),n.loop&&n.centeredSlides&&(f=!0);else if(n.freeMode.sticky){let e;for(let t=0;t<l.length;t+=1)if(l[t]>-d){e=t;break}d=Math.abs(l[e]-d)<Math.abs(l[e-1]-d)||"next"===t.swipeDirection?l[e]:l[e-1],d=-d}if(f&&r("transitionEnd",()=>{t.loopFix()}),0!==t.velocity){if(e=o?Math.abs((-d-t.translate)/t.velocity):Math.abs((d-t.translate)/t.velocity),n.freeMode.sticky){const i=Math.abs((o?-d:d)-t.translate),s=t.slidesSizesGrid[t.activeIndex];e=i<s?n.speed:i<2*s?1.5*n.speed:2.5*n.speed}}else if(n.freeMode.sticky)return void t.slideToClosest();n.freeMode.momentumBounce&&u?(t.updateProgress(h),t.setTransition(e),t.setTranslate(d),t.transitionStart(!0,t.swipeDirection),t.animating=!0,fy(a,()=>{t&&!t.destroyed&&c.allowMomentumBounce&&(s("momentumBounce"),t.setTransition(n.speed),setTimeout(()=>{t.setTranslate(h),fy(a,()=>{t&&!t.destroyed&&t.transitionEnd()})},0))})):t.velocity?(s("_freeModeNoMomentumRelease"),t.updateProgress(d),t.setTransition(e),t.setTranslate(d),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,fy(a,()=>{t&&!t.destroyed&&t.transitionEnd()}))):t.updateProgress(d),t.updateActiveIndex(),t.updateSlidesClasses()}else{if(n.freeMode.sticky)return void t.slideToClosest();n.freeMode&&s("_freeModeNoMomentumRelease")}(!n.freeMode.momentum||h>=n.longSwipesMs)&&(s("_freeModeStaticRelease"),t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}}i({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}}),Object.assign(t,{freeMode:{onTouchStart:n,onTouchMove:a,onTouchEnd:o}})}function dE(e){let t,i,s,r,{swiper:n,extendParams:a,on:o}=e;a({grid:{rows:1,fill:"column"}});const l=()=>{let e=n.params.spaceBetween;return"string"===typeof e&&e.indexOf("%")>=0?e=parseFloat(e.replace("%",""))/100*n.size:"string"===typeof e&&(e=parseFloat(e)),e},c=e=>{const{slidesPerView:r}=n.params,{rows:a,fill:o}=n.params.grid,l=n.virtual&&n.params.virtual.enabled?n.virtual.slides.length:e.length;s=Math.floor(l/a),t=Math.floor(l/a)===l/a?l:Math.ceil(l/a)*a,"auto"!==r&&"row"===o&&(t=Math.max(t,r*a)),i=t/a},d=()=>{n.slides&&n.slides.forEach(e=>{e.swiperSlideGridSet&&(e.style.height="",e.style[n.getDirectionLabel("margin-top")]="")})},h=(e,r,a)=>{const{slidesPerGroup:o}=n.params,c=l(),{rows:d,fill:h}=n.params.grid,u=n.virtual&&n.params.virtual.enabled?n.virtual.slides.length:a.length;let p,f,g;if("row"===h&&o>1){const i=Math.floor(e/(o*d)),s=e-d*o*i,n=0===i?o:Math.min(Math.ceil((u-i*d*o)/d),o);g=Math.floor(s/n),f=s-g*n+i*o,p=f+g*t/d,r.style.order=p}else"column"===h?(f=Math.floor(e/d),g=e-f*d,(f>s||f===s&&g===d-1)&&(g+=1,g>=d&&(g=0,f+=1))):(g=Math.floor(e/i),f=e-g*i);r.row=g,r.column=f,r.style.height=`calc((100% - ${(d-1)*c}px) / ${d})`,r.style[n.getDirectionLabel("margin-top")]=0!==g?c&&`${c}px`:"",r.swiperSlideGridSet=!0},u=(e,i)=>{const{centeredSlides:s,roundLengths:r}=n.params,a=l(),{rows:o}=n.params.grid;if(n.virtualSize=(e+a)*t,n.virtualSize=Math.ceil(n.virtualSize/o)-a,n.params.cssMode||(n.wrapperEl.style[n.getDirectionLabel("width")]=`${n.virtualSize+a}px`),s){const e=[];for(let t=0;t<i.length;t+=1){let s=i[t];r&&(s=Math.floor(s)),i[t]<n.virtualSize+i[0]&&e.push(s)}i.splice(0,i.length),i.push(...e)}},p=()=>{r=n.params.grid&&n.params.grid.rows>1},f=()=>{const{params:e,el:t}=n,i=e.grid&&e.grid.rows>1;r&&!i?(t.classList.remove(`${e.containerModifierClass}grid`,`${e.containerModifierClass}grid-column`),s=1,n.emitContainerClasses()):!r&&i&&(t.classList.add(`${e.containerModifierClass}grid`),"column"===e.grid.fill&&t.classList.add(`${e.containerModifierClass}grid-column`),n.emitContainerClasses()),r=i};o("init",p),o("update",f),n.grid={initSlides:c,unsetSlides:d,updateSlide:h,updateWrapperSize:u}}function hE(e){const t=this,{params:i,slidesEl:s}=t;i.loop&&t.loopDestroy();const r=e=>{if("string"===typeof e){const t=document.createElement("div");t.innerHTML=e,s.append(t.children[0]),t.innerHTML=""}else s.append(e)};if("object"===typeof e&&"length"in e)for(let n=0;n<e.length;n+=1)e[n]&&r(e[n]);else r(e);t.recalcSlides(),i.loop&&t.loopCreate(),i.observer&&!t.isElement||t.update()}function uE(e){const t=this,{params:i,activeIndex:s,slidesEl:r}=t;i.loop&&t.loopDestroy();let n=s+1;const a=e=>{if("string"===typeof e){const t=document.createElement("div");t.innerHTML=e,r.prepend(t.children[0]),t.innerHTML=""}else r.prepend(e)};if("object"===typeof e&&"length"in e){for(let t=0;t<e.length;t+=1)e[t]&&a(e[t]);n=s+e.length}else a(e);t.recalcSlides(),i.loop&&t.loopCreate(),i.observer&&!t.isElement||t.update(),t.slideTo(n,0,!1)}function pE(e,t){const i=this,{params:s,activeIndex:r,slidesEl:n}=i;let a=r;s.loop&&(a-=i.loopedSlides,i.loopDestroy(),i.recalcSlides());const o=i.slides.length;if(e<=0)return void i.prependSlide(t);if(e>=o)return void i.appendSlide(t);let l=a>e?a+1:a;const c=[];for(let d=o-1;d>=e;d-=1){const e=i.slides[d];e.remove(),c.unshift(e)}if("object"===typeof t&&"length"in t){for(let e=0;e<t.length;e+=1)t[e]&&n.append(t[e]);l=a>e?a+t.length:a}else n.append(t);for(let d=0;d<c.length;d+=1)n.append(c[d]);i.recalcSlides(),s.loop&&i.loopCreate(),s.observer&&!i.isElement||i.update(),s.loop?i.slideTo(l+i.loopedSlides,0,!1):i.slideTo(l,0,!1)}function fE(e){const t=this,{params:i,activeIndex:s}=t;let r=s;i.loop&&(r-=t.loopedSlides,t.loopDestroy());let n,a=r;if("object"===typeof e&&"length"in e){for(let i=0;i<e.length;i+=1)n=e[i],t.slides[n]&&t.slides[n].remove(),n<a&&(a-=1);a=Math.max(a,0)}else n=e,t.slides[n]&&t.slides[n].remove(),n<a&&(a-=1),a=Math.max(a,0);t.recalcSlides(),i.loop&&t.loopCreate(),i.observer&&!t.isElement||t.update(),i.loop?t.slideTo(a+t.loopedSlides,0,!1):t.slideTo(a,0,!1)}function gE(){const e=this,t=[];for(let i=0;i<e.slides.length;i+=1)t.push(i);e.removeSlide(t)}function mE(e){let{swiper:t}=e;Object.assign(t,{appendSlide:hE.bind(t),prependSlide:uE.bind(t),addSlide:pE.bind(t),removeSlide:fE.bind(t),removeAllSlides:gE.bind(t)})}function vE(e){const{effect:t,swiper:i,on:s,setTranslate:r,setTransition:n,overwriteParams:a,perspective:o,recreateShadows:l,getEffectParams:c}=e;let d;s("beforeInit",()=>{if(i.params.effect!==t)return;i.classNames.push(`${i.params.containerModifierClass}${t}`),o&&o()&&i.classNames.push(`${i.params.containerModifierClass}3d`);const e=a?a():{};Object.assign(i.params,e),Object.assign(i.originalParams,e)}),s("setTranslate",()=>{i.params.effect===t&&r()}),s("setTransition",(e,s)=>{i.params.effect===t&&n(s)}),s("transitionEnd",()=>{if(i.params.effect===t&&l){if(!c||!c().slideShadows)return;i.slides.forEach(e=>{e.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(e=>e.remove())}),l()}}),s("virtualUpdate",()=>{i.params.effect===t&&(i.slides.length||(d=!0),requestAnimationFrame(()=>{d&&i.slides&&i.slides.length&&(r(),d=!1)}))})}function yE(e,t){const i=sy(t);return i!==t&&(i.style.backfaceVisibility="hidden",i.style["-webkit-backface-visibility"]="hidden"),i}function bE(e){let{swiper:t,duration:i,transformElements:s,allSlides:r}=e;const{activeIndex:n}=t,a=e=>{if(!e.parentElement){const i=t.slides.filter(t=>t.shadowRoot&&t.shadowRoot===e.parentNode)[0];return i}return e.parentElement};if(t.params.virtualTranslate&&0!==i){let e,i=!1;e=r?s:s.filter(e=>{const i=e.classList.contains("swiper-slide-transform")?a(e):e;return t.getSlideIndex(i)===n}),e.forEach(e=>{fy(e,()=>{if(i)return;if(!t||t.destroyed)return;i=!0,t.animating=!1;const e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});t.wrapperEl.dispatchEvent(e)})})}}function EE(e){let{swiper:t,extendParams:i,on:s}=e;i({fadeEffect:{crossFade:!1}});const r=()=>{const{slides:e}=t,i=t.params.fadeEffect;for(let s=0;s<e.length;s+=1){const e=t.slides[s],r=e.swiperSlideOffset;let n=-r;t.params.virtualTranslate||(n-=t.translate);let a=0;t.isHorizontal()||(a=n,n=0);const o=t.params.fadeEffect.crossFade?Math.max(1-Math.abs(e.progress),0):1+Math.min(Math.max(e.progress,-1),0),l=yE(i,e);l.style.opacity=o,l.style.transform=`translate3d(${n}px, ${a}px, 0px)`}},n=e=>{const i=t.slides.map(e=>sy(e));i.forEach(t=>{t.style.transitionDuration=`${e}ms`}),bE({swiper:t,duration:e,transformElements:i,allSlides:!0})};vE({effect:"fade",swiper:t,on:s,setTranslate:r,setTransition:n,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!t.params.cssMode})})}function wE(e){let{swiper:t,extendParams:i,on:s}=e;i({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}});const r=(e,t,i)=>{let s=i?e.querySelector(".swiper-slide-shadow-left"):e.querySelector(".swiper-slide-shadow-top"),r=i?e.querySelector(".swiper-slide-shadow-right"):e.querySelector(".swiper-slide-shadow-bottom");s||(s=oy("div",("swiper-slide-shadow-cube swiper-slide-shadow-"+(i?"left":"top")).split(" ")),e.append(s)),r||(r=oy("div",("swiper-slide-shadow-cube swiper-slide-shadow-"+(i?"right":"bottom")).split(" ")),e.append(r)),s&&(s.style.opacity=Math.max(-t,0)),r&&(r.style.opacity=Math.max(t,0))},n=()=>{const e=t.isHorizontal();t.slides.forEach(t=>{const i=Math.max(Math.min(t.progress,1),-1);r(t,i,e)})},a=()=>{const{el:e,wrapperEl:i,slides:s,width:n,height:a,rtlTranslate:o,size:l,browser:c}=t,d=vy(t),h=t.params.cubeEffect,u=t.isHorizontal(),p=t.virtual&&t.params.virtual.enabled;let f,g=0;h.shadow&&(u?(f=t.wrapperEl.querySelector(".swiper-cube-shadow"),f||(f=oy("div","swiper-cube-shadow"),t.wrapperEl.append(f)),f.style.height=`${n}px`):(f=e.querySelector(".swiper-cube-shadow"),f||(f=oy("div","swiper-cube-shadow"),e.append(f))));for(let t=0;t<s.length;t+=1){const e=s[t];let i=t;p&&(i=parseInt(e.getAttribute("data-swiper-slide-index"),10));let n=90*i,a=Math.floor(n/360);o&&(n=-n,a=Math.floor(-n/360));const c=Math.max(Math.min(e.progress,1),-1);let f=0,m=0,v=0;i%4===0?(f=4*-a*l,v=0):(i-1)%4===0?(f=0,v=4*-a*l):(i-2)%4===0?(f=l+4*a*l,v=l):(i-3)%4===0&&(f=-l,v=3*l+4*l*a),o&&(f=-f),u||(m=f,f=0);const y=`rotateX(${d(u?0:-n)}deg) rotateY(${d(u?n:0)}deg) translate3d(${f}px, ${m}px, ${v}px)`;c<=1&&c>-1&&(g=90*i+90*c,o&&(g=90*-i-90*c)),e.style.transform=y,h.slideShadows&&r(e,c,u)}if(i.style.transformOrigin=`50% 50% -${l/2}px`,i.style["-webkit-transform-origin"]=`50% 50% -${l/2}px`,h.shadow)if(u)f.style.transform=`translate3d(0px, ${n/2+h.shadowOffset}px, ${-n/2}px) rotateX(89.99deg) rotateZ(0deg) scale(${h.shadowScale})`;else{const e=Math.abs(g)-90*Math.floor(Math.abs(g)/90),t=1.5-(Math.sin(2*e*Math.PI/360)/2+Math.cos(2*e*Math.PI/360)/2),i=h.shadowScale,s=h.shadowScale/t,r=h.shadowOffset;f.style.transform=`scale3d(${i}, 1, ${s}) translate3d(0px, ${a/2+r}px, ${-a/2/s}px) rotateX(-89.99deg)`}const m=(c.isSafari||c.isWebView)&&c.needPerspectiveFix?-l/2:0;i.style.transform=`translate3d(0px,0,${m}px) rotateX(${d(t.isHorizontal()?0:g)}deg) rotateY(${d(t.isHorizontal()?-g:0)}deg)`,i.style.setProperty("--swiper-cube-translate-z",`${m}px`)},o=e=>{const{el:i,slides:s}=t;if(s.forEach(t=>{t.style.transitionDuration=`${e}ms`,t.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(t=>{t.style.transitionDuration=`${e}ms`})}),t.params.cubeEffect.shadow&&!t.isHorizontal()){const t=i.querySelector(".swiper-cube-shadow");t&&(t.style.transitionDuration=`${e}ms`)}};vE({effect:"cube",swiper:t,on:s,setTranslate:a,setTransition:o,recreateShadows:n,getEffectParams:()=>t.params.cubeEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0})})}function AE(e,t,i){const s=`swiper-slide-shadow${i?`-${i}`:""}${e?` swiper-slide-shadow-${e}`:""}`,r=sy(t);let n=r.querySelector(`.${s.split(" ").join(".")}`);return n||(n=oy("div",s.split(" ")),r.append(n)),n}function TE(e){let{swiper:t,extendParams:i,on:s}=e;i({flipEffect:{slideShadows:!0,limitRotation:!0}});const r=(e,i)=>{let s=t.isHorizontal()?e.querySelector(".swiper-slide-shadow-left"):e.querySelector(".swiper-slide-shadow-top"),r=t.isHorizontal()?e.querySelector(".swiper-slide-shadow-right"):e.querySelector(".swiper-slide-shadow-bottom");s||(s=AE("flip",e,t.isHorizontal()?"left":"top")),r||(r=AE("flip",e,t.isHorizontal()?"right":"bottom")),s&&(s.style.opacity=Math.max(-i,0)),r&&(r.style.opacity=Math.max(i,0))},n=()=>{t.params.flipEffect,t.slides.forEach(e=>{let i=e.progress;t.params.flipEffect.limitRotation&&(i=Math.max(Math.min(e.progress,1),-1)),r(e,i)})},a=()=>{const{slides:e,rtlTranslate:i}=t,s=t.params.flipEffect,n=vy(t);for(let a=0;a<e.length;a+=1){const o=e[a];let l=o.progress;t.params.flipEffect.limitRotation&&(l=Math.max(Math.min(o.progress,1),-1));const c=o.swiperSlideOffset,d=-180*l;let h=d,u=0,p=t.params.cssMode?-c-t.translate:-c,f=0;t.isHorizontal()?i&&(h=-h):(f=p,p=0,u=-h,h=0),o.style.zIndex=-Math.abs(Math.round(l))+e.length,s.slideShadows&&r(o,l);const g=`translate3d(${p}px, ${f}px, 0px) rotateX(${n(u)}deg) rotateY(${n(h)}deg)`,m=yE(s,o);m.style.transform=g}},o=e=>{const i=t.slides.map(e=>sy(e));i.forEach(t=>{t.style.transitionDuration=`${e}ms`,t.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(t=>{t.style.transitionDuration=`${e}ms`})}),bE({swiper:t,duration:e,transformElements:i})};vE({effect:"flip",swiper:t,on:s,setTranslate:a,setTransition:o,recreateShadows:n,getEffectParams:()=>t.params.flipEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!t.params.cssMode})})}function SE(e){let{swiper:t,extendParams:i,on:s}=e;i({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}});const r=()=>{const{width:e,height:i,slides:s,slidesSizesGrid:r}=t,n=t.params.coverflowEffect,a=t.isHorizontal(),o=t.translate,l=a?e/2-o:i/2-o,c=a?n.rotate:-n.rotate,d=n.depth,h=vy(t);for(let t=0,u=s.length;t<u;t+=1){const e=s[t],i=r[t],o=e.swiperSlideOffset,u=(l-o-i/2)/i,p="function"===typeof n.modifier?n.modifier(u):u*n.modifier;let f=a?c*p:0,g=a?0:c*p,m=-d*Math.abs(p),v=n.stretch;"string"===typeof v&&-1!==v.indexOf("%")&&(v=parseFloat(n.stretch)/100*i);let y=a?0:v*p,b=a?v*p:0,E=1-(1-n.scale)*Math.abs(p);Math.abs(b)<.001&&(b=0),Math.abs(y)<.001&&(y=0),Math.abs(m)<.001&&(m=0),Math.abs(f)<.001&&(f=0),Math.abs(g)<.001&&(g=0),Math.abs(E)<.001&&(E=0);const w=`translate3d(${b}px,${y}px,${m}px)  rotateX(${h(g)}deg) rotateY(${h(f)}deg) scale(${E})`,A=yE(n,e);if(A.style.transform=w,e.style.zIndex=1-Math.abs(Math.round(p)),n.slideShadows){let t=a?e.querySelector(".swiper-slide-shadow-left"):e.querySelector(".swiper-slide-shadow-top"),i=a?e.querySelector(".swiper-slide-shadow-right"):e.querySelector(".swiper-slide-shadow-bottom");t||(t=AE("coverflow",e,a?"left":"top")),i||(i=AE("coverflow",e,a?"right":"bottom")),t&&(t.style.opacity=p>0?p:0),i&&(i.style.opacity=-p>0?-p:0)}}},n=e=>{const i=t.slides.map(e=>sy(e));i.forEach(t=>{t.style.transitionDuration=`${e}ms`,t.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(t=>{t.style.transitionDuration=`${e}ms`})})};vE({effect:"coverflow",swiper:t,on:s,setTranslate:r,setTransition:n,perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}function xE(e){let{swiper:t,extendParams:i,on:s}=e;i({creativeEffect:{limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});const r=e=>"string"===typeof e?e:`${e}px`,n=()=>{const{slides:e,wrapperEl:i,slidesSizesGrid:s}=t,n=t.params.creativeEffect,{progressMultiplier:a}=n,o=t.params.centeredSlides,l=vy(t);if(o){const e=s[0]/2-t.params.slidesOffsetBefore||0;i.style.transform=`translateX(calc(50% - ${e}px))`}for(let c=0;c<e.length;c+=1){const i=e[c],s=i.progress,d=Math.min(Math.max(i.progress,-n.limitProgress),n.limitProgress);let h=d;o||(h=Math.min(Math.max(i.originalProgress,-n.limitProgress),n.limitProgress));const u=i.swiperSlideOffset,p=[t.params.cssMode?-u-t.translate:-u,0,0],f=[0,0,0];let g=!1;t.isHorizontal()||(p[1]=p[0],p[0]=0);let m={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};d<0?(m=n.next,g=!0):d>0&&(m=n.prev,g=!0),p.forEach((e,t)=>{p[t]=`calc(${e}px + (${r(m.translate[t])} * ${Math.abs(d*a)}))`}),f.forEach((e,t)=>{let i=m.rotate[t]*Math.abs(d*a);f[t]=i}),i.style.zIndex=-Math.abs(Math.round(s))+e.length;const v=p.join(", "),y=`rotateX(${l(f[0])}deg) rotateY(${l(f[1])}deg) rotateZ(${l(f[2])}deg)`,b=h<0?`scale(${1+(1-m.scale)*h*a})`:`scale(${1-(1-m.scale)*h*a})`,E=h<0?1+(1-m.opacity)*h*a:1-(1-m.opacity)*h*a,w=`translate3d(${v}) ${y} ${b}`;if(g&&m.shadow||!g){let e=i.querySelector(".swiper-slide-shadow");if(!e&&m.shadow&&(e=AE("creative",i)),e){const t=n.shadowPerProgress?d*(1/n.limitProgress):d;e.style.opacity=Math.min(Math.max(Math.abs(t),0),1)}}const A=yE(n,i);A.style.transform=w,A.style.opacity=E,m.origin&&(A.style.transformOrigin=m.origin)}},a=e=>{const i=t.slides.map(e=>sy(e));i.forEach(t=>{t.style.transitionDuration=`${e}ms`,t.querySelectorAll(".swiper-slide-shadow").forEach(t=>{t.style.transitionDuration=`${e}ms`})}),bE({swiper:t,duration:e,transformElements:i,allSlides:!0})};vE({effect:"creative",swiper:t,on:s,setTranslate:n,setTransition:a,perspective:()=>t.params.creativeEffect.perspective,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!t.params.cssMode})})}function LE(e){let{swiper:t,extendParams:i,on:s}=e;i({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}});const r=()=>{const{slides:e,activeIndex:i,rtlTranslate:s}=t,r=t.params.cardsEffect,{startTranslate:n,isTouched:o}=t.touchEventsData,l=s?-t.translate:t.translate;for(let c=0;c<e.length;c+=1){const d=e[c],h=d.progress,u=Math.min(Math.max(h,-4),4);let p=d.swiperSlideOffset;t.params.centeredSlides&&!t.params.cssMode&&(t.wrapperEl.style.transform=`translateX(${t.minTranslate()}px)`),t.params.centeredSlides&&t.params.cssMode&&(p-=e[0].swiperSlideOffset);let f=t.params.cssMode?-p-t.translate:-p,g=0;const m=-100*Math.abs(u);let v=1,y=-r.perSlideRotate*u,b=r.perSlideOffset-.75*Math.abs(u);const E=t.virtual&&t.params.virtual.enabled?t.virtual.from+c:c,w=(E===i||E===i-1)&&u>0&&u<1&&(o||t.params.cssMode)&&l<n,A=(E===i||E===i+1)&&u<0&&u>-1&&(o||t.params.cssMode)&&l>n;if(w||A){const e=a(1-Math.abs((Math.abs(u)-.5)/.5),.5);y+=-28*u*e,v+=-.5*e,b+=96*e,g=-25*e*Math.abs(u)+"%"}if(f=u<0?`calc(${f}px ${s?"-":"+"} (${b*Math.abs(u)}%))`:u>0?`calc(${f}px ${s?"-":"+"} (-${b*Math.abs(u)}%))`:`${f}px`,!t.isHorizontal()){const e=g;g=f,f=e}const T=u<0?""+(1+(1-v)*u):""+(1-(1-v)*u),S=`\n        translate3d(${f}, ${g}, ${m}px)\n        rotateZ(${r.rotate?s?-y:y:0}deg)\n        scale(${T})\n      `;if(r.slideShadows){let e=d.querySelector(".swiper-slide-shadow");e||(e=AE("cards",d)),e&&(e.style.opacity=Math.min(Math.max((Math.abs(u)-.5)/.5,0),1))}d.style.zIndex=-Math.abs(Math.round(h))+e.length;const x=yE(r,d);x.style.transform=S}},n=e=>{const i=t.slides.map(e=>sy(e));i.forEach(t=>{t.style.transitionDuration=`${e}ms`,t.querySelectorAll(".swiper-slide-shadow").forEach(t=>{t.style.transitionDuration=`${e}ms`})}),bE({swiper:t,duration:e,transformElements:i})};vE({effect:"cards",swiper:t,on:s,setTranslate:r,setTransition:n,perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!t.params.cssMode})})}Object.keys(zb).forEach(e=>{Object.keys(zb[e]).forEach(t=>{Yb.prototype[t]=zb[e][t]})}),Yb.use([ky,Iy]);const kE=[Wb,Kb,qb,Qb,Jb,eE,tE,iE,sE,rE,nE,aE,oE,lE,cE,dE,mE,EE,wE,TE,SE,xE,LE];Yb.use(kE);const IE="@font-face{font-family:swiper-icons;src:url('data:application/font-woff;charset=utf-8;base64, d09GRgABAAAAAAZgABAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAAGRAAAABoAAAAci6qHkUdERUYAAAWgAAAAIwAAACQAYABXR1BPUwAABhQAAAAuAAAANuAY7+xHU1VCAAAFxAAAAFAAAABm2fPczU9TLzIAAAHcAAAASgAAAGBP9V5RY21hcAAAAkQAAACIAAABYt6F0cBjdnQgAAACzAAAAAQAAAAEABEBRGdhc3AAAAWYAAAACAAAAAj//wADZ2x5ZgAAAywAAADMAAAD2MHtryVoZWFkAAABbAAAADAAAAA2E2+eoWhoZWEAAAGcAAAAHwAAACQC9gDzaG10eAAAAigAAAAZAAAArgJkABFsb2NhAAAC0AAAAFoAAABaFQAUGG1heHAAAAG8AAAAHwAAACAAcABAbmFtZQAAA/gAAAE5AAACXvFdBwlwb3N0AAAFNAAAAGIAAACE5s74hXjaY2BkYGAAYpf5Hu/j+W2+MnAzMYDAzaX6QjD6/4//Bxj5GA8AuRwMYGkAPywL13jaY2BkYGA88P8Agx4j+/8fQDYfA1AEBWgDAIB2BOoAeNpjYGRgYNBh4GdgYgABEMnIABJzYNADCQAACWgAsQB42mNgYfzCOIGBlYGB0YcxjYGBwR1Kf2WQZGhhYGBiYGVmgAFGBiQQkOaawtDAoMBQxXjg/wEGPcYDDA4wNUA2CCgwsAAAO4EL6gAAeNpj2M0gyAACqxgGNWBkZ2D4/wMA+xkDdgAAAHjaY2BgYGaAYBkGRgYQiAHyGMF8FgYHIM3DwMHABGQrMOgyWDLEM1T9/w8UBfEMgLzE////P/5//f/V/xv+r4eaAAeMbAxwIUYmIMHEgKYAYjUcsDAwsLKxc3BycfPw8jEQA/gZBASFhEVExcQlJKWkZWTl5BUUlZRVVNXUNTQZBgMAAMR+E+gAEQFEAAAAKgAqACoANAA+AEgAUgBcAGYAcAB6AIQAjgCYAKIArAC2AMAAygDUAN4A6ADyAPwBBgEQARoBJAEuATgBQgFMAVYBYAFqAXQBfgGIAZIBnAGmAbIBzgHsAAB42u2NMQ6CUAyGW568x9AneYYgm4MJbhKFaExIOAVX8ApewSt4Bic4AfeAid3VOBixDxfPYEza5O+Xfi04YADggiUIULCuEJK8VhO4bSvpdnktHI5QCYtdi2sl8ZnXaHlqUrNKzdKcT8cjlq+rwZSvIVczNiezsfnP/uznmfPFBNODM2K7MTQ45YEAZqGP81AmGGcF3iPqOop0r1SPTaTbVkfUe4HXj97wYE+yNwWYxwWu4v1ugWHgo3S1XdZEVqWM7ET0cfnLGxWfkgR42o2PvWrDMBSFj/IHLaF0zKjRgdiVMwScNRAoWUoH78Y2icB/yIY09An6AH2Bdu/UB+yxopYshQiEvnvu0dURgDt8QeC8PDw7Fpji3fEA4z/PEJ6YOB5hKh4dj3EvXhxPqH/SKUY3rJ7srZ4FZnh1PMAtPhwP6fl2PMJMPDgeQ4rY8YT6Gzao0eAEA409DuggmTnFnOcSCiEiLMgxCiTI6Cq5DZUd3Qmp10vO0LaLTd2cjN4fOumlc7lUYbSQcZFkutRG7g6JKZKy0RmdLY680CDnEJ+UMkpFFe1RN7nxdVpXrC4aTtnaurOnYercZg2YVmLN/d/gczfEimrE/fs/bOuq29Zmn8tloORaXgZgGa78yO9/cnXm2BpaGvq25Dv9S4E9+5SIc9PqupJKhYFSSl47+Qcr1mYNAAAAeNptw0cKwkAAAMDZJA8Q7OUJvkLsPfZ6zFVERPy8qHh2YER+3i/BP83vIBLLySsoKimrqKqpa2hp6+jq6RsYGhmbmJqZSy0sraxtbO3sHRydnEMU4uR6yx7JJXveP7WrDycAAAAAAAH//wACeNpjYGRgYOABYhkgZgJCZgZNBkYGLQZtIJsFLMYAAAw3ALgAeNolizEKgDAQBCchRbC2sFER0YD6qVQiBCv/H9ezGI6Z5XBAw8CBK/m5iQQVauVbXLnOrMZv2oLdKFa8Pjuru2hJzGabmOSLzNMzvutpB3N42mNgZGBg4GKQYzBhYMxJLMlj4GBgAYow/P/PAJJhLM6sSoWKfWCAAwDAjgbRAAB42mNgYGBkAIIbCZo5IPrmUn0hGA0AO8EFTQAA');font-weight:400;font-style:normal}:root{--swiper-theme-color:#007aff}:host{position:relative;display:block;margin-left:auto;margin-right:auto;z-index:1}.swiper{margin-left:auto;margin-right:auto;position:relative;overflow:hidden;list-style:none;padding:0;z-index:1;display:block}.swiper-vertical>.swiper-wrapper{flex-direction:column}.swiper-wrapper{position:relative;width:100%;height:100%;z-index:1;display:flex;transition-property:transform;transition-timing-function:var(--swiper-wrapper-transition-timing-function,initial);box-sizing:content-box}.swiper-android .swiper-slide,.swiper-ios .swiper-slide,.swiper-wrapper{transform:translate3d(0px,0,0)}.swiper-horizontal{touch-action:pan-y}.swiper-vertical{touch-action:pan-x}.swiper-slide{flex-shrink:0;width:100%;height:100%;position:relative;transition-property:transform;display:block}.swiper-slide-invisible-blank{visibility:hidden}.swiper-autoheight,.swiper-autoheight .swiper-slide{height:auto}.swiper-autoheight .swiper-wrapper{align-items:flex-start;transition-property:transform,height}.swiper-backface-hidden .swiper-slide{transform:translateZ(0);-webkit-backface-visibility:hidden;backface-visibility:hidden}.swiper-3d.swiper-css-mode .swiper-wrapper{perspective:1200px}.swiper-3d .swiper-wrapper{transform-style:preserve-3d}.swiper-3d{perspective:1200px}.swiper-3d .swiper-cube-shadow,.swiper-3d .swiper-slide{transform-style:preserve-3d}.swiper-css-mode>.swiper-wrapper{overflow:auto;scrollbar-width:none;-ms-overflow-style:none}.swiper-css-mode>.swiper-wrapper::-webkit-scrollbar{display:none}.swiper-css-mode>.swiper-wrapper>.swiper-slide{scroll-snap-align:start start}.swiper-css-mode.swiper-horizontal>.swiper-wrapper{scroll-snap-type:x mandatory}.swiper-css-mode.swiper-vertical>.swiper-wrapper{scroll-snap-type:y mandatory}.swiper-css-mode.swiper-free-mode>.swiper-wrapper{scroll-snap-type:none}.swiper-css-mode.swiper-free-mode>.swiper-wrapper>.swiper-slide{scroll-snap-align:none}.swiper-css-mode.swiper-centered>.swiper-wrapper::before{content:'';flex-shrink:0;order:9999}.swiper-css-mode.swiper-centered>.swiper-wrapper>.swiper-slide{scroll-snap-align:center center;scroll-snap-stop:always}.swiper-css-mode.swiper-centered.swiper-horizontal>.swiper-wrapper>.swiper-slide:first-child{margin-inline-start:var(--swiper-centered-offset-before)}.swiper-css-mode.swiper-centered.swiper-horizontal>.swiper-wrapper::before{height:100%;min-height:1px;width:var(--swiper-centered-offset-after)}.swiper-css-mode.swiper-centered.swiper-vertical>.swiper-wrapper>.swiper-slide:first-child{margin-block-start:var(--swiper-centered-offset-before)}.swiper-css-mode.swiper-centered.swiper-vertical>.swiper-wrapper::before{width:100%;min-width:1px;height:var(--swiper-centered-offset-after)}.swiper-3d .swiper-slide-shadow,.swiper-3d .swiper-slide-shadow-bottom,.swiper-3d .swiper-slide-shadow-left,.swiper-3d .swiper-slide-shadow-right,.swiper-3d .swiper-slide-shadow-top{position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:10}.swiper-3d .swiper-slide-shadow{background:rgba(0,0,0,.15)}.swiper-3d .swiper-slide-shadow-left{background-image:linear-gradient(to left,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-3d .swiper-slide-shadow-right{background-image:linear-gradient(to right,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-3d .swiper-slide-shadow-top{background-image:linear-gradient(to top,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-3d .swiper-slide-shadow-bottom{background-image:linear-gradient(to bottom,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-lazy-preloader{width:42px;height:42px;position:absolute;left:50%;top:50%;margin-left:-21px;margin-top:-21px;z-index:10;transform-origin:50%;box-sizing:border-box;border:4px solid var(--swiper-preloader-color,var(--swiper-theme-color));border-radius:50%;border-top-color:transparent}.swiper-watch-progress .swiper-slide-visible .swiper-lazy-preloader,.swiper:not(.swiper-watch-progress) .swiper-lazy-preloader{animation:swiper-preloader-spin 1s infinite linear}.swiper-lazy-preloader-white{--swiper-preloader-color:#fff}.swiper-lazy-preloader-black{--swiper-preloader-color:#000}@keyframes swiper-preloader-spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.swiper-virtual .swiper-slide{-webkit-backface-visibility:hidden;transform:translateZ(0)}.swiper-virtual.swiper-css-mode .swiper-wrapper::after{content:'';position:absolute;left:0;top:0;pointer-events:none}.swiper-virtual.swiper-css-mode.swiper-horizontal .swiper-wrapper::after{height:1px;width:var(--swiper-virtual-size)}.swiper-virtual.swiper-css-mode.swiper-vertical .swiper-wrapper::after{width:1px;height:var(--swiper-virtual-size)}:root{--swiper-navigation-size:44px}.swiper-button-next,.swiper-button-prev{position:absolute;top:var(--swiper-navigation-top-offset,50%);width:calc(var(--swiper-navigation-size)/ 44 * 27);height:var(--swiper-navigation-size);margin-top:calc(0px - (var(--swiper-navigation-size)/ 2));z-index:10;cursor:pointer;display:flex;align-items:center;justify-content:center;color:var(--swiper-navigation-color,var(--swiper-theme-color))}.swiper-button-next.swiper-button-disabled,.swiper-button-prev.swiper-button-disabled{opacity:.35;cursor:auto;pointer-events:none}.swiper-button-next.swiper-button-hidden,.swiper-button-prev.swiper-button-hidden{opacity:0;cursor:auto;pointer-events:none}.swiper-navigation-disabled .swiper-button-next,.swiper-navigation-disabled .swiper-button-prev{display:none!important}.swiper-button-next svg,.swiper-button-prev svg{width:100%;height:100%;object-fit:contain;transform-origin:center}.swiper-rtl .swiper-button-next svg,.swiper-rtl .swiper-button-prev svg{transform:rotate(180deg)}.swiper-button-prev,.swiper-rtl .swiper-button-next{left:var(--swiper-navigation-sides-offset,10px);right:auto}.swiper-button-next,.swiper-rtl .swiper-button-prev{right:var(--swiper-navigation-sides-offset,10px);left:auto}.swiper-button-lock{display:none}.swiper-button-next:after,.swiper-button-prev:after{font-family:swiper-icons;font-size:var(--swiper-navigation-size);text-transform:none!important;letter-spacing:0;font-variant:initial;line-height:1}.swiper-button-prev:after,.swiper-rtl .swiper-button-next:after{content:'prev'}.swiper-button-next,.swiper-rtl .swiper-button-prev{right:var(--swiper-navigation-sides-offset,10px);left:auto}.swiper-button-next:after,.swiper-rtl .swiper-button-prev:after{content:'next'}.swiper-pagination{position:absolute;text-align:center;transition:.3s opacity;transform:translate3d(0,0,0);z-index:10}.swiper-pagination.swiper-pagination-hidden{opacity:0}.swiper-pagination-disabled>.swiper-pagination,.swiper-pagination.swiper-pagination-disabled{display:none!important}.swiper-horizontal>.swiper-pagination-bullets,.swiper-pagination-bullets.swiper-pagination-horizontal,.swiper-pagination-custom,.swiper-pagination-fraction{bottom:var(--swiper-pagination-bottom,8px);top:var(--swiper-pagination-top,auto);left:0;width:100%}.swiper-pagination-bullets-dynamic{overflow:hidden;font-size:0}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transform:scale(.33);position:relative}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active{transform:scale(1)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-main{transform:scale(1)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev{transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev-prev{transform:scale(.33)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next{transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next-next{transform:scale(.33)}.swiper-pagination-bullet{width:var(--swiper-pagination-bullet-width,var(--swiper-pagination-bullet-size,8px));height:var(--swiper-pagination-bullet-height,var(--swiper-pagination-bullet-size,8px));display:inline-block;border-radius:var(--swiper-pagination-bullet-border-radius,50%);background:var(--swiper-pagination-bullet-inactive-color,#000);opacity:var(--swiper-pagination-bullet-inactive-opacity, .2)}button.swiper-pagination-bullet{border:none;margin:0;padding:0;box-shadow:none;-webkit-appearance:none;appearance:none}.swiper-pagination-clickable .swiper-pagination-bullet{cursor:pointer}.swiper-pagination-bullet:only-child{display:none!important}.swiper-pagination-bullet-active{opacity:var(--swiper-pagination-bullet-opacity, 1);background:var(--swiper-pagination-color,var(--swiper-theme-color))}.swiper-pagination-vertical.swiper-pagination-bullets,.swiper-vertical>.swiper-pagination-bullets{right:var(--swiper-pagination-right,8px);left:var(--swiper-pagination-left,auto);top:50%;transform:translate3d(0px,-50%,0)}.swiper-pagination-vertical.swiper-pagination-bullets .swiper-pagination-bullet,.swiper-vertical>.swiper-pagination-bullets .swiper-pagination-bullet{margin:var(--swiper-pagination-bullet-vertical-gap,6px) 0;display:block}.swiper-pagination-vertical.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.swiper-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{top:50%;transform:translateY(-50%);width:8px}.swiper-pagination-vertical.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.swiper-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{display:inline-block;transition:.2s transform,.2s top}.swiper-horizontal>.swiper-pagination-bullets .swiper-pagination-bullet,.swiper-pagination-horizontal.swiper-pagination-bullets .swiper-pagination-bullet{margin:0 var(--swiper-pagination-bullet-horizontal-gap,4px)}.swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{left:50%;transform:translateX(-50%);white-space:nowrap}.swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:.2s transform,.2s left}.swiper-horizontal.swiper-rtl>.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:.2s transform,.2s right}.swiper-pagination-fraction{color:var(--swiper-pagination-fraction-color,inherit)}.swiper-pagination-progressbar{background:var(--swiper-pagination-progressbar-bg-color,rgba(0,0,0,.25));position:absolute}.swiper-pagination-progressbar .swiper-pagination-progressbar-fill{background:var(--swiper-pagination-color,var(--swiper-theme-color));position:absolute;left:0;top:0;width:100%;height:100%;transform:scale(0);transform-origin:left top}.swiper-rtl .swiper-pagination-progressbar .swiper-pagination-progressbar-fill{transform-origin:right top}.swiper-horizontal>.swiper-pagination-progressbar,.swiper-pagination-progressbar.swiper-pagination-horizontal,.swiper-pagination-progressbar.swiper-pagination-vertical.swiper-pagination-progressbar-opposite,.swiper-vertical>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite{width:100%;height:var(--swiper-pagination-progressbar-size,4px);left:0;top:0}.swiper-horizontal>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite,.swiper-pagination-progressbar.swiper-pagination-horizontal.swiper-pagination-progressbar-opposite,.swiper-pagination-progressbar.swiper-pagination-vertical,.swiper-vertical>.swiper-pagination-progressbar{width:var(--swiper-pagination-progressbar-size,4px);height:100%;left:0;top:0}.swiper-pagination-lock{display:none}.swiper-scrollbar{border-radius:var(--swiper-scrollbar-border-radius,10px);position:relative;touch-action:none;background:var(--swiper-scrollbar-bg-color,rgba(0,0,0,.1))}.swiper-scrollbar-disabled>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-disabled{display:none!important}.swiper-horizontal>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-horizontal{position:absolute;left:var(--swiper-scrollbar-sides-offset,1%);bottom:var(--swiper-scrollbar-bottom,4px);top:var(--swiper-scrollbar-top,auto);z-index:50;height:var(--swiper-scrollbar-size,4px);width:calc(100% - 2 * var(--swiper-scrollbar-sides-offset,1%))}.swiper-scrollbar.swiper-scrollbar-vertical,.swiper-vertical>.swiper-scrollbar{position:absolute;left:var(--swiper-scrollbar-left,auto);right:var(--swiper-scrollbar-right,4px);top:var(--swiper-scrollbar-sides-offset,1%);z-index:50;width:var(--swiper-scrollbar-size,4px);height:calc(100% - 2 * var(--swiper-scrollbar-sides-offset,1%))}.swiper-scrollbar-drag{height:100%;width:100%;position:relative;background:var(--swiper-scrollbar-drag-bg-color,rgba(0,0,0,.5));border-radius:var(--swiper-scrollbar-border-radius,10px);left:0;top:0}.swiper-scrollbar-cursor-drag{cursor:move}.swiper-scrollbar-lock{display:none}.swiper-zoom-container{width:100%;height:100%;display:flex;justify-content:center;align-items:center;text-align:center}.swiper-zoom-container>canvas,.swiper-zoom-container>img,.swiper-zoom-container>svg{max-width:100%;max-height:100%;object-fit:contain}.swiper-slide-zoomed{cursor:move;touch-action:none}.swiper .swiper-notification{position:absolute;left:0;top:0;pointer-events:none;opacity:0;z-index:-1000}.swiper-free-mode>.swiper-wrapper{transition-timing-function:ease-out;margin:0 auto}.swiper-grid>.swiper-wrapper{flex-wrap:wrap}.swiper-grid-column>.swiper-wrapper{flex-wrap:wrap;flex-direction:column}.swiper-fade.swiper-free-mode .swiper-slide{transition-timing-function:ease-out}.swiper-fade .swiper-slide{pointer-events:none;transition-property:opacity}.swiper-fade .swiper-slide .swiper-slide{pointer-events:none}.swiper-fade .swiper-slide-active{pointer-events:auto}.swiper-fade .swiper-slide-active .swiper-slide-active{pointer-events:auto}.swiper.swiper-cube{overflow:visible}.swiper-cube .swiper-slide{pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:1;visibility:hidden;transform-origin:0 0;width:100%;height:100%}.swiper-cube .swiper-slide .swiper-slide{pointer-events:none}.swiper-cube.swiper-rtl .swiper-slide{transform-origin:100% 0}.swiper-cube .swiper-slide-active,.swiper-cube .swiper-slide-active .swiper-slide-active{pointer-events:auto}.swiper-cube .swiper-slide-active,.swiper-cube .swiper-slide-next,.swiper-cube .swiper-slide-prev{pointer-events:auto;visibility:visible}.swiper-cube .swiper-cube-shadow{position:absolute;left:0;bottom:0px;width:100%;height:100%;opacity:.6;z-index:0}.swiper-cube .swiper-cube-shadow:before{content:'';background:#000;position:absolute;left:0;top:0;bottom:0;right:0;filter:blur(50px)}.swiper-cube .swiper-slide-next+.swiper-slide{pointer-events:auto;visibility:visible}.swiper-cube .swiper-slide-shadow-cube.swiper-slide-shadow-bottom,.swiper-cube .swiper-slide-shadow-cube.swiper-slide-shadow-left,.swiper-cube .swiper-slide-shadow-cube.swiper-slide-shadow-right,.swiper-cube .swiper-slide-shadow-cube.swiper-slide-shadow-top{z-index:0;-webkit-backface-visibility:hidden;backface-visibility:hidden}.swiper.swiper-flip{overflow:visible}.swiper-flip .swiper-slide{pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:1}.swiper-flip .swiper-slide .swiper-slide{pointer-events:none}.swiper-flip .swiper-slide-active,.swiper-flip .swiper-slide-active .swiper-slide-active{pointer-events:auto}.swiper-flip .swiper-slide-shadow-flip.swiper-slide-shadow-bottom,.swiper-flip .swiper-slide-shadow-flip.swiper-slide-shadow-left,.swiper-flip .swiper-slide-shadow-flip.swiper-slide-shadow-right,.swiper-flip .swiper-slide-shadow-flip.swiper-slide-shadow-top{z-index:0;-webkit-backface-visibility:hidden;backface-visibility:hidden}.swiper-creative .swiper-slide{-webkit-backface-visibility:hidden;backface-visibility:hidden;overflow:hidden;transition-property:transform,opacity,height}.swiper.swiper-cards{overflow:visible}.swiper-cards .swiper-slide{transform-origin:center bottom;-webkit-backface-visibility:hidden;backface-visibility:hidden;overflow:hidden}taro-swiper-core{height:150px;display:block}taro-swiper-core .swiper-container{height:100%;position:relative;overflow:visible}";var _E,CE,RE,PE,DE,ME=function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)},OE=function(e,t,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(e,i):r?r.value=i:t.set(e,i),i};let NE=0;const BE=5,FE=7,$E=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onChange=Od(this,"change",7),this.onAnimationFinish=Od(this,"animationfinish",7),_E.set(this,NE++),CE.set(this,"autoplay"),RE.set(this,!1),PE.set(this,!1),DE.set(this,0),this.handleSwiperSizeDebounce=sg(()=>{this.swiper&&this.isWillLoadCalled&&(this.circular?ME(this,PE,"f")&&(this.reset(),OE(this,PE,!1,"f"),OE(this,RE,!1,"f")):(this.swiper.update(),OE(this,RE,!1,"f")))},50),this.reset=()=>{OE(this,RE,!0,"f"),OE(this,DE,this.swiper.realIndex,"f"),this.swiper.destroy(),this.handleInit(!0),OE(this,RE,!1,"f")},this.getSlidersList=()=>this.el.querySelectorAll("taro-swiper-item-core:not(.swiper-slide-duplicate)")||[],this.getNeedFixLoop=()=>{const e=this.parseMargin(),t=e.filter(Boolean).length>0;return this.circular&&t},this.parseMargin=()=>{const[,e]=/^(\d+)px/.exec(this.previousMargin)||[],[,t]=/^(\d+)px/.exec(this.nextMargin)||[];return[parseInt(e)||0,parseInt(t)||0]},this.swiperWrapper=void 0,this.swiper=void 0,this.isWillLoadCalled=!1,this.indicatorDots=!1,this.indicatorColor="rgba(0, 0, 0, .3)",this.indicatorActiveColor="#000000",this.autoplay=!1,this.current=0,this.currentItemId="",this.interval=5e3,this.duration=500,this.circular=!1,this.vertical=!1,this.previousMargin="0px",this.nextMargin="0px",this.displayMultipleItems=1,this.full=!1,this.zoom=!1,this.effectsProps={},this.observer=void 0}watchCurrent(e){if(this.currentItemId||!this.isWillLoadCalled||!this.swiper)return;const t=parseInt(e,10);isNaN(t)||t===this.swiper.realIndex||(OE(this,CE,"","f"),this.circular?(this.swiper.slideToLoop(t),this.autoplay&&this.swiper.autoplay.pause(),this.swiper.loopFix(),this.autoplay&&this.swiper.autoplay.start()):this.swiper.slideTo(t))}watchCurrentItemId(e){if(!this.swiperWrapper||!this.isWillLoadCalled)return;let t=0;this.getSlidersList().forEach((i,s)=>{const r=i.getAttribute("item-id");r===e&&(t=this.circular?Number(i.getAttribute("data-swiper-slide-index")):s)}),t!==this.swiper.realIndex&&(OE(this,CE,"","f"),this.circular?(this.swiper.slideToLoop(t),this.swiper.loopFix(),this.autoplay&&this.swiper.autoplay.start()):this.swiper.slideTo(t))}watchAutoplay(e){if(!this.isWillLoadCalled||!this.swiper)return;const t=this.swiper.autoplay;if(t){if(t.running===e)return;e?(this.swiper.params&&"object"===typeof this.swiper.params.autoplay&&(!0===this.swiper.params.autoplay.disableOnInteraction&&(this.swiper.params.autoplay.disableOnInteraction=!1),this.swiper.params.autoplay.delay=this.interval),t.start()):t.stop()}}watchDuration(e){this.swiper&&this.isWillLoadCalled&&(this.swiper.params.speed=e)}watchInterval(e){this.swiper&&this.isWillLoadCalled&&"object"===typeof this.swiper.params.autoplay&&(this.swiper.params.autoplay.delay=e)}watchSwiperWrapper(e){if(!this.isWillLoadCalled||!this.swiper)return;if(!e)return;const t=()=>{OE(this,PE,!0,"f"),this.swiper.loopDestroy(),this.swiper.params.loop=!1};this.el.appendChild=i=>(OE(this,RE,!0,"f"),!ME(this,PE,"f")&&this.circular&&t(),e.appendChild(i)),this.el.insertBefore=(i,s)=>(OE(this,RE,!0,"f"),!ME(this,PE,"f")&&this.circular&&t(),e.insertBefore(i,s)),this.el.replaceChild=(i,s)=>(OE(this,RE,!0,"f"),!ME(this,PE,"f")&&this.circular&&t(),e.replaceChild(i,s)),this.el.removeChild=i=>(OE(this,RE,!0,"f"),!ME(this,PE,"f")&&this.circular&&t(),e.removeChild(i))}watchCircular(){this.swiper&&this.isWillLoadCalled&&this.reset()}watchDisplayMultipleItems(){this.swiper&&this.isWillLoadCalled&&this.reset()}componentWillLoad(){this.isWillLoadCalled=!0}componentDidLoad(){this.handleInit(),this.swiper&&this.swiperWrapper&&(this.observer=new MutationObserver(this.handleSwiperSizeDebounce),this.observer.observe(this.swiperWrapper,{childList:!0}))}disconnectedCallback(){var e;null===(e=this.observer)||void 0===e||e.disconnect()}handleInit(e=!1){const{autoplay:t,circular:i,current:s,currentItemId:r,displayMultipleItems:n,duration:a,interval:o,effectsProps:l,vertical:c}=this;let d=s;if(e)d=ME(this,DE,"f");else if(r){let e=0;this.getSlidersList().forEach((t,i)=>{t.itemId&&t.itemId===r&&(e=i)}),d=e}const h=this.getLoopAdditionalSlides(),u=1===n&&this.getNeedFixLoop(),p=n,f=this,g=Object.assign(Object.assign({pagination:{el:`.taro-swiper-${ME(this,_E,"f")} > .swiper-container > .swiper-pagination`},direction:c?"vertical":"horizontal",loop:i,slidesPerView:p,initialSlide:d,loopAdditionalSlides:h,speed:a,observeParents:!0,observer:!0,centeredSlides:u,zoom:this.zoom,nested:!0,touchReleaseOnEdges:!0,threshold:0},l),{on:{transitionEnd(e){if(ME(f,RE,"f")||ME(f,DE,"f")===this.realIndex)return;OE(f,DE,this.realIndex,"f"),f.getNeedFixLoop()&&e.loopFix(),f.autoplay&&e.autoplay.start();const t=f.getCurrentItemId(e);f.onAnimationFinish.emit({current:this.realIndex,source:ME(f,CE,"f"),currentItemId:t}),OE(f,CE,"autoplay","f")},touchMove(){OE(f,CE,"touch","f")},slideChange(e){if(ME(f,RE,"f")||ME(f,DE,"f")===this.realIndex)return;const t=f.getCurrentItemId(e);f.onChange.emit({current:this.realIndex,source:ME(f,CE,"f"),currentItemId:t})},init:e=>{f.getNeedFixLoop()&&e.loopFix(),f.autoplay&&e.autoplay.start()},touchEnd:e=>{OE(f,CE,"touch","f"),f.autoplay&&e.autoplay.start()},touchStart:e=>{OE(f,CE,"touch","f"),f.autoplay&&e.autoplay.pause()},autoplay(e){e.animating=!1,OE(f,CE,"autoplay","f")}}});if(t&&(g.autoplay={delay:o,disableOnInteraction:!1}),this.swiper=new Yb(`.taro-swiper-${ME(this,_E,"f")} > .swiper-container`,g),this.getNeedFixLoop()){const e=this.swiper.minTranslate.bind(this.swiper),t=this.swiper.maxTranslate.bind(this.swiper);u&&this.getSlidersList().length<4?(this.swiper.minTranslate=()=>e()+this.parseMargin()[1],this.swiper.maxTranslate=()=>t()-this.parseMargin()[0]):(this.swiper.minTranslate=()=>e()-this.parseMargin()[0],this.swiper.maxTranslate=()=>t()+this.parseMargin()[1])}this.swiperWrapper=this.swiper.wrapperEl}getLoopAdditionalSlides(){const e=this.getSlidersList().length;return!this.el||!this.getNeedFixLoop()||e<BE?0:e<=FE?1:2}getCurrentItemId(e){const t=e.slides,i=e.activeIndex,s=t[i];return s.getAttribute("item-id")}render(){const{vertical:e,indicatorDots:t,indicatorColor:i,indicatorActiveColor:s}=this,[r,n]=this.parseMargin(),a=["overflow: visible;",e?`margin-top: ${r}px; margin-bottom: ${n}px;`:`margin-right: ${n}px; margin-left: ${r}px;`,this.full?"height: 100%;":""],o=[t?"opacity: 1;":"display: none;","font-size: 0;"],l={overflow:"hidden"};return this.full&&(l.height="100%"),xd(kd,{class:`taro-swiper-${ME(this,_E,"f")}`,style:l},xd("div",{class:"swiper-container"},xd("style",{type:"text/css"},`\n              .taro-swiper-${ME(this,_E,"f")} > .swiper-container > .swiper-pagination > .swiper-pagination-bullet { background: ${i} }\n              .taro-swiper-${ME(this,_E,"f")} > .swiper-container > .swiper-pagination > .swiper-pagination-bullet-active { background: ${s} }\n              .taro-swiper-${ME(this,_E,"f")} > .swiper-container { ${a.join("")} }\n              .taro-swiper-${ME(this,_E,"f")} > .swiper-container > .swiper-pagination { ${o.join("")} }\n            `),xd("div",{class:"swiper-wrapper"},xd("slot",null)),xd("div",{class:"swiper-pagination"})))}get el(){return this}static get watchers(){return{current:["watchCurrent"],currentItemId:["watchCurrentItemId"],autoplay:["watchAutoplay"],duration:["watchDuration"],interval:["watchInterval"],swiperWrapper:["watchSwiperWrapper"],circular:["watchCircular"],displayMultipleItems:["watchDisplayMultipleItems"]}}static get style(){return IE}},[4,"taro-swiper-core",{indicatorDots:[4,"indicator-dots"],indicatorColor:[1,"indicator-color"],indicatorActiveColor:[1,"indicator-active-color"],autoplay:[4],current:[2],currentItemId:[1,"current-item-id"],interval:[2],duration:[2],circular:[4],vertical:[4],previousMargin:[1,"previous-margin"],nextMargin:[1,"next-margin"],displayMultipleItems:[2,"display-multiple-items"],full:[4],zoom:[4],effectsProps:[16],swiperWrapper:[32],swiper:[32],isWillLoadCalled:[32],observer:[32]}]);function UE(){if("undefined"===typeof customElements)return;const e=["taro-swiper-core"];e.forEach(e=>{switch(e){case"taro-swiper-core":customElements.get(e)||customElements.define(e,$E);break}})}_E=new WeakMap,CE=new WeakMap,RE=new WeakMap,PE=new WeakMap,DE=new WeakMap;const GE=UE,HE=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.itemId=void 0}connectedCallback(){this.el.className=wu(this.el.className,"swiper-slide")}componentDidRender(){Xh(this.el)}render(){return xd(kd,{"item-id":this.itemId},xd("slot",null))}get el(){return this}},[4,"taro-swiper-item-core",{itemId:[1,"item-id"]}]);function jE(){if("undefined"===typeof customElements)return;const e=["taro-swiper-item-core"];e.forEach(e=>{switch(e){case"taro-swiper-item-core":customElements.get(e)||customElements.define(e,HE);break}})}const zE=jE,VE='.weui-cell_switch{padding-top:6.5px;padding-bottom:6.5px}.weui-switch{appearance:none}.weui-switch,.weui-switch-cp__box{box-sizing:border-box;background-color:#dfdfdf;border:1px solid #dfdfdf;border-radius:16px;outline:0;width:52px;height:32px;transition:background-color .1s,border .1s;position:relative}.weui-switch:before,.weui-switch-cp__box:before{content:" ";background-color:#fdfdfd;border-radius:15px;width:50px;height:30px;transition:transform .35s cubic-bezier(.45,1,.4,1);position:absolute;top:0;left:0}.weui-switch:after,.weui-switch-cp__box:after{content:" ";background-color:#fff;border-radius:15px;width:30px;height:30px;transition:transform .35s cubic-bezier(.4,.4,.25,1.35);position:absolute;top:0;left:0;box-shadow:0 1px 3px rgba(0,0,0,.4)}.weui-switch:checked,.weui-switch-cp__input:checked~.weui-switch-cp__box{background-color:#04be02;border-color:#04be02}.weui-switch:checked:before,.weui-switch-cp__input:checked~.weui-switch-cp__box:before{transform:scale(0)}.weui-switch:checked:after,.weui-switch-cp__input:checked~.weui-switch-cp__box:after{transform:translate(20px)}.weui-switch-cp__input{position:absolute;left:-9999px}.weui-switch-cp__box{display:block}taro-switch-core{width:52px;height:32px;display:inline-block}taro-switch-core .weui-switch{width:100%;height:100%;display:block}',YE=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onChange=Od(this,"change",7),this.switchChange=e=>{e.stopPropagation();const t=e.target.checked;this.checked=t,this.onChange.emit({value:t})},this.type="switch",this.checked=!1,this.color="#04BE02",this.name=void 0,this.disabled=!1,this.nativeProps={},this.isWillLoadCalled=!1}function(e){this.isWillLoadCalled&&this.inputRef.checked!==e&&(this.inputRef.checked=e)}componentWillLoad(){this.isWillLoadCalled=!0}componentDidLoad(){Object.defineProperty(this.el,"value",{get:()=>this.checked,configurable:!0})}render(){const{type:e,color:t,checked:i,name:s,disabled:r,nativeProps:n}=this,a=i?{borderColor:t||"04BE02",backgroundColor:t||"04BE02"}:{};return xd("input",Object.assign({ref:e=>{this.inputRef=e},type:"checkbox",class:`weui-${e}`,style:a,checked:i,name:s,disabled:r,onChange:this.switchChange},n))}get el(){return this}static get watchers(){return{checked:["function"]}}static get style(){return VE}},[0,"taro-switch-core",{type:[1],checked:[1028],color:[1],name:[1],disabled:[4],nativeProps:[16],isWillLoadCalled:[32]}]);function WE(){if("undefined"===typeof customElements)return;const e=["taro-switch-core"];e.forEach(e=>{switch(e){case"taro-switch-core":customElements.get(e)||customElements.define(e,YE);break}})}const KE=WE,qE=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("TabItem",this)}render(){return xd(kd,null)}},[0,"taro-tab-item-core"]);function XE(){if("undefined"===typeof customElements)return;const e=["taro-tab-item-core"];e.forEach(e=>{switch(e){case"taro-tab-item-core":customElements.get(e)||customElements.define(e,qE);break}})}const QE=XE;function ZE(e){return"/"===e.charAt(0)}function JE(e,t){for(var i=t,s=i+1,r=e.length;s<r;i+=1,s+=1)e[i]=e[s];e.pop()}function ew(e,t){void 0===t&&(t="");var i,s=e&&e.split("/")||[],r=t&&t.split("/")||[],n=e&&ZE(e),a=t&&ZE(t),o=n||a;if(e&&ZE(e)?r=s:s.length&&(r.pop(),r=r.concat(s)),!r.length)return"/";if(r.length){var l=r[r.length-1];i="."===l||".."===l||""===l}else i=!1;for(var c=0,d=r.length;d>=0;d--){var h=r[d];"."===h?JE(r,d):".."===h?(JE(r,d),c++):c&&(JE(r,d),c--)}if(!o)for(;c--;c)r.unshift("..");!o||""===r[0]||r[0]&&ZE(r[0])||r.unshift("");var u=r.join("/");return i&&"/"!==u.substr(-1)&&(u+="/"),u}const tw=e=>{let t,i=e||"";const s={path:null,query:null,fragment:null};return t=i.indexOf("#"),t>-1&&(s.fragment=i.substring(t+1),i=i.substring(0,t)),t=i.indexOf("?"),t>-1&&(s.query=i.substring(t+1),i=i.substring(0,t)),s.path=i,s},iw=({index:e,isSelected:t=!1,textColor:i,iconPath:s,badgeText:r,showRedDot:n=!1,pagePath:a,text:o,onSelect:l})=>{const c=wu("weui-tabbar__item",{"weui-bar__item_on":t}),d={position:"absolute",top:"-2px",right:"-13px"},h={position:"absolute",top:"0",right:"-6px"};function u(){const t=US.getCurrentPages().shift();"function"===typeof(null===t||void 0===t?void 0:t.onTabItemTap)&&rg(this)&&t.onTabItemTap({index:e,pagePath:a,text:o}),l(e)}return xd("a",{key:e,href:"javascript:;",class:c,onClick:u},xd("span",{style:{display:"inline-block",position:"relative"}},xd("img",{src:s,alt:"",class:"weui-tabbar__icon"}),!!r&&xd("span",{class:"weui-badge taro-tabbar-badge",style:d},r),n&&xd("span",{class:"weui-badge weui-badge_dot",style:h})),xd("p",{class:"weui-tabbar__label",style:{color:i}},o))},sw='.weui-tabbar{z-index:500;background-color:#f7f7fa;align-items:center;width:100%;display:flex;position:absolute;bottom:0}.weui-tabbar:before{content:" ";color:#c0bfc4;transform-origin:0 0;border-top:1px solid #c0bfc4;height:1px;position:absolute;top:0;left:0;right:0;transform:scaleY(.5)}.weui-tabbar__item{padding:5px 0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom);color:#999;text-align:center;-webkit-tap-highlight-color:transparent;flex:1;font-size:0;display:block}.weui-tabbar__item.weui-bar__item_on .weui-tabbar__icon,.weui-tabbar__item.weui-bar__item_on .weui-tabbar__icon>i,.weui-tabbar__item.weui-bar__item_on .weui-tabbar__label{color:#09bb07}.weui-tabbar__icon{width:27px;height:27px;display:inline-block}.weui-tabbar__icon img{width:100%;height:100%}i.weui-tabbar__icon,.weui-tabbar__icon>i{color:#999;font-size:24px}.weui-tabbar__label{text-align:center;color:#999;font-size:10px;line-height:1.8}.weui-badge{color:#fff;text-align:center;vertical-align:middle;background-color:#f43530;border-radius:18px;min-width:8px;padding:.15em .4em;font-size:12px;line-height:1.2;display:inline-block}.weui-badge_dot{min-width:0;padding:.4em}:root{--taro-tabbar-height:50px}#app{height:100%}.taro-tabbar__border-white:before{border-top-color:#fff!important}.taro-tabbar__container{flex-direction:column;height:100%;display:flex;overflow:hidden}.taro-tabbar__panel{-webkit-overflow-scrolling:auto;flex:1;position:relative;overflow:auto}.taro-tabbar__tabbar{width:100%;height:var(--taro-tabbar-height);transition:bottom .2s,top .2s;position:relative}.taro-tabbar__tabbar-top{top:0}.taro-tabbar__tabbar-bottom{margin-bottom:constant(safe-area-inset-bottom);margin-bottom:env(safe-area-inset-bottom);bottom:0}.taro-tabbar__tabbar-hide{display:none}.taro-tabbar__tabbar-slideout{flex:0 0;top:-52px}.taro-tabbar__panel+.taro-tabbar__tabbar-slideout{top:auto;bottom:-52px}',rw=0,nw=1,aw=2,ow="taro-tabbar__tabbar",lw="taro-tabbar__tabbar-hide",cw="taro-tabbar__tabbar-slideout",dw=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onLongPress=Od(this,"longpress",7),this.homePage="",this.customRoutes=[],this.tabbarPos="bottom",this.getOriginUrl=e=>{const t=this.customRoutes.filter(([,t])=>{const i=tw(t).path,s=tw(e).path;return i===s});return De(t.length?t[0][0]:e,".html")},this.getSelectedIndex=e=>{let t=-1;return this.list.forEach(({pagePath:i},s)=>{const r=tw(e).path,n=tw(i).path;r===n&&(t=s)}),t},this.switchTab=e=>{this.selectedIndex=e,US.switchTab({url:this.list[e].pagePath})},this.switchTabHandler=({url:e,successHandler:t,errorHandler:i})=>{const s=this.getOriginUrl(this.getCurrentUrl()||this.homePage),r=ew(e,s),n=this.getSelectedIndex(r);n>-1?(this.switchTab(n),t({errMsg:"switchTab:ok"})):i({errMsg:`switchTab:fail page "${r}" is not found`})},this.routerChangeHandler=e=>{var t;const i=null===(t=null===e||void 0===e?void 0:e.toLocation)||void 0===t?void 0:t.path;let s;if("string"===typeof i){const e=this.conf.basename||"/";s=Re(_e(i||this.homePage),e)||"/"}else s=this.getCurrentUrl();this.selectedIndex=this.getSelectedIndex(this.getOriginUrl(s))},this.setTabBarBadgeHandler=({index:e,text:t,successHandler:i,errorHandler:s})=>{const r=[...this.list];e in r?(r[e].showRedDot=!1,r[e].badgeText=t,i({errMsg:"setTabBarBadge:ok"})):s({errMsg:"setTabBarBadge:fail tabbar item not found"}),this.list=r},this.removeTabBarBadgeHandler=({index:e,successHandler:t,errorHandler:i})=>{const s=[...this.list];e in s?(s[e].badgeText=null,s[e].badgeText=null,t({errMsg:"removeTabBarBadge:ok"})):i({errMsg:"removeTabBarBadge:fail tabbar item not found"}),this.list=s},this.showTabBarRedDotHandler=({index:e,successHandler:t,errorHandler:i})=>{const s=[...this.list];e in s?(s[e].badgeText=null,s[e].showRedDot=!0,t({errMsg:"showTabBarRedDot:ok"})):i({errMsg:"showTabBarRedDot:fail tabbar item not found"}),this.list=s},this.hideTabBarRedDotHandler=({index:e,successHandler:t,errorHandler:i})=>{const s=[...this.list];e in s?(s[e].showRedDot=!1,t({errMsg:"hideTabBarRedDot:ok"})):i({errMsg:"hideTabBarRedDot:fail tabbar item not found"}),this.list=s},this.showTabBarHandler=({successHandler:e})=>{this.status=rw,e({errMsg:"showTabBar:ok"})},this.hideTabBarHandler=({animation:e,successHandler:t})=>{this.status=e?aw:nw,t({errMsg:"hideTabBar:ok"})},this.setTabBarStyleHandler=({color:e,selectedColor:t,backgroundColor:i,borderStyle:s,successHandler:r})=>{i&&(this.backgroundColor=i),s&&(this.borderStyle=s),e&&(this.color=e),t&&(this.selectedColor=t),r({errMsg:"setTabBarStyle:ok"})},this.setTabBarItemHandler=({index:e,iconPath:t,selectedIconPath:i,text:s,successHandler:r,errorHandler:n})=>{const a=[...this.list];e in a?(t&&(a[e].iconPath=t),i&&(a[e].selectedIconPath=i),s&&(a[e].text=s),r({errMsg:"setTabBarItem:ok"})):n({errMsg:"setTabBarItem:fail tabbar item not found"}),this.list=a},this.conf=void 0,this.list=void 0,this.borderStyle=void 0,this.backgroundColor=void 0,this.color=void 0,this.selectedColor=void 0,this.selectedIndex=-1,this.status=rw}componentWillLoad(){var e,t;const i=(null===(e=this.conf)||void 0===e?void 0:e.list)||[],s=(null===(t=this.conf)||void 0===t?void 0:t.customRoutes)||{};if("[object Array]"!==Object.prototype.toString.call(i)||i.length<2||i.length>5)throw new Error("tabBar \u914d\u7f6e\u9519\u8bef");this.homePage=_e(this.conf.homePage);for(let r in s){const e=s[r];r=_e(r),"string"===typeof e?this.customRoutes.push([r,_e(e)]):(null===e||void 0===e?void 0:e.length)>0&&this.customRoutes.push(...e.map(e=>[r,_e(e)]))}i.forEach(e=>{0!==e.pagePath.indexOf("/")&&(e.pagePath="/"+e.pagePath)}),this.list=i,this.borderStyle=this.conf.borderStyle,this.backgroundColor=this.conf.backgroundColor,this.color=this.conf.color,this.selectedColor=this.conf.selectedColor}getCurrentUrl(){const e=Oe(this.conf.mode,this.conf.basename);return decodeURI("/"===e?this.homePage:e)}bindEvent(){US.eventCenter.on("__taroRouterChange",this.routerChangeHandler),US.eventCenter.on("__taroSwitchTab",this.switchTabHandler),US.eventCenter.on("__taroSetTabBarBadge",this.setTabBarBadgeHandler),US.eventCenter.on("__taroRemoveTabBarBadge",this.removeTabBarBadgeHandler),US.eventCenter.on("__taroShowTabBarRedDotHandler",this.showTabBarRedDotHandler),US.eventCenter.on("__taroHideTabBarRedDotHandler",this.hideTabBarRedDotHandler),US.eventCenter.on("__taroShowTabBar",this.showTabBarHandler),US.eventCenter.on("__taroHideTabBar",this.hideTabBarHandler),US.eventCenter.on("__taroSetTabBarStyle",this.setTabBarStyleHandler),US.eventCenter.on("__taroSetTabBarItem",this.setTabBarItemHandler)}removeEvent(){US.eventCenter.off("__taroRouterChange",this.routerChangeHandler),US.eventCenter.off("__taroSwitchTab",this.switchTabHandler),US.eventCenter.off("__taroSetTabBarBadge",this.setTabBarBadgeHandler),US.eventCenter.off("__taroRemoveTabBarBadge",this.removeTabBarBadgeHandler),US.eventCenter.off("__taroShowTabBarRedDotHandler",this.showTabBarRedDotHandler),US.eventCenter.off("__taroHideTabBarRedDotHandler",this.hideTabBarRedDotHandler),US.eventCenter.off("__taroShowTabBar",this.showTabBarHandler),US.eventCenter.off("__taroHideTabBar",this.hideTabBarHandler),US.eventCenter.off("__taroSetTabBarStyle",this.setTabBarStyleHandler),US.eventCenter.off("__taroSetTabBarItem",this.setTabBarItemHandler)}componentDidLoad(){this.tabbarPos=this.tabbar.nextElementSibling?"top":"bottom",this.bindEvent(),this.routerChangeHandler()}disconnectedCallback(){this.removeEvent()}render(){const{tabbarPos:e="bottom"}=this,t=this.status,i=wu("weui-tabbar",{[`taro-tabbar__border-${this.borderStyle||"black"}`]:!0}),s=-1===this.selectedIndex||t===nw,r=t===aw;return xd(kd,{class:wu(ow,`${ow}-${e}`,{[lw]:s,[cw]:r})},xd("div",{class:i,style:{backgroundColor:this.backgroundColor||"",height:"inherit"}},this.list.map((e,t)=>{const i=this.selectedIndex===t;let s,r;return i?(s=this.selectedColor||"",r=e.selectedIconPath):(s=this.color||"",r=e.iconPath),xd(iw,{index:t,onSelect:this.switchTab.bind(this),isSelected:i,textColor:s,iconPath:r,pagePath:e.pagePath,text:e.text,badgeText:e.badgeText,showRedDot:e.showRedDot})})))}get tabbar(){return this}static get style(){return sw}},[0,"taro-tabbar",{conf:[16],list:[32],borderStyle:[32],backgroundColor:[32],color:[32],selectedColor:[32],selectedIndex:[32],status:[32]}]);function hw(){if("undefined"===typeof customElements)return;const e=["taro-tabbar"];e.forEach(e=>{switch(e){case"taro-tabbar":customElements.get(e)||customElements.define(e,dw);break}})}const uw=hw,pw=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("Tabs",this)}render(){return xd(kd,null)}},[0,"taro-tabs-core"]);function fw(){if("undefined"===typeof customElements)return;const e=["taro-tabs-core"];e.forEach(e=>{switch(e){case"taro-tabs-core":customElements.get(e)||customElements.define(e,pw);break}})}const gw=fw,mw=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("TapGestureHandler",this)}render(){return xd(kd,null)}},[0,"taro-tap-gesture-handler-core"]);function vw(){if("undefined"===typeof customElements)return;const e=["taro-tap-gesture-handler-core"];e.forEach(e=>{switch(e){case"taro-tap-gesture-handler-core":customElements.get(e)||customElements.define(e,mw);break}})}const yw=vw,bw="taro-text-core{user-select:none;display:inline}taro-text-core[selectable=true],taro-text-core[user-select=true]{user-select:text;display:inline-block}taro-text-core[space]{white-space:pre-wrap}taro-text-core[space=ensp]{word-spacing:.5em}taro-text-core[space=nbsp]{word-spacing:1em}taro-text-core[number-of-lines]{--line-clamp:2;word-wrap:break-word;text-overflow:ellipsis;-webkit-line-clamp:var(--line-clamp);-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden}",Ew=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.selectable=!1,this.userSelect=!1,this.space=void 0,this.numberOfLines=void 0}render(){const e={};return"number"===typeof this.numberOfLines&&(e["--line-clamp"]=this.numberOfLines),xd(kd,{style:e},xd("slot",null))}static get style(){return bw}},[4,"taro-text-core",{selectable:[1028],userSelect:[1028,"user-select"],space:[1025],numberOfLines:[2,"number-of-lines"]}]);function ww(){if("undefined"===typeof customElements)return;const e=["taro-text-core"];e.forEach(e=>{switch(e){case"taro-text-core":customElements.get(e)||customElements.define(e,Ew);break}})}const Aw=ww,Tw="taro-textarea-core{width:300px;display:block}taro-textarea-core .auto-height{height:auto}.taro-textarea{width:100%;height:inherit;appearance:none;cursor:auto;border:0;line-height:1.5;display:block;position:relative}.taro-textarea:focus{outline:none}";function Sw(e){return null!==e&&void 0!==e?e:""}const xw=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onInput=Od(this,"input",7),this.onFocus=Od(this,"focus",7),this.onBlur=Od(this,"blur",7),this.onConfirm=Od(this,"confirm",7),this.onChange=Od(this,"change",7),this.onLineChange=Od(this,"linechange",7),this.onKeyDown=Od(this,"keydown",7),this.handleInput=e=>{e.stopPropagation(),this.handleLineChange();const t=e.target.value||"";this.value=t,this.onInput.emit({value:t,cursor:t.length})},this.handleFocus=e=>{e.stopPropagation(),this.onFocus.emit({value:e.target.value})},this.handleBlur=e=>{e.stopPropagation(),this.onBlur.emit({value:e.target.value})},this.handleChange=e=>{e.stopPropagation(),this.onChange.emit({value:e.target.value})},this.handleLineChange=()=>{const e=this.getNumberOfLines();e!==this.line&&(this.line=e,this.onLineChange.emit({height:this.textareaRef.clientHeight,lineCount:this.line}))},this.handleKeyDown=e=>{e.stopPropagation();const{value:t}=e.target,i=e.keyCode||e.code;this.onKeyDown.emit({value:t,cursor:t.length,keyCode:i}),13===i&&this.onConfirm.emit({value:t})},this.calculateContentHeight=(e,t)=>{let i=e.style.height,s=e.offsetHeight,r=e.scrollHeight,n=e.style.overflow,a=e.style.minHeight||null;if(!(s>=r))return r;if(e.style.minHeight=0,e.style.height=s+t+"px",e.style.overflow="hidden",r<e.scrollHeight){while(e.offsetHeight>=e.scrollHeight)e.style.height=(s-=t)+"px";while(e.offsetHeight<e.scrollHeight)e.style.height=s+++"px";return e.style.height=i,e.style.overflow=n,e.style.minHeight=a,s}},this.getNumberOfLines=()=>{const e=this.textareaRef,t=window.getComputedStyle?window.getComputedStyle(e):e.style,i=parseInt(t.lineHeight,10),s=this.calculateContentHeight(e,i),r=Math.floor(s/i);return r},this.value="",this.placeholder=void 0,this.disabled=!1,this.maxlength=140,this.autoFocus=!1,this.autoHeight=!1,this.name=void 0,this.nativeProps={},this.line=1}watchAutoFocus(e,t){var i;!t&&e&&(null===(i=this.textareaRef)||void 0===i||i.focus())}watchValue(e){const t=Sw(e);this.textareaRef.value!==t&&(this.textareaRef.value=t)}focus(){return d(this,null,function*(){this.textareaRef.focus()})}render(){const{value:e,placeholder:t,disabled:i,maxlength:s,autoFocus:r,autoHeight:n,name:a,nativeProps:o,handleInput:l,handleFocus:c,handleBlur:d,handleChange:h}=this,u={};return n&&(u.rows=this.line),xd("textarea",Object.assign({ref:e=>{e&&(this.textareaRef=e,r&&e&&e.focus())},class:"taro-textarea "+(n?"auto-height":""),value:Sw(e),placeholder:t,name:a,disabled:i,maxlength:s,autofocus:r,onInput:l,onFocus:c,onBlur:d,onChange:h,onKeyDown:this.handleKeyDown},o,u))}get el(){return this}static get watchers(){return{autoFocus:["watchAutoFocus"],value:["watchValue"]}}static get style(){return Tw}},[0,"taro-textarea-core",{value:[1025],placeholder:[1],disabled:[4],maxlength:[2],autoFocus:[4,"focus"],autoHeight:[4,"auto-height"],name:[1],nativeProps:[16],line:[32],focus:[64]}]);function Lw(){if("undefined"===typeof customElements)return;const e=["taro-textarea-core"];e.forEach(e=>{switch(e){case"taro-textarea-core":customElements.get(e)||customElements.define(e,xw);break}})}const kw=Lw,Iw=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("VerticalDragGestureHandler",this)}render(){return xd(kd,null)}},[0,"taro-vertical-drag-gesture-handler-core"]);function _w(){if("undefined"===typeof customElements)return;const e=["taro-vertical-drag-gesture-handler-core"];e.forEach(e=>{switch(e){case"taro-vertical-drag-gesture-handler-core":customElements.get(e)||customElements.define(e,Iw);break}})}const Cw=_w,Rw=e=>{if(!e)return"";const t=Math.round(e%60),i=Math.round((e-t)/60);return`${i<10?`0${i}`:i}:${t<10?`0${t}`:t}`},Pw=(e,t)=>Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),Dw=e=>Math.max(-1,Math.min(e,1));let Mw="default";const Ow=function(){let e;const t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];var i=["webkitEnterFullscreen","webkitExitFullscreen","webkitCurrentFullScreenElement","webkitSupportsFullscreen","fullscreenchange","fullscreenerror"];let s=0;const r=t.length,n={};for(;s<r;s++)if(e=t[s],e&&e[1]in document){for(s=0;s<e.length;s++)n[t[0][s]]=e[s];return n}if(!n[t[0][0]])for(Mw="iOS",s=0;s<i.length;s++)n[t[0][s]]=i[s];return n}(),Nw=e=>/\.(m3u8)($|\?)/i.test(e),Bw=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.visible=!1,this.isDraggingProgressBall=!1,this.percentage=0,this.progressDimensions={left:0,width:0},this.calcPercentage=e=>{let t=e-this.progressDimensions.left;return t=Math.max(t,0),t=Math.min(t,this.progressDimensions.width),t/this.progressDimensions.width},this.onDragProgressBallStart=()=>{this.isDraggingProgressBall=!0,this.hideControlsTimer&&clearTimeout(this.hideControlsTimer)},this.onClickProgress=e=>{e.stopPropagation();const t=this.calcPercentage(e.pageX);this.seekFunc(t*this.duration),this.toggleVisibility(!0)},this.controls=void 0,this.currentTime=void 0,this.duration=void 0,this.isPlaying=void 0,this.pauseFunc=void 0,this.playFunc=void 0,this.seekFunc=void 0,this.showPlayBtn=void 0,this.showProgress=void 0}onDocumentTouchMove(e){if(!this.isDraggingProgressBall)return;const t=e.touches[0].pageX;this.percentage=this.calcPercentage(t),this.setProgressBall(this.percentage),this.setCurrentTime(this.percentage*this.duration)}onDocumentTouchEnd(){this.isDraggingProgressBall&&(this.isDraggingProgressBall=!1,this.seekFunc(this.percentage*this.duration),this.toggleVisibility(!0))}setProgressBall(e){return d(this,null,function*(){this.progressBallRef&&(this.progressBallRef.style.left=100*e+"%")})}toggleVisibility(e){return d(this,null,function*(){const t=void 0===e?!this.visible:e;t?(this.hideControlsTimer&&clearTimeout(this.hideControlsTimer),this.isPlaying&&(this.hideControlsTimer=setTimeout(()=>{this.toggleVisibility(!1)},2e3)),this.el.style.visibility="visible"):this.el.style.visibility="hidden",this.visible=!!t})}getIsDraggingProgressBall(){return d(this,null,function*(){return this.isDraggingProgressBall})}setCurrentTime(e){return d(this,null,function*(){this.currentTimeRef.innerHTML=Rw(e)})}render(){const{controls:e,currentTime:t,duration:i,isPlaying:s,pauseFunc:r,playFunc:n,showPlayBtn:a,showProgress:o}=this,l=Rw(i);let c;return c=a?xd("div",s?{class:"taro-video-control-button taro-video-control-button-pause",onClick:r}:{class:"taro-video-control-button taro-video-control-button-play",onClick:n}):null,xd(kd,{class:"taro-video-bar taro-video-bar-full"},e&&xd("div",{class:"taro-video-controls"},c,o&&xd("div",{class:"taro-video-current-time",ref:e=>this.currentTimeRef=e},Rw(t)),o&&xd("div",{class:"taro-video-progress-container",onClick:this.onClickProgress},xd("div",{class:"taro-video-progress",ref:e=>{if(!e)return;const t=e.getBoundingClientRect();this.progressDimensions.left=t.left,this.progressDimensions.width=t.width}},xd("div",{class:"taro-video-progress-buffered",style:{width:"100%"}}),xd("div",{class:"taro-video-ball",ref:e=>this.progressBallRef=e,onTouchStart:this.onDragProgressBallStart,style:{left:(l?this.currentTime/i*100:0)+"%"}},xd("div",{class:"taro-video-inner"})))),o&&xd("div",{class:"taro-video-duration"},l)),xd("slot",null))}get el(){return this}},[4,"taro-video-control",{controls:[4],currentTime:[2,"current-time"],duration:[2],isPlaying:[4,"is-playing"],pauseFunc:[16],playFunc:[16],seekFunc:[16],showPlayBtn:[4,"show-play-btn"],showProgress:[4,"show-progress"],setProgressBall:[64],toggleVisibility:[64],getIsDraggingProgressBall:[64],setCurrentTime:[64]},[[5,"touchmove","onDocumentTouchMove"],[5,"touchend","onDocumentTouchEnd"],[5,"touchcancel","onDocumentTouchEnd"]]]);function Fw(){if("undefined"===typeof customElements)return;const e=["taro-video-control"];e.forEach(e=>{switch(e){case"taro-video-control":customElements.get(e)||customElements.define(e,Bw);break}})}const $w=Fw,Uw=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.list=[],this.danmuElList=[],this.currentTime=0,this.enable=!1,this.danmuList=[]}ensureProperties(e){const t=Object.assign({},e);return"time"in e||(t.time=this.currentTime),t.key=Math.random(),t.bottom=90*Math.random()+5+"%",t}sendDanmu(){return d(this,arguments,function*(e=[]){if(Array.isArray(e))this.list=[...this.list,...e.map(e=>this.ensureProperties(e))];else{const t=e;this.list=[...this.list,Object.assign({},this.ensureProperties(t))]}})}tick(e){return d(this,null,function*(){if(this.currentTime=e,!this.enable)return;const t=this.list,i=t.filter(({time:t})=>e-t<4&&e>t);let s=!1;const r=this.danmuList;s=i.length!==r.length||i.some(({key:e})=>r.every(t=>e!==t.key)),s&&(this.danmuList=i)})}componentDidUpdate(){requestAnimationFrame(()=>{setTimeout(()=>{const e=this.danmuElList.splice(0);e.forEach(e=>{e.style.left="0",e.style.webkitTransform="translateX(-100%)",e.style.transform="translateX(-100%)"})})})}render(){return this.enable?xd(kd,{class:"taro-video-danmu"},this.danmuList.map(({text:e,color:t,bottom:i,key:s})=>xd("p",{class:"taro-video-danmu-item",key:s,style:{color:t,bottom:i},ref:e=>{e&&this.danmuElList.push(e)}},e))):""}},[0,"taro-video-danmu",{enable:[4],danmuList:[32],sendDanmu:[64],tick:[64]}]);function Gw(){if("undefined"===typeof customElements)return;const e=["taro-video-danmu"];e.forEach(e=>{switch(e){case"taro-video-danmu":customElements.get(e)||customElements.define(e,Uw);break}})}const Hw='.taro-video{width:100%;height:225px;line-height:0;display:inline-block;position:relative;overflow:hidden}.taro-video[hidden]{display:none}.taro-video-container{object-position:inherit;background-color:#000;width:100%;height:100%;display:inline-block;position:absolute;top:0;left:0}.taro-video-container.taro-video-type-fullscreen{z-index:999;position:fixed;inset:0}.taro-video-container.taro-video-type-fullscreen.taro-video-type-rotate-left{transform:translate(-50%,-50%)rotate(-90deg)}.taro-video-container.taro-video-type-fullscreen.taro-video-type-rotate-right{transform:translate(-50%,-50%)rotate(90deg)}.taro-video-video{object-position:inherit;width:100%;height:100%;display:block}.taro-video-cover{z-index:1;background-color:rgba(1,1,1,.5);-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;-webkit-box-pack:center;justify-content:center;align-items:center;width:100%;display:flex;position:absolute;top:0;bottom:0;left:0}.taro-video-cover-play-button{background-position:50%;background-repeat:no-repeat;background-size:50%;width:40px;height:40px}.taro-video-cover-duration{color:#fff;margin-top:10px;font-size:16px;line-height:1}.taro-video-bar{visibility:hidden;z-index:1;background-color:rgba(0,0,0,.5);-webkit-box-align:center;align-items:center;height:44px;padding:0 10px;display:flex;position:absolute;bottom:0;right:0;overflow:hidden}.taro-video-bar.taro-video-bar-full{left:0}.taro-video-controls{-webkit-box-flex:1;flex-grow:1;margin:0 8.5px;display:flex}.taro-video-control-button{box-sizing:content-box;width:13px;height:15px;margin-left:-8.5px;padding:14.5px 12.5px}.taro-video-control-button:after{content:"";background-position:50%;background-repeat:no-repeat;background-size:100%;width:100%;height:100%;display:block}.taro-video-control-button.taro-video-control-button-play:after,.taro-video-cover-play-button{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAeCAYAAAAy2w7YAAAAAXNSR0IArs4c6QAAAWhJREFUSA1j+P///0cgBoHjQGzCQCsAtgJB/AMy5wCxGNXtQ9iBwvoA5BUCMQvVLEQxHpNzDSjkRhXLMM3GKrIeKKpEkYVYjcUu+AMo3ALE3GRZiN1MvKKPgbIRJFuG10j8koeA0gZEW4jfLIKyf4EqpgOxMEELCRpFnIJ3QGU5QMyM00LizCFa1SWgSkeslhFtBGkKVwGVy6FYSJp+klR/A6quB2JOkIWMIK0oNlOf8xBoZDE9LAI7nYn6HsBq4l96WHQEaLUpAyiOaASeAM2NgvuPBpaACt82IEYtfKls0UagecpwXyAzqGTRdaA57sjmYrAptAjUsCkGYlYMg9EFyLQI1IiZB8Ti6Obh5JNh0QmgHlOcBuKSIMGi50C18UDMiMssvOJEWPQLqKYbiHnxGkRIkoBF24DyaoTMIEoeh0W3geI+RBlArCI0iz4D+RVAzEasfqLVAQ19AcSg5LoYiKWI1kiiQgCMBLnEEcfDSgAAAABJRU5ErkJggg==)}.taro-video-control-button.taro-video-control-button-pause:after{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAgCAYAAAAffCjxAAAAAXNSR0IArs4c6QAAAFlJREFUSA3tksEKACAIQ7X//5zq98wOgQayum8QaGweHhMzG/6OujzKAymn+0LMqivu1XznWmX8/echTIyMyAgTwA72iIwwAexgj8gIE8CO3aMRbDPMaEy5BRGaKcZv8YxRAAAAAElFTkSuQmCC)}.taro-video-current-time,.taro-video-duration{color:#cbcbcb;height:14.5px;margin-top:15px;margin-bottom:14.5px;font-size:12px;line-height:14.5px}.taro-video-progress-container{-webkit-box-flex:2;flex-grow:2;position:relative}.taro-video-progress{background-color:rgba(255,255,255,.4);height:2px;margin:21px 12px;position:relative}.taro-video-progress-buffered{background-color:rgba(255,255,255,.8);width:0;height:100%;transition:width .1s;position:absolute;top:0;left:0}.taro-video-ball{box-sizing:content-box;width:16px;height:16px;margin-left:-22px;padding:14px;position:absolute;top:-21px;left:0}.taro-video-inner{background-color:#fff;border-radius:50%;width:100%;height:100%}.taro-video-danmu-button{color:#fff;white-space:nowrap;border:1px solid #fff;border-radius:5px;margin:0 8.5px;padding:2px 10px;font-size:13px;line-height:1}.taro-video-danmu-button.taro-video-danmu-button-active{color:#48c23d;border-color:#48c23d}.taro-video-fullscreen,.taro-video-mute{box-sizing:content-box;background-position:50%;background-repeat:no-repeat;background-size:50%;width:17px;height:17px;padding:8.5px}.taro-video-fullscreen{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAhUlEQVRYR+2WSwrAMAhEnZO3PfmULLooGEFTiIXJ2s/kRY2wzQeb85sE9CRA8jSzY1YfAFzhJBnU1AVgxH2dSiArCnD9QgGzRNnOech48SRABHoSyFb5in3PSbhyo6yvCPQkEM3u7BsPe/0FIvBfAh/vhKmVbO9SWun1qk/PSVi9TcVPBG6R1YIhgWwNpQAAAABJRU5ErkJggg==)}.taro-video-fullscreen.taro-video-type-fullscreen{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABPUlEQVRYR+2Xu0pDURBF1/ZLxNcHKNiIlfhA7C0UBSEE8RNEBNFPUEQEEbGxFiSSSrCwEHsf5E/ccsSUuWfUhKQ40947+y42Z8+ZK/pcinzf9hhwD1xJ2q/qsb0JHAOzkl5y+lGAGnCWICQtZgAS6DxQk3TeLYA6cAo0JSXxjmW7CcwBdUkJurKiDhSA4kBvHbA9CqwBQx2O7BSw8ssU3ALPFRF4knT3nQLbr8B4LjLBOdAAFgJaLUkjbYC9n+zm+i4kXWbmwCqwnRMCHiXthuZAQOzPrxSA4kBxYDAcsH0EzATCfCLpJjOINoCtgFZabg7bk7AFDAeaGpKWgitZTu5N0kQbYBmYrujo9mX0CVxL+gidAdu9vY5zXhWA4sAgOND3X7NJ4AHYCaxkB8B62gslvecSFpoDOZH/PP8Cnt7hIaM5xCEAAAAASUVORK5CYII=)}.taro-video-mute{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGAGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTktMDQtMTFUMTA6MTg6MjArMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE5LTA0LTExVDEwOjIyOjIyKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE5LTA0LTExVDEwOjIyOjIyKzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk3YmE4Yjg0LTFhNTYtNGM1MS04NDVkLTNiZmYyMGI0ZDc0ZiIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjg1NGQ3MjlkLWUwNjctZjU0OC1hMTlhLTBlZjQ4OGRkYjJiOSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjA1ODY3ZDFlLWQ3NGEtNDgyNC04MDU3LTYzYmRmMTdjODk5ZSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MDU4NjdkMWUtZDc0YS00ODI0LTgwNTctNjNiZGYxN2M4OTllIiBzdEV2dDp3aGVuPSIyMDE5LTA0LTExVDEwOjE4OjIwKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTdiYThiODQtMWE1Ni00YzUxLTg0NWQtM2JmZjIwYjRkNzRmIiBzdEV2dDp3aGVuPSIyMDE5LTA0LTExVDEwOjIyOjIyKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz459+FoAAABqElEQVRYhc2XPWsVQRSGnxPjF4oGRfxoRQKGWCU2Ft7CykrQWosEyf/If0hhIPgHDEmbNJZqCFxiQEgTUGxsBUVEHgvnyrjZZJO92V1fGIaZnTPvszPszNlQ6VIjnbr/DwCoDLMNak/dUVfUK0f2rQugnlcX/FevWgFQH6gf3autRgHUC+piiXHzAOmtPx9gXgug8itQx9SXwDpw47AGKXZWvXvQmNFCwE3gCXA2dY0Az4GrRzHONA9cU/vAbERsllEOyh31e8USV2mrMPdG9uyn+rDom2/BHHCm5puWKiKmgdtAnz+rvaxO5mNygEvHaZ5BfADuARvAaWBpP4DGFBHfgBngFzClTrUKkCDeA+9S837rAEnbqb7VFcCpVJ/oCmCw959aB1AfAROpudYqgDoOLKRmPyLelAF8bcD4pPoMeAtcB34AT4uDBqXXwFG8XXUU/72MIuK1OgE8Bs6l7mEvo8up7lN1Ge0n9aK6VHMFZvJTr9S3CiALaCQhqZOSvegMIAvu2UVSWpigLC1fbQ0gm6in7qpfLCQbhwGIYcyPQ53/G3YO8BtUtd35bvKcVwAAAABJRU5ErkJggg==)}.taro-video-mute.taro-video-type-mute{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAgCAYAAAB3j6rJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGAGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTktMDQtMTFUMTA6MTk6MDMrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE5LTA0LTExVDEwOjIyOjMzKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE5LTA0LTExVDEwOjIyOjMzKzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjAzYjJmNjE2LTZmZTUtNDJjNC1iNTgwLTczNzZjZjI2NzdmNSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjYzZjQ2NTYzLWE0ZjktOGQ0Mi1hM2FhLTY3ODJhNDBhYWNjMSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjIyYWNjMWFlLTg4ZmMtNDBlZi1iMWM1LTNmODgwY2QzYWI2MiI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MjJhY2MxYWUtODhmYy00MGVmLWIxYzUtM2Y4ODBjZDNhYjYyIiBzdEV2dDp3aGVuPSIyMDE5LTA0LTExVDEwOjE5OjAzKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MDNiMmY2MTYtNmZlNS00MmM0LWI1ODAtNzM3NmNmMjY3N2Y1IiBzdEV2dDp3aGVuPSIyMDE5LTA0LTExVDEwOjIyOjMzKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5PmxYVAAACLklEQVRYhc2XP2sVQRRHz40hKoqaQgVBCy1EozFlGiVFxMLGh4piYWEh+hkEP4YKAVFEEFTyughaCH6DqIVpAhYWEgIxoJE8cywyi5tNHu/tJmvyg2WZO3dmzt47/zZUtoJ6Nhsg09YDiYhKDzACTAFNYH9lEpUq80TdrT5wpV5n/ZV9KoGoo+pXV2uyKkipOaLuUceAt8DhUvQd1FsCYhR4ChzaSIBMHSOi7lOfsByFWiCgEBH1GHAF2JlMPcBt4GC3HUYEaj9wF3gVEVPtfNVTwAXgWX7CDKq/1piAZTSZBmim8qJ6sQ3EgDqb/L7kU3MH2NHtl3dQX3r3Ak21UYAYAj4A/cl0JB+RF+uMRj4iQ+p8zt7KYFLdXKHuRi0gacBhV6a6pd5bA6KRNagFJPU9qv5u47toLmW1HnoR8Q5oAK1CVQu4FBHj/wUkaXsb+4pzpVaQFPqXrN7Be4Fx9VztIOr1BLEtmX4A94E/qdwHTKjDWYM6lu81dSlnn3V570BtuLxaMs2rZ/IgYxsBovaoPwsQA4VoFWEm8ql5DiysNyURsQTMpOIMcDYiPhd8xoGr/FtNC2G6FKXD6ihwGdiVHMoeeh8jYlA9ANwE3kTEp3bO6vE03qOONzR1r/q4RGrquaFFxFxE3ALOA9+6jExpdb180y55AhirhaRTatq0GXEzL8+ZIuI9cBJ4WKiartJf9nWV/mty7UfUafW7erpqRGI9EBuprffvu9n6C1KOmsqwI5A1AAAAAElFTkSuQmCC)}.taro-video-danmu{width:100%;margin-top:14px;margin-bottom:44px;font-size:14px;line-height:14px;position:absolute;top:0;bottom:0;left:0;overflow:visible}.taro-video-danmu-item{color:#fff;white-space:nowrap;line-height:1;transition-property:left,transform;transition-duration:3s;transition-timing-function:linear;position:absolute;left:100%;transform:translate(0)}.taro-video-toast{visibility:hidden;pointer-events:none;color:#000;background-color:rgba(255,255,255,.8);border-radius:5px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.taro-video-toast.taro-video-toast-volume{width:100px;height:100px;display:block}.taro-video-toast-volume .taro-video-toast-title{text-align:center;width:100%;margin-top:10px;font-size:12px;line-height:16px;display:block}.taro-video-toast-volume .taro-video-toast-icon{fill:#000;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAFhklEQVR4Xu2aeaxfQxTHP1VBES0NIQitWtpaaxeCUkQtaYVa0tiClAq1ExIiQTVppaWxt8RWSa2tWkJQRGgtQaSIpUKEpG0ssbbk28yV2+mZO/e9e3vvu/e98897mZnfzPl+75mZs0wvurn06ub46SGgxwLqZaA3sB/wO/A+8G/V6tS5BU4BJgJbO9DvAMOB36okoQ4CNgAeBEYbQK8Bbm4zAdsBc4EdAyA/APZoKwHHAA8DG2UA/AnYrG0ErAVcD1yXA9gfQJ8c40obsqbPgH7AY8CROTVuFQFD3X7fJid4DWsNAWOAGZ0w58YTsDZwKzChA189PbTRBGwKzAYO6iT4srbAMHfTfAksjulS1iG4JzAH2Dy2YKS/qAVcCdzi1vgZOBZ4PWvNGAG6wgYCW0IwctzNmf06BcEXtYABwOeA4otEfgEOdnGGqV6IAAUopwM6zDYuAVjeKYpYwCjgCWOhH513+b2lhE+Avrj89NPyalzyuCIE6EN9BfQ1dHoPOAD40+9LE6D/5aoqSqtLsgiQC60DTiHzfGCFoaSsQAexZdlTgEuyCDgLuK8u5G7dEAHyKN8CBrtxLwDHAX8Z+l4N3GS0L3db4aN0X5opmc+2XZQAfb2LPd2eciG1lUSRJZ9qYHkZONwiYAjwSc3gs24BXWWWfzEVuMjQez13HljX8v7A28lvEgsInaBVcxLaAvr6sgJLtBWeNTrOB+4w2p8DRvoEnAPcXTVaY70QAbrbXwIONX7zBSAL/tvrk1+iviTllnRry2irr/QSEws4D7izCxMg1XQLLAQGGXpeCkw22kOWI49RMUujCJC+uwAfGtfcImAng4AtAMsBeg04pIkESOfbgQsMsNoGnxrtSrfv7rXrSlwXWN6kLZBgEBiB8iWUUZZPIN/AF1nMoiYSICDfAlt5iB4CxhpAzwXuMtqPBuY1lYB5wFEeqFeAwwyguvIUqvuiQO/xphJwP3Cmhyh0EKrOoGDIF7n+M5pKwEwXrqdBCaQSM77Ig7SSIicDs5pKwIvACA+pzFwZIF9OlKm36QyQV7jEqDDJk5VD58uFgGIGX1Se+6yJFqAKsqI6X84GdDb4Mh0Y5zUqjFYFakUTCXja5QLSmBQHbAL8ahAgT1AeYVreSKLLphGwF/CuAfLJQLldGSTFD75c5d4mNCoWyAqG9gYWGED1AOMKo12ZbiWA/idA++deY2DVTZ0Jh5UJPsFQtD/wDaAHGWl5EzgwaUi2gK4UXS11S0cTIjrMFBtYQdAk4DID0BnAAz4B6wNLgTKKG0VIDBHwqitwpOcW+OOB540FdeipNKbUWFrUtn06o5xOij4KyDuqU0IE3Obl/rLA63pTzm9XA8jKACjdniZAaSKFmUpB1yUhAlTsUEpMh913wEkuTe7rKTzPAHqO44vpKPkFhH3cWWBVV6ogJVYZUgz/tXtIYelzI3Ct0fExIGx6j7iKWBUUveyYBehv1RIjIEsfqziq8Xp4pSBJOYTVJFQcVY3wCFeKUjVGyYfQWB00+5bEVBECrNS+qsOKBpVHNCVWHs+LS7H5PV5pOu9v0+OKEOAXR39w1e1C7wM6AkJ1eLmkRcrpRQiQrqobXO5S3vL3/4kBKMsCknV0k+iasVLUMV3UX5SAPGtED8EOT+L9YENnCasUIXNO2goChFWHqAIRyxXN4qI1BCQg9dJESYq8LnbrCBAR8t50Lig6i0krCRBoVWhVlt45wkBrCRBuRZyPuAguxIPe9lXqhpd9DcZMXOvdkPF0Xu/8dohNUmZ/1QQkuitXr+d4fryuFx3jywQYm6suAqSX8vLTXKJDt4QqO6rtLYspXWZ/nQQkOJTAUJZGIav19q9MvKvN1RUIWKMAY5P3EBBjqO393d4C/gMVHwRQlpx21QAAAABJRU5ErkJggg==);background-position:50%;background-repeat:no-repeat;background-size:50%;width:50%;height:50%;margin-left:25%;display:block}.taro-video-toast-volume .taro-video-toast-value{width:80px;height:5px;margin-top:5px;margin-left:10px}.taro-video-toast-volume .taro-video-toast-value>.taro-video-toast-value-content{overflow:hidden}.taro-video-toast-volume-grids{width:80px;height:5px}.taro-video-toast-volume-grids-item{float:left;background-color:#000;width:7.1px;height:5px}.taro-video-toast-volume-grids-item:not(:first-child){margin-left:1px}.taro-video-toast.taro-video-toast-progress{color:#fff;background-color:rgba(0,0,0,.8);padding:6px;font-size:14px;line-height:18px}',jw=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onPlay=Od(this,"play",7),this.onPause=Od(this,"pause",7),this.onEnded=Od(this,"ended",7),this.onTimeUpdate=Od(this,"timeupdate",7),this.onError=Od(this,"error",7),this.onFullScreenChange=Od(this,"fullscreenchange",7),this.onProgress=Od(this,"progress",7),this.onLoadedMetaData=Od(this,"loadedmetadata",7),this.currentTime=0,this.isDraggingProgress=!1,this.gestureType="none",this.analyzeGesture=e=>{var t;const i={type:"none"},s=e.touches[0].screenX,r=e.touches[0].screenY,n=s-this.lastTouchScreenX,a=r-this.lastTouchScreenY,o=this.isFullScreen?this.vslideGestureInFullscreen:this.vslideGesture;if("none"===this.gestureType){const e=Pw(n,a);if(e<10)return i;if(Math.abs(a)>=Math.abs(n)){if(!o)return i;this.gestureType="adjustVolume",this.lastVolume=this.videoRef.volume}else if(Math.abs(a)<Math.abs(n)){if(!this.enableProgressGesture)return i;this.gestureType="adjustProgress",this.lastPercentage=this.currentTime/(null!==(t=this.duration)&&void 0!==t?t:this._duration)}}return i.type=this.gestureType,i.dataX=Dw(n/200),i.dataY=Dw(a/200),i},this.loadNativePlayer=()=>{var e,t;this.videoRef&&(this.videoRef.src=this.src,null===(t=(e=this.videoRef).load)||void 0===t||t.call(e))},this.init=()=>{const{src:e,videoRef:t}=this;Nw(e)?f(()=>Promise.resolve().then(()=>hF),void 0).then(i=>{const s=i.default;this.HLS=s,s.isSupported()?(this.hls&&this.hls.destroy(),this.hls=new s,this.hls.loadSource(e),this.hls.attachMedia(t),this.hls.on(s.Events.MANIFEST_PARSED,()=>{this.autoplay&&this.play()}),this.hls.on(s.Events.ERROR,(e,t)=>{this.handleError(t)})):t.canPlayType("application/vnd.apple.mpegurl")?this.loadNativePlayer():console.error("\u8be5\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 HLS \u64ad\u653e")}):this.loadNativePlayer()},this.handlePlay=()=>{this.isPlaying=!0,this.isFirst=!1,this.controlsRef.toggleVisibility(!0),this.onPlay.emit()},this.handlePause=()=>{this.isPlaying=!1,this.controlsRef.toggleVisibility(!0),this.onPause.emit()},this.handleEnded=()=>{this.isFirst=!0,this.pause(),this.controlsRef.toggleVisibility(),this.onEnded.emit()},this.handleTimeUpdate=ig(e=>d(this,null,function*(){var t,i;this.currentTime=this.videoRef.currentTime;const s=this.duration||this._duration,r=yield this.controlsRef.getIsDraggingProgressBall();this.controls&&this.showProgress&&(r||this.isDraggingProgress||(this.controlsRef.setProgressBall(this.currentTime/s),this.controlsRef.setCurrentTime(this.currentTime))),this.danmuRef.tick(this.currentTime),this.onTimeUpdate.emit({duration:null===(t=e.target)||void 0===t?void 0:t.duration,currentTime:null===(i=e.target)||void 0===i?void 0:i.currentTime}),this.duration&&this.currentTime>=this.duration&&(this.seek(0),this.handleEnded())}),250),this.handleError=e=>{var t,i;if(this.hls)switch(e.type){case this.HLS.ErrorTypes.NETWORK_ERROR:this.onError.emit({errMsg:e.response}),this.hls.startLoad();break;case this.HLS.ErrorTypes.MEDIA_ERROR:this.onError.emit({errMsg:e.reason||"\u5a92\u4f53\u9519\u8bef,\u8bf7\u91cd\u8bd5"}),this.hls.recoverMediaError();break}else this.onError.emit({errMsg:null===(i=null===(t=e.target)||void 0===t?void 0:t.error)||void 0===i?void 0:i.message})},this.handleDurationChange=()=>{this._duration=this.videoRef.duration},this.handleProgress=()=>{this.onProgress.emit()},this.handleLoadedMetaData=e=>{const t=e.target;this.onLoadedMetaData.emit({width:t.videoWidth,height:t.videoHeight,duration:t.duration})},this._play=()=>this.videoRef.play(),this._pause=()=>this.videoRef.pause(),this._stop=()=>{this.videoRef.pause(),this._seek(0)},this._seek=e=>{this.videoRef.currentTime=e},this.onTouchStartContainer=e=>{this.lastTouchScreenX=e.touches[0].screenX,this.lastTouchScreenY=e.touches[0].screenY},this.onClickContainer=()=>{if(this.enablePlayGesture){const e=Date.now();e-this.lastClickedTime<300&&(this.isPlaying?this.pause():this.play()),this.lastClickedTime=e}this.controlsRef.toggleVisibility()},this.onClickFullScreenBtn=e=>{e.stopPropagation(),this.toggleFullScreen()},this.handleFullScreenChange=e=>{const t=(new Date).getTime();!e.detail&&this.isFullScreen&&!document[Ow.fullscreenElement]&&t-this.fullScreenTimestamp>100&&this.toggleFullScreen(!1,!0)},this.toggleFullScreen=(e=!this.isFullScreen,t=!1)=>{this.isFullScreen=e,this.controlsRef.toggleVisibility(!0),this.fullScreenTimestamp=(new Date).getTime(),this.onFullScreenChange.emit({fullScreen:this.isFullScreen,direction:"vertical"}),this.isFullScreen&&!document[Ow.fullscreenElement]?setTimeout(()=>{this.videoRef[Ow.requestFullscreen]({navigationUI:"auto"}),US.eventCenter.trigger("__taroEnterFullScreen",{})},0):(t||document[Ow.exitFullscreen](),US.eventCenter.trigger("__taroExitFullScreen",{}))},this.toggleMute=e=>{e.stopPropagation(),this.videoRef.muted=!this.isMute,this.controlsRef.toggleVisibility(!0),this.isMute=!this.isMute},this.toggleDanmu=e=>{e.stopPropagation(),this.controlsRef.toggleVisibility(!0),this._enableDanmu=!this._enableDanmu},this.src=void 0,this.duration=void 0,this.controls=!0,this.autoplay=!1,this.loop=!1,this.muted=!1,this.initialTime=0,this.poster=void 0,this.objectFit="contain",this.showProgress=!0,this.showFullscreenBtn=!0,this.showPlayBtn=!0,this.showCenterPlayBtn=!0,this.showMuteBtn=!1,this.danmuList=void 0,this.danmuBtn=!1,this.enableDanmu=!1,this.enablePlayGesture=!1,this.enableProgressGesture=!0,this.vslideGesture=!1,this.vslideGestureInFullscreen=!0,this.nativeProps={},this._duration=void 0,this._enableDanmu=!1,this.isPlaying=!1,this.isFirst=!0,this.isFullScreen=!1,this.fullScreenTimestamp=(new Date).getTime(),this.isMute=!1}componentWillLoad(){this._enableDanmu=this.enableDanmu,this.isMute=this.muted}componentDidLoad(){var e,t;this.init(),this.initialTime&&(this.videoRef.currentTime=this.initialTime),null===(t=(e=this.danmuRef).sendDanmu)||void 0===t||t.call(e,this.danmuList),document.addEventListener&&document.addEventListener(Ow.fullscreenchange,this.handleFullScreenChange),this.videoRef&&"iOS"===Mw&&this.videoRef.addEventListener("webkitendfullscreen",this.handleFullScreenChange)}componentDidRender(){}disconnectedCallback(){document.removeEventListener&&document.removeEventListener(Ow.fullscreenchange,this.handleFullScreenChange),this.videoRef&&"iOS"===Mw&&this.videoRef.removeEventListener("webkitendfullscreen",this.handleFullScreenChange)}watchEnableDanmu(e){this._enableDanmu=e}watchSrc(){this.init()}onDocumentTouchMove(e){return d(this,null,function*(){if(void 0===this.lastTouchScreenX||void 0===this.lastTouchScreenY)return;if(yield this.controlsRef.getIsDraggingProgressBall())return;const t=this.analyzeGesture(e);if("adjustVolume"===t.type){this.toastVolumeRef.style.visibility="visible";const e=Math.max(Math.min(this.lastVolume-t.dataY,1),0);this.videoRef.volume=e,this.toastVolumeBarRef.style.width=100*e+"%"}else if("adjustProgress"===t.type){this.isDraggingProgress=!0,this.nextPercentage=Math.max(Math.min(this.lastPercentage+(t.dataX||0),1),0),this.controls&&this.showProgress&&(this.controlsRef.setProgressBall(this.nextPercentage),this.controlsRef.toggleVisibility(!0));const e=this.duration||this._duration;this.toastProgressTitleRef.innerHTML=`${Rw(this.nextPercentage*e)} / ${Rw(e)}`,this.toastProgressRef.style.visibility="visible"}})}onDocumentTouchEnd(){var e;"adjustVolume"===this.gestureType?this.toastVolumeRef.style.visibility="hidden":"adjustProgress"===this.gestureType&&(this.toastProgressRef.style.visibility="hidden"),this.isDraggingProgress&&(this.isDraggingProgress=!1,this.seek(this.nextPercentage*(null!==(e=this.duration)&&void 0!==e?e:this._duration))),this.gestureType="none",this.lastTouchScreenX=void 0,this.lastTouchScreenY=void 0}getHlsObject(){return d(this,null,function*(){return this.hls})}play(){return d(this,null,function*(){this._play()})}pause(){return d(this,null,function*(){this._pause()})}stop(){return d(this,null,function*(){this._stop()})}seek(e){return d(this,null,function*(){this._seek(e)})}requestFullScreen(){return d(this,null,function*(){this.toggleFullScreen(!0)})}exitFullScreen(){return d(this,null,function*(){this.toggleFullScreen(!1)})}render(){const{controls:e,autoplay:t,loop:i,muted:s,poster:r,objectFit:n,isFirst:a,isMute:o,isFullScreen:l,showCenterPlayBtn:c,isPlaying:d,_enableDanmu:h,showMuteBtn:u,danmuBtn:p,showFullscreenBtn:f,nativeProps:g}=this,m=this.duration||this._duration,v=Rw(m);return xd(kd,{class:wu("taro-video-container",{"taro-video-type-fullscreen":l}),onTouchStart:this.onTouchStartContainer,onClick:this.onClickContainer},xd("video",Object.assign({class:"taro-video-video",style:{"object-fit":n},ref:e=>{e&&(this.videoRef=e)},autoplay:t,loop:i,muted:s,poster:e?r:void 0,playsinline:!0,"webkit-playsinline":!0,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onTimeUpdate:this.handleTimeUpdate,onError:this.handleError,onDurationChange:this.handleDurationChange,onProgress:this.handleProgress,onLoadedMetaData:this.handleLoadedMetaData},g),"\u6682\u65f6\u4e0d\u652f\u6301\u64ad\u653e\u8be5\u89c6\u9891"),xd("taro-video-danmu",{ref:e=>{e&&(this.danmuRef=e)},enable:h}),a&&c&&!d&&xd("div",{class:"taro-video-cover"},xd("div",{class:"taro-video-cover-play-button",onClick:()=>this.play()}),xd("p",{class:"taro-video-cover-duration"},v)),xd("taro-video-control",{ref:e=>{e&&(this.controlsRef=e)},controls:e,currentTime:this.currentTime,duration:m,isPlaying:this.isPlaying,pauseFunc:this._pause,playFunc:this._play,seekFunc:this._seek,showPlayBtn:this.showPlayBtn,showProgress:this.showProgress},u&&xd("div",{class:wu("taro-video-mute",{"taro-video-type-mute":o}),onClick:this.toggleMute}),p&&xd("div",{class:wu("taro-video-danmu-button",{"taro-video-danmu-button-active":h}),onClick:this.toggleDanmu},"\u5f39\u5e55"),f&&xd("div",{class:wu("taro-video-fullscreen",{"taro-video-type-fullscreen":l}),onClick:this.onClickFullScreenBtn})),xd("div",{class:"taro-video-toast taro-video-toast-volume",ref:e=>{e&&(this.toastVolumeRef=e)}},xd("div",{class:"taro-video-toast-title"},"\u97f3\u91cf"),xd("div",{class:"taro-video-toast-icon"}),xd("div",{class:"taro-video-toast-value"},xd("div",{class:"taro-video-toast-value-content",ref:e=>{e&&(this.toastVolumeBarRef=e)}},xd("div",{class:"taro-video-toast-volume-grids"},Array(10).fill(1).map(()=>xd("div",{class:"taro-video-toast-volume-grids-item"})))))),xd("div",{class:"taro-video-toast taro-video-toast-progress",ref:e=>{e&&(this.toastProgressRef=e)}},xd("div",{class:"taro-video-toast-title",ref:e=>{e&&(this.toastProgressTitleRef=e)}})))}get el(){return this}static get watchers(){return{enableDanmu:["watchEnableDanmu"],src:["watchSrc"]}}static get style(){return Hw}},[0,"taro-video-core",{src:[1],duration:[2],controls:[4],autoplay:[4],loop:[4],muted:[4],initialTime:[2,"initial-time"],poster:[1],objectFit:[1,"object-fit"],showProgress:[4,"show-progress"],showFullscreenBtn:[4,"show-fullscreen-btn"],showPlayBtn:[4,"show-play-btn"],showCenterPlayBtn:[4,"show-center-play-btn"],showMuteBtn:[4,"show-mute-btn"],danmuList:[16],danmuBtn:[4,"danmu-btn"],enableDanmu:[4,"enable-danmu"],enablePlayGesture:[4,"enable-play-gesture"],enableProgressGesture:[4,"enable-progress-gesture"],vslideGesture:[4,"vslide-gesture"],vslideGestureInFullscreen:[4,"vslide-gesture-in-fullscreen"],nativeProps:[16],_duration:[32],_enableDanmu:[32],isPlaying:[32],isFirst:[32],isFullScreen:[32],fullScreenTimestamp:[32],isMute:[32],getHlsObject:[64],play:[64],pause:[64],stop:[64],seek:[64],requestFullScreen:[64],exitFullScreen:[64]},[[5,"touchmove","onDocumentTouchMove"],[5,"touchend","onDocumentTouchEnd"],[5,"touchcancel","onDocumentTouchEnd"]]]);function zw(){if("undefined"===typeof customElements)return;const e=["taro-video-core","taro-video-control","taro-video-danmu"];e.forEach(e=>{switch(e){case"taro-video-core":customElements.get(e)||customElements.define(e,jw);break;case"taro-video-control":customElements.get(e)||Fw();break;case"taro-video-danmu":customElements.get(e)||Gw();break}})}const Vw=zw,Yw=Gw,Ww="taro-view-core{display:block}",Kw=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onLongPress=Od(this,"longpress",7),this.startTime=0,this.animation=void 0,this.hoverClass=void 0,this.hoverStartTime=50,this.hoverStayTime=400,this.hover=!1,this.touch=!1}onTouchStart(){this.hoverClass&&(this.touch=!0,setTimeout(()=>{this.touch&&(this.hover=!0)},this.hoverStartTime)),this.timeoutEvent=setTimeout(()=>{this.onLongPress.emit()},350),this.startTime=Date.now()}onTouchMove(){clearTimeout(this.timeoutEvent)}onTouchEnd(){const e=Date.now()-this.startTime;e<350&&clearTimeout(this.timeoutEvent),this.hoverClass&&(this.touch=!1,setTimeout(()=>{this.touch||(this.hover=!1)},this.hoverStayTime))}componentDidRender(){Xh(this.el)}render(){const e=wu({[`${this.hoverClass}`]:this.hover});let t={};return this.animation&&(t["animation"]=this.animation,t["data-animation"]=this.animation),xd(kd,Object.assign({class:e},t),xd("slot",null))}get el(){return this}static get style(){return Ww}},[4,"taro-view-core",{animation:[1],hoverClass:[1,"hover-class"],hoverStartTime:[2,"hover-start-time"],hoverStayTime:[2,"hover-stay-time"],hover:[32],touch:[32]},[[1,"touchstart","onTouchStart"],[1,"touchmove","onTouchMove"],[1,"touchend","onTouchEnd"]]]);function qw(){if("undefined"===typeof customElements)return;const e=["taro-view-core"];e.forEach(e=>{switch(e){case"taro-view-core":customElements.get(e)||customElements.define(e,Kw);break}})}const Xw=qw,Qw=Th(class extends Bh{constructor(){super(),this.__registerHost()}componentDidLoad(){qh("VoipRoom",this)}render(){return xd(kd,null)}},[0,"taro-voip-room-core"]);function Zw(){if("undefined"===typeof customElements)return;const e=["taro-voip-room-core"];e.forEach(e=>{switch(e){case"taro-voip-room-core":customElements.get(e)||customElements.define(e,Qw);break}})}const Jw=Zw,eA="iframe{border:none}.taro-webview{z-index:999;width:100%;height:100%;position:fixed;top:0;bottom:0}",tA=Th(class extends Bh{constructor(){super(),this.__registerHost(),this.onLoad=Od(this,"load",7),this.onError=Od(this,"error",7),this.src=void 0}render(){const{src:e,onLoad:t,onError:i}=this;return xd("iframe",{class:"taro-webview",onLoad:i=>{i.stopPropagation(),t.emit({src:e})},onError:t=>{t.stopPropagation(),i.emit({src:e})},src:e})}static get style(){return eA}},[0,"taro-web-view-core",{src:[1]}]);function iA(){if("undefined"===typeof customElements)return;const e=["taro-web-view-core"];e.forEach(e=>{switch(e){case"taro-web-view-core":customElements.get(e)||customElements.define(e,tA);break}})}const sA=iA;function rA(){return rA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},rA.apply(null,arguments)}var nA;(function(e){e["Pop"]="POP",e["Push"]="PUSH",e["Replace"]="REPLACE"})(nA||(nA={}));var aA=function(e){return e},oA="beforeunload",lA="hashchange",cA="popstate";function dA(e){void 0===e&&(e={});var t=e,i=t.window,s=void 0===i?document.defaultView:i,r=s.history;function n(){var e=gA(s.location.hash.substr(1)),t=e.pathname,i=void 0===t?"/":t,n=e.search,a=void 0===n?"":n,o=e.hash,l=void 0===o?"":o,c=r.state||{};return[c.idx,aA({pathname:i,search:a,hash:l,state:c.usr||null,key:c.key||"default"})]}var a=null;function o(){if(a)p.call(a),a=null;else{var e=nA.Pop,t=n(),i=t[0],s=t[1];if(p.length){if(null!=i){var r=d-i;r&&(a={action:e,location:s,retry:function(){A(-1*r)}},A(r))}}else b(e)}}s.addEventListener(cA,o),s.addEventListener(lA,function(){var e=n(),t=e[1];fA(t)!==fA(h)&&o()});var l=nA.Pop,c=n(),d=c[0],h=c[1],u=uA(),p=uA();function f(){var e=document.querySelector("base"),t="";if(e&&e.getAttribute("href")){var i=s.location.href,r=i.indexOf("#");t=-1===r?i:i.slice(0,r)}return t}function g(e){return f()+"#"+("string"===typeof e?e:fA(e))}function m(e,t){return void 0===t&&(t=null),aA(rA({pathname:h.pathname,hash:"",search:""},"string"===typeof e?gA(e):e,{state:t,key:pA()}))}function v(e,t){return[{usr:e.state,key:e.key,idx:t},g(e)]}function y(e,t,i){return!p.length||(p.call({action:e,location:t,retry:i}),!1)}function b(e){l=e;var t=n();d=t[0],h=t[1],u.call({action:l,location:h})}function E(e,t){var i=nA.Push,n=m(e,t);function a(){E(e,t)}if(y(i,n,a)){var o=v(n,d+1),l=o[0],c=o[1];try{r.pushState(l,"",c)}catch(h){s.location.assign(c)}b(i)}}function w(e,t){var i=nA.Replace,s=m(e,t);function n(){w(e,t)}if(y(i,s,n)){var a=v(s,d),o=a[0],l=a[1];r.replaceState(o,"",l),b(i)}}function A(e){r.go(e)}null==d&&(d=0,r.replaceState(rA({},r.state,{idx:d}),""));var T={get action(){return l},get location(){return h},createHref:g,push:E,replace:w,go:A,back:function(){A(-1)},forward:function(){A(1)},listen:function(e){return u.push(e)},block:function(e){var t=p.push(e);return 1===p.length&&s.addEventListener(oA,hA),function(){t(),p.length||s.removeEventListener(oA,hA)}}};return T}function hA(e){e.preventDefault(),e.returnValue=""}function uA(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter(function(e){return e!==t})}},call:function(t){e.forEach(function(e){return e&&e(t)})}}}function pA(){return Math.random().toString(36).substr(2,8)}function fA(e){var t=e.pathname,i=void 0===t?"/":t,s=e.search,r=void 0===s?"":s,n=e.hash,a=void 0===n?"":n;return r&&"?"!==r&&(i+="?"===r.charAt(0)?r:"?"+r),a&&"#"!==a&&(i+="#"===a.charAt(0)?a:"#"+a),i}function gA(e){var t={};if(e){var i=e.indexOf("#");i>=0&&(t.hash=e.substr(i),e=e.substr(0,i));var s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}class mA{static set config(e){this.__config=e}static get config(){return this.__config}static get pages(){return this.config.pages||[]}static get router(){return this.config.router||{}}static get mode(){return this.router.mode||"hash"}static get customRoutes(){return this.router.customRoutes||{}}static isPage(e=""){return-1!==this.pages.findIndex(t=>_e(t)===e)}}let vA,yA="/";function bA(e,t="/"){vA=e,yA=t}function EA(e=""){return yA.replace(/\/$/,"")+"/"+e.replace(/^\//,"")}class wA{constructor(){this.stacks=[],this.backDelta=0,this.tabs={},this.methodName=""}set delta(e){e>0?this.backDelta=e:this.backDelta>0?--this.backDelta:this.backDelta=0}get delta(){return this.backDelta}set method(e){this.methodName=e}get method(){return this.methodName}get length(){return this.stacks.length}get last(){return this.stacks[this.length-1]}get(){return this.stacks}getItem(e){return this.stacks[e]}getLastIndex(e,t=1){const i=[...this.stacks].reverse();return i.findIndex((i,s)=>{var r;return s>=t&&(null===(r=i.path)||void 0===r?void 0:r.replace(/\?.*/g,""))===e})}getDelta(e){if(this.backDelta>=1)return this.backDelta;const t=this.getLastIndex(e);return t>0?t:1}getPrevIndex(e,t=1){const i=this.getLastIndex(e,t);return i<0?-1:this.length-1-i}pop(){return this.stacks.pop()}push(e){return this.stacks.push(e)}getTabs(){return this.tabs}pushTab(e){this.tabs[e]=this.last,this.pop()}popTab(e){this.push(this.tabs[e]),delete this.tabs[e]}removeTab(e){delete this.tabs[e]}}const AA=new wA;class TA{constructor(){this.conf=[],this.getConfig=(e="")=>{const t=this.conf.filter(t=>t.includes(e));return t[0]},this.getOrigin=(e="")=>{var t;return(null===(t=this.getConfig(e))||void 0===t?void 0:t[0])||e},this.getAlias=(e="")=>{var t;return(null===(t=this.getConfig(e))||void 0===t?void 0:t[1])||e},this.getAll=(e="")=>this.conf.filter(t=>t.includes(e)).reduceRight((e,t)=>(e.unshift(t[1]),e),[])}set(e={}){for(let t in e){const i=e[t];t=_e(t),"string"===typeof i?this.conf.push([t,_e(i)]):(null===i||void 0===i?void 0:i.length)>0&&this.conf.push(...i.map(e=>[t,_e(e)]))}}}const SA=new TA,xA=I.routeChannel;function LA(e){var t;const i=gA(e.url);if(null===(t=i.pathname)||void 0===t?void 0:t.includes("./")){const e=SA.getOrigin(vA.location.pathname).split("/");e.pop(),i.pathname.split("/").forEach(t=>{"."!==t&&(".."===t?e.pop():e.push(t))}),i.pathname=e.join("/")}return i.pathname=_e(i.pathname),i.pathname=SA.getAlias(_e(i.pathname)),i.pathname=EA(i.pathname),i.search||(i.search=""),i}function kA(e,t){return le(this,void 0,void 0,function*(){return new Promise((i,s)=>{AA.method=t;const{success:r,complete:n,fail:a}=e,o=vA.listen(()=>{const s={errMsg:`${t}:ok`};"navigateTo"===t&&(s.eventChannel=xA,xA.addEvents(e.events)),null===r||void 0===r||r(s),null===n||void 0===n||n(s),i(s),o()});try{if("url"in e){const i=LA(e),s={timestamp:Date.now()};"navigateTo"===t?vA.push(i,s):"redirectTo"===t||"switchTab"===t?vA.replace(i,s):"reLaunch"===t&&(AA.delta=AA.length,vA.replace(i,s))}else"navigateBack"===t&&(AA.delta=e.delta,AA.length>e.delta?vA.go(-e.delta):vA.go(1-AA.length))}catch(l){const e={errMsg:`${t}:fail ${l.message||l}`};return null===a||void 0===a||a(e),null===n||void 0===n||n(e),a||n?i(e):s(e)}})})}function IA(e){return kA(e,"navigateTo")}function _A(e){return kA(e,"redirectTo")}function CA(e={delta:1}){return(!e.delta||e.delta<1)&&(e.delta=1),kA(e,"navigateBack")}function RA(e){return kA(e,"switchTab")}function PA(e){return kA(e,"reLaunch")}function DA(){const e=AA.get();return e.map(e=>{var t;return Object.assign(Object.assign({},e),{route:(null===(t=e.path)||void 0===t?void 0:t.replace(/\?.*/g,""))||""})})}const MA="%[a-f0-9]{2}",OA=new RegExp("("+MA+")|([^%]+?)","gi"),NA=new RegExp("("+MA+")+","gi");function BA(e,t){try{return[decodeURIComponent(e.join(""))]}catch(tH){}if(1===e.length)return e;t=t||1;const i=e.slice(0,t),s=e.slice(t);return Array.prototype.concat.call([],BA(i),BA(s))}function FA(e){try{return decodeURIComponent(e)}catch(tH){let i=e.match(OA)||[];for(let s=1;s<i.length;s++)e=BA(i,s).join(""),i=e.match(OA)||[];return e}}function $A(e){const t={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"};let i=NA.exec(e);while(i){try{t[i[0]]=decodeURIComponent(i[0])}catch(tH){const s=FA(i[0]);s!==i[0]&&(t[i[0]]=s)}i=NA.exec(e)}t["%C2"]="\ufffd";const s=Object.keys(t);for(const r of s)e=e.replace(new RegExp(r,"g"),t[r]);return e}function UA(e){if("string"!==typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return decodeURIComponent(e)}catch(tH){return $A(e)}}function GA(e,t){const i={};if(Array.isArray(t))for(const s of t){const t=Object.getOwnPropertyDescriptor(e,s);(null==t?void 0:t.enumerable)&&Object.defineProperty(i,s,t)}else for(const s of Reflect.ownKeys(e)){const r=Object.getOwnPropertyDescriptor(e,s);if(r.enumerable){const n=e[s];t(s,n,e)&&Object.defineProperty(i,s,r)}}return i}function HA(e,t){if("string"!==typeof e||"string"!==typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===e||""===t)return[];const i=e.indexOf(t);return-1===i?[]:[e.slice(0,i),e.slice(i+t.length)]}const jA=e=>null===e||void 0===e,zA=e=>encodeURIComponent(e).replaceAll(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),VA=Symbol("encodeFragmentIdentifier");function YA(e){switch(e.arrayFormat){case"index":return t=>(i,s)=>{const r=i.length;return void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?i:null===s?[...i,[qA(t,e),"[",r,"]"].join("")]:[...i,[qA(t,e),"[",qA(r,e),"]=",qA(s,e)].join("")]};case"bracket":return t=>(i,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?i:null===s?[...i,[qA(t,e),"[]"].join("")]:[...i,[qA(t,e),"[]=",qA(s,e)].join("")];case"colon-list-separator":return t=>(i,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?i:null===s?[...i,[qA(t,e),":list="].join("")]:[...i,[qA(t,e),":list=",qA(s,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return i=>(s,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?s:(r=null===r?"":r,0===s.length?[[qA(i,e),t,qA(r,e)].join("")]:[[s,qA(r,e)].join(e.arrayFormatSeparator)])}default:return t=>(i,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?i:null===s?[...i,qA(t,e)]:[...i,[qA(t,e),"=",qA(s,e)].join("")]}}function WA(e){let t;switch(e.arrayFormat){case"index":return(e,i,s)=>{t=/\[(\d*)]$/.exec(e),e=e.replace(/\[\d*]$/,""),t?(void 0===s[e]&&(s[e]={}),s[e][t[1]]=i):s[e]=i};case"bracket":return(e,i,s)=>{t=/(\[])$/.exec(e),e=e.replace(/\[]$/,""),t?void 0!==s[e]?s[e]=[...s[e],i]:s[e]=[i]:s[e]=i};case"colon-list-separator":return(e,i,s)=>{t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==s[e]?s[e]=[...s[e],i]:s[e]=[i]:s[e]=i};case"comma":case"separator":return(t,i,s)=>{const r="string"===typeof i&&i.includes(e.arrayFormatSeparator),n="string"===typeof i&&!r&&XA(i,e).includes(e.arrayFormatSeparator);i=n?XA(i,e):i;const a=r||n?i.split(e.arrayFormatSeparator).map(t=>XA(t,e)):null===i?i:XA(i,e);s[t]=a};case"bracket-separator":return(t,i,s)=>{const r=/(\[])$/.test(t);if(t=t.replace(/\[]$/,""),!r)return void(s[t]=i?XA(i,e):i);const n=null===i?[]:XA(i,e).split(e.arrayFormatSeparator);void 0!==s[t]?s[t]=[...s[t],...n]:s[t]=n};default:return(e,t,i)=>{void 0!==i[e]?i[e]=[...[i[e]].flat(),t]:i[e]=t}}}function KA(e){if("string"!==typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function qA(e,t){return t.encode?t.strict?zA(e):encodeURIComponent(e):e}function XA(e,t){return t.decode?UA(e):e}function QA(e){return Array.isArray(e)?e.sort():"object"===typeof e?QA(Object.keys(e)).sort((e,t)=>Number(e)-Number(t)).map(t=>e[t]):e}function ZA(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function JA(e){let t="";const i=e.indexOf("#");return-1!==i&&(t=e.slice(i)),t}function eT(e,t,i){return"string"===i&&"string"===typeof e?e:"function"===typeof i&&"string"===typeof e?i(e):"boolean"===i&&null===e||("boolean"!==i||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()?"boolean"!==i||null===e||"1"!==e.toLowerCase()&&"0"!==e.toLowerCase()?"string[]"===i&&"none"!==t.arrayFormat&&"string"===typeof e?[e]:"number[]"!==i||"none"===t.arrayFormat||Number.isNaN(Number(e))||"string"!==typeof e||""===e.trim()?"number"!==i||Number.isNaN(Number(e))||"string"!==typeof e||""===e.trim()?!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()?t.parseNumbers&&!Number.isNaN(Number(e))&&"string"===typeof e&&""!==e.trim()?Number(e):e:"true"===e.toLowerCase():Number(e):[Number(e)]:"1"===e.toLowerCase():"true"===e.toLowerCase())}function tT(e){e=ZA(e);const t=e.indexOf("?");return-1===t?"":e.slice(t+1)}function iT(e,t){t=l({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,types:Object.create(null)},t),KA(t.arrayFormatSeparator);const i=WA(t),s=Object.create(null);if("string"!==typeof e)return s;if(e=e.trim().replace(/^[?#&]/,""),!e)return s;for(const r of e.split("&")){if(""===r)continue;const e=t.decode?r.replaceAll("+"," "):r;let[n,a]=HA(e,"=");void 0===n&&(n=e),a=void 0===a?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:XA(a,t),i(XA(n,t),a,s)}for(const[r,n]of Object.entries(s))if("object"===typeof n&&null!==n&&"string"!==t.types[r])for(const[e,i]of Object.entries(n)){const s=t.types[r]?t.types[r].replace("[]",""):void 0;n[e]=eT(i,t,s)}else"object"===typeof n&&null!==n&&"string"===t.types[r]?s[r]=Object.values(n).join(t.arrayFormatSeparator):s[r]=eT(n,t,t.types[r]);return!1===t.sort?s:(!0===t.sort?Object.keys(s).sort():Object.keys(s).sort(t.sort)).reduce((e,t)=>{const i=s[t];return e[t]=Boolean(i)&&"object"===typeof i&&!Array.isArray(i)?QA(i):i,e},Object.create(null))}function sT(e,t){if(!e)return"";t=l({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t),KA(t.arrayFormatSeparator);const i=i=>t.skipNull&&jA(e[i])||t.skipEmptyString&&""===e[i],s=YA(t),r={};for(const[a,o]of Object.entries(e))i(a)||(r[a]=o);const n=Object.keys(r);return!1!==t.sort&&n.sort(t.sort),n.map(i=>{const r=e[i];return void 0===r?"":null===r?qA(i,t):Array.isArray(r)?0===r.length&&"bracket-separator"===t.arrayFormat?qA(i,t)+"[]":r.reduce(s(i),[]).join("&"):qA(i,t)+"="+qA(r,t)}).filter(e=>e.length>0).join("&")}function rT(e,t){var i,s;t=l({decode:!0},t);let[r,n]=HA(e,"#");return void 0===r&&(r=e),l({url:null!=(s=null==(i=null==r?void 0:r.split("?"))?void 0:i[0])?s:"",query:iT(tT(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:XA(n,t)}:{})}function nT(e,t){t=l({encode:!0,strict:!0,[VA]:!0},t);const i=ZA(e.url).split("?")[0]||"",s=tT(e.url),r=l(l({},iT(s,l({sort:!1},t))),e.query);let n=sT(r,t);n&&(n=`?${n}`);let a=JA(e.url);if("string"===typeof e.fragmentIdentifier){const s=new URL(i);s.hash=e.fragmentIdentifier,a=t[VA]?s.hash:`#${e.fragmentIdentifier}`}return`${i}${n}${a}`}function aT(e,t,i){i=l({parseFragmentIdentifier:!0,[VA]:!1},i);const{url:s,query:r,fragmentIdentifier:n}=rT(e,i);return nT({url:s,query:GA(r,t),fragmentIdentifier:n},i)}function oT(e,t,i){const s=Array.isArray(t)?e=>!t.includes(e):(e,i)=>!t(e,i);return aT(e,s,i)}const lT=Object.freeze(Object.defineProperty({__proto__:null,exclude:oT,extract:tT,parse:iT,parseUrl:rT,pick:aT,stringify:sT,stringifyUrl:nT},Symbol.toStringTag,{value:"Module"}));let cT;function dT(e){cT&&window.removeEventListener("resize",cT),cT=function(){if(e.onResize){const t=window.matchMedia("(orientation: portrait)");e.onResize({deviceOrientation:t.matches?"portrait":"landscape",size:{windowHeight:window.innerHeight,windowWidth:window.innerWidth,screenHeight:window.screen.height,screenWidth:window.screen.width}})}},window.addEventListener("resize",cT,!1)}const hT={};let uT=window;function pT(e,t,i=50){var s;const r=e?null===e||void 0===e?void 0:e.path:null===(s=de.router)||void 0===s?void 0:s.path;hT[r]&&t.removeEventListener("scroll",hT[r]),uT=t;let n=!1;hT[r]=function(){var t;null===(t=e.onPageScroll)||void 0===t||t.call(e,{scrollTop:uT instanceof Window?window.scrollY:uT.scrollTop}),n&&fT()>i&&(n=!1),e.onReachBottom&&!n&&fT()<i&&(n=!0,e.onReachBottom())},uT.addEventListener("scroll",hT[r],!1)}function fT(){return uT instanceof Window?document.documentElement.scrollHeight-window.scrollY-window.innerHeight:uT.scrollHeight-uT.scrollTop-uT.clientHeight}const gT=ge();function mT(e){var t=[],i=0;while(i<e.length){var s=e[i];if("*"!==s&&"+"!==s&&"?"!==s)if("\\"!==s)if("{"!==s)if("}"!==s)if(":"!==s)if("("!==s)t.push({type:"CHAR",index:i,value:e[i++]});else{var r=1,n="";o=i+1;if("?"===e[o])throw new TypeError('Pattern cannot start with "?" at '.concat(o));while(o<e.length)if("\\"!==e[o]){if(")"===e[o]){if(r--,0===r){o++;break}}else if("("===e[o]&&(r++,"?"!==e[o+1]))throw new TypeError("Capturing groups are not allowed at ".concat(o));n+=e[o++]}else n+=e[o++]+e[o++];if(r)throw new TypeError("Unbalanced pattern at ".concat(i));if(!n)throw new TypeError("Missing pattern at ".concat(i));t.push({type:"PATTERN",index:i,value:n}),i=o}else{var a="",o=i+1;while(o<e.length){var l=e.charCodeAt(o);if(!(l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||95===l))break;a+=e[o++]}if(!a)throw new TypeError("Missing parameter name at ".concat(i));t.push({type:"NAME",index:i,value:a}),i=o}else t.push({type:"CLOSE",index:i,value:e[i++]});else t.push({type:"OPEN",index:i,value:e[i++]});else t.push({type:"ESCAPED_CHAR",index:i++,value:e[i++]});else t.push({type:"MODIFIER",index:i,value:e[i++]})}return t.push({type:"END",index:i,value:""}),t}function vT(e,t){void 0===t&&(t={});var i=mT(e),s=t.prefixes,r=void 0===s?"./":s,n=t.delimiter,a=void 0===n?"/#?":n,o=[],l=0,c=0,d="",h=function(e){if(c<i.length&&i[c].type===e)return i[c++].value},u=function(e){var t=h(e);if(void 0!==t)return t;var s=i[c],r=s.type,n=s.index;throw new TypeError("Unexpected ".concat(r," at ").concat(n,", expected ").concat(e))},p=function(){var e,t="";while(e=h("CHAR")||h("ESCAPED_CHAR"))t+=e;return t},f=function(e){for(var t=0,i=a;t<i.length;t++){var s=i[t];if(e.indexOf(s)>-1)return!0}return!1},g=function(e){var t=o[o.length-1],i=e||(t&&"string"===typeof t?t:"");if(t&&!i)throw new TypeError('Must have text between two parameters, missing text after "'.concat(t.name,'"'));return!i||f(i)?"[^".concat(ET(a),"]+?"):"(?:(?!".concat(ET(i),")[^").concat(ET(a),"])+?")};while(c<i.length){var m=h("CHAR"),v=h("NAME"),y=h("PATTERN");if(v||y){var b=m||"";-1===r.indexOf(b)&&(d+=b,b=""),d&&(o.push(d),d=""),o.push({name:v||l++,prefix:b,suffix:"",pattern:y||g(b),modifier:h("MODIFIER")||""})}else{var E=m||h("ESCAPED_CHAR");if(E)d+=E;else{d&&(o.push(d),d="");var w=h("OPEN");if(w){b=p();var A=h("NAME")||"",T=h("PATTERN")||"",S=p();u("CLOSE"),o.push({name:A||(T?l++:""),pattern:A&&!T?g(b):T,prefix:b,suffix:S,modifier:h("MODIFIER")||""})}else u("END")}}}return o}function yT(e,t){var i=[],s=LT(e,i,t);return bT(s,i,t)}function bT(e,t,i){void 0===i&&(i={});var s=i.decode,r=void 0===s?function(e){return e}:s;return function(i){var s=e.exec(i);if(!s)return!1;for(var n=s[0],a=s.index,o=Object.create(null),l=function(e){if(void 0===s[e])return"continue";var i=t[e-1];"*"===i.modifier||"+"===i.modifier?o[i.name]=s[e].split(i.prefix+i.suffix).map(function(e){return r(e,i)}):o[i.name]=r(s[e],i)},c=1;c<s.length;c++)l(c);return{path:n,index:a,params:o}}}function ET(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function wT(e){return e&&e.sensitive?"":"i"}function AT(e,t){if(!t)return e;var i=/\((?:\?<(.*?)>)?(?!\?)/g,s=0,r=i.exec(e.source);while(r)t.push({name:r[1]||s++,prefix:"",suffix:"",modifier:"",pattern:""}),r=i.exec(e.source);return e}function TT(e,t,i){var s=e.map(function(e){return LT(e,t,i).source});return new RegExp("(?:".concat(s.join("|"),")"),wT(i))}function ST(e,t,i){return xT(vT(e,i),t,i)}function xT(e,t,i){void 0===i&&(i={});for(var s=i.strict,r=void 0!==s&&s,n=i.start,a=void 0===n||n,o=i.end,l=void 0===o||o,c=i.encode,d=void 0===c?function(e){return e}:c,h=i.delimiter,u=void 0===h?"/#?":h,p=i.endsWith,f=void 0===p?"":p,g="[".concat(ET(f),"]|$"),m="[".concat(ET(u),"]"),v=a?"^":"",y=0,b=e;y<b.length;y++){var E=b[y];if("string"===typeof E)v+=ET(d(E));else{var w=ET(d(E.prefix)),A=ET(d(E.suffix));if(E.pattern)if(t&&t.push(E),w||A)if("+"===E.modifier||"*"===E.modifier){var T="*"===E.modifier?"?":"";v+="(?:".concat(w,"((?:").concat(E.pattern,")(?:").concat(A).concat(w,"(?:").concat(E.pattern,"))*)").concat(A,")").concat(T)}else v+="(?:".concat(w,"(").concat(E.pattern,")").concat(A,")").concat(E.modifier);else{if("+"===E.modifier||"*"===E.modifier)throw new TypeError('Can not repeat "'.concat(E.name,'" without a prefix and suffix'));v+="(".concat(E.pattern,")").concat(E.modifier)}else v+="(?:".concat(w).concat(A,")").concat(E.modifier)}}if(l)r||(v+="".concat(m,"?")),v+=i.endsWith?"(?=".concat(g,")"):"$";else{var S=e[e.length-1],x="string"===typeof S?m.indexOf(S[S.length-1])>-1:void 0===S;r||(v+="(?:".concat(m,"(?=").concat(g,"))?")),x||(v+="(?=".concat(m,"|").concat(g,")"))}return new RegExp(v,wT(i))}function LT(e,t,i){return e instanceof RegExp?AT(e,t):Array.isArray(e)?TT(e,t,i):ST(e,t,i)}function kT(e){try{return decodeURIComponent(e)}catch(t){return e}}function IT(e,t,i,s,r){var n,a,o=0;return{next:function(l){if(e===l)return{done:!0,value:!1};if(!n){var c=e,d=!c.children;if(c.match||(c.match=yT(c.path||"",Object.assign({end:d},i))),n=c.match(s),n){var h=n,u=h.path;return n.path=d||"/"!==u.charAt(u.length-1)?u:u.substr(1),n.params=Object.assign({},r,n.params),{done:!1,value:{route:e,baseUrl:t,path:n.path,params:n.params}}}}if(n&&e.children)while(o<e.children.length){if(!a){var p=e.children[o];p.parent=e,a=IT(p,t+n.path,i,s.substr(n.path.length),n.params)}var f=a.next(l);if(!f.done)return{done:!1,value:f.value};a=null,o++}return{done:!0,value:!1}}}}function _T(e,t){if("function"===typeof e.route.action)return e.route.action(e,t)}function CT(e,t){var i=t;while(i)if(i=i.parent,i===e)return!0;return!1}gT();var RT=function(){function e(e,t){if(!e||"object"!==typeof e)throw new TypeError("Invalid routes");this.options=Object.assign({decode:kT},t),this.baseUrl=this.options.baseUrl||"",this.root=Array.isArray(e)?{path:"",children:e,parent:null}:e,this.root.parent=null}var t=e.prototype;return t.resolve=function(e){var t,i,s=this,r=Object.assign({router:this},this.options.context,"string"===typeof e?{pathname:e}:e),n=IT(this.root,this.baseUrl,this.options,r.pathname.substr(this.baseUrl.length)),a=this.options.resolveRoute||_T,o=r;function l(e,s,c){void 0===s&&(s=!t.done&&t.value.route);var d=null===c&&!t.done&&t.value.route;if(t=i||n.next(d),i=null,!e&&(t.done||!CT(s,t.value.route)))return i=t,Promise.resolve(null);if(t.done){var h=new Error("Route not found");return h.status=404,Promise.reject(h)}return o=Object.assign({},r,t.value),Promise.resolve(a(o,t.value.params)).then(function(t){return null!==t&&void 0!==t?t:l(e,s,t)})}return r["next"]=l,Promise.resolve().then(function(){return l(!0,s.root)})["catch"](function(e){if(s.options.errorHandler)return s.options.errorHandler(e,o);throw e})},e}();class PT{constructor(e){this.isLoadDdEntry=!1,this.cache={},this.pageContext=e,this.init(),ne.on("__taroH5SetNavigationBarTitle",e=>{this.setTitle(e)}),ne.on("__taroH5setNavigationBarLoading",e=>{this.setNavigationLoading(e)}),ne.on("__taroH5setNavigationBarColor",({backgroundColor:e,frontColor:t})=>{"string"===typeof e&&this.setNavigationBarBackground(e),"string"===typeof t&&this.setNavigationBarTextStyle(t)})}toHomeFn(){PA({url:this.pageContext.originHomePage})}backFn(){CA()}get homeBtnElement(){var e;return this.navigationBarElement?null===(e=this.navigationBarElement.getElementsByClassName("taro-navigation-bar-home"))||void 0===e?void 0:e[0]:null}get backBtnElement(){var e;return this.navigationBarElement?null===(e=this.navigationBarElement.getElementsByClassName("taro-navigation-bar-back"))||void 0===e?void 0:e[0]:null}get titleElement(){var e;return this.navigationBarElement?null===(e=this.navigationBarElement.getElementsByClassName("taro-navigation-bar-title"))||void 0===e?void 0:e[0]:null}get loadingElement(){return this.navigationBarElement?this.navigationBarElement.getElementsByClassName("taro-navigation-bar-loading")[0]:null}init(){var e,t;this.setNavigationBarElement(),this.navigationBarElement&&(null===(e=this.homeBtnElement)||void 0===e||e.addEventListener("click",this.toHomeFn.bind(this)),null===(t=this.backBtnElement)||void 0===t||t.addEventListener("click",this.backFn.bind(this)))}setNavigationBarElement(){this.navigationBarElement=document.getElementById("taro-navigation-bar")}load(){this.setCacheValue(),this.setTitle(),this.setNavigationBarVisible(),this.setFnBtnState(),this.setNavigationBarBackground(),this.setNavigationBarTextStyle(),this.setNavigationLoading()}setCacheValue(){const e=this.pageContext.originPathname;"object"!==typeof this.cache[e]&&(this.cache[e]={})}setFnBtnState(){const e=this.pageContext.currentPage;this.pageContext.isTabBar(e)||this.pageContext.homePage===e?this.fnBtnToggleToNone():AA.length>1?this.fnBtnToggleToBack():this.fnBtnToggleToHome()}shiftLoadingState(e){this.loadingElement&&(e?this.loadingElement.classList.add("taro-navigation-bar-loading-show"):this.loadingElement.classList.remove("taro-navigation-bar-loading-show"))}setNavigationLoading(e){var t;if(!this.navigationBarElement)return;const i=this.pageContext.originPathname;let s;if("boolean"===typeof e)s=e,this.cache[i]&&(this.cache[i].loading=s);else{const e=null===(t=this.cache[i])||void 0===t?void 0:t.loading;"boolean"===typeof e?s=e:(s=!1,this.cache[i]&&(this.cache[i].loading=s))}this.shiftLoadingState(s)}setNavigationBarBackground(e){var t,i,s;if(!this.navigationBarElement)return;const r=this.pageContext.originPathname;let n;if("string"===typeof e)n=e,this.cache[r]&&(this.cache[r].backgroundColor=n);else{const e=null===(t=this.cache[r])||void 0===t?void 0:t.backgroundColor;"string"===typeof e?n=e:(n=(null===(s=null===(i=this.pageContext.config)||void 0===i?void 0:i.window)||void 0===s?void 0:s.navigationBarBackgroundColor)||"#000000",this.cache[r]&&(this.cache[r].backgroundColor=n))}this.navigationBarElement.style.background=n}setNavigationBarTextStyle(e){var t,i,s;if(!this.navigationBarElement)return;const r=this.pageContext.originPathname;let n;if("string"===typeof e)n=e,this.cache[r]&&(this.cache[r].fontColor=n);else{const e=null===(t=this.cache[r])||void 0===t?void 0:t.fontColor;"string"===typeof e?n=e:(n=(null===(s=null===(i=this.pageContext.config)||void 0===i?void 0:i.window)||void 0===s?void 0:s.navigationBarTextStyle)||"white",this.cache[r]&&(this.cache[r].fontColor=n))}this.navigationBarElement.style.color=n}setTitle(e){var t,i,s;const r=this.pageContext.originPathname;let n;if("string"===typeof e)n=e,this.cache[r]&&(this.cache[r].title=n);else{const e=null===(t=this.cache[r])||void 0===t?void 0:t.title;"string"===typeof e?n=e:(n=null!==(s=null===(i=this.pageContext.pageConfig)||void 0===i?void 0:i.navigationBarTitleText)&&void 0!==s?s:document.title,this.cache[r]&&(this.cache[r].title=n))}document.title=n,this.titleElement&&(this.titleElement.innerHTML=n)}fnBtnToggleToHome(){this.navigationBarElement&&(this.navigationBarElement.classList.add("taro-navigation-bar-home-icon"),this.navigationBarElement.classList.remove("taro-navigation-bar-back-icon"))}fnBtnToggleToBack(){this.navigationBarElement&&(this.navigationBarElement.classList.remove("taro-navigation-bar-home-icon"),this.navigationBarElement.classList.add("taro-navigation-bar-back-icon"))}fnBtnToggleToNone(){this.navigationBarElement&&(this.navigationBarElement.classList.remove("taro-navigation-bar-home-icon"),this.navigationBarElement.classList.remove("taro-navigation-bar-back-icon"))}setNavigationBarVisible(e){var t,i;if(!this.navigationBarElement)return;let s;"boolean"===typeof e?s=e:(s=null===(t=this.pageContext.config.window)||void 0===t?void 0:t.navigationStyle,"string"===typeof(null===(i=this.pageContext.pageConfig)||void 0===i?void 0:i.navigationStyle)&&(s=this.pageContext.pageConfig.navigationStyle)),"default"===s?(this.navigationBarElement.classList.add("taro-navigation-bar-show"),this.navigationBarElement.classList.remove("taro-navigation-bar-hide")):(this.navigationBarElement.classList.add("taro-navigation-bar-hide"),this.navigationBarElement.classList.remove("taro-navigation-bar-show"))}}class DT{constructor(e,t){this.history=t,this.defaultAnimation={duration:300,delay:50},this.config=e,this.homePage=Me(this.routes[0].path,this.basename,this.customRoutes,this.config.entryPagePath),this.originHomePage=this.config.entryPagePath||this.routes[0].path||this.basename,this.mount(),this.navigationBarHandler=new PT(this)}get currentPage(){const e=Oe(this.routerMode,this.basename);return"/"===e?this.homePage:e}get appId(){return this.config.appId||"app"}get router(){return this.config.router||{}}get routerMode(){return this.router.mode||"hash"}get customRoutes(){return this.router.customRoutes||{}}get routes(){return this.config.routes||[]}get tabBarList(){var e;return(null===(e=this.config.tabBar)||void 0===e?void 0:e.list)||[]}get PullDownRefresh(){return this.config.PullDownRefresh}get animation(){var e,t;return null!==(t=null===(e=this.config)||void 0===e?void 0:e.animation)&&void 0!==t?t:this.defaultAnimation}get animationDelay(){var e;return("object"===typeof this.animation?this.animation.delay:this.animation?null===(e=this.defaultAnimation)||void 0===e?void 0:e.delay:0)||0}get animationDuration(){var e;return("object"===typeof this.animation?this.animation.duration:this.animation?null===(e=this.defaultAnimation)||void 0===e?void 0:e.duration:0)||0}set pathname(e){this.router.pathname=e}get pathname(){return this.router.pathname}get originPathname(){return SA.getOrigin(_e(Re(this.pathname,this.basename)))}get basename(){return this.router.basename||""}get pageConfig(){const e=_e(this.homePage);return this.routes.find(t=>{const i=_e(t.path);return[i,e].includes(this.originPathname)})}isTabBar(e){var t;const i=_e(Re(e,this.basename)).split("?")[0],s=(null===(t=Object.entries(this.customRoutes).find(([,e])=>"string"===typeof e?e===i:(null===e||void 0===e?void 0:e.length)>0&&e.includes(i)))||void 0===t?void 0:t[0])||i;return!!s&&this.tabBarList.some(e=>Pe(e.pagePath)===s)}isDefaultNavigationStyle(){var e,t;let i=null===(e=this.config.window)||void 0===e?void 0:e.navigationStyle;return"string"===typeof(null===(t=this.pageConfig)||void 0===t?void 0:t.navigationStyle)&&(i=this.pageConfig.navigationStyle),"custom"!==i}isSamePage(e){const t=Re(this.pathname,this.basename),i=Re(null===e||void 0===e?void 0:e.path,this.basename);return i.startsWith(t+"?")}get search(){let e="?";if("hash"===this.routerMode){const t=location.hash.indexOf("?");t>-1&&(e=location.hash.slice(t))}else e=location.search;return e.substring(1)}get usingWindowScroll(){var e;let t=!1;"boolean"===typeof(null===(e=this.pageConfig)||void 0===e?void 0:e.usingWindowScroll)&&(t=this.pageConfig.usingWindowScroll);const i=window;return i.__taroAppConfig||(i.__taroAppConfig={}),i.__taroAppConfig.usingWindowScroll=t,t}getQuery(e="",t="",i={}){t=t?`${t}&${this.search}`:this.search;const s=t?lT.parse(t,{decode:!1}):{};return s.stamp=e,Object.assign(Object.assign({},s),i)}mount(){bA(this.history,this.basename),this.pathname=vA.location.pathname,this.animation&&Jc(this.animationDuration),ed(this.tabBarList.length>1,this.usingWindowScroll,this.router.enhanceAnimation)}onReady(e,t=!0){var i;const s=this.getPageContainer(e);if(s&&!(null===s||void 0===s?void 0:s["__isReady"])){const r=s.firstElementChild,n=null===r||void 0===r?void 0:r["componentOnReady"];n?null===n||void 0===n||n().then(()=>{ue(()=>{var t;null===(t=e.onReady)||void 0===t||t.call(e),s["__isReady"]=!0})}):(null===(i=e.onReady)||void 0===i||i.call(e),s["__isReady"]=!0),t&&(s["__page"]=e)}}load(e,t={},i,s=0){var r,n;if(!e)return;AA.push(e);const a=this.getQuery(i,"",e.options);let o=this.getPageContainer(e);o?(o.classList.remove("taro_page_shade"),this.isTabBar(this.pathname)&&o.classList.add("taro_tabbar_page"),this.isDefaultNavigationStyle()&&o.classList.add("taro_navigation_page"),this.addAnimation(o,0===s),null===(r=e.onShow)||void 0===r||r.call(e),this.navigationBarHandler.load(),this.bindPageEvents(e,t),this.triggerRouterChange()):null===(n=e.onLoad)||void 0===n||n.call(e,a,()=>{var i;o=this.getPageContainer(e),this.isTabBar(this.pathname)&&(null===o||void 0===o||o.classList.add("taro_tabbar_page")),this.isDefaultNavigationStyle()&&(null===o||void 0===o||o.classList.add("taro_navigation_page")),this.addAnimation(o,0===s),null===(i=e.onShow)||void 0===i||i.call(e),this.navigationBarHandler.load(),this.onReady(e,!0),this.bindPageEvents(e,t),this.triggerRouterChange()})}unload(e,t=1,i=!1){var s,r,n;if(e){if(AA.delta=--t,AA.pop(),this.animation&&i){this.unloadTimer&&(clearTimeout(this.unloadTimer),null===(r=null===(s=this.lastUnloadPage)||void 0===s?void 0:s.onUnload)||void 0===r||r.call(s),this.unloadTimer=null),this.lastUnloadPage=e;const t=this.getPageContainer(e);null===t||void 0===t||t.classList.remove("taro_page_stationed"),null===t||void 0===t||t.classList.remove("taro_page_show"),t&&(t.style.zIndex="1"),this.unloadTimer=setTimeout(()=>{var e,t;this.unloadTimer=null,null===(t=null===(e=this.lastUnloadPage)||void 0===e?void 0:e.onUnload)||void 0===t||t.call(e),ne.trigger("__taroPageOnShowAfterDestroyed")},this.animationDuration)}else{const t=this.getPageContainer(e);null===t||void 0===t||t.classList.remove("taro_page_stationed"),null===t||void 0===t||t.classList.remove("taro_page_show"),null===(n=null===e||void 0===e?void 0:e.onUnload)||void 0===n||n.call(e),setTimeout(()=>{ne.trigger("__taroPageOnShowAfterDestroyed")},0)}t>=1&&this.unload(AA.last,t)}}show(e,t={},i=0){var s,r;if(!e)return;const n=this.getQuery(e["$taroParams"]["stamp"],"",e.options);let a=this.getPageContainer(e);a?(a.classList.remove("taro_page_shade"),this.addAnimation(a,0===i),null===(s=e.onShow)||void 0===s||s.call(e),this.navigationBarHandler.load(),this.bindPageEvents(e,t),this.triggerRouterChange()):null===(r=e.onLoad)||void 0===r||r.call(e,n,()=>{var s;a=this.getPageContainer(e),this.addAnimation(a,0===i),null===(s=e.onShow)||void 0===s||s.call(e),this.navigationBarHandler.load(),this.onReady(e,!1),this.bindPageEvents(e,t),this.triggerRouterChange()})}hide(e,t=!1){var i,s,r,n,a,o,l,c;if(!e)return;const d=this.getPageContainer(e);d?t?(this.hideTimer&&(clearTimeout(this.hideTimer),this.hideTimer=null,null===(r=null===(s=null===(i=this.lastHidePage)||void 0===i?void 0:i.classList)||void 0===s?void 0:s.add)||void 0===r||r.call(s,"taro_page_shade")),this.lastHidePage=d,this.hideTimer=setTimeout(()=>{this.hideTimer=null,d.classList.add("taro_page_shade")},this.animationDuration+this.animationDelay),null===(n=e.onHide)||void 0===n||n.call(e)):(this.hideTimer&&(clearTimeout(this.hideTimer),this.hideTimer=null,null===(l=null===(o=null===(a=this.lastHidePage)||void 0===a?void 0:a.classList)||void 0===o?void 0:o.add)||void 0===l||l.call(o,"taro_page_shade")),null===(c=e.onHide)||void 0===c||c.call(e),d.classList.add("taro_page_shade"),this.lastHidePage=d):setTimeout(()=>this.hide(e),0)}addAnimation(e,t=!1){e&&(this.animation&&!t?setTimeout(()=>{e.classList.add("taro_page_show"),setTimeout(()=>{e.classList.add("taro_page_stationed")},this.animationDuration)},this.animationDelay):(e.classList.add("taro_page_show"),e.classList.add("taro_page_stationed")))}getPageContainer(e){var t;const i=e?null===e||void 0===e?void 0:e.path:null===(t=de.page)||void 0===t?void 0:t.path,s=null===i||void 0===i?void 0:i.replace(/([^a-z0-9\u00a0-\uffff_-])/gi,"\\$1");if(e)return document.querySelector(`.taro_page#${s}`);const r=s?document.querySelector(`.taro_page#${s}`):document.querySelector(".taro_page")||document.querySelector(".taro_router");return r}getScrollingElement(e){return this.usingWindowScroll?window:this.getPageContainer(e)||window}bindPageEvents(e,t={}){var i;const s=this.getScrollingElement(e),r=t.onReachBottomDistance||(null===(i=this.config.window)||void 0===i?void 0:i.onReachBottomDistance)||50;pT(e,s,r),dT(e)}triggerRouterChange(){setTimeout(()=>{ne.trigger("__afterTaroRouterChange",{toLocation:{path:this.pathname}})},0)}}const MT=ge();let OT=MT();function NT(e,t,i,s){var r,n;"function"===typeof t.onUnhandledRejection&&window.addEventListener("unhandledrejection",t.onUnhandledRejection),mA.config=i;const a=new DT(i,e),o={};SA.set(a.router.customRoutes);const l=a.router.basename,c=a.routes.map(e=>{const t=_e(e.path),i=SA.getAll(t);return{path:i.length<1?t:i,action:e.load}}),d=new RT(c,{baseUrl:l||""}),h={path:a.currentPage,query:a.getQuery(OT),scene:0,shareTicket:"",referrerInfo:{}};ne.trigger("__taroRouterLaunch",h),null===(r=t.onLaunch)||void 0===r||r.call(t,h),t.onError&&window.addEventListener("error",e=>{var i;return null===(i=t.onError)||void 0===i?void 0:i.call(t,e.message)});const u=e=>le(this,[e],void 0,function*({location:e,action:r}){var n,l,c,h,u,p,f,g;const m=decodeURI(e.pathname);let v,y,b;(null===(n=window.__taroAppConfig)||void 0===n?void 0:n.usingWindowScroll)&&window.scrollTo(0,0),ne.trigger("__taroRouterChange",{toLocation:{path:m}});const E=a.router.forcePath||m;o[E]="number"===typeof o[E]?o[E]+1:1;const w=o[E];let A;try{const e=yield d.resolve(E);[v,y,b]=yield Promise.all(e),A=o[E]}catch(D){if(404===D.status){const e={isEntryPage:0===AA.length,path:m,query:a.getQuery(MT())};null===(l=t.onPageNotFound)||void 0===l||l.call(t,e),ne.trigger("__taroRouterNotFound",e)}else{if(!/Loading hot update .* failed./.test(D.message))throw D;window.location.reload()}}if(!v||w!==A)return;a.pathname=y.pathname;const{pathname:T,pageConfig:S}=a;let x=(null===(c=null===i||void 0===i?void 0:i.window)||void 0===c?void 0:c.enablePullDownRefresh)||!1,L=(null===(h=null===i||void 0===i?void 0:i.window)||void 0===h?void 0:h.navigationStyle)||"default",k=(null===(u=null===i||void 0===i?void 0:i.window)||void 0===u?void 0:u.navigationBarTextStyle)||"white",I=(null===(p=null===i||void 0===i?void 0:i.window)||void 0===p?void 0:p.navigationBarBackgroundColor)||"#000000";S&&("boolean"===typeof S.enablePullDownRefresh&&(x=S.enablePullDownRefresh),"string"===typeof S.navigationStyle&&(L=S.navigationStyle),"string"===typeof S.navigationBarTextStyle&&(k=S.navigationBarTextStyle),"string"===typeof S.navigationBarBackgroundColor&&(I=S.navigationBarBackgroundColor)),ne.trigger("__taroSetNavigationStyle",L,k,I);const _=de.page,C=null!==(f=AA.method)&&void 0!==f?f:"",R=AA.getTabs();let P=!1;if(AA.method="","reLaunch"===C){a.unload(_,AA.length);for(const e in R)R[e]&&(a.unload(R[e]),AA.removeTab(e));P=!0}else if(_&&a.isTabBar(T)){if(a.isSamePage(_))return;if(a.isTabBar(_.path))a.hide(_),AA.pushTab(_.path.split("?")[0]);else if(AA.length>0){const e=AA.getItem(0);a.isTabBar(e.path)?(a.unload(_,AA.length-1,!0),AA.pushTab(e.path.split("?")[0])):a.unload(_,AA.length,!0)}if(R[T])return AA.popTab(T),a.show(AA.getItem(0),S,0);P=!0}else if("POP"===r){const e=AA.getPrevIndex(T),t=AA.getDelta(T);_!==AA.getItem(e)&&(a.unload(_,t,e>-1),e>-1?ne.once("__taroPageOnShowAfterDestroyed",()=>{a.show(AA.getItem(e),S,e)}):P=!0)}else if("REPLACE"===r){const e=AA.getDelta(T);a.unload(_,e),P=!0}else"PUSH"===r&&(a.hide(_,!0),P=!0);if(P||AA.length<1){const e=null!==(g=v.default)&&void 0!==g?g:v,t=Object.assign({},S),i=AA.length;delete t["path"],delete t["load"];let r="";OT?(r=OT,OT=""):r=MT();const n=Ye(x?F.call("createPullDownComponent",e,T,s,a.PullDownRefresh,r):e,T+Ge(a.getQuery(r)),{},t);b&&(n.options=b),a.load(n,S,r,i)}}),p=_e(Re(e.location.pathname,a.basename));return"/"===p&&e.replace(EA(a.homePage+e.location.search)),u({location:e.location,action:nA.Push}),null===(n=t.onShow)||void 0===n||n.call(t,h),window.addEventListener("visibilitychange",()=>{var e,i,s,r,n,a,o;const l=(null===(e=de.page)||void 0===e?void 0:e.path)||"",c=l.substring(0,l.indexOf("?")),d={};Object.assign(d,h,{path:c}),"visible"===document.visibilityState?(null===(i=t.onShow)||void 0===i||i.call(t,d),null===(r=null===(s=de.page)||void 0===s?void 0:s.onShow)||void 0===r||r.call(s)):((null===(n=de.page)||void 0===n?void 0:n.path)&&Ue(null===(a=de.page)||void 0===a?void 0:a.path,"onHide"),null===(o=t.onHide)||void 0===o||o.call(t,d))}),e.listen(u)}function BT(e,t,i=e.appId||"app"){let s=document.getElementById(i),r=!0;s||(s=document.createElement("div"),s.id=i,r=!1);const n=(null===s||void 0===s?void 0:s.parentNode)||(null===s||void 0===s?void 0:s.parentElement)||document.body;s.classList.add("taro_router"),r||n.appendChild(s),ad(e,n)}class FT{constructor({name:e,success:t,fail:i,complete:s}){this.isHandlerError=!1,this.methodName=e,this.__success=t,this.__fail=i,this.__complete=s,this.isHandlerError=P(this.__complete)||P(this.__fail)}success(e={},t={}){e.errMsg||(e.errMsg=`${this.methodName}:ok`),P(this.__success)&&this.__success(e),P(this.__complete)&&this.__complete(e);const{resolve:i=Promise.resolve.bind(Promise)}=t;return i(e)}fail(e={},t={}){e.errMsg?e.errMsg=`${this.methodName}:fail ${e.errMsg}`:e.errMsg=`${this.methodName}:fail`,P(this.__fail)&&this.__fail(e),P(this.__complete)&&this.__complete(e);const{resolve:i=Promise.resolve.bind(Promise),reject:s=Promise.reject.bind(Promise)}=t;return this.isHandlerError?i(e):s(e)}}function $T(e){return e&&"object"===typeof e?{flag:!0}:{flag:!1,msg:UT({correct:"Object",wrong:e})}}function UT({name:e="",para:t,correct:i,wrong:s,level:r="error"}){const n=t?`parameter.${t}`:"parameter",a=GT(null===s?"Null":typeof s);return`${e?`${e}:fail `:""}parameter ${r}: ${n} should be ${i} instead of ${a}`}function GT(e){return"string"!==typeof e||(e=e.replace(/^./,e=>e.toUpperCase())),e}function HT(e){let t="";for(const i in e)t+=`${i}: ${e[i]};`;return t.indexOf("display: flex;")>=0&&(t+="display: -webkit-box;display: -webkit-flex;"),t=t.replace(/transform:(.+?);/g,(e,t)=>`${e}-webkit-transform:${t};`),t=t.replace(/flex-direction:(.+?);/g,(e,t)=>`${e}-webkit-flex-direction:${t};`),t}function jT(e,t){e.style.webkitTransform=t,e.style.transform=t}function zT(e=""){return(t={},...i)=>{const{success:s,fail:r,complete:n}=t,a=new FT({name:e,success:s,fail:r,complete:n}),o="\u6682\u65f6\u4e0d\u652f\u6301 API";return Zc.eventCenter.trigger("__taroNotSupport",{name:e,args:[t,...i],type:"method",category:"temporarily"}),console.warn(o),a.success({errMsg:o})}}function VT(e=""){return(t={},...i)=>{const{success:s,fail:r,complete:n}=t,a=new FT({name:e,success:s,fail:r,complete:n}),o="\u4e0d\u652f\u6301 API";return Zc.eventCenter.trigger("__taroNotSupport",{name:e,args:[t,...i],type:"method",category:"permanently"}),console.warn(o),a.success({errMsg:o})}}function YT(){var e,t,i,s,r,n;const a=window.__taroAppConfig||{},o=Oe(null===(e=a.router)||void 0===e?void 0:e.mode,null===(t=a.router)||void 0===t?void 0:t.basename),l=Me(null===(s=null===(i=a.routes)||void 0===i?void 0:i[0])||void 0===s?void 0:s.path,null===(r=a.router)||void 0===r?void 0:r.basename,null===(n=a.router)||void 0===n?void 0:n.customRoutes,a.entryPagePath);return`${"/"===o?l:o}?stamp=1`}var WT={exports:{}};WT.exports,function(e,t){(function(){var i={function:!0,object:!0},s=i[typeof window]&&window||this,r=t,n=e&&!e.nodeType&&e,a=r&&n&&"object"==typeof Dc&&Dc;!a||a.global!==a&&a.window!==a&&a.self!==a||(s=a);var o=Math.pow(2,53)-1,l=/\bOpera/,c=Object.prototype,d=c.hasOwnProperty,h=c.toString;function u(e){return e=String(e),e.charAt(0).toUpperCase()+e.slice(1)}function p(e,t,i){var s={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&i&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(s=s[/[\d.]+$/.exec(e)])&&(e="Windows "+s),e=String(e),t&&i&&(e=e.replace(RegExp(t,"i"),i)),e=g(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0]),e}function f(e,t){var i=-1,s=e?e.length:0;if("number"==typeof s&&s>-1&&s<=o)while(++i<s)t(e[i],i,e);else m(e,t)}function g(e){return e=w(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:u(e)}function m(e,t){for(var i in e)d.call(e,i)&&t(e[i],i,e)}function v(e){return null==e?u(e):h.call(e).slice(8,-1)}function y(e,t){var i=null!=e?typeof e[t]:"number";return!/^(?:boolean|number|string|undefined)$/.test(i)&&("object"!=i||!!e[t])}function b(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function E(e,t){var i=null;return f(e,function(s,r){i=t(i,s,r,e)}),i}function w(e){return String(e).replace(/^ +| +$/g,"")}function A(e){var t=s,i=e&&"object"==typeof e&&"String"!=v(e);i&&(t=e,e=null);var r=t.navigator||{},n=r.userAgent||"";e||(e=n);var a,o,c=i?!!r.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(h.toString()),d="Object",u=i?d:"ScriptBridgingProxyObject",f=i?d:"Environment",T=i&&t.java?"JavaPackage":v(t.java),S=i?d:"RuntimeObject",x=/\bJava/.test(T)&&t.java,L=x&&v(t.environment)==f,k=x?"a":"\u03b1",I=x?"b":"\u03b2",_=t.document||{},C=t.operamini||t.opera,R=l.test(R=i&&C?C["[[Class]]"]:v(C))?R:C=null,P=e,D=[],M=null,O=e==n,N=O&&C&&"function"==typeof C.version&&C.version(),B=H([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),F=z(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),$=Y([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),U=j({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),G=V(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function H(t){return E(t,function(t,i){return t||RegExp("\\b"+(i.pattern||b(i))+"\\b","i").exec(e)&&(i.label||i)})}function j(t){return E(t,function(t,i,s){return t||(i[$]||i[/^[a-z]+(?: +[a-z]+\b)*/i.exec($)]||RegExp("\\b"+b(s)+"(?:\\b|\\w*\\d)","i").exec(e))&&s})}function z(t){return E(t,function(t,i){return t||RegExp("\\b"+(i.pattern||b(i))+"\\b","i").exec(e)&&(i.label||i)})}function V(t){return E(t,function(t,i){var s=i.pattern||b(i);return!t&&(t=RegExp("\\b"+s+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=p(t,s,i.label||i)),t})}function Y(t){return E(t,function(t,i){var s=i.pattern||b(i);return!t&&(t=RegExp("\\b"+s+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+s+" *\\w+-[\\w]*","i").exec(e)||RegExp("\\b"+s+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(i.label&&!RegExp(s,"i").test(i.label)?i.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),i=i.label||i,t=g(t[0].replace(RegExp(s,"i"),i).replace(RegExp("; *(?:"+i+"[_-])?","i")," ").replace(RegExp("("+i+")[-_.]?(\\w)","i"),"$1 $2"))),t})}function W(t){return E(t,function(t,i){return t||(RegExp(i+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null})}function K(){return this.description||""}if(B&&(B=[B]),/\bAndroid\b/.test(G)&&!$&&(a=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(e))&&($=w(a[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),U&&!$?$=Y([U]):U&&$&&($=$.replace(RegExp("^("+b(U)+")[-_.\\s]","i"),U+" ").replace(RegExp("^("+b(U)+")[-_.]?(\\w)","i"),U+" $2")),(a=/\bGoogle TV\b/.exec($))&&($=a[0]),/\bSimulator\b/i.test(e)&&($=($?$+" ":"")+"Simulator"),"Opera Mini"==F&&/\bOPiOS\b/.test(e)&&D.push("running in Turbo/Uncompressed mode"),"IE"==F&&/\blike iPhone OS\b/.test(e)?(a=A(e.replace(/like iPhone OS/,"")),U=a.manufacturer,$=a.product):/^iP/.test($)?(F||(F="Safari"),G="iOS"+((a=/ OS ([\d_]+)/i.exec(e))?" "+a[1].replace(/_/g,"."):"")):"Konqueror"==F&&/^Linux\b/i.test(G)?G="Kubuntu":U&&"Google"!=U&&(/Chrome/.test(F)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test($))||/\bAndroid\b/.test(G)&&/^Chrome/.test(F)&&/\bVersion\//i.test(e)?(F="Android Browser",G=/\bAndroid\b/.test(G)?G:"Android"):"Silk"==F?(/\bMobi/i.test(e)||(G="Android",D.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&D.unshift("accelerated")):"UC Browser"==F&&/\bUCWEB\b/.test(e)?D.push("speed mode"):"PaleMoon"==F&&(a=/\bFirefox\/([\d.]+)\b/.exec(e))?D.push("identifying as Firefox "+a[1]):"Firefox"==F&&(a=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(G||(G="Firefox OS"),$||($=a[1])):!F||(a=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(F))?(F&&!$&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(a+"/")+8))&&(F=null),(a=$||U||G)&&($||U||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(G))&&(F=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(G)?G:a)+" Browser")):"Electron"==F&&(a=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&D.push("Chromium "+a),N||(N=W(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",b(F),"(?:Firefox|Minefield|NetFront)"])),(a=("iCab"==B&&parseFloat(N)>3?"WebKit":/\bOpera\b/.test(F)&&(/\bOPR\b/.test(e)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(B)&&"WebKit"||!B&&/\bMSIE\b/i.test(e)&&("Mac OS"==G?"Tasman":"Trident")||"WebKit"==B&&/\bPlayStation\b(?! Vita\b)/i.test(F)&&"NetFront")&&(B=[a]),"IE"==F&&(a=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(F+=" Mobile",G="Windows Phone "+(/\+$/.test(a)?a:a+".x"),D.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(F="IE Mobile",G="Windows Phone 8.x",D.unshift("desktop mode"),N||(N=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=F&&"Trident"==B&&(a=/\brv:([\d.]+)/.exec(e))&&(F&&D.push("identifying as "+F+(N?" "+N:"")),F="IE",N=a[1]),O){if(y(t,"global"))if(x&&(a=x.lang.System,P=a.getProperty("os.arch"),G=G||a.getProperty("os.name")+" "+a.getProperty("os.version")),L){try{N=t.require("ringo/engine").version.join("."),F="RingoJS"}catch(tH){(a=t.system)&&a.global.system==t.system&&(F="Narwhal",G||(G=a[0].os||null))}F||(F="Rhino")}else"object"==typeof t.process&&!t.process.browser&&(a=t.process)&&("object"==typeof a.versions&&("string"==typeof a.versions.electron?(D.push("Node "+a.versions.node),F="Electron",N=a.versions.electron):"string"==typeof a.versions.nw&&(D.push("Chromium "+N,"Node "+a.versions.node),F="NW.js",N=a.versions.nw)),F||(F="Node.js",P=a.arch,G=a.platform,N=/[\d.]+/.exec(a.version),N=N?N[0]:null));else v(a=t.runtime)==u?(F="Adobe AIR",G=a.flash.system.Capabilities.os):v(a=t.phantom)==S?(F="PhantomJS",N=(a=a.version||null)&&a.major+"."+a.minor+"."+a.patch):"number"==typeof _.documentMode&&(a=/\bTrident\/(\d+)/i.exec(e))?(N=[N,_.documentMode],(a=+a[1]+4)!=N[1]&&(D.push("IE "+N[1]+" mode"),B&&(B[1]=""),N[1]=a),N="IE"==F?String(N[1].toFixed(1)):N[0]):"number"==typeof _.documentMode&&/^(?:Chrome|Firefox)\b/.test(F)&&(D.push("masking as "+F+" "+N),F="IE",N="11.0",B=["Trident"],G="Windows");G=G&&g(G)}if(N&&(a=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(N)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(O&&r.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(M=/b/i.test(a)?"beta":"alpha",N=N.replace(RegExp(a+"\\+?$"),"")+("beta"==M?I:k)+(/\d+\+?/.exec(a)||"")),"Fennec"==F||"Firefox"==F&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(G))F="Firefox Mobile";else if("Maxthon"==F&&N)N=N.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test($))"Xbox 360"==$&&(G=null),"Xbox 360"==$&&/\bIEMobile\b/.test(e)&&D.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(F)&&(!F||$||/Browser|Mobi/.test(F))||"Windows CE"!=G&&!/Mobi/i.test(e))if("IE"==F&&O)try{null===t.external&&D.unshift("platform preview")}catch(tH){D.unshift("embedded")}else(/\bBlackBerry\b/.test($)||/\bBB10\b/.test(e))&&(a=(RegExp($.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||N)?(a=[a,/BB10/.test(e)],G=(a[1]?($=null,U="BlackBerry"):"Device Software")+" "+a[0],N=null):this!=m&&"Wii"!=$&&(O&&C||/Opera/.test(F)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==F&&/\bOS X (?:\d+\.){2,}/.test(G)||"IE"==F&&(G&&!/^Win/.test(G)&&N>5.5||/\bWindows XP\b/.test(G)&&N>8||8==N&&!/\bTrident\b/.test(e)))&&!l.test(a=A.call(m,e.replace(l,"")+";"))&&a.name&&(a="ing as "+a.name+((a=a.version)?" "+a:""),l.test(F)?(/\bIE\b/.test(a)&&"Mac OS"==G&&(G=null),a="identify"+a):(a="mask"+a,F=R?g(R.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(a)&&(G=null),O||(N=null)),B=["Presto"],D.push(a));else F+=" Mobile";(a=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(a=[parseFloat(a.replace(/\.(\d)$/,".0$1")),a],"Safari"==F&&"+"==a[1].slice(-1)?(F="WebKit Nightly",M="alpha",N=a[1].slice(0,-1)):N!=a[1]&&N!=(a[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(N=null),a[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(e)||0)[1],537.36==a[0]&&537.36==a[2]&&parseFloat(a[1])>=28&&"WebKit"==B&&(B=["Blink"]),O&&(c||a[1])?(B&&(B[1]="like Chrome"),a=a[1]||(a=a[0],a<530?1:a<532?2:a<532.05?3:a<533?4:a<534.03?5:a<534.07?6:a<534.1?7:a<534.13?8:a<534.16?9:a<534.24?10:a<534.3?11:a<535.01?12:a<535.02?"13+":a<535.07?15:a<535.11?16:a<535.19?17:a<536.05?18:a<536.1?19:a<537.01?20:a<537.11?"21+":a<537.13?23:a<537.18?24:a<537.24?25:a<537.36?26:"Blink"!=B?"27":"28")):(B&&(B[1]="like Safari"),a=a[0],a=a<400?1:a<500?2:a<526?3:a<533?4:a<534?"4+":a<535?5:a<537?6:a<538?7:a<601?8:a<602?9:a<604?10:a<606?11:a<608?12:"12"),B&&(B[1]+=" "+(a+="number"==typeof a?".x":/[.+]/.test(a)?"":"+")),"Safari"==F&&(!N||parseInt(N)>45)?N=a:"Chrome"==F&&/\bHeadlessChrome/i.test(e)&&D.unshift("headless")),"Opera"==F&&(a=/\bzbov|zvav$/.exec(G))?(F+=" ",D.unshift("desktop mode"),"zvav"==a?(F+="Mini",N=null):F+="Mobile",G=G.replace(RegExp(" *"+a+"$"),"")):"Safari"==F&&/\bChrome\b/.exec(B&&B[1])?(D.unshift("desktop mode"),F="Chrome Mobile",N=null,/\bOS X\b/.test(G)?(U="Apple",G="iOS 4.3+"):G=null):/\bSRWare Iron\b/.test(F)&&!N&&(N=W("Chrome")),N&&0==N.indexOf(a=/[\d.]+$/.exec(G))&&e.indexOf("/"+a+"-")>-1&&(G=w(G.replace(a,""))),G&&-1!=G.indexOf(F)&&!RegExp(F+" OS").test(G)&&(G=G.replace(RegExp(" *"+b(F)+" *"),"")),B&&!/\b(?:Avant|Nook)\b/.test(F)&&(/Browser|Lunascape|Maxthon/.test(F)||"Safari"!=F&&/^iOS/.test(G)&&/\bSafari\b/.test(B[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(F)&&B[1])&&(a=B[B.length-1])&&D.push(a),D.length&&(D=["("+D.join("; ")+")"]),U&&$&&$.indexOf(U)<0&&D.push("on "+U),$&&D.push((/^on /.test(D[D.length-1])?"":"on ")+$),G&&(a=/ ([\d.+]+)$/.exec(G),o=a&&"/"==G.charAt(G.length-a[0].length-1),G={architecture:32,family:a&&!o?G.replace(a[0],""):G,version:a?a[1]:null,toString:function(){var e=this.version;return this.family+(e&&!o?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(a=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(P))&&!/\bi686\b/i.test(P)?(G&&(G.architecture=64,G.family=G.family.replace(RegExp(" *"+a),"")),F&&(/\bWOW64\b/i.test(e)||O&&/\w(?:86|32)$/.test(r.cpuClass||r.platform)&&!/\bWin64; x64\b/i.test(e))&&D.unshift("32-bit")):G&&/^OS X/.test(G.family)&&"Chrome"==F&&parseFloat(N)>=39&&(G.architecture=64),e||(e=null);var q={};return q.description=e,q.layout=B&&B[0],q.manufacturer=U,q.name=F,q.prerelease=M,q.product=$,q.ua=e,q.version=F&&N,q.os=G||{architecture:null,family:null,version:null,toString:function(){return"null"}},q.parse=A,q.toString=K,q.version&&D.unshift(N),q.name&&D.unshift(F),G&&F&&(G!=String(G).split(" ")[0]||G!=F.split(" ")[0]&&!$)&&D.push($?"("+G+")":"on "+G),D.length&&(q.description=D.join(" ")),q}var T=A();r&&n?m(T,function(e,t){r[t]=e}):s.platform=T}).call(Dc)}(WT,WT.exports);var KT=WT.exports;const qT=Mc(KT),XT=()=>{var e,t;const i={abi:"",deviceAbi:"",benchmarkLevel:-1,brand:qT.manufacturer||"unknown",model:qT.product||"unknown",system:(null===(e=qT.os)||void 0===e?void 0:e.toString())||"unknown",platform:(null===(t=qT.os)||void 0===t?void 0:t.family)||"unknown",CPUType:""};return i},QT=function(){};class ZT{constructor(){this.options={alertText:"",itemList:[],itemColor:"#000000",success:QT,fail:QT,complete:QT},this.style={maskStyle:{position:"fixed","z-index":"1000",top:"0",right:"0",left:"0",bottom:"0",background:"rgba(0,0,0,0.6)"},actionSheetStyle:{"z-index":"4999",position:"fixed",left:"0",bottom:"0","-webkit-transform":"translate(0, 100%)",transform:"translate(0, 100%)",width:"100%","line-height":"1.6",background:"#EFEFF4","-webkit-transition":"-webkit-transform .3s",transition:"transform .3s","border-radius":"15px 15px 0 0"},menuStyle:{"background-color":"#FCFCFD","border-radius":"15px 15px 0 0"},cellStyle:{position:"relative",padding:"10px 0","text-align":"center","font-size":"18px"},titleStyle:{position:"relative",padding:"10px 0","text-align":"center","font-size":"16px",color:"rgba(0,0,0,0.8)",display:"none"},cancelStyle:{"margin-top":"6px",padding:"10px 0","text-align":"center","font-size":"18px",color:"#000000","background-color":"#FCFCFD"}},this.lastConfig={}}create(e={}){return new Promise(t=>{const{maskStyle:i,actionSheetStyle:s,menuStyle:r,cellStyle:n,titleStyle:a,cancelStyle:o}=this.style,l=Object.assign(Object.assign({},this.options),e);this.lastConfig=l,this.el=document.createElement("div"),this.el.className="taro__actionSheet",this.el.style.opacity="0",this.el.style.transition="opacity 0.2s linear",this.mask=document.createElement("div"),this.mask.setAttribute("style",HT(i)),this.actionSheet=document.createElement("div"),this.actionSheet.setAttribute("style",HT(s)),this.menu=document.createElement("div"),this.menu.setAttribute("style",HT(Object.assign(Object.assign({},r),{color:l.itemColor}))),this.cells=l.itemList.map((e,i)=>{const s=document.createElement("div");return s.className="taro-actionsheet__cell",s.setAttribute("style",HT(n)),s.textContent=e,s.dataset.tapIndex=`${i}`,s.onclick=e=>{this.hide();const i=e.currentTarget,s=Number(null===i||void 0===i?void 0:i.dataset.tapIndex)||0;t(s)},s}),this.title=document.createElement("div"),this.title.setAttribute("style",HT(a)),this.title.className="taro-actionsheet__cell",this.title.textContent=l.alertText,this.title.style.display=l.alertText?"block":"none",this.cancel=document.createElement("div"),this.cancel.setAttribute("style",HT(o)),this.cancel.textContent="\u53d6\u6d88",this.menu.appendChild(this.title),this.cells.forEach(e=>this.menu.appendChild(e)),this.actionSheet.appendChild(this.menu),this.actionSheet.appendChild(this.cancel),this.el.appendChild(this.mask),this.el.appendChild(this.actionSheet);const c=()=>{this.hide(),t("cancel")};this.mask.onclick=c,this.cancel.onclick=c,document.body.appendChild(this.el),setTimeout(()=>{this.el.style.opacity="1",jT(this.actionSheet,"translate(0, 0)")},0)})}show(e={}){return new Promise(t=>{const i=Object.assign(Object.assign({},this.options),e);this.lastConfig=i,this.hideOpacityTimer&&clearTimeout(this.hideOpacityTimer),this.hideDisplayTimer&&clearTimeout(this.hideDisplayTimer),i.itemColor&&(this.menu.style.color=i.itemColor);const{cellStyle:s}=this.style;i.itemList.forEach((e,i)=>{let r;this.cells[i]?r=this.cells[i]:(r=document.createElement("div"),r.className="taro-actionsheet__cell",r.setAttribute("style",HT(s)),r.dataset.tapIndex=`${i}`,this.cells.push(r),this.menu.appendChild(r)),r.textContent=e,r.onclick=e=>{this.hide();const i=e.currentTarget,s=Number(null===i||void 0===i?void 0:i.dataset.tapIndex)||0;t(s)}});const r=this.cells.length,n=i.itemList.length;if(r>n){for(let e=n;e<r;e++)this.menu.removeChild(this.cells[e]);this.cells.splice(n)}this.title.textContent=i.alertText,this.title.style.display=i.alertText?"block":"none";const a=()=>{this.hide(),t("cancel")};this.mask.onclick=a,this.cancel.onclick=a,this.el.style.display="block",setTimeout(()=>{this.el.style.opacity="1",jT(this.actionSheet,"translate(0, 0)")},0)})}hide(){this.hideOpacityTimer&&clearTimeout(this.hideOpacityTimer),this.hideDisplayTimer&&clearTimeout(this.hideDisplayTimer),this.hideOpacityTimer=setTimeout(()=>{this.el.style.opacity="0",jT(this.actionSheet,"translate(0, 100%)"),this.hideDisplayTimer=setTimeout(()=>{this.el.style.display="none"},200)},0)}}class JT{constructor(){this.options={title:"",content:"",showCancel:!0,cancelText:"\u53d6\u6d88",cancelColor:"#000000",confirmText:"\u786e\u5b9a",confirmColor:"#3CC51F"},this.style={maskStyle:{position:"fixed","z-index":"1000",top:"0",right:"0",left:"0",bottom:"0",background:"rgba(0,0,0,0.6)"},modalStyle:{"z-index":"4999",position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%","max-width":"300px","border-radius":"3px","text-align":"center","line-height":"1.6",overflow:"hidden",background:"#FFFFFF"},titleStyle:{padding:"20px 24px 9px","font-size":"18px"},textStyle:{padding:"0 24px 12px","min-height":"40px","font-size":"15px","line-height":"1.3",color:"#808080","word-wrap":"break-word","word-break":"break-all"},footStyle:{position:"relative","line-height":"48px","font-size":"18px",display:"flex"},btnStyle:{position:"relative","-webkit-box-flex":"1","-webkit-flex":"1",flex:"1"}}}create(e={}){return new Promise(t=>{var i,s;const{maskStyle:r,modalStyle:n,titleStyle:a,textStyle:o,footStyle:l,btnStyle:c}=this.style,d=Object.assign(Object.assign({},this.options),e);this.el=document.createElement("div"),this.el.className="taro__modal",this.el.style.opacity="0",this.el.style.transition="opacity 0.2s linear";const h=e=>{e.stopPropagation(),e.preventDefault()},u=document.createElement("div");u.className="taro-modal__mask",u.setAttribute("style",HT(r)),u.ontouchmove=h;const p=document.createElement("div");p.className="taro-modal__content",p.setAttribute("style",HT(n)),p.ontouchmove=h;const f=d.title?a:Object.assign(Object.assign({},a),{display:"none"});this.title=document.createElement("div"),this.title.className="taro-modal__title",this.title.setAttribute("style",HT(f)),this.title.textContent=d.title;const g=d.title?o:Object.assign(Object.assign({},o),{padding:"40px 20px 26px",color:"#353535"});this.text=document.createElement("div"),this.text.className="taro-modal__text",this.text.setAttribute("style",HT(g)),this.text.textContent=d.content;const m=document.createElement("div");m.className="taro-modal__foot",m.setAttribute("style",HT(l));const v=Object.assign(Object.assign({},c),{color:d.cancelColor,display:d.showCancel?"block":"none"});this.cancel=document.createElement("div"),this.cancel.className="taro-model__btn taro-model__cancel",this.cancel.setAttribute("style",HT(v)),this.cancel.textContent=d.cancelText,this.cancel.onclick=()=>{this.hide(),t("cancel")},this.confirm=document.createElement("div"),this.confirm.className="taro-model__btn taro-model__confirm",this.confirm.setAttribute("style",HT(c)),this.confirm.style.color=d.confirmColor,this.confirm.textContent=d.confirmText,this.confirm.onclick=()=>{this.hide(),t("confirm")},m.appendChild(this.cancel),m.appendChild(this.confirm),p.appendChild(this.title),p.appendChild(this.text),p.appendChild(m),this.el.appendChild(u),this.el.appendChild(p),document.body.appendChild(this.el),setTimeout(()=>{this.el.style.opacity="1"},0),this.currentPath=null!==(s=null===(i=de.page)||void 0===i?void 0:i.path)&&void 0!==s?s:YT()})}show(e={}){return new Promise(t=>{var i,s;const r=Object.assign(Object.assign({},this.options),e);this.hideOpacityTimer&&clearTimeout(this.hideOpacityTimer),this.hideDisplayTimer&&clearTimeout(this.hideDisplayTimer);const{textStyle:n}=this.style;if(r.title)this.title.textContent=r.title,this.title.style.display="block",this.text.setAttribute("style",HT(n));else{this.title.textContent="",this.title.style.display="none";const e=Object.assign(Object.assign({},n),{padding:"40px 20px 26px",color:"#353535"});this.text.setAttribute("style",HT(e))}this.text.textContent=r.content||"",this.cancel.style.display=r.showCancel?"block":"none",this.cancel.textContent=r.cancelText||"",this.cancel.style.color=r.cancelColor||"",this.confirm.textContent=r.confirmText||"",this.confirm.style.color=r.confirmColor||"",this.cancel.onclick=()=>{this.hide(),t("cancel")},this.confirm.onclick=()=>{this.hide(),t("confirm")},this.el.style.display="block",setTimeout(()=>{this.el.style.opacity="1"},0),this.currentPath=null!==(s=null===(i=de.page)||void 0===i?void 0:i.path)&&void 0!==s?s:YT()})}hide(){this.hideOpacityTimer&&clearTimeout(this.hideOpacityTimer),this.hideDisplayTimer&&clearTimeout(this.hideDisplayTimer),this.currentPath=null,this.hideOpacityTimer=setTimeout(()=>{this.el.style.opacity="0",this.hideDisplayTimer=setTimeout(()=>{this.el.style.display="none"},200)},0)}}class eS{constructor(){this.options={title:"",icon:"none",image:"",duration:1500,mask:!1},this.style={maskStyle:{position:"fixed","z-index":"1000",top:"0",right:"0",left:"0",bottom:"0"},toastStyle:{"z-index":"5000","box-sizing":"border-box",display:"flex","flex-direction":"column","justify-content":"center","-webkit-justify-content":"center",position:"fixed",top:"50%",left:"50%","min-width":"120px","max-width":"200px","min-height":"120px",padding:"15px",transform:"translate(-50%, -50%)","border-radius":"5px","text-align":"center","line-height":"1.6",color:"#FFFFFF",background:"rgba(17, 17, 17, 0.7)"},successStyle:{margin:"6px auto",width:"38px",height:"38px",background:"transparent url(data:image/svg+xml;base64,PHN2ZyB0PSIxNjM5NTQ4OTYzMjA0IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjQzNDgiIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNMjE5Ljk1MiA1MTIuNTc2bDIxMC40MzIgMjEwLjQzMi00NS4yNDggNDUuMjU2LTIxMC40MzItMjEwLjQzMnoiIHAtaWQ9IjQzNDkiIGZpbGw9IiNmZmZmZmYiPjwvcGF0aD48cGF0aCBkPSJNNzk5LjY3MiAyNjIuMjY0bDQ1LjI1NiA0NS4yNTYtNDYwLjQ2NCA0NjAuNDY0LTQ1LjI1Ni00NS4yNTZ6IiBwLWlkPSI0MzUwIiBmaWxsPSIjZmZmZmZmIj48L3BhdGg+PC9zdmc+) no-repeat","background-size":"100%"},errrorStyle:{margin:"6px auto",width:"38px",height:"38px",background:"transparent url(data:image/svg+xml;base64,PHN2ZyB0PSIxNjM5NTUxMDU1MTgzIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjE0MDc2IiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTUxMiA2NEMyNjQuNTggNjQgNjQgMjY0LjU4IDY0IDUxMnMyMDAuNTggNDQ4IDQ0OCA0NDggNDQ4LTIwMC41OCA0NDgtNDQ4Uzc1OS40MiA2NCA1MTIgNjR6IG0wIDc1MmEzNiAzNiAwIDEgMSAzNi0zNiAzNiAzNiAwIDAgMS0zNiAzNnogbTUxLjgzLTU1MS45NUw1NDggNjM2YTM2IDM2IDAgMCAxLTcyIDBsLTE1LjgzLTM3MS45NWMtMC4xLTEuMzMtMC4xNy0yLjY4LTAuMTctNC4wNWE1MiA1MiAwIDAgMSAxMDQgMGMwIDEuMzctMC4wNyAyLjcyLTAuMTcgNC4wNXoiIHAtaWQ9IjE0MDc3IiBmaWxsPSIjZmZmZmZmIj48L3BhdGg+PC9zdmc+) no-repeat","background-size":"100%"},loadingStyle:{margin:"6px auto",width:"38px",height:"38px","-webkit-animation":"taroLoading 1s steps(12, end) infinite",animation:"taroLoading 1s steps(12, end) infinite",background:"transparent url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCI+PHBhdGggZmlsbD0ibm9uZSIgZD0iTTAgMGgxMDB2MTAwSDB6Ii8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjRTlFOUU5IiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgLTMwKSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iIzk4OTY5NyIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSgzMCAxMDUuOTggNjUpIi8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjOUI5OTlBIiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0icm90YXRlKDYwIDc1Ljk4IDY1KSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iI0EzQTFBMiIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSg5MCA2NSA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNBQkE5QUEiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoMTIwIDU4LjY2IDY1KSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iI0IyQjJCMiIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSgxNTAgNTQuMDIgNjUpIi8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjQkFCOEI5IiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0icm90YXRlKDE4MCA1MCA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNDMkMwQzEiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoLTE1MCA0NS45OCA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNDQkNCQ0IiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoLTEyMCA0MS4zNCA2NSkiLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSIyMCIgeD0iNDYuNSIgeT0iNDAiIGZpbGw9IiNEMkQyRDIiIHJ4PSI1IiByeT0iNSIgdHJhbnNmb3JtPSJyb3RhdGUoLTkwIDM1IDY1KSIvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjIwIiB4PSI0Ni41IiB5PSI0MCIgZmlsbD0iI0RBREFEQSIgcng9IjUiIHJ5PSI1IiB0cmFuc2Zvcm09InJvdGF0ZSgtNjAgMjQuMDIgNjUpIi8+PHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjAiIHg9IjQ2LjUiIHk9IjQwIiBmaWxsPSIjRTJFMkUyIiByeD0iNSIgcnk9IjUiIHRyYW5zZm9ybT0icm90YXRlKC0zMCAtNS45OCA2NSkiLz48L3N2Zz4=) no-repeat","background-size":"100%"},imageStyle:{margin:"6px auto",width:"40px",height:"40px",background:"transparent no-repeat","background-size":"100%"},textStyle:{margin:"0","font-size":"16px"}}}create(e={},t="toast"){var i,s;const{maskStyle:r,toastStyle:n,successStyle:a,errrorStyle:o,loadingStyle:l,imageStyle:c,textStyle:d}=this.style,h=Object.assign(Object.assign(Object.assign({},this.options),e),{_type:t});if(this.el=document.createElement("div"),this.el.className="taro__toast",this.el.style.opacity="0",this.el.style.transition="opacity 0.1s linear",this.el.ontouchmove=e=>{e.stopPropagation(),e.preventDefault()},this.mask=document.createElement("div"),this.mask.setAttribute("style",HT(r)),this.mask.style.display=h.mask?"block":"none",this.icon=document.createElement("p"),h.image)this.icon.setAttribute("style",HT(Object.assign(Object.assign({},c),{"background-image":`url(${h.image})`})));else{const e="loading"===h.icon?l:"error"===h.icon?o:a;this.icon.setAttribute("style",HT(Object.assign(Object.assign({},e),"none"===h.icon?{display:"none"}:{})))}return this.toast=document.createElement("div"),this.toast.setAttribute("style",HT(Object.assign(Object.assign({},n),"none"===h.icon?{"min-height":"0",padding:"10px 15px"}:{}))),this.title=document.createElement("p"),this.title.setAttribute("style",HT(d)),this.title.textContent=h.title,this.toast.appendChild(this.icon),this.toast.appendChild(this.title),this.el.appendChild(this.mask),this.el.appendChild(this.toast),document.body.appendChild(this.el),setTimeout(()=>{this.el.style.opacity="1"},0),this.type=h._type,h.duration>=0&&this.hide(h.duration,this.type),this.currentPath=null!==(s=null===(i=de.page)||void 0===i?void 0:i.path)&&void 0!==s?s:YT(),""}show(e={},t="toast"){var i,s;const r=Object.assign(Object.assign(Object.assign({},this.options),e),{_type:t});this.hideOpacityTimer&&clearTimeout(this.hideOpacityTimer),this.hideDisplayTimer&&clearTimeout(this.hideDisplayTimer),this.title.textContent=r.title||"",this.mask.style.display=r.mask?"block":"none";const{toastStyle:n,successStyle:a,errrorStyle:o,loadingStyle:l,imageStyle:c}=this.style;if(r.image)this.icon.setAttribute("style",HT(Object.assign(Object.assign({},c),{"background-image":`url(${r.image})`})));else if(!r.image&&r.icon){const e="loading"===r.icon?l:"error"===r.icon?o:a;this.icon.setAttribute("style",HT(Object.assign(Object.assign({},e),"none"===r.icon?{display:"none"}:{})))}return this.toast.setAttribute("style",HT(Object.assign(Object.assign({},n),"none"===r.icon?{"min-height":"0",padding:"10px 15px"}:{}))),this.el.style.display="block",setTimeout(()=>{this.el.style.opacity="1"},0),this.type=r._type,r.duration>=0&&this.hide(r.duration,this.type),this.currentPath=null!==(s=null===(i=de.page)||void 0===i?void 0:i.path)&&void 0!==s?s:YT(),""}hide(e=0,t=""){t&&t!==this.type||(this.hideOpacityTimer&&clearTimeout(this.hideOpacityTimer),this.hideDisplayTimer&&clearTimeout(this.hideDisplayTimer),this.currentPath=null,this.hideOpacityTimer=setTimeout(()=>{this.el.style.opacity="0",this.hideDisplayTimer=setTimeout(()=>{this.el.style.display="none"},100)},e))}}let tS="default";function iS(e){if("ready"===tS)return;const t=e.createElement("style");t.textContent='@font-face{font-weight:normal;font-style:normal;font-family:"taro";src:url("data:application/x-font-ttf;charset=utf-8;base64, AAEAAAALAIAAAwAwR1NVQrD+s+0AAAE4AAAAQk9TLzJWs0t/AAABfAAAAFZjbWFwqVgGvgAAAeAAAAGGZ2x5Zph7qG0AAANwAAAAdGhlYWQRFoGhAAAA4AAAADZoaGVhCCsD7AAAALwAAAAkaG10eAg0AAAAAAHUAAAADGxvY2EADAA6AAADaAAAAAhtYXhwAQ4AJAAAARgAAAAgbmFtZYrphEEAAAPkAAACVXBvc3S3shtSAAAGPAAAADUAAQAAA+gAAABaA+gAAAAAA+gAAQAAAAAAAAAAAAAAAAAAAAMAAQAAAAEAAADih+FfDzz1AAsD6AAAAADXB57LAAAAANcHnssAAP/sA+gDOgAAAAgAAgAAAAAAAAABAAAAAwAYAAEAAAAAAAIAAAAKAAoAAAD/AAAAAAAAAAEAAAAKAB4ALAABREZMVAAIAAQAAAAAAAAAAQAAAAFsaWdhAAgAAAABAAAAAQAEAAQAAAABAAgAAQAGAAAAAQAAAAAAAQK8AZAABQAIAnoCvAAAAIwCegK8AAAB4AAxAQIAAAIABQMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUGZFZABAAHjqCAPoAAAAWgPoABQAAAABAAAAAAAAA+gAAABkAAAD6AAAAAAABQAAAAMAAAAsAAAABAAAAV4AAQAAAAAAWAADAAEAAAAsAAMACgAAAV4ABAAsAAAABgAEAAEAAgB46gj//wAAAHjqCP//AAAAAAABAAYABgAAAAEAAgAAAQYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAKAAAAAAAAAACAAAAeAAAAHgAAAABAADqCAAA6ggAAAACAAAAAAAAAAwAOgABAAD/7AAyABQAAgAANzMVFB4UKAAAAAABAAAAAAO7AzoAFwAAEy4BPwE+AR8BFjY3ATYWFycWFAcBBiInPQoGBwUHGgzLDCELAh0LHwsNCgr9uQoeCgGzCyEOCw0HCZMJAQoBvgkCCg0LHQv9sQsKAAAAAAAAEgDeAAEAAAAAAAAAHQAAAAEAAAAAAAEABAAdAAEAAAAAAAIABwAhAAEAAAAAAAMABAAoAAEAAAAAAAQABAAsAAEAAAAAAAUACwAwAAEAAAAAAAYABAA7AAEAAAAAAAoAKwA/AAEAAAAAAAsAEwBqAAMAAQQJAAAAOgB9AAMAAQQJAAEACAC3AAMAAQQJAAIADgC/AAMAAQQJAAMACADNAAMAAQQJAAQACADVAAMAAQQJAAUAFgDdAAMAAQQJAAYACADzAAMAAQQJAAoAVgD7AAMAAQQJAAsAJgFRCiAgQ3JlYXRlZCBieSBmb250LWNhcnJpZXIKICB3ZXVpUmVndWxhcndldWl3ZXVpVmVyc2lvbiAxLjB3ZXVpR2VuZXJhdGVkIGJ5IHN2ZzJ0dGYgZnJvbSBGb250ZWxsbyBwcm9qZWN0Lmh0dHA6Ly9mb250ZWxsby5jb20ACgAgACAAQwByAGUAYQB0AGUAZAAgAGIAeQAgAGYAbwBuAHQALQBjAGEAcgByAGkAZQByAAoAIAAgAHcAZQB1AGkAUgBlAGcAdQBsAGEAcgB3AGUAdQBpAHcAZQB1AGkAVgBlAHIAcwBpAG8AbgAgADEALgAwAHcAZQB1AGkARwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABzAHYAZwAyAHQAdABmACAAZgByAG8AbQAgAEYAbwBuAHQAZQBsAGwAbwAgAHAAcgBvAGoAZQBjAHQALgBoAHQAdABwADoALwAvAGYAbwBuAHQAZQBsAGwAbwAuAGMAbwBtAAAAAAIAAAAAAAAACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwECAQMBBAABeAd1bmlFQTA4AAAAAAA=") format("truetype");}@-webkit-keyframes taroLoading{0%{-webkit-transform:rotate3d(0, 0, 1, 0deg);}100%{-webkit-transform:rotate3d(0, 0, 1, 360deg);transform:rotate3d(0, 0, 1, 360deg);}}@keyframes taroLoading{0%{-webkit-transform:rotate3d(0, 0, 1, 0deg);}100%{-webkit-transform:rotate3d(0, 0, 1, 360deg);transform:rotate3d(0, 0, 1, 360deg);}}.taro-modal__foot:after {content: "";position: absolute;left: 0;top: 0;right: 0;height: 1px;border-top: 1px solid #D5D5D6;color: #D5D5D6;-webkit-transform-origin: 0 0;transform-origin: 0 0;-webkit-transform: scaleY(0.5);transform: scaleY(0.5);} .taro-model__btn:active {background-color: #EEEEEE}.taro-model__btn:not(:first-child):after {content: "";position: absolute;left: 0;top: 0;width: 1px;bottom: 0;border-left: 1px solid #D5D5D6;color: #D5D5D6;-webkit-transform-origin: 0 0;transform-origin: 0 0;-webkit-transform: scaleX(0.5);transform: scaleX(0.5);}.taro-actionsheet__cell:not(:last-child):after {content: "";position: absolute;left: 0;bottom: 0;right: 0;height: 1px;border-top: 1px solid #e5e5e5;color: #e5e5e5;-webkit-transform-origin: 0 0;transform-origin: 0 0;-webkit-transform: scaleY(0.5);transform: scaleY(0.5);}',e.querySelector("head").appendChild(t),tS="ready"}const sS=new eS,rS=new JT,nS=new ZT,aS=(e={title:""})=>{iS(document),e=Object.assign({title:"",icon:"success",image:"",duration:1500,mask:!1},e);const{success:t,fail:i,complete:s}=e,r=new FT({name:"showToast",success:t,fail:i,complete:s});if("string"!==typeof e.title)return r.fail({errMsg:UT({para:"title",correct:"String",wrong:e.title})});if("number"!==typeof e.duration)return r.fail({errMsg:UT({para:"duration",correct:"Number",wrong:e.duration})});e.image&&"string"!==typeof e.image&&(e.image=""),e.mask=!!e.mask;let n="";return n=sS.el?sS.show(e,"toast"):sS.create(e,"toast"),r.success({errMsg:n})},oS=({noConflict:e=!1,success:t,fail:i,complete:s}={})=>{const r=new FT({name:"hideToast",success:t,fail:i,complete:s});return sS.el?(sS.hide(0,e?"toast":""),r.success()):r.success()},lS=({noConflict:e=!1,success:t,fail:i,complete:s}={})=>{const r=new FT({name:"hideLoading",success:t,fail:i,complete:s});return sS.el?(sS.hide(0,e?"loading":""),r.success()):r.success()},cS=(...e)=>le(void 0,[...e],void 0,function*(e={}){iS(document),e=Object.assign({title:"",content:"",showCancel:!0,cancelText:"\u53d6\u6d88",cancelColor:"#000000",confirmText:"\u786e\u5b9a",confirmColor:"#3CC51F"},e);const{success:t,fail:i,complete:s}=e,r=new FT({name:"showModal",success:t,fail:i,complete:s});if("string"!==typeof e.title)return r.fail({errMsg:UT({para:"title",correct:"String",wrong:e.title})});if("string"!==typeof e.content)return r.fail({errMsg:UT({para:"content",correct:"String",wrong:e.content})});if("string"!==typeof e.cancelText)return r.fail({errMsg:UT({para:"cancelText",correct:"String",wrong:e.cancelText})});if(e.cancelText.replace(/[\u0391-\uFFE5]/g,"aa").length>8)return r.fail({errMsg:"cancelText length should not larger then 4 Chinese characters"});if("string"!==typeof e.confirmText)return r.fail({errMsg:UT({para:"confirmText",correct:"String",wrong:e.confirmText})});if(e.confirmText.replace(/[\u0391-\uFFE5]/g,"aa").length>8)return r.fail({errMsg:"confirmText length should not larger then 4 Chinese characters"});if("string"!==typeof e.cancelColor)return r.fail({errMsg:UT({para:"cancelColor",correct:"String",wrong:e.cancelColor})});if("string"!==typeof e.confirmColor)return r.fail({errMsg:UT({para:"confirmColor",correct:"String",wrong:e.confirmColor})});e.showCancel=!!e.showCancel;let n="";n=rS.el?yield rS.show(e):yield rS.create(e);const a={cancel:!1,confirm:!1};return a[n]=!0,r.success(a)});function dS(){rS.el&&rS.hide()}const hS=(...e)=>le(void 0,[...e],void 0,function*(e={itemList:[]},t="showActionSheet"){iS(document),e=Object.assign({itemColor:"#000000",itemList:[]},e);const{success:i,fail:s,complete:r}=e,n=new FT({name:t,success:i,fail:s,complete:r});if(!Array.isArray(e.itemList))return n.fail({errMsg:UT({para:"itemList",correct:"Array",wrong:e.itemList})});if(e.itemList.length<1)return n.fail({errMsg:"parameter error: parameter.itemList should have at least 1 item"});if(e.itemList.length>6)return n.fail({errMsg:"parameter error: parameter.itemList should not be large than 6"});for(let o=0;o<e.itemList.length;o++)if("string"!==typeof e.itemList[o])return n.fail({errMsg:UT({para:`itemList[${o}]`,correct:"String",wrong:e.itemList[o]})});if("string"!==typeof e.itemColor)return n.fail({errMsg:UT({para:"itemColor",correct:"String",wrong:e.itemColor})});let a="";return a=nS.el?yield nS.show(e):yield nS.create(e),"string"===typeof a?n.fail({errMsg:a}):n.success({tapIndex:a})});Zc.eventCenter.on("__afterTaroRouterChange",()=>{var e,t;sS.currentPath&&sS.currentPath!==(null===(e=de.page)||void 0===e?void 0:e.path)&&(oS(),lS()),rS.currentPath&&rS.currentPath!==(null===(t=de.page)||void 0===t?void 0:t.path)&&dS()});const uS=function(){return Zc.getCurrentInstance().app},pS=Zc.getCurrentInstance,fS=e=>{const t=$T(e);if(!t.flag){const e={errMsg:`getImageInfo:fail ${t.msg}`};return console.error(e.errMsg),Promise.reject(e)}const i=e=>{try{const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");return null===i||void 0===i||i.drawImage(e,0,0,e.width,e.height),t.toDataURL("image/png")}catch(tH){console.error("getImageInfo:get base64 fail",tH)}},{src:s,success:r,fail:n,complete:a}=e,o=new FT({name:"getImageInfo",success:r,fail:n,complete:a});return new Promise((e,t)=>{const r=new Image;r.crossOrigin="",r.onload=()=>{o.success({width:r.naturalWidth,height:r.naturalHeight,path:i(r)||s},{resolve:e,reject:t})},r.onerror=i=>{o.fail({errMsg:i.message},{resolve:e,reject:t})},r.src=s})};var gS={exports:{}};gS.exports=ES;var mS=gS.exports.isMobile=ES;gS.exports.default=ES;const vS=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,yS=/CrOS/,bS=/android|ipad|playbook|silk/i;function ES(e){e||(e={});let t=e.ua;if(t||"undefined"===typeof navigator||(t=navigator.userAgent),t&&t.headers&&"string"===typeof t.headers["user-agent"]&&(t=t.headers["user-agent"]),"string"!==typeof t)return!1;let i=vS.test(t)&&!yS.test(t)||!!e.tablet&&bS.test(t);return!i&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==t.indexOf("Macintosh")&&-1!==t.indexOf("Safari")&&(i=!0),i}const wS=(e,t)=>(t.forEach(t=>{Object.defineProperty(e,t,{get:()=>zT(t)})}),e),AS=["bounce","ease","elastic","linear","quad","cubic","poly","bezier","circle","sin","exp","in","out","inOut"],TS=["cancelAnimation","derived","shared","decay","spring","timing","delay","repeat","sequence","runOnJS","runOnUI"],SS=wS({},TS);SS.Easing=wS({},AS),SS.scrollViewContext=wS({},["scrollTo"]);const xS=Zc.nextTick,LS=function(e){return le(this,arguments,void 0,function*(e,t="chooseMedia"){var i;const s=$T(e);if(!s.flag){const e={errMsg:`${t}:fail ${s.msg}`};return console.error(e.errMsg),Promise.reject(e)}const{count:r=9,mediaId:n="taroChooseMedia",mediaType:a=["image","video"],sourceType:o=["album","camera"],camera:l="back",success:c,fail:d,complete:h}=e,u=new FT({name:t,success:c,fail:d,complete:h}),p=a.length<1||a.indexOf("image")>-1,f=a.length<1||a.indexOf("video")>-1,g={tempFiles:[],type:p&&f?"mix":p?"image":"video"};if(r&&"number"!==typeof r)return g.errMsg=UT({para:"count",correct:"Number",wrong:r}),u.fail(g);let m=document.getElementById(n);if(m||(m=document.createElement("input"),m.setAttribute("type","file"),m.setAttribute("id",n),m.setAttribute("style","position: fixed; top: -4000px; left: -3000px; z-index: -300;")),r>1?m.setAttribute("multiple","multiple"):m.removeAttribute("multiple"),mS()&&(o.length>1||o.length<1))try{const{tapIndex:e}=yield hS({itemList:["\u62cd\u6444","\u4ece\u76f8\u518c\u9009\u62e9"]},t);o.splice(0,o.length,0===e?"camera":"album")}catch(tH){return u.fail({errMsg:null===(i=tH.errMsg)||void 0===i?void 0:i.replace("^.*:fail ","")})}return o.includes("camera")?m.setAttribute("capture","front"===l?"user":"environment"):m.removeAttribute("capture"),"image"===g.type?m.setAttribute("accept","image/*"):"video"===g.type?m.setAttribute("accept","video/*"):m.setAttribute("accept","image/*, video/*"),new Promise((e,t)=>{m&&(document.body.appendChild(m),m.onchange=function(i){return le(this,void 0,void 0,function*(){const s=i.target;if(s){const e=s.files||[],t=[...e];yield Promise.all(t.map(e=>le(this,void 0,void 0,function*(){var t;try{null===(t=g.tempFiles)||void 0===t||t.push(yield v(e))}catch(i){console.error(i)}})))}u.success(g,{resolve:e,reject:t}),s.value=""})},m.onabort=()=>u.fail({errMsg:"abort"},{resolve:e,reject:t}),m.oncancel=()=>u.fail({errMsg:"cancel"},{resolve:e,reject:t}),m.onerror=i=>u.fail({errMsg:i.toString()},{resolve:e,reject:t}),m.click())}).finally(()=>{m&&document.body.removeChild(m)});function v(e){const t=URL.createObjectURL(e),i={tempFilePath:t,size:e.size,duration:0,height:0,width:0,thumbTempFilePath:"",fileType:e.type,originalFileObj:e};if(/^video\//.test(i.fileType)){const e=XT().system.toLowerCase().includes("ios"),t=document.createElement("video"),s=new FileReader;return t.crossOrigin="Anonymous",t.preload="metadata",t.src=i.tempFilePath,new Promise((r,n)=>{s.onload=e=>{var t;i.tempFilePath=null===(t=e.target)||void 0===t?void 0:t.result},s.onerror=e=>n(e),s.readAsDataURL(i.originalFileObj),t.onloadedmetadata=()=>{i.duration=t.duration,i.height=t.videoHeight,i.width=t.videoWidth},t.oncanplay=()=>{i.thumbTempFilePath=y(t,i.height,i.width,.8),r(i)},t.onerror=e=>n(e),e&&t.load()})}{const e=new Image;return e.crossOrigin="Anonymous",e.src=i.tempFilePath,new Promise((t,s)=>{e.complete?(i.height=e.height,i.width=e.width,i.thumbTempFilePath=y(e,i.height,i.width,.8),t(i)):(e.onload=()=>{i.height=e.height,i.width=e.width,i.thumbTempFilePath=y(e,i.height,i.width,.8),t(i)},e.onerror=e=>s(e))})}}function y(e,t=0,i=t,s=.8){const r=256,n=document.createElement("canvas");if(t>r||i>r){const e=t/i;e>1?(t=r,i=t/e):(i=r,t=i*e)}n.height=t,n.width=i;const a=n.getContext("2d");return null===a||void 0===a||a.drawImage(e,0,0,n.width,n.height),n.toDataURL("image/jpeg",s)}})},kS=function(e){const t=$T(e);if(!t.flag){const e={errMsg:`chooseImage:fail ${t.msg}`};return console.error(e.errMsg),Promise.reject(e)}let i="back";const{sourceType:s=["album","camera"],success:r,complete:n,fail:a}=e,o=oe(e,["sourceType","success","complete","fail"]);function l(e){const{tempFiles:t=[],errMsg:i}=e;return{tempFilePaths:t.map(e=>e.tempFilePath),tempFiles:t.map(e=>({path:e.tempFilePath,size:e.size,type:e.fileType,originalFileObj:e.originalFileObj})),errMsg:i}}return s.includes("camera")&&s.indexOf("user")>-1&&(i="front"),LS(Object.assign(Object.assign({mediaId:"taroChooseImage"},o),{sourceType:s,mediaType:["image"],camera:i,success:e=>{const t=l(e);null===r||void 0===r||r(t),null===n||void 0===n||n(t)},fail:e=>{null===a||void 0===a||a(e),null===n||void 0===n||n(e)}}),"chooseImage").then(l)},IS={addRouteBuilder:zT("addRouteBuilder"),getRouteContext:zT("getRouteContext"),removeRouteBuilder:zT("removeRouteBuilder")},{Behavior:_S,getEnv:CS,ENV_TYPE:RS,Link:PS,interceptors:DS,interceptorify:MS,Current:OS,options:NS,eventCenter:BS,Events:FS,preload:$S}=Zc,US={Behavior:_S,getEnv:CS,ENV_TYPE:RS,Link:PS,interceptors:DS,interceptorify:MS,Current:OS,getCurrentInstance:pS,options:NS,nextTick:xS,eventCenter:BS,Events:FS,preload:$S,history:vA,navigateBack:CA,navigateTo:IA,reLaunch:PA,redirectTo:_A,getCurrentPages:DA,switchTab:RA,router:IS,worklet:SS},GS=VT("requirePlugin");function HS(){var e;return(null===this||void 0===this?void 0:this.pxTransformConfig)?this.pxTransformConfig:(e=US).config||(e.config={})}const jS=750,zS={640:1.17,750:1,828:.905},VS=20,YS=5,WS="rem",KS=function({designWidth:e=jS,deviceRatio:t=zS,baseFontSize:i=VS,unitPrecision:s=YS,targetUnit:r=WS}){const n=HS.call(this);n.designWidth=e,n.deviceRatio=t,n.baseFontSize=i,n.targetUnit=r,n.unitPrecision=s},qS=function(e=0){const t=HS.call(this),i=t.baseFontSize||VS,s=t.deviceRatio||zS,r=((e=0)=>P(t.designWidth)?t.designWidth(e):t.designWidth)(e);if(!(r in t.deviceRatio))throw new Error(`deviceRatio \u914d\u7f6e\u4e2d\u4e0d\u5b58\u5728 ${r} \u7684\u8bbe\u7f6e\uff01`);const n=t.targetUnit||WS,a=t.unitPrecision||YS,o=~~e;let l=1/s[r];switch(n){case"vw":l=r/100;break;case"px":l*=2;break;default:l*=2*i}let c=o/l;return a>=0&&a<=100&&(c=Number(c.toFixed(a))),c+n},XS=function(){const e=document.createElement("canvas");return 0===e.toDataURL("image/webp").indexOf("data:image/webp")},QS=function(){const e=HS.call(this);return{platform:"web",taroVersion:"4.1.4",designWidth:e.designWidth}};US.requirePlugin=GS,US.getApp=uS,US.pxTransform=qS,US.initPxTransform=KS,US.canIUseWebp=XS,US.getAppInfo=QS;const ZS=US;ZS.setGlobalDataPlugin=Lc,ZS.useAddToFavorites=mc,ZS.useDidHide=rc,ZS.useDidShow=sc,ZS.useError=nc,ZS.useLaunch=oc,ZS.setGlobalDataPlugin=Lc,ZS.useLoad=cc,ZS.useOptionMenuClick=vc,ZS.usePageNotFound=lc,ZS.usePageScroll=dc,ZS.usePullDownRefresh=hc,ZS.usePullIntercept=uc,ZS.useReachBottom=pc,ZS.useReady=Ac,ZS.useResize=fc,ZS.useRouter=Tc,ZS.useSaveExitState=yc,ZS.useShareAppMessage=bc,ZS.useShareTimeline=Ec,ZS.useTabItemTap=Sc,ZS.useTitleClick=wc,ZS.useUnhandledRejection=ac,ZS.useUnload=gc;var JS=!1;let ex;const tx=e=>ex=e,ix=Symbol();function sx(e){return e&&"object"===typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!==typeof e.toJSON}var rx;function nx(){const e=li(!0),t=e.run(()=>Ds({}));let i=[],s=[];const r=_s({install(e){tx(r),r._a=e,e.provide(ix,r),e.config.globalProperties.$pinia=r,s.forEach(e=>i.push(e)),s=[]},use(e){return this._a||JS?i.push(e):s.push(e),this},_p:i,_a:null,_e:e,_s:new Map,state:t});return r}(function(e){e["direct"]="direct",e["patchObject"]="patch object",e["patchFunction"]="patch function"})(rx||(rx={}));const ax=()=>{};function ox(e,t,i,s=ax){e.push(t);const r=()=>{const i=e.indexOf(t);i>-1&&(e.splice(i,1),s())};return!i&&ci()&&di(r),r}function lx(e,...t){e.slice().forEach(e=>{e(...t)})}const cx=e=>e(),dx=Symbol(),hx=Symbol();function ux(e,t){e instanceof Map&&t instanceof Map?t.forEach((t,i)=>e.set(i,t)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const i in t){if(!t.hasOwnProperty(i))continue;const s=t[i],r=e[i];sx(r)&&sx(s)&&e.hasOwnProperty(i)&&!Ps(s)&&!Ss(s)?e[i]=ux(r,s):e[i]=s}return e}const px=Symbol();function fx(e){return!sx(e)||!e.hasOwnProperty(px)}const{assign:gx}=Object;function mx(e){return!(!Ps(e)||!e.effect)}function vx(e,t,i,s){const{state:r,actions:n,getters:a}=t,o=i.state.value[e];let l;function c(){o||(i.state.value[e]=r?r():{});const t=$s(i.state.value[e]);return gx(t,n,Object.keys(a||{}).reduce((t,s)=>(t[s]=_s($o(()=>{tx(i);const t=i._s.get(e);return a[s].call(t,t)})),t),{}))}return l=yx(e,c,t,i,s,!0),l}function yx(e,t,i={},s,r,n){let a;const o=gx({actions:{}},i),l={deep:!0};let c,d,h,u=[],p=[];const f=s.state.value[e];let g;function m(t){let i;c=d=!1,"function"===typeof t?(t(s.state.value[e]),i={type:rx.patchFunction,storeId:e,events:h}):(ux(s.state.value[e],t),i={type:rx.patchObject,payload:t,storeId:e,events:h});const r=g=Symbol();cr().then(()=>{g===r&&(c=!0)}),d=!0,lx(u,i,s.state.value[e])}n||f||(s.state.value[e]={}),Ds({});const v=n?function(){const{state:e}=i,t=e?e():{};this.$patch(e=>{gx(e,t)})}:ax;function y(){a.stop(),u=[],p=[],s._s.delete(e)}const b=(t,i="")=>{if(dx in t)return t[hx]=i,t;const r=function(){tx(s);const i=Array.from(arguments),n=[],a=[];function o(e){n.push(e)}function l(e){a.push(e)}let c;lx(p,{args:i,name:r[hx],store:w,after:o,onError:l});try{c=t.apply(this&&this.$id===e?this:w,i)}catch(d){throw lx(a,d),d}return c instanceof Promise?c.then(e=>(lx(n,e),e)).catch(e=>(lx(a,e),Promise.reject(e))):(lx(n,c),c)};return r[dx]=!0,r[hx]=i,r},E={_p:s,$id:e,$onAction:ox.bind(null,p),$patch:m,$reset:v,$subscribe(t,i={}){const r=ox(u,t,i.detached,()=>n()),n=a.run(()=>La(()=>s.state.value[e],s=>{("sync"===i.flush?d:c)&&t({storeId:e,type:rx.direct,events:h},s)},gx({},l,i)));return r},$dispose:y},w=Es(E);s._s.set(e,w);const A=s._a&&s._a.runWithContext||cx,T=A(()=>s._e.run(()=>(a=li()).run(()=>t({action:b}))));for(const S in T){const t=T[S];if(Ps(t)&&!mx(t)||Ss(t))n||(f&&fx(t)&&(Ps(t)?t.value=f[S]:ux(t,f[S])),s.state.value[e][S]=t);else if("function"===typeof t){const e=b(t,S);T[S]=e,o.actions[S]=t}}return gx(w,T),gx(Is(w),T),Object.defineProperty(w,"$state",{get:()=>s.state.value[e],set:e=>{m(t=>{gx(t,e)})}}),s._p.forEach(e=>{gx(w,a.run(()=>e({store:w,app:s._a,pinia:s,options:o})))}),f&&n&&i.hydrate&&i.hydrate(w.$state,f),c=!0,d=!0,w}function bx(e,t,i){let s,r;const n="function"===typeof t;function a(e,i){const a=Kn();e=e||(a?Wn(ix,null):null),e&&tx(e),e=ex,e._s.has(s)||(n?yx(s,t,r,e):vx(s,r,e));const o=e._s.get(s);return o}return"string"===typeof e?(s=e,r=n?i:t):(r=e,s=e.id),a.$id=s,a}function Ex(e){{const t=Is(e),i={};for(const s in t){const r=t[s];r.effect?i[s]=$o({get:()=>e[s],set(t){e[s]=t}}):(Ps(r)||Ss(r))&&(i[s]=Hs(e,s))}return i}}function wx(e,t={}){e.config.isCustomElement=e=>/^taro-/.test(e)||"root"===e||"block"===e,Object.entries(t).forEach(([t,i])=>{const s=null===i||void 0===i?void 0:i.displayName;"string"===typeof s&&s&&(i.name=t,e.component(s.replace(/-core$/,""),i))})}const Ax="update:modelValue",Tx="modelValue",Sx="routerLink",xx="navManager",Lx="router",kx="aria",Ix=Symbol("EMPTY_PROP"),_x={default:Ix},Cx=e=>(null===e||void 0===e?void 0:e.split(" "))||[],Rx=(e,t,i=[])=>{var s;return[...Array.from((null===(s=e.value)||void 0===s?void 0:s.classList)||[]),...i].filter((e,i,s)=>!t.has(e)&&s.indexOf(e)===i)},Px=(e,t,i=[],s,r,n)=>{void 0!==t&&t();const a=Gr((t,{attrs:i,slots:a,emit:o})=>{var l;let c=t[s];const d=Ds(),h=new Set(Cx(i.class)),u=e=>{if(e.el){const t=Array.isArray(r)?r:[r];t.forEach(t=>{e.el.addEventListener(t.toLowerCase(),e=>{c=(null===e||void 0===e?void 0:e.target)[s],o(Ax,c),n&&o(n,e)})})}},p=Ao(),f=null===(l=null===p||void 0===p?void 0:p.appContext)||void 0===l?void 0:l.provides[xx],g=f?Wn(xx):void 0,m=e=>{const{routerLink:i}=t;if(i!==Ix)if(void 0!==g){const i={event:e};for(const e in t){const s=t[e];t.hasOwnProperty(e)&&e.startsWith(Lx)&&s!==Ix&&(i[e]=s)}g.navigate(i)}else console.warn("Tried to navigate, but no router was found. Make sure you have mounted Vue Router.")};return()=>{c=t[s],Cx(i.class).forEach(e=>{h.add(e)});const n=t.onClick,l=e=>{void 0!==n&&n(e),e.defaultPrevented||m(e)};let p={ref:d,class:Rx(d,h),onClick:e=>{l(e),o("tap",e)},onVnodeBeforeMount:r?u:void 0};for(const e in t){const i=t[e];(t.hasOwnProperty(e)&&i!==Ix||e.startsWith(kx))&&(p[e]=i)}return s&&(t[Tx]!==Ix?p=Object.assign(Object.assign({},p),{[s]:t[Tx]}):c!==Ix&&(p=Object.assign(Object.assign({},p),{[s]:c}))),Uo(e,p,a.default&&a.default())}});return a.displayName=e,a.props={[Sx]:_x},i.forEach(e=>{a.props[e]=_x}),s&&(a.props[Tx]=_x,a.emits=[Ax,n]),a},Dx=Px("taro-ad-core",Jh),Mx=Px("taro-ad-custom-core",iu),Ox=Px("taro-animation-video-core",nu),Nx=Px("taro-animation-view-core",lu),Bx=Px("taro-ar-camera-core",hu),Fx=Px("taro-audio-core",gu,["src","controls","autoplay","loop","muted","nativeProps","error","play","pause","timeupdate","ended"]),$x=Px("taro-aweme-data-core",yu),Ux=Gr((e,{slots:t})=>t.default),Gx=Px("taro-button-core",xu,["disabled","hoverClass","type","hoverStartTime","hoverStayTime","size","plain","loading","formType","tarobuttonsubmit","tarobuttonreset"]),Hx=Px("taro-camera-core",Iu),jx=Px("taro-canvas-core",Du,["canvasId","height","width","nativeProps","longtap"]),zx=Px("taro-channel-live-core",Nu),Vx=Px("taro-channel-video-core",$u),Yx=Px("taro-checkbox-core",ju,["name","value","color","id","checked","disabled","nativeProps","checkboxchange"]),Wx=Px("taro-checkbox-group-core",qu,["name","change"]),Kx=Px("taro-comment-detail-core",Zu),qx=Px("taro-comment-list-core",tp),Xx=Px("taro-contact-button-core",rp),Qx=Px("taro-cover-image-core",lp,["src","nativeProps","load","error"]),Zx=Px("taro-cover-view-core",up,["animation","hoverClass","hoverStartTime","hoverStayTime","longpress"]),Jx=Px("taro-custom-wrapper-core",gp),eL=Px("taro-double-tap-gesture-handler-core",yp),tL=Px("taro-draggable-sheet-core",wp),iL=Px("taro-editor-core",Sp),sL=Px("taro-follow-swan-core",kp),rL=Px("taro-force-press-gesture-handler-core",Cp),nL=Px("taro-form-core",Np,["submit"]),aL=Px("taro-functional-page-navigator-core",$p),oL=Px("taro-grid-builder-core",Hp),lL=Px("taro-grid-view-core",Vp),cL=Px("taro-horizontal-drag-gesture-handler-core",Kp),dL=Px("taro-icon-core",Zp,["type","size","color"]),hL=Px("taro-image-core",sf,["src","mode","lazyLoad","nativeProps","load","error"]),uL=Px("taro-inline-payment-panel-core",af),pL=Px("taro-input-core",uf,["value","type","password","placeholder","disabled","maxlength","autoFocus","confirmType","name","nativeProps","input","paste","focus","blur","confirm","change","keydown"],"value","input"),fL=Px("taro-keyboard-accessory-core",gf),gL=Px("taro-label-core",yf,["for"]),mL=Px("taro-lifestyle-core",wf),vL=Px("taro-like-core",Sf),yL=Px("taro-list-builder-core",kf),bL=Px("taro-list-view-core",Cf),EL=Px("taro-live-player-core",Df),wL=Px("taro-live-pusher-core",Nf),AL=Px("taro-login-core",$f),TL=Px("taro-long-press-gesture-handler-core",Hf),SL=Px("taro-lottie-core",Vf),xL=Px("taro-map-core",Zf,["latitude","longitude","scale","minScale","maxScale","markers","polyline","circles","polygons","subkey","layerStyle","rotate","skew","showCompass","showScale","enableOverlooking","enableZoom","enableScroll","enableRotate","enableSatellite","enableTraffic","enableBuilding","enableAutoMaxOverlooking","enable3D","width","height","tap"]),LL=Px("taro-match-media-core",tg),kL=Px("taro-movable-area-core",cg,["scaleArea"]),IL=Px("taro-movable-view-core",pg,["x","y","direction","outOfBounds","inertia","friction","damping","disabled","scale","scaleMin","scaleMax","scaleValue","animation","change","scale","htouchmove","vtouchmove"]),_L=Px("taro-native-slot-core",mg),CL=Px("taro-navigation-bar-core",bg),RL=Px("taro-navigator-core",Tg,["hoverClass","url","openType","isHover","delta","cuccess","fail","complete"]),PL=Px("taro-nested-scroll-body-core",Lg),DL=Px("taro-nested-scroll-header-core",_g),ML=Px("taro-official-account-core",Pg),OL=Px("taro-open-container-core",Og),NL=Px("taro-open-data-core",Fg),BL=Px("taro-page-container-core",Gg),FL=Px("taro-page-meta-core",zg),$L=Px("taro-pan-gesture-handler-core",Wg),UL=Px("taro-picker-core",gm,["mode","disabled","range","rangeKey","value","start","end","fields","name","textProps","change","columnchange","cancel"],"value","change"),GL=Px("taro-picker-group",mm,["mode","range","rangeKey","height","columnId","updateHeight","updateDay","columnChange"]),HL=Px("taro-picker-view-column-core",Em,["col","initialPosition","paddingVertical","onselect","onselectstart","onselectend"]),jL=Px("taro-picker-view-core",xm,["indicatorStyle","indicatorClass","value","maskStyle","maskClass","change","pickstart","pickend"]),zL=Px("taro-progress-core",_m,["percent","showInfo","borderRadius","fontSize","strokeWidth","activeColor","backgroundColor","active"]),VL=Px("taro-pull-to-refresh-core",Fm,["prefixCls","distanceToRefresh","damping","indicator","refresh"]),YL=Px("taro-radio-core",Gm,["name","value","id","checked","disabled","nativeProps","radiochange"]),WL=Px("taro-radio-group-core",Wm,["name","change"]),KL=Px("taro-rich-text-core",Qm,["nodes","selectable","userSelect","space"]),qL=Px("taro-root-portal-core",ev),XL=Px("taro-rtc-room-core",sv),QL=Px("taro-rtc-room-item-core",av),ZL=Px("taro-scale-gesture-handler-core",cv),JL=Px("taro-script-core",uv),ek=Px("taro-scroll-view-core",vv,["scrollX","scrollY","upperThreshold","lowerThreshold","mpScrollTop","mpScrollLeft","mpScrollIntoView","mpScrollIntoViewAlignment","animated","scroll","scrolltoupper","scrolltolower"]),tk=Px("taro-share-element-core",Ev),ik=Px("taro-slider-core",Sv,["min","max","step","disabled","value","activeColor","backgroundColor","blockSize","blockColor","showValue","name","change","changing"],"value","change"),sk=Px("taro-slot-core",kv),rk=Px("taro-snapshot-core",Cv),nk=Px("taro-span-core",Dv),ak=Px("taro-sticky-header-core",Nv),ok=Px("taro-sticky-section-core",$v),lk=Px("taro-swiper-core",GE,["indicatorDots","indicatorColor","indicatorActiveColor","autoplay","current","currentItemId","interval","duration","circular","vertical","previousMargin","nextMargin","displayMultipleItems","full","zoom","effectsProps","change","animationfinish"]),ck=Px("taro-swiper-item-core",zE,["itemId"]),dk=Px("taro-switch-core",KE,["type","checked","color","name","disabled","nativeProps","change"],"checked","change"),hk=Px("taro-tab-item-core",QE),uk=Px("taro-tabbar",uw,["conf","longpress"]),pk=Px("taro-tabs-core",gw),fk=Px("taro-tap-gesture-handler-core",yw),gk=Px("taro-text-core",Aw,["selectable","userSelect","space","numberOfLines"]),mk=Px("taro-textarea-core",kw,["value","placeholder","disabled","maxlength","autoFocus","autoHeight","name","nativeProps","input","focus","blur","confirm","change","linechange","keydown"],"value","input"),vk=Px("taro-vertical-drag-gesture-handler-core",Cw),yk=Px("taro-video-control",$w,["controls","currentTime","duration","isPlaying","pauseFunc","playFunc","seekFunc","showPlayBtn","showProgress"]),bk=Px("taro-video-core",Vw,["src","duration","controls","autoplay","loop","muted","initialTime","poster","objectFit","showProgress","showFullscreenBtn","showPlayBtn","showCenterPlayBtn","showMuteBtn","danmuList","danmuBtn","enableDanmu","enablePlayGesture","enableProgressGesture","vslideGesture","vslideGestureInFullscreen","nativeProps","play","pause","ended","timeupdate","error","fullscreenchange","progress","loadedmetadata"]),Ek=Px("taro-video-danmu",Yw,["enable"]),wk=Px("taro-view-core",Xw,["animation","hoverClass","hoverStartTime","hoverStayTime","longpress"]),Ak=Px("taro-voip-room-core",Jw),Tk=Px("taro-web-view-core",sA,["src","load","error"]),Sk=Object.freeze(Object.defineProperty({__proto__:null,Ad:Dx,AdCustom:Mx,AnimationVideo:Ox,AnimationView:Nx,ArCamera:Bx,Audio:Fx,AwemeData:$x,Block:Ux,Button:Gx,Camera:Hx,Canvas:jx,ChannelLive:zx,ChannelVideo:Vx,Checkbox:Yx,CheckboxGroup:Wx,CommentDetail:Kx,CommentList:qx,ContactButton:Xx,CoverImage:Qx,CoverView:Zx,CustomWrapper:Jx,DoubleTapGestureHandler:eL,DraggableSheet:tL,Editor:iL,FollowSwan:sL,ForcePressGestureHandler:rL,Form:nL,FunctionalPageNavigator:aL,GridBuilder:oL,GridView:lL,HorizontalDragGestureHandler:cL,Icon:dL,Image:hL,InlinePaymentPanel:uL,Input:pL,KeyboardAccessory:fL,Label:gL,Lifestyle:mL,Like:vL,ListBuilder:yL,ListView:bL,LivePlayer:EL,LivePusher:wL,Login:AL,LongPressGestureHandler:TL,Lottie:SL,Map:xL,MatchMedia:LL,MovableArea:kL,MovableView:IL,NativeSlot:_L,NavigationBar:CL,Navigator:RL,NestedScrollBody:PL,NestedScrollHeader:DL,OfficialAccount:ML,OpenContainer:OL,OpenData:NL,PageContainer:BL,PageMeta:FL,PanGestureHandler:$L,Picker:UL,PickerGroup:GL,PickerView:jL,PickerViewColumn:HL,Progress:zL,PullToRefresh:VL,Radio:YL,RadioGroup:WL,RichText:KL,RootPortal:qL,RtcRoom:XL,RtcRoomItem:QL,ScaleGestureHandler:ZL,Script:JL,ScrollView:ek,ShareElement:tk,Slider:ik,Slot:sk,Snapshot:rk,Span:nk,StickyHeader:ak,StickySection:ok,Swiper:lk,SwiperItem:ck,Switch:dk,TabItem:hk,Tabbar:uk,Tabs:pk,TapGestureHandler:fk,Text:gk,Textarea:mk,VerticalDragGestureHandler:vk,Video:bk,VideoControl:yk,VideoDanmu:Ek,View:wk,VoipRoom:Ak,WebView:Tk},Symbol.toStringTag,{value:"Module"})),xk=Number.isFinite||function(e){return"number"===typeof e&&isFinite(e)},Lk=Number.isSafeInteger||function(e){return"number"===typeof e&&Math.abs(e)<=kk},kk=Number.MAX_SAFE_INTEGER||9007199254740991;let Ik=function(e){return e["NETWORK_ERROR"]="networkError",e["MEDIA_ERROR"]="mediaError",e["KEY_SYSTEM_ERROR"]="keySystemError",e["MUX_ERROR"]="muxError",e["OTHER_ERROR"]="otherError",e}({}),_k=function(e){return e["KEY_SYSTEM_NO_KEYS"]="keySystemNoKeys",e["KEY_SYSTEM_NO_ACCESS"]="keySystemNoAccess",e["KEY_SYSTEM_NO_SESSION"]="keySystemNoSession",e["KEY_SYSTEM_NO_CONFIGURED_LICENSE"]="keySystemNoConfiguredLicense",e["KEY_SYSTEM_LICENSE_REQUEST_FAILED"]="keySystemLicenseRequestFailed",e["KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED"]="keySystemServerCertificateRequestFailed",e["KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED"]="keySystemServerCertificateUpdateFailed",e["KEY_SYSTEM_SESSION_UPDATE_FAILED"]="keySystemSessionUpdateFailed",e["KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED"]="keySystemStatusOutputRestricted",e["KEY_SYSTEM_STATUS_INTERNAL_ERROR"]="keySystemStatusInternalError",e["KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR"]="keySystemDestroyMediaKeysError",e["KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR"]="keySystemDestroyCloseSessionError",e["KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR"]="keySystemDestroyRemoveSessionError",e["MANIFEST_LOAD_ERROR"]="manifestLoadError",e["MANIFEST_LOAD_TIMEOUT"]="manifestLoadTimeOut",e["MANIFEST_PARSING_ERROR"]="manifestParsingError",e["MANIFEST_INCOMPATIBLE_CODECS_ERROR"]="manifestIncompatibleCodecsError",e["LEVEL_EMPTY_ERROR"]="levelEmptyError",e["LEVEL_LOAD_ERROR"]="levelLoadError",e["LEVEL_LOAD_TIMEOUT"]="levelLoadTimeOut",e["LEVEL_PARSING_ERROR"]="levelParsingError",e["LEVEL_SWITCH_ERROR"]="levelSwitchError",e["AUDIO_TRACK_LOAD_ERROR"]="audioTrackLoadError",e["AUDIO_TRACK_LOAD_TIMEOUT"]="audioTrackLoadTimeOut",e["SUBTITLE_LOAD_ERROR"]="subtitleTrackLoadError",e["SUBTITLE_TRACK_LOAD_TIMEOUT"]="subtitleTrackLoadTimeOut",e["FRAG_LOAD_ERROR"]="fragLoadError",e["FRAG_LOAD_TIMEOUT"]="fragLoadTimeOut",e["FRAG_DECRYPT_ERROR"]="fragDecryptError",e["FRAG_PARSING_ERROR"]="fragParsingError",e["FRAG_GAP"]="fragGap",e["REMUX_ALLOC_ERROR"]="remuxAllocError",e["KEY_LOAD_ERROR"]="keyLoadError",e["KEY_LOAD_TIMEOUT"]="keyLoadTimeOut",e["BUFFER_ADD_CODEC_ERROR"]="bufferAddCodecError",e["BUFFER_INCOMPATIBLE_CODECS_ERROR"]="bufferIncompatibleCodecsError",e["BUFFER_APPEND_ERROR"]="bufferAppendError",e["BUFFER_APPENDING_ERROR"]="bufferAppendingError",e["BUFFER_STALLED_ERROR"]="bufferStalledError",e["BUFFER_FULL_ERROR"]="bufferFullError",e["BUFFER_SEEK_OVER_HOLE"]="bufferSeekOverHole",e["BUFFER_NUDGE_ON_STALL"]="bufferNudgeOnStall",e["ASSET_LIST_LOAD_ERROR"]="assetListLoadError",e["ASSET_LIST_LOAD_TIMEOUT"]="assetListLoadTimeout",e["ASSET_LIST_PARSING_ERROR"]="assetListParsingError",e["INTERSTITIAL_ASSET_ITEM_ERROR"]="interstitialAssetItemError",e["INTERNAL_EXCEPTION"]="internalException",e["INTERNAL_ABORTED"]="aborted",e["ATTACH_MEDIA_ERROR"]="attachMediaError",e["UNKNOWN"]="unknown",e}({}),Ck=function(e){return e["MEDIA_ATTACHING"]="hlsMediaAttaching",e["MEDIA_ATTACHED"]="hlsMediaAttached",e["MEDIA_DETACHING"]="hlsMediaDetaching",e["MEDIA_DETACHED"]="hlsMediaDetached",e["MEDIA_ENDED"]="hlsMediaEnded",e["STALL_RESOLVED"]="hlsStallResolved",e["BUFFER_RESET"]="hlsBufferReset",e["BUFFER_CODECS"]="hlsBufferCodecs",e["BUFFER_CREATED"]="hlsBufferCreated",e["BUFFER_APPENDING"]="hlsBufferAppending",e["BUFFER_APPENDED"]="hlsBufferAppended",e["BUFFER_EOS"]="hlsBufferEos",e["BUFFERED_TO_END"]="hlsBufferedToEnd",e["BUFFER_FLUSHING"]="hlsBufferFlushing",e["BUFFER_FLUSHED"]="hlsBufferFlushed",e["MANIFEST_LOADING"]="hlsManifestLoading",e["MANIFEST_LOADED"]="hlsManifestLoaded",e["MANIFEST_PARSED"]="hlsManifestParsed",e["LEVEL_SWITCHING"]="hlsLevelSwitching",e["LEVEL_SWITCHED"]="hlsLevelSwitched",e["LEVEL_LOADING"]="hlsLevelLoading",e["LEVEL_LOADED"]="hlsLevelLoaded",e["LEVEL_UPDATED"]="hlsLevelUpdated",e["LEVEL_PTS_UPDATED"]="hlsLevelPtsUpdated",e["LEVELS_UPDATED"]="hlsLevelsUpdated",e["AUDIO_TRACKS_UPDATED"]="hlsAudioTracksUpdated",e["AUDIO_TRACK_SWITCHING"]="hlsAudioTrackSwitching",e["AUDIO_TRACK_SWITCHED"]="hlsAudioTrackSwitched",e["AUDIO_TRACK_LOADING"]="hlsAudioTrackLoading",e["AUDIO_TRACK_LOADED"]="hlsAudioTrackLoaded",e["AUDIO_TRACK_UPDATED"]="hlsAudioTrackUpdated",e["SUBTITLE_TRACKS_UPDATED"]="hlsSubtitleTracksUpdated",e["SUBTITLE_TRACKS_CLEARED"]="hlsSubtitleTracksCleared",e["SUBTITLE_TRACK_SWITCH"]="hlsSubtitleTrackSwitch",e["SUBTITLE_TRACK_LOADING"]="hlsSubtitleTrackLoading",e["SUBTITLE_TRACK_LOADED"]="hlsSubtitleTrackLoaded",e["SUBTITLE_TRACK_UPDATED"]="hlsSubtitleTrackUpdated",e["SUBTITLE_FRAG_PROCESSED"]="hlsSubtitleFragProcessed",e["CUES_PARSED"]="hlsCuesParsed",e["NON_NATIVE_TEXT_TRACKS_FOUND"]="hlsNonNativeTextTracksFound",e["INIT_PTS_FOUND"]="hlsInitPtsFound",e["FRAG_LOADING"]="hlsFragLoading",e["FRAG_LOAD_EMERGENCY_ABORTED"]="hlsFragLoadEmergencyAborted",e["FRAG_LOADED"]="hlsFragLoaded",e["FRAG_DECRYPTED"]="hlsFragDecrypted",e["FRAG_PARSING_INIT_SEGMENT"]="hlsFragParsingInitSegment",e["FRAG_PARSING_USERDATA"]="hlsFragParsingUserdata",e["FRAG_PARSING_METADATA"]="hlsFragParsingMetadata",e["FRAG_PARSED"]="hlsFragParsed",e["FRAG_BUFFERED"]="hlsFragBuffered",e["FRAG_CHANGED"]="hlsFragChanged",e["FPS_DROP"]="hlsFpsDrop",e["FPS_DROP_LEVEL_CAPPING"]="hlsFpsDropLevelCapping",e["MAX_AUTO_LEVEL_UPDATED"]="hlsMaxAutoLevelUpdated",e["ERROR"]="hlsError",e["DESTROYING"]="hlsDestroying",e["KEY_LOADING"]="hlsKeyLoading",e["KEY_LOADED"]="hlsKeyLoaded",e["LIVE_BACK_BUFFER_REACHED"]="hlsLiveBackBufferReached",e["BACK_BUFFER_REACHED"]="hlsBackBufferReached",e["STEERING_MANIFEST_LOADED"]="hlsSteeringManifestLoaded",e["ASSET_LIST_LOADING"]="hlsAssetListLoading",e["ASSET_LIST_LOADED"]="hlsAssetListLoaded",e["INTERSTITIALS_UPDATED"]="hlsInterstitialsUpdated",e["INTERSTITIALS_BUFFERED_TO_BOUNDARY"]="hlsInterstitialsBufferedToBoundary",e["INTERSTITIAL_ASSET_PLAYER_CREATED"]="hlsInterstitialAssetPlayerCreated",e["INTERSTITIAL_STARTED"]="hlsInterstitialStarted",e["INTERSTITIAL_ASSET_STARTED"]="hlsInterstitialAssetStarted",e["INTERSTITIAL_ASSET_ENDED"]="hlsInterstitialAssetEnded",e["INTERSTITIAL_ASSET_ERROR"]="hlsInterstitialAssetError",e["INTERSTITIAL_ENDED"]="hlsInterstitialEnded",e["INTERSTITIALS_PRIMARY_RESUMED"]="hlsInterstitialsPrimaryResumed",e["PLAYOUT_LIMIT_REACHED"]="hlsPlayoutLimitReached",e["EVENT_CUE_ENTER"]="hlsEventCueEnter",e}({});var Rk={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},Pk={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class Dk{constructor(e,t=0,i=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=i}sample(e,t){const i=Math.pow(this.alpha_,e);this.estimate_=t*(1-i)+i*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class Mk{constructor(e,t,i,s=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Dk(e),this.fast_=new Dk(t),this.defaultTTFB_=s,this.ttfb_=new Dk(e)}update(e,t){const{slow_:i,fast_:s,ttfb_:r}=this;i.halfLife!==e&&(this.slow_=new Dk(e,i.getEstimate(),i.getTotalWeight())),s.halfLife!==t&&(this.fast_=new Dk(t,s.getEstimate(),s.getTotalWeight())),r.halfLife!==e&&(this.ttfb_=new Dk(e,r.getEstimate(),r.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const i=8*t,s=e/1e3,r=i/s;this.fast_.sample(s,r),this.slow_.sample(s,r)}sampleTTFB(e){const t=e/1e3,i=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(i,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function Ok(e,t,i){return(t=Uk(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Nk(){return Nk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Nk.apply(null,arguments)}function Bk(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function Fk(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Bk(Object(i),!0).forEach(function(t){Ok(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Bk(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function $k(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function Uk(e){var t=$k(e,"string");return"symbol"==typeof t?t:t+""}class Gk{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const i=`[${e}]:`;this.trace=Hk,this.debug=t.debug.bind(null,i),this.log=t.log.bind(null,i),this.warn=t.warn.bind(null,i),this.info=t.info.bind(null,i),this.error=t.error.bind(null,i)}}const Hk=function(){},jk={trace:Hk,debug:Hk,log:Hk,warn:Hk,info:Hk,error:Hk};function zk(){return Nk({},jk)}function Vk(e,t){const i=self.console[e];return i?i.bind(self.console,`${t?"["+t+"] ":""}[${e}] >`):Hk}function Yk(e,t,i){return t[e]?t[e].bind(t):Vk(e,i)}const Wk=zk();function Kk(e,t,i){const s=zk();if("object"===typeof console&&!0===e||"object"===typeof e){const r=["debug","log","info","warn","error"];r.forEach(t=>{s[t]=Yk(t,e,i)});try{s.log(`Debug logs enabled for "${t}" in hls.js version 1.6.7`)}catch(tH){return zk()}r.forEach(t=>{Wk[t]=Yk(t,e)})}else Nk(Wk,s);return s}const qk=Wk;function Xk(e=!0){if("undefined"===typeof self)return;const t=(e||!self.MediaSource)&&self.ManagedMediaSource;return t||self.MediaSource||self.WebKitMediaSource}function Qk(e){return"undefined"!==typeof self&&e===self.ManagedMediaSource}function Zk(e,t){const i=Object.keys(e),s=Object.keys(t),r=i.length,n=s.length;return!r||!n||r===n&&!i.some(e=>-1===s.indexOf(e))}function Jk(e,t=!1){if("undefined"!==typeof TextDecoder){const i=new TextDecoder("utf-8"),s=i.decode(e);if(t){const e=s.indexOf("\0");return-1!==e?s.substring(0,e):s}return s.replace(/\0/g,"")}const i=e.length;let s,r,n,a="",o=0;while(o<i){if(s=e[o++],0===s&&t)return a;if(0!==s&&3!==s)switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(s);break;case 12:case 13:r=e[o++],a+=String.fromCharCode((31&s)<<6|63&r);break;case 14:r=e[o++],n=e[o++],a+=String.fromCharCode((15&s)<<12|(63&r)<<6|63&n);break}}return a}const eI={hexDump:function(e){let t="";for(let i=0;i<e.length;i++){let s=e[i].toString(16);s.length<2&&(s="0"+s),t+=s}return t}};function tI(e){return Uint8Array.from(e.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function iI(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}var sI,rI={exports:{}};function nI(){return sI||(sI=1,function(e){(function(){var t=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,n={buildAbsoluteURL:function(e,t,s){if(s=s||{},e=e.trim(),t=t.trim(),!t){if(!s.alwaysNormalize)return e;var r=n.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=n.normalizePath(r.path),n.buildURLFromParts(r)}var a=n.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return s.alwaysNormalize?(a.path=n.normalizePath(a.path),n.buildURLFromParts(a)):t;var o=n.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=i.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var c={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(c.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var d=o.path,h=d.substring(0,d.lastIndexOf("/")+1)+a.path;c.path=n.normalizePath(h)}else c.path=o.path,a.params||(c.params=o.params,a.query||(c.query=o.query));return null===c.path&&(c.path=s.alwaysNormalize?n.normalizePath(a.path):a.path),n.buildURLFromParts(c)},parseURL:function(e){var i=t.exec(e);return i?{scheme:i[1]||"",netLoc:i[2]||"",path:i[3]||"",params:i[4]||"",query:i[5]||"",fragment:i[6]||""}:null},normalizePath:function(e){e=e.split("").reverse().join("").replace(s,"");while(e.length!==(e=e.replace(r,"")).length);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=n})()}(rI)),rI.exports}var aI=nI();class oI{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var lI={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class cI{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,"string"===typeof e&&(e={url:e}),this.base=e,fI(this,"stats")}setByteRange(e,t){const i=e.split("@",2);let s;s=1===i.length?(null==t?void 0:t.byteRangeEndOffset)||0:parseInt(i[1]),this._byteRange=[s,parseInt(i[0])+s]}get baseurl(){return this.base.url}get byteRange(){return null===this._byteRange?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return null===this._streams&&(this._streams={[lI.AUDIO]:null,[lI.VIDEO]:null,[lI.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return null!==this._stats}get hasStreams(){return null!==this._streams}get stats(){return null===this._stats&&(this._stats=new oI),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=aI.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[lI.AUDIO]=null,e[lI.VIDEO]=null,e[lI.AUDIOVIDEO]=null}}function dI(e){return"initSegment"!==e.sn}class hI extends cI{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange){const e=this.byteRange[0],t=this.byteRange[1];if(xk(e)&&xk(t))return t-e}return null}get bitrate(){return this.byteLength?8*this.byteLength/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const e=this.levelkeys.identity;if(e)this._decryptdata=e.getDecryptData(this.sn);else{const e=Object.keys(this.levelkeys);if(1===e.length)return this._decryptdata=this.levelkeys[e[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(null===this.programDateTime)return null;const e=xk(this.duration)?this.duration:0;return this.programDateTime+1e3*e}get encrypted(){var e;if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){const e=Object.keys(this.levelkeys),t=e.length;if(t>1||1===t&&this.levelkeys[e[0]].encrypted)return!0}return!1}get programDateTime(){return null===this._programDateTime&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){xk(e)?this._programDateTime=e:this._programDateTime=this.rawProgramDateTime=null}get ref(){return dI(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;null==(e=this.loader)||e.abort(),null==(t=this.keyLoader)||t.abort()}setElementaryStreamInfo(e,t,i,s,r,n=!1){const{elementaryStreams:a}=this,o=a[e];o?(o.startPTS=Math.min(o.startPTS,t),o.endPTS=Math.max(o.endPTS,i),o.startDTS=Math.min(o.startDTS,s),o.endDTS=Math.max(o.endDTS,r)):a[e]={startPTS:t,endPTS:i,startDTS:s,endDTS:r,partial:n}}}class uI extends cI{constructor(e,t,i,s,r){super(i),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=s;const n=e.enumeratedString("BYTERANGE");n&&this.setByteRange(n,r),r&&(this.fragOffset=r.fragOffset+r.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function pI(e,t){const i=Object.getPrototypeOf(e);if(i){const e=Object.getOwnPropertyDescriptor(i,t);return e||pI(i,t)}}function fI(e,t){const i=pI(e,t);i&&(i.enumerable=!0,Object.defineProperty(e,t,i))}const gI=Math.pow(2,32)-1,mI=[].push,vI={video:1,audio:2,id3:3,text:4};function yI(e){return String.fromCharCode.apply(null,e)}function bI(e,t){const i=e[t]<<8|e[t+1];return i<0?65536+i:i}function EI(e,t){const i=AI(e,t);return i<0?4294967296+i:i}function wI(e,t){let i=EI(e,t);return i*=Math.pow(2,32),i+=EI(e,t+4),i}function AI(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function TI(e){const t=e.byteLength;for(let i=0;i<t;){const s=EI(e,i);if(s>8&&109===e[i+4]&&111===e[i+5]&&111===e[i+6]&&102===e[i+7])return!0;i=s>1?i+s:t}return!1}function SI(e,t){const i=[];if(!t.length)return i;const s=e.byteLength;for(let r=0;r<s;){const n=EI(e,r),a=yI(e.subarray(r+4,r+8)),o=n>1?r+n:s;if(a===t[0])if(1===t.length)i.push(e.subarray(r+8,o));else{const s=SI(e.subarray(r+8,o),t.slice(1));s.length&&mI.apply(i,s)}r=o}return i}function xI(e){const t=[],i=e[0];let s=8;const r=EI(e,s);s+=4;let n=0,a=0;0===i?(n=EI(e,s),a=EI(e,s+4),s+=8):(n=wI(e,s),a=wI(e,s+8),s+=16),s+=2;let o=e.length+a;const l=bI(e,s);s+=2;for(let c=0;c<l;c++){let i=s;const n=EI(e,i);i+=4;const a=2147483647&n,l=(2147483648&n)>>>31;if(1===l)return qk.warn("SIDX has hierarchical references (not supported)"),null;const c=EI(e,i);i+=4,t.push({referenceSize:a,subsegmentDuration:c,info:{duration:c/r,start:o,end:o+a-1}}),o+=a,i+=4,s=i}return{earliestPresentationTime:n,timescale:r,version:i,referencesCount:l,references:t}}function LI(e){const t=[],i=SI(e,["moov","trak"]);for(let r=0;r<i.length;r++){const e=i[r],s=SI(e,["tkhd"])[0];if(s){let i=s[0];const r=EI(s,0===i?12:20),n=SI(e,["mdia","mdhd"])[0];if(n){i=n[0];const s=EI(n,0===i?12:20),a=SI(e,["mdia","hdlr"])[0];if(a){const i=yI(a.subarray(8,12)),n={soun:lI.AUDIO,vide:lI.VIDEO}[i],o=SI(e,["mdia","minf","stbl","stsd"])[0],l=kI(o);n?(t[r]={timescale:s,type:n,stsd:l},t[n]=Fk({timescale:s,id:r},l)):t[r]={timescale:s,type:i,stsd:l}}}}}const s=SI(e,["moov","mvex","trex"]);return s.forEach(e=>{const i=EI(e,4),s=t[i];s&&(s.default={duration:EI(e,12),flags:EI(e,20)})}),t}function kI(e){const t=e.subarray(8),i=t.subarray(86),s=yI(t.subarray(4,8));let r,n=s;const a="enca"===s||"encv"===s;if(a){const e=SI(t,[s])[0],i=e.subarray("enca"===s?28:78),r=SI(i,["sinf"]);r.forEach(e=>{const t=SI(e,["schm"])[0];if(t){const i=yI(t.subarray(4,8));if("cbcs"===i||"cenc"===i){const t=SI(e,["frma"])[0];t&&(n=yI(t))}}})}const o=n;switch(n){case"avc1":case"avc2":case"avc3":case"avc4":{const e=SI(i,["avcC"])[0];e&&e.length>3&&(n+="."+RI(e[1])+RI(e[2])+RI(e[3]),r=II("avc1"===o?"dva1":"dvav",i));break}case"mp4a":{const e=SI(t,[s])[0],i=SI(e.subarray(28),["esds"])[0];if(i&&i.length>7){let e=4;if(3!==i[e++])break;e=CI(i,e),e+=2;const t=i[e++];if(128&t&&(e+=2),64&t&&(e+=i[e++]),4!==i[e++])break;e=CI(i,e);const s=i[e++];if(64!==s)break;if(n+="."+RI(s),e+=12,5!==i[e++])break;e=CI(i,e);const r=i[e++];let a=(248&r)>>3;31===a&&(a+=1+((7&r)<<3)+((224&i[e])>>5)),n+="."+a}break}case"hvc1":case"hev1":{const e=SI(i,["hvcC"])[0];if(e&&e.length>12){const t=e[1],i=["","A","B","C"][t>>6],s=31&t,r=EI(e,2),a=(32&t)>>5?"H":"L",o=e[12],l=e.subarray(6,12);n+="."+i+s,n+="."+_I(r).toString(16).toUpperCase(),n+="."+a+o;let c="";for(let e=l.length;e--;){const t=l[e];if(t||c){const e=t.toString(16).toUpperCase();c="."+e+c}}n+=c}r=II("hev1"==o?"dvhe":"dvh1",i);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":n=II(n,i)||n;break;case"vp09":{const e=SI(i,["vpcC"])[0];if(e&&e.length>6){const t=e[4],i=e[5],s=e[6]>>4&15;n+="."+PI(t)+"."+PI(i)+"."+PI(s)}break}case"av01":{const e=SI(i,["av1C"])[0];if(e&&e.length>2){const t=e[1]>>>5,s=31&e[1],a=e[2]>>>7?"H":"M",o=(64&e[2])>>6,l=(32&e[2])>>5,c=2===t&&o?l?12:10:o?10:8,d=(16&e[2])>>4,h=(8&e[2])>>3,u=(4&e[2])>>2,p=3&e[2],f=1,g=1,m=1,v=0;n+="."+t+"."+PI(s)+a+"."+PI(c)+"."+d+"."+h+u+p+"."+PI(f)+"."+PI(g)+"."+PI(m)+"."+v,r=II("dav1",i)}break}}return{codec:n,encrypted:a,supplemental:r}}function II(e,t){const i=SI(t,["dvvC"]),s=i.length?i[0]:SI(t,["dvcC"])[0];if(s){const t=s[2]>>1&127,i=s[2]<<5&32|s[3]>>3&31;return e+"."+PI(t)+"."+PI(i)}}function _I(e){let t=0;for(let i=0;i<32;i++)t|=(e>>i&1)<<31-i;return t>>>0}function CI(e,t){const i=t+5;while(128&e[t++]&&t<i);return t}function RI(e){return("0"+e.toString(16).toUpperCase()).slice(-2)}function PI(e){return(e<10?"0":"")+e}function DI(e,t){if(!e||!t)return e;const i=t.keyId;if(i&&t.isCommonEncryption){const t=SI(e,["moov","trak"]);t.forEach(e=>{const t=SI(e,["mdia","minf","stbl","stsd"])[0],s=t.subarray(8);let r=SI(s,["enca"]);const n=r.length>0;n||(r=SI(s,["encv"])),r.forEach(e=>{const t=n?e.subarray(28):e.subarray(78),s=SI(t,["sinf"]);s.forEach(e=>{const t=MI(e);if(t){const e=t.subarray(8,24);e.some(e=>0!==e)||(qk.log(`[eme] Patching keyId in 'enc${n?"a":"v"}>sinf>>tenc' box: ${eI.hexDump(e)} -> ${eI.hexDump(i)}`),t.set(i,8))}})})})}return e}function MI(e){const t=SI(e,["schm"])[0];if(t){const i=yI(t.subarray(4,8));if("cbcs"===i||"cenc"===i)return SI(e,["schi","tenc"])[0]}return null}function OI(e,t,i){const s={},r=SI(e,["moof","traf"]);for(let n=0;n<r.length;n++){const e=r[n],a=SI(e,["tfhd"])[0],o=EI(a,4),l=t[o];if(!l)continue;const c=s[o]||(s[o]={start:NaN,duration:0,sampleCount:0,timescale:l.timescale,type:l.type}),d=SI(e,["tfdt"])[0];if(d){const e=d[0];let t=EI(d,4);1===e&&(t===gI?i.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(t*=gI+1,t+=EI(d,8))),xk(t)&&(!xk(c.start)||t<c.start)&&(c.start=t)}const h=l.default,u=EI(a,0)|(null==h?void 0:h.flags);let p=(null==h?void 0:h.duration)||0;8&u&&(p=EI(a,2&u?12:8));const f=SI(e,["trun"]);let g=c.start||0,m=0,v=p;for(let t=0;t<f.length;t++){const e=f[t],i=EI(e,4),s=c.sampleCount;c.sampleCount+=i;const r=1&e[3],n=4&e[3],a=1&e[2],o=2&e[2],l=4&e[2],d=8&e[2];let h=8,u=i;if(r&&(h+=4),n&&i){const t=1&e[h+1];t||void 0!==c.keyFrameIndex||(c.keyFrameIndex=s),h+=4,a?(v=EI(e,h),h+=4):v=p,o&&(h+=4),d&&(h+=4),g+=v,m+=v,u--}while(u--){if(a?(v=EI(e,h),h+=4):v=p,o&&(h+=4),l){const t=1&e[h+1];t||void 0===c.keyFrameIndex&&(c.keyFrameIndex=c.sampleCount-(u+1),c.keyFrameStart=g),h+=4}d&&(h+=4),g+=v,m+=v}!m&&p&&(m+=p*i)}c.duration+=m}if(!Object.keys(s).some(e=>s[e].duration)){let t=1/0,i=0;const r=SI(e,["sidx"]);for(let e=0;e<r.length;e++){const s=xI(r[e]);if(null!=s&&s.references){t=Math.min(t,s.earliestPresentationTime/s.timescale);const e=s.references.reduce((e,t)=>e+t.info.duration||0,0);i=Math.max(i,e+s.earliestPresentationTime/s.timescale)}}i&&xk(i)&&Object.keys(s).forEach(e=>{s[e].duration||(s[e].duration=i*s[e].timescale-s[e].start)})}return s}function NI(e){const t={valid:null,remainder:null},i=SI(e,["moof"]);if(i.length<2)return t.remainder=e,t;const s=i[i.length-1];return t.valid=e.slice(0,s.byteOffset-8),t.remainder=e.slice(s.byteOffset-8),t}function BI(e,t){const i=new Uint8Array(e.length+t.length);return i.set(e),i.set(t,e.length),i}function FI(e,t){const i=[],s=t.samples,r=t.timescale,n=t.id;let a=!1;const o=SI(s,["moof"]);return o.map(o=>{const l=o.byteOffset-8,c=SI(o,["traf"]);c.map(o=>{const c=SI(o,["tfdt"]).map(e=>{const t=e[0];let i=EI(e,4);return 1===t&&(i*=Math.pow(2,32),i+=EI(e,8)),i/r})[0];return void 0!==c&&(e=c),SI(o,["tfhd"]).map(c=>{const d=EI(c,4),h=16777215&EI(c,0),u=0!==(1&h),p=0!==(2&h),f=0!==(8&h);let g=0;const m=0!==(16&h);let v=0;const y=0!==(32&h);let b=8;d===n&&(u&&(b+=8),p&&(b+=4),f&&(g=EI(c,b),b+=4),m&&(v=EI(c,b),b+=4),y&&(b+=4),"video"===t.type&&(a=$I(t.codec)),SI(o,["trun"]).map(n=>{const o=n[0],c=16777215&EI(n,0),d=0!==(1&c);let h=0;const u=0!==(4&c),p=0!==(256&c);let f=0;const m=0!==(512&c);let y=0;const b=0!==(1024&c),E=0!==(2048&c);let w=0;const A=EI(n,4);let T=8;d&&(h=EI(n,T),T+=4),u&&(T+=4);let S=h+l;for(let l=0;l<A;l++){if(p?(f=EI(n,T),T+=4):f=g,m?(y=EI(n,T),T+=4):y=v,b&&(T+=4),E&&(w=0===o?EI(n,T):AI(n,T),T+=4),t.type===lI.VIDEO){let t=0;while(t<y){const n=EI(s,S);if(S+=4,UI(a,s[S])){const t=s.subarray(S,S+n);GI(t,a?2:1,e+w/r,i)}S+=n,t+=n+4}}e+=f/r}}))})})}),i}function $I(e){if(!e)return!1;const t=e.substring(0,4);return"hvc1"===t||"hev1"===t||"dvh1"===t||"dvhe"===t}function UI(e,t){if(e){const e=t>>1&63;return 39===e||40===e}{const e=31&t;return 6===e}}function GI(e,t,i,s){const r=HI(e);let n=0;n+=t;let a=0,o=0,l=0;while(n<r.length){a=0;do{if(n>=r.length)break;l=r[n++],a+=l}while(255===l);o=0;do{if(n>=r.length)break;l=r[n++],o+=l}while(255===l);const e=r.length-n;let t=n;if(o<e)n+=o;else if(o>e){qk.error(`Malformed SEI payload. ${o} is too small, only ${e} bytes left to parse.`);break}if(4===a){const e=r[t++];if(181===e){const e=bI(r,t);if(t+=2,49===e){const e=EI(r,t);if(t+=4,1195456820===e){const e=r[t++];if(3===e){const n=r[t++],o=31&n,l=64&n,c=l?2+3*o:0,d=new Uint8Array(c);if(l){d[0]=n;for(let e=1;e<c;e++)d[e]=r[t++]}s.push({type:e,payloadType:a,pts:i,bytes:d})}}}}}else if(5===a&&o>16){const e=[];for(let i=0;i<16;i++){const s=r[t++].toString(16);e.push(1==s.length?"0"+s:s),3!==i&&5!==i&&7!==i&&9!==i||e.push("-")}const n=o-16,l=new Uint8Array(n);for(let i=0;i<n;i++)l[i]=r[t++];s.push({payloadType:a,pts:i,uuid:e.join(""),userData:Jk(l),userDataBytes:l})}}}function HI(e){const t=e.byteLength,i=[];let s=1;while(s<t-2)0===e[s]&&0===e[s+1]&&3===e[s+2]?(i.push(s+2),s+=2):s++;if(0===i.length)return e;const r=t-i.length,n=new Uint8Array(r);let a=0;for(s=0;s<r;a++,s++)a===i[0]&&(a++,i.shift()),n[s]=e[a];return n}function jI(e){const t=e[0];let i="",s="",r=0,n=0,o=0,l=0,c=0,d=0;if(0===t){while("\0"!==yI(e.subarray(d,d+1)))i+=yI(e.subarray(d,d+1)),d+=1;i+=yI(e.subarray(d,d+1)),d+=1;while("\0"!==yI(e.subarray(d,d+1)))s+=yI(e.subarray(d,d+1)),d+=1;s+=yI(e.subarray(d,d+1)),d+=1,r=EI(e,12),n=EI(e,16),l=EI(e,20),c=EI(e,24),d=28}else if(1===t){d+=4,r=EI(e,d),d+=4;const t=EI(e,d);d+=4;const n=EI(e,d);d+=4,o=a(2,32)*t+n,Lk(o)||(o=Number.MAX_SAFE_INTEGER,qk.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),l=EI(e,d),d+=4,c=EI(e,d),d+=4;while("\0"!==yI(e.subarray(d,d+1)))i+=yI(e.subarray(d,d+1)),d+=1;i+=yI(e.subarray(d,d+1)),d+=1;while("\0"!==yI(e.subarray(d,d+1)))s+=yI(e.subarray(d,d+1)),d+=1;s+=yI(e.subarray(d,d+1)),d+=1}const h=e.subarray(d,e.byteLength);return{schemeIdUri:i,value:s,timeScale:r,presentationTime:o,presentationTimeDelta:n,eventDuration:l,id:c,payload:h}}function zI(e,...t){const i=t.length;let s=8,r=i;while(r--)s+=t[r].byteLength;const n=new Uint8Array(s);for(n[0]=s>>24&255,n[1]=s>>16&255,n[2]=s>>8&255,n[3]=255&s,n.set(e,4),r=0,s=8;r<i;r++)n.set(t[r],s),s+=t[r].byteLength;return n}function VI(e,t,i){if(16!==e.byteLength)throw new RangeError("Invalid system id");let s,r,n;s=0,r=new Uint8Array,s>0?(n=new Uint8Array(4),t.length>0&&new DataView(n.buffer).setUint32(0,t.length,!1)):n=new Uint8Array;const a=new Uint8Array(4);return i&&i.byteLength>0&&new DataView(a.buffer).setUint32(0,i.byteLength,!1),zI([112,115,115,104],new Uint8Array([s,0,0,0]),e,n,r,a,i||new Uint8Array)}const YI=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),WI={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function KI(e,t){const i=WI[t];return!!i&&!!i[e.slice(0,4)]}function qI(e,t,i=!0){return!e.split(",").some(e=>!XI(e,t,i))}function XI(e,t,i=!0){var s;const r=Xk(i);return null!=(s=null==r?void 0:r.isTypeSupported(QI(e,t)))&&s}function QI(e,t){return`${t}/mp4;codecs=${e}`}function ZI(e){if(e){const t=e.substring(0,4);return WI.video[t]}return 2}function JI(e){const t=YI();return e.split(",").reduce((e,i)=>{const s=t&&$I(i),r=s?9:WI.video[i];return r?(2*r+e)/(e?3:2):(WI.audio[i]+e)/(e?2:1)},0)}const e_={};function t_(e,t=!0){if(e_[e])return e_[e];const i={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[e];for(let r=0;r<i.length;r++){var s;if(XI(i[r],"audio",t))return e_[e]=i[r],i[r];if("mp3"===i[r]&&null!=(s=Xk(t))&&s.isTypeSupported("audio/mpeg"))return""}return e}const i_=/flac|opus|mp4a\.40\.34/i;function s_(e,t=!0){return e.replace(i_,e=>t_(e.toLowerCase(),t))}function r_(e,t){const i=[];if(e){const t=e.split(",");for(let e=0;e<t.length;e++)KI(t[e],"video")||i.push(t[e])}return t&&i.push(t),i.join(",")}function n_(e,t){if(e&&(e.length>4||-1!==["ac-3","ec-3","alac","fLaC","Opus"].indexOf(e))&&(a_(e,"audio")||a_(e,"video")))return e;if(t){const i=t.split(",");if(i.length>1){if(e)for(let t=i.length;t--;)if(i[t].substring(0,4)===e.substring(0,4))return i[t];return i[0]}}return t||e}function a_(e,t){return KI(e,t)&&XI(e,t)}function o_(e){const t=e.split(",");for(let i=0;i<t.length;i++){const e=t[i].split(".");e.length>2&&"avc1"===e[0]&&(t[i]=`avc1.${parseInt(e[1]).toString(16)}${("000"+parseInt(e[2]).toString(16)).slice(-4)}`)}return t.join(",")}function l_(e){if(e.startsWith("av01.")){const t=e.split("."),i=["0","111","01","01","01","0"];for(let e=t.length;e>4&&e<10;e++)t[e]=i[e-4];return t.join(".")}return e}function c_(e){const t=Xk(e)||{isTypeSupported:()=>!1};return{mpeg:t.isTypeSupported("audio/mpeg"),mp3:t.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:t.isTypeSupported('audio/mp4; codecs="ac-3"')}}function d_(e){return e.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const h_={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]};function u_(e,t){return{supported:!1,configurations:t,decodingInfoResults:[{supported:!1,smooth:!1,powerEfficient:!1}],error:e}}function p_(e,t,i,s,r,n){const a=e.videoCodec,o=e.audioCodec?e.audioGroups:null,l=null==n?void 0:n.audioCodec,c=null==n?void 0:n.channels,d=c?parseInt(c):l?1/0:2;let h=null;if(null!=o&&o.length)try{h=1===o.length&&o[0]?t.groups[o[0]].channels:o.reduce((e,i)=>{if(i){const s=t.groups[i];if(!s)throw new Error(`Audio track group ${i} not found`);Object.keys(s.channels).forEach(t=>{e[t]=(e[t]||0)+s.channels[t]})}return e},{2:0})}catch(u){return!0}return void 0!==a&&(a.split(",").some(e=>$I(e))||e.width>1920&&e.height>1088||e.height>1920&&e.width>1088||e.frameRate>Math.max(s,30)||"SDR"!==e.videoRange&&e.videoRange!==i||e.bitrate>Math.max(r,8e6))||!!h&&xk(d)&&Object.keys(h).some(e=>parseInt(e)>d)}function f_(e,t,i,s={}){const r=e.videoCodec;if(!r&&!e.audioCodec||!i)return Promise.resolve(h_);const n=[],a=g_(e),o=a.length,l=m_(e,t,o>0),c=l.length;for(let d=o||1*c||1;d--;){const e={type:"media-source"};if(o&&(e.video=a[d%o]),c){e.audio=l[d%c];const t=e.audio.bitrate;e.video&&t&&(e.video.bitrate-=t)}n.push(e)}if(r){const e=navigator.userAgent;if(r.split(",").some(e=>$I(e))&&YI())return Promise.resolve(u_(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${e})`),n))}return Promise.all(n.map(e=>{const t=b_(e);return s[t]||(s[t]=i.decodingInfo(e))})).then(e=>({supported:!e.some(e=>!e.supported),configurations:n,decodingInfoResults:e})).catch(e=>({supported:!1,configurations:n,decodingInfoResults:[],error:e}))}function g_(e){var t;const i=null==(t=e.videoCodec)?void 0:t.split(","),s=y_(e),r=e.width||640,n=e.height||480,a=e.frameRate||30,o=e.videoRange.toLowerCase();return i?i.map(e=>{const t={contentType:QI(l_(e),"video"),width:r,height:n,bitrate:s,framerate:a};return"sdr"!==o&&(t.transferFunction=o),t}):[]}function m_(e,t,i){var s;const r=null==(s=e.audioCodec)?void 0:s.split(","),n=y_(e);return r&&e.audioGroups?e.audioGroups.reduce((e,s)=>{var a;const o=s?null==(a=t.groups[s])?void 0:a.tracks:null;return o?o.reduce((e,t)=>{if(t.groupId===s){const s=parseFloat(t.channels||"");r.forEach(t=>{const r={contentType:QI(t,"audio"),bitrate:i?v_(t,n):n};s&&(r.channels=""+s),e.push(r)})}return e},e):e},[]):[]}function v_(e,t){if(t<=1)return 1;let i=128e3;return"ec-3"===e?i=768e3:"ac-3"===e&&(i=64e4),Math.min(t/2,i)}function y_(e){return 1e3*Math.ceil(Math.max(.9*e.bitrate,e.averageBitrate)/1e3)||1}function b_(e){let t="";const{audio:i,video:s}=e;if(s){const e=d_(s.contentType);t+=`${e}_r${s.height}x${s.width}f${Math.ceil(s.framerate)}${s.transferFunction||"sd"}_${Math.ceil(s.bitrate/1e5)}`}if(i){const e=d_(i.contentType);t+=`${s?"_":""}${e}_c${i.channels}`}return t}const E_=["NONE","TYPE-0","TYPE-1",null];function w_(e){return E_.indexOf(e)>-1}const A_=["SDR","PQ","HLG"];function T_(e){return!!e&&A_.indexOf(e)>-1}var S_={No:"",Yes:"YES",v2:"v2"};function x_(e){const{canSkipUntil:t,canSkipDateRanges:i,age:s}=e,r=s<t/2;return t&&r?i?S_.v2:S_.Yes:S_.No}class L_{constructor(e,t,i){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=i}addDirectives(e){const t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class k_{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(e=>!!e).map(e=>e.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const i=null==(t=e.supplemental)?void 0:t.videoCodec;i&&i!==e.videoCodec&&(this.codecSet+=`,${i.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return I_(this._audioGroups,e)}hasSubtitleGroup(e){return I_(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t)if("audio"===e){let e=this._audioGroups;e||(e=this._audioGroups=[]),-1===e.indexOf(t)&&e.push(t)}else if("text"===e){let e=this._subtitleGroups;e||(e=this._subtitleGroups=[]),-1===e.indexOf(t)&&e.push(t)}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return null==(e=this.audioGroups)?void 0:e[0]}get textGroupId(){var e;return null==(e=this.subtitleGroups)?void 0:e[0]}addFallback(){}}function I_(e,t){return!(!t||!e)&&-1!==e.indexOf(t)}function __(){if("function"===typeof matchMedia){const e=matchMedia("(dynamic-range: high)"),t=matchMedia("bad query");if(e.media!==t.media)return!0===e.matches}return!1}function C_(e,t){let i=!1,s=[];if(e&&(i="SDR"!==e,s=[e]),t){s=t.allowedVideoRanges||A_.slice(0);const e="SDR"!==s.join("")&&!t.videoCodec;i=void 0!==t.preferHDR?t.preferHDR:e&&__(),i||(s=["SDR"])}return{preferHDR:i,allowedVideoRanges:s}}const R_=e=>{const t=new WeakSet;return(i,s)=>{if(e&&(s=e(i,s)),"object"===typeof s&&null!==s){if(t.has(s))return;t.add(s)}return s}},P_=(e,t)=>JSON.stringify(e,R_(t));function D_(e,t,i,s,r){const n=Object.keys(e),a=null==s?void 0:s.channels,o=null==s?void 0:s.audioCodec,l=null==r?void 0:r.videoCodec,c=a&&2===parseInt(a);let d=!1,h=!1,u=1/0,p=1/0,f=1/0,g=1/0,m=0,v=[];const{preferHDR:y,allowedVideoRanges:b}=C_(t,r);for(let S=n.length;S--;){const t=e[n[S]];d||(d=t.channels[2]>0),u=Math.min(u,t.minHeight),p=Math.min(p,t.minFramerate),f=Math.min(f,t.minBitrate);const i=b.filter(e=>t.videoRanges[e]>0);i.length>0&&(h=!0)}u=xk(u)?u:0,p=xk(p)?p:0;const E=Math.max(1080,u),w=Math.max(30,p);f=xk(f)?f:i,i=Math.max(f,i),h||(t=void 0);const A=n.length>1,T=n.reduce((t,s)=>{const r=e[s];if(s===t)return t;if(v=h?b.filter(e=>r.videoRanges[e]>0):[],A){if(r.minBitrate>i)return M_(s,`min bitrate of ${r.minBitrate} > current estimate of ${i}`),t;if(!r.hasDefaultAudio)return M_(s,"no renditions with default or auto-select sound found"),t;if(o&&s.indexOf(o.substring(0,4))%5!==0)return M_(s,`audio codec preference "${o}" not found`),t;if(a&&!c){if(!r.channels[a])return M_(s,`no renditions with ${a} channel sound found (channels options: ${Object.keys(r.channels)})`),t}else if((!o||c)&&d&&0===r.channels["2"])return M_(s,"no renditions with stereo sound found"),t;if(r.minHeight>E)return M_(s,`min resolution of ${r.minHeight} > maximum of ${E}`),t;if(r.minFramerate>w)return M_(s,`min framerate of ${r.minFramerate} > maximum of ${w}`),t;if(!v.some(e=>r.videoRanges[e]>0))return M_(s,`no variants with VIDEO-RANGE of ${P_(v)} found`),t;if(l&&s.indexOf(l.substring(0,4))%5!==0)return M_(s,`video codec preference "${l}" not found`),t;if(r.maxScore<m)return M_(s,`max score of ${r.maxScore} < selected max of ${m}`),t}return t&&(JI(s)>=JI(t)||r.fragmentError>e[t].fragmentError)?t:(g=r.minIndex,m=r.maxScore,s)},void 0);return{codecSet:T,videoRanges:v,preferHDR:y,minFramerate:p,minBitrate:f,minIndex:g}}function M_(e,t){qk.log(`[abr] start candidates with "${e}" ignored because ${t}`)}function O_(e){return e.reduce((e,t)=>{let i=e.groups[t.groupId];i||(i=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),i.tracks.push(t);const s=t.channels||"2";return i.channels[s]=(i.channels[s]||0)+1,i.hasDefault=i.hasDefault||t.default,i.hasAutoSelect=i.hasAutoSelect||t.autoselect,i.hasDefault&&(e.hasDefaultAudio=!0),i.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function N_(e,t,i,s){return e.slice(i,s+1).reduce((e,i,s)=>{if(!i.codecSet)return e;const r=i.audioGroups;let n=e[i.codecSet];n||(e[i.codecSet]=n={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:s,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!r,fragmentError:0}),n.minBitrate=Math.min(n.minBitrate,i.bitrate);const a=Math.min(i.height,i.width);return n.minHeight=Math.min(n.minHeight,a),n.minFramerate=Math.min(n.minFramerate,i.frameRate),n.minIndex=Math.min(n.minIndex,s),n.maxScore=Math.max(n.maxScore,i.score),n.fragmentError+=i.fragmentError,n.videoRanges[i.videoRange]=(n.videoRanges[i.videoRange]||0)+1,r&&r.forEach(e=>{if(!e)return;const i=t.groups[e];i&&(n.hasDefaultAudio=n.hasDefaultAudio||t.hasDefaultAudio?i.hasDefault:i.hasAutoSelect||!t.hasDefaultAudio&&!t.hasAutoSelectAudio,Object.keys(i.channels).forEach(e=>{n.channels[e]=(n.channels[e]||0)+i.channels[e]}))}),e},{})}function B_(e){if(!e)return e;const{lang:t,assocLang:i,characteristics:s,channels:r,audioCodec:n}=e;return{lang:t,assocLang:i,characteristics:s,channels:r,audioCodec:n}}function F_(e,t,i){if("attrs"in e){const i=t.indexOf(e);if(-1!==i)return i}for(let s=0;s<t.length;s++){const r=t[s];if($_(e,r,i))return s}return-1}function $_(e,t,i){const{groupId:s,name:r,lang:n,assocLang:a,default:o}=e,l=e.forced;return(void 0===s||t.groupId===s)&&(void 0===r||t.name===r)&&(void 0===n||U_(n,t.lang))&&(void 0===n||t.assocLang===a)&&(void 0===o||t.default===o)&&(void 0===l||t.forced===l)&&(!("characteristics"in e)||G_(e.characteristics||"",t.characteristics))&&(void 0===i||i(e,t))}function U_(e,t="--"){return e.length===t.length?e===t:e.startsWith(t)||t.startsWith(e)}function G_(e,t=""){const i=e.split(","),s=t.split(",");return i.length===s.length&&!i.some(e=>-1===s.indexOf(e))}function H_(e,t){const{audioCodec:i,channels:s}=e;return(void 0===i||(t.audioCodec||"").substring(0,4)===i.substring(0,4))&&(void 0===s||s===(t.channels||"2"))}function j_(e,t,i,s,r){const n=t[s],a=t.reduce((e,t,i)=>{const s=t.uri,r=e[s]||(e[s]=[]);return r.push(i),e},{}),o=a[n.uri];o.length>1&&(s=Math.max.apply(Math,o));const l=n.videoRange,c=n.frameRate,d=n.codecSet.substring(0,4),h=z_(t,s,t=>{if(t.videoRange!==l||t.frameRate!==c||t.codecSet.substring(0,4)!==d)return!1;const s=t.audioGroups,n=i.filter(e=>!s||-1!==s.indexOf(e.groupId));return F_(e,n,r)>-1});return h>-1?h:z_(t,s,t=>{const s=t.audioGroups,n=i.filter(e=>!s||-1!==s.indexOf(e.groupId));return F_(e,n,r)>-1})}function z_(e,t,i){for(let s=t;s>-1;s--)if(i(e[s]))return s;for(let s=t+1;s<e.length;s++)if(i(e[s]))return s;return-1}function V_(e,t){var i;return!!e&&e!==(null==(i=t.loadLevelObj)?void 0:i.uri)}class Y_ extends Gk{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=e=>{var t;const{fragCurrent:i,partCurrent:s,hls:r}=this,{autoLevelEnabled:n,media:a}=r;if(!i||!a)return;const o=performance.now(),l=s?s.stats:i.stats,c=s?s.duration:i.duration,d=o-l.loading.start,h=r.minAutoLevel,u=i.level,p=this._nextAutoLevel;if(l.aborted||l.loaded&&l.loaded===l.total||u<=h)return this.clearTimer(),void(this._nextAutoLevel=-1);if(!n)return;const f=p>-1&&p!==u,g=!!e||f;if(!g&&(a.paused||!a.playbackRate||!a.readyState))return;const m=r.mainForwardBufferInfo;if(!g&&null===m)return;const v=this.bwEstimator.getEstimateTTFB(),y=Math.abs(a.playbackRate);if(d<=Math.max(v,c/(2*y)*1e3))return;const b=m?m.len/y:0,E=l.loading.first?l.loading.first-l.loading.start:-1,w=l.loaded&&E>-1,A=this.getBwEstimate(),T=r.levels,S=T[u],x=Math.max(l.loaded,Math.round(c*(i.bitrate||S.averageBitrate)/8));let L=w?d-E:d;L<1&&w&&(L=Math.min(d,8*l.loaded/A));const k=w?1e3*l.loaded/L:0,I=v/1e3,_=k?(x-l.loaded)/k:8*x/A+I;if(_<=b)return;const C=k?8*k:A,R=!0===(null==(t=(null==e?void 0:e.details)||this.hls.latestLevelDetails)?void 0:t.live),P=this.hls.config.abrBandWidthUpFactor;let D,M=Number.POSITIVE_INFINITY;for(D=u-1;D>h;D--){const e=T[D].maxBitrate,t=!T[D].details||R;if(M=this.getTimeToLoadFrag(I,C,c*e,t),M<Math.min(b,c+I))break}if(M>=_)return;if(M>10*c)return;w?this.bwEstimator.sample(d-Math.min(v,E),l.loaded):this.bwEstimator.sampleTTFB(d);const O=T[D].maxBitrate;this.getBwEstimate()*P>O&&this.resetEstimator(O);const N=this.findBestLevel(O,h,D,0,b,1,1);N>-1&&(D=N),this.warn(`Fragment ${i.sn}${s?" part "+s.index:""} of level ${u} is loading too slowly;\n      Fragment duration: ${i.duration.toFixed(3)}\n      Time to underbuffer: ${b.toFixed(3)} s\n      Estimated load time for current fragment: ${_.toFixed(3)} s\n      Estimated load time for down switch fragment: ${M.toFixed(3)} s\n      TTFB estimate: ${0|E} ms\n      Current BW estimate: ${xk(A)?0|A:"Unknown"} bps\n      New BW estimate: ${0|this.getBwEstimate()} bps\n      Switching to level ${D} @ ${0|O} bps`),r.nextLoadLevel=r.nextAutoLevel=D,this.clearTimer();const B=()=>{if(this.clearTimer(),this.fragCurrent===i&&this.hls.loadLevel===D&&D>0){const e=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${D>0?"and switching down":""}\n      Fragment duration: ${i.duration.toFixed(3)} s\n      Time to underbuffer: ${e.toFixed(3)} s`),i.abortRequests(),this.fragCurrent=this.partCurrent=null,D>h){let t=this.findBestLevel(this.hls.levels[h].bitrate,h,D,0,e,1,1);-1===t&&(t=h),this.hls.nextLoadLevel=this.hls.nextAutoLevel=t,this.resetEstimator(this.hls.levels[t].bitrate)}}};f||_>2*M?B():this.timer=self.setInterval(B,1e3*M),r.trigger(Ck.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,part:s,stats:l})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new Mk(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Ck.FRAG_LOADING,this.onFragLoading,this),e.on(Ck.FRAG_LOADED,this.onFragLoaded,this),e.on(Ck.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Ck.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Ck.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Ck.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Ck.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(Ck.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Ck.FRAG_LOADING,this.onFragLoading,this),e.off(Ck.FRAG_LOADED,this.onFragLoaded,this),e.off(Ck.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Ck.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Ck.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Ck.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Ck.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(Ck.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const i=t.frag;if(!this.ignoreFragment(i)){var s;if(!i.bitrateTest)this.fragCurrent=i,this.partCurrent=null!=(s=t.part)?s:null;this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case _k.BUFFER_ADD_CODEC_ERROR:case _k.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case _k.FRAG_LOAD_TIMEOUT:{const e=t.frag,{fragCurrent:i,partCurrent:s}=this;if(e&&i&&e.sn===i.sn&&e.level===i.level){const t=performance.now(),i=s?s.stats:e.stats,r=t-i.loading.start,n=i.loading.first?i.loading.first-i.loading.start:-1,a=i.loaded&&n>-1;if(a){const e=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(r-Math.min(e,n),i.loaded)}else this.bwEstimator.sampleTTFB(r)}break}}}getTimeToLoadFrag(e,t,i,s){const r=e+i/t,n=s?e+this.lastLevelLoadSec:0;return r+n}onLevelLoaded(e,t){const i=this.hls.config,{loading:s}=t.stats,r=s.end-s.first;xk(r)&&(this.lastLevelLoadSec=r/1e3),t.details.live?this.bwEstimator.update(i.abrEwmaSlowLive,i.abrEwmaFastLive):this.bwEstimator.update(i.abrEwmaSlowVoD,i.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:i}){const s=i?i.stats:t.stats;if(t.type===Pk.MAIN&&this.bwEstimator.sampleTTFB(s.loading.first-s.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const e=i?i.duration:t.duration,r=this.hls.levels[t.level],n=(r.loaded?r.loaded.bytes:0)+s.loaded,a=(r.loaded?r.loaded.duration:0)+e;r.loaded={bytes:n,duration:a},r.realBitrate=Math.round(8*n/a)}if(t.bitrateTest){const e={stats:s,frag:t,part:i,id:t.type};this.onFragBuffered(Ck.FRAG_BUFFERED,e),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:i,part:s}=t,r=null!=s&&s.stats.loaded?s.stats:i.stats;if(r.aborted)return;if(this.ignoreFragment(i))return;const n=r.parsing.end-r.loading.start-Math.min(r.loading.first-r.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(n,r.loaded),r.bwEstimate=this.getBwEstimate(),i.bitrateTest?this.bitrateTestDelay=n/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==Pk.MAIN||"initSegment"===e.sn}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,i=this.getBwEstimate(),s=this.hls.config.maxStarvationDelay,r=this.findBestLevel(i,t,e,0,s,1,1);if(r>-1)return r;const n=this.hls.firstLevel,a=Math.min(Math.max(n,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${n} clamped to ${a}`),a}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,t=this.bwEstimator,i=t.canEstimate(),s=this.lastLoadedFragLevel>-1;if(-1!==e&&(!i||!s||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const r=i&&s?this.getNextABRAutoLevel():this.firstAutoLevel;if(-1!==e){const t=this.hls.levels;if(t.length>Math.max(e,r)&&t[e].loadError<=t[r].loadError)return e}return this._nextAutoLevel=r,this.nextAutoLevelKey=this.getAutoLevelKey(),r}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:i}=this;if(i.levels.length<=1)return i.loadLevel;const{maxAutoLevel:s,config:r,minAutoLevel:n}=i,a=t?t.duration:e?e.duration:0,o=this.getBwEstimate(),l=this.getStarvationDelay();let c=r.abrBandWidthFactor,d=r.abrBandWidthUpFactor;if(l){const e=this.findBestLevel(o,n,s,l,0,c,d);if(e>=0)return this.rebufferNotice=-1,e}let h=a?Math.min(a,r.maxStarvationDelay):r.maxStarvationDelay;if(!l){const e=this.bitrateTestDelay;if(e){const t=a?Math.min(a,r.maxLoadingDelay):r.maxLoadingDelay;h=t-e,this.info(`bitrate test took ${Math.round(1e3*e)}ms, set first fragment max fetchDuration to ${Math.round(1e3*h)} ms`),c=d=1}}const u=this.findBestLevel(o,n,s,l,h,c,d);if(this.rebufferNotice!==u&&(this.rebufferNotice=u,this.info(`${l?"rebuffering expected":"buffer is empty"}, optimal quality level ${u}`)),u>-1)return u;const p=i.levels[n],f=i.loadLevelObj;return f&&(null==p?void 0:p.bitrate)<f.bitrate?n:i.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const i=t&&0!==t.playbackRate?Math.abs(t.playbackRate):1,s=e.mainForwardBufferInfo;return(s?s.len:0)/i}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,i,s,r,n,a){var o;const l=s+r,c=this.lastLoadedFragLevel,d=-1===c?this.hls.firstLevel:c,{fragCurrent:h,partCurrent:u}=this,{levels:p,allAudioTracks:f,loadLevel:g,config:m}=this.hls;if(1===p.length)return 0;const v=p[d],y=!(null==(o=this.hls.latestLevelDetails)||!o.live),b=-1===g||-1===c;let E,w="SDR",A=(null==v?void 0:v.frameRate)||0;const{audioPreference:T,videoPreference:S}=m,x=this.audioTracksByGroup||(this.audioTracksByGroup=O_(f));let L=-1;if(b){if(-1!==this.firstSelection)return this.firstSelection;const s=this.codecTiers||(this.codecTiers=N_(p,x,t,i)),r=D_(s,w,e,T,S),{codecSet:n,videoRanges:a,minFramerate:o,minBitrate:l,minIndex:c,preferHDR:d}=r;L=c,E=n,w=d?a[a.length-1]:a[0],A=o,e=Math.max(e,l),this.log(`picked start tier ${P_(r)}`)}else E=null==v?void 0:v.codecSet,w=null==v?void 0:v.videoRange;const k=u?u.duration:h?h.duration:0,I=this.bwEstimator.getEstimateTTFB()/1e3,_=[];for(let P=i;P>=t;P--){var C,R;const t=p[P],o=P>d;if(!t)continue;if(m.useMediaCapabilities&&!t.supportedResult&&!t.supportedPromise){const i=navigator.mediaCapabilities;"function"===typeof(null==i?void 0:i.decodingInfo)&&p_(t,x,w,A,e,T)?(t.supportedPromise=f_(t,x,i,this.supportedCache),t.supportedPromise.then(e=>{if(!this.hls)return;t.supportedResult=e;const i=this.hls.levels,s=i.indexOf(t);e.error?this.warn(`MediaCapabilities decodingInfo error: "${e.error}" for level ${s} ${P_(e)}`):e.supported?e.decodingInfoResults.some(e=>!1===e.smooth||!1===e.powerEfficient)&&this.log(`MediaCapabilities decodingInfo for level ${s} not smooth or powerEfficient: ${P_(e)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${s} ${P_(e)}`),s>-1&&i.length>1&&(this.log(`Removing unsupported level ${s}`),this.hls.removeLevel(s),-1===this.hls.loadLevel&&(this.hls.nextLoadLevel=0)))})):t.supportedResult=h_}if((E&&t.codecSet!==E||w&&t.videoRange!==w||o&&A>t.frameRate||!o&&A>0&&A<t.frameRate||null!=(C=t.supportedResult)&&null!=(R=C.decodingInfoResults)&&R.some(e=>!1===e.smooth))&&(!b||P!==L)){_.push(P);continue}const h=t.details,f=(u?null==h?void 0:h.partTarget:null==h?void 0:h.averagetargetduration)||k;let v;v=o?a*e:n*e;const S=k&&s>=2*k&&0===r?t.averageBitrate:t.maxBitrate,D=this.getTimeToLoadFrag(I,v,S*f,void 0===h),M=v>=S&&(P===c||0===t.loadError&&0===t.fragmentError)&&(D<=I||!xk(D)||y&&!this.bitrateTestDelay||D<l);if(M){const e=this.forcedAutoLevel;return P===g||-1!==e&&e===g||(_.length&&this.trace(`Skipped level(s) ${_.join(",")} of ${i} max with CODECS and VIDEO-RANGE:"${p[_[0]].codecs}" ${p[_[0]].videoRange}; not compatible with "${E}" ${w}`),this.info(`switch candidate:${d}->${P} adjustedbw(${Math.round(v)})-bitrate=${Math.round(v-S)} ttfb:${I.toFixed(1)} avgDuration:${f.toFixed(1)} maxFetchDuration:${l.toFixed(1)} fetchDuration:${D.toFixed(1)} firstSelection:${b} codecSet:${t.codecSet} videoRange:${t.videoRange} hls.loadLevel:${g}`)),b&&(this.firstSelection=P),P}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:i}=this.hls;return Math.min(Math.max(e,i),t)}}const W_={search:function(e,t){let i=0,s=e.length-1,r=null,n=null;while(i<=s){r=(i+s)/2|0,n=e[r];const a=t(n);if(a>0)i=r+1;else{if(!(a<0))return n;s=r-1}}return null}};function K_(e,t,i){if(null===t||!Array.isArray(e)||!e.length||!xk(t))return null;const s=e[0].programDateTime;if(t<(s||0))return null;const r=e[e.length-1].endProgramDateTime;if(t>=(r||0))return null;for(let n=0;n<e.length;++n){const s=e[n];if(Z_(t,i,s))return s}return null}function q_(e,t,i=0,s=0,r=.005){let n=null;if(e){n=t[1+e.sn-t[0].sn]||null;const s=e.endDTS-i;s>0&&s<15e-7&&(i+=15e-7),n&&e.level!==n.level&&n.end<=e.end&&(n=t[2+e.sn-t[0].sn]||null)}else 0===i&&0===t[0].start&&(n=t[0]);if(n&&((!e||e.level===n.level)&&0===Q_(i,s,n)||X_(n,e,Math.min(r,s))))return n;const a=W_.search(t,Q_.bind(null,i,s));return!a||a===e&&n?n:a}function X_(e,t,i){if(t&&0===t.start&&t.level<e.level&&(t.endPTS||0)>0){const s=t.tagList.reduce((e,t)=>("INF"===t[0]&&(e+=parseFloat(t[1])),e),i);return e.start<=s}return!1}function Q_(e=0,t=0,i){if(i.start<=e&&i.start+i.duration>e)return 0;const s=Math.min(t,i.duration+(i.deltaPTS?i.deltaPTS:0));return i.start+i.duration-s<=e?1:i.start-s>e&&i.start?-1:0}function Z_(e,t,i){const s=1e3*Math.min(t,i.duration+(i.deltaPTS?i.deltaPTS:0)),r=i.endProgramDateTime||0;return r-s>e}function J_(e,t,i){if(e&&e.startCC<=t&&e.endCC>=t){let s=e.fragments;const{fragmentHint:r}=e;let n;return r&&(s=s.concat(r)),W_.search(s,e=>e.cc<t?1:e.cc>t?-1:(n=e,e.end<=i?1:e.start>i?-1:0)),n||null}return null}function eC(e){switch(e.details){case _k.FRAG_LOAD_TIMEOUT:case _k.KEY_LOAD_TIMEOUT:case _k.LEVEL_LOAD_TIMEOUT:case _k.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function tC(e,t){const i=eC(t);return e.default[(i?"timeout":"error")+"Retry"]}function iC(e,t){const i="linear"===e.backoff?1:Math.pow(2,t);return Math.min(i*e.retryDelayMs,e.maxRetryDelayMs)}function sC(e){return Fk(Fk({},e),{errorRetry:null,timeoutRetry:null})}function rC(e,t,i,s){if(!e)return!1;const r=null==s?void 0:s.code,n=t<e.maxNumRetry&&(nC(r)||!!i);return e.shouldRetry?e.shouldRetry(e,t,i,s,n):n}function nC(e){return 0===e&&!1===navigator.onLine||!!e&&(e<400||e>499)}var aC={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},oC={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4};class lC extends Gk{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(Ck.ERROR,this.onError,this),e.on(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Ck.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(Ck.ERROR,this.onError,this),e.off(Ck.ERROR,this.onErrorOut,this),e.off(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Ck.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(null==e?void 0:e.type)===Pk.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var i;if(t.fatal)return;const s=this.hls,r=t.context;switch(t.details){case _k.FRAG_LOAD_ERROR:case _k.FRAG_LOAD_TIMEOUT:case _k.KEY_LOAD_ERROR:case _k.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case _k.FRAG_PARSING_ERROR:if(null!=(i=t.frag)&&i.gap)return void(t.errorAction=cC());case _k.FRAG_GAP:case _k.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=aC.SendAlternateToPenaltyBox);case _k.LEVEL_EMPTY_ERROR:case _k.LEVEL_PARSING_ERROR:{var n,a;const e=t.parent===Pk.MAIN?t.level:s.loadLevel;t.details===_k.LEVEL_EMPTY_ERROR&&null!=(n=t.context)&&null!=(a=n.levelDetails)&&a.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,e):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,e))}return;case _k.LEVEL_LOAD_ERROR:case _k.LEVEL_LOAD_TIMEOUT:return void("number"===typeof(null==r?void 0:r.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.level)));case _k.AUDIO_TRACK_LOAD_ERROR:case _k.AUDIO_TRACK_LOAD_TIMEOUT:case _k.SUBTITLE_LOAD_ERROR:case _k.SUBTITLE_TRACK_LOAD_TIMEOUT:if(r){const e=s.loadLevelObj;if(e&&(r.type===Rk.AUDIO_TRACK&&e.hasAudioGroup(r.groupId)||r.type===Rk.SUBTITLE_TRACK&&e.hasSubtitleGroup(r.groupId)))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,s.loadLevel),t.errorAction.action=aC.SendAlternateToPenaltyBox,void(t.errorAction.flags=oC.MoveAllAlternatesMatchingHost)}return;case _k.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const e=s.loadLevelObj,i=null==e?void 0:e.attrs["HDCP-LEVEL"];i?t.errorAction={action:aC.SendAlternateToPenaltyBox,flags:oC.MoveAllAlternatesMatchingHDCP,hdcpLevel:i}:this.keySystemError(t)}return;case _k.BUFFER_ADD_CODEC_ERROR:case _k.REMUX_ALLOC_ERROR:case _k.BUFFER_APPEND_ERROR:var o;if(!t.errorAction)t.errorAction=this.getLevelSwitchAction(t,null!=(o=t.level)?o:s.loadLevel);return;case _k.INTERNAL_EXCEPTION:case _k.BUFFER_APPENDING_ERROR:case _k.BUFFER_FULL_ERROR:case _k.LEVEL_SWITCH_ERROR:case _k.BUFFER_STALLED_ERROR:case _k.BUFFER_SEEK_OVER_HOLE:case _k.BUFFER_NUDGE_ON_STALL:return void(t.errorAction=cC())}t.type===Ik.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){const t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){const i=this.hls,s=tC(i.config.playlistLoadPolicy,e),r=this.playlistError++,n=rC(s,r,eC(e),e.response);if(n)return{action:aC.RetryRequest,flags:oC.None,retryConfig:s,retryCount:r};const a=this.getLevelSwitchAction(e,t);return s&&(a.retryConfig=s,a.retryCount=r),a}getFragRetryOrSwitchAction(e){const t=this.hls,i=this.getVariantLevelIndex(e.frag),s=t.levels[i],{fragLoadPolicy:r,keyLoadPolicy:n}=t.config,a=tC(e.details.startsWith("key")?n:r,e),o=t.levels.reduce((e,t)=>e+t.fragmentError,0);if(s){e.details!==_k.FRAG_GAP&&s.fragmentError++;const t=rC(a,o,eC(e),e.response);if(t)return{action:aC.RetryRequest,flags:oC.None,retryConfig:a,retryCount:o}}const l=this.getLevelSwitchAction(e,i);return a&&(l.retryConfig=a,l.retryCount=o),l}getLevelSwitchAction(e,t){const i=this.hls;null!==t&&void 0!==t||(t=i.loadLevel);const s=this.hls.levels[t];if(s){var r,n;const t=e.details;s.loadError++,t===_k.BUFFER_APPEND_ERROR&&s.fragmentError++;let l=-1;const{levels:c,loadLevel:d,minAutoLevel:h,maxAutoLevel:u}=i;i.autoLevelEnabled||i.config.preserveManualLevelOnError||(i.loadLevel=-1);const p=null==(r=e.frag)?void 0:r.type,f=p===Pk.AUDIO&&t===_k.FRAG_PARSING_ERROR||"audio"===e.sourceBufferName&&(t===_k.BUFFER_ADD_CODEC_ERROR||t===_k.BUFFER_APPEND_ERROR),g=f&&c.some(({audioCodec:e})=>s.audioCodec!==e),m="video"===e.sourceBufferName&&(t===_k.BUFFER_ADD_CODEC_ERROR||t===_k.BUFFER_APPEND_ERROR),v=m&&c.some(({codecSet:e,audioCodec:t})=>s.codecSet!==e&&s.audioCodec===t),{type:y,groupId:b}=null!=(n=e.context)?n:{};for(let i=c.length;i--;){const r=(i+d)%c.length;if(r!==d&&r>=h&&r<=u&&0===c[r].loadError){var a,o;const i=c[r];if(t===_k.FRAG_GAP&&p===Pk.MAIN&&e.frag){const t=c[r].details;if(t){const i=q_(e.frag,t.fragments,e.frag.start);if(null!=i&&i.gap)continue}}else{if(y===Rk.AUDIO_TRACK&&i.hasAudioGroup(b)||y===Rk.SUBTITLE_TRACK&&i.hasSubtitleGroup(b))continue;if(p===Pk.AUDIO&&null!=(a=s.audioGroups)&&a.some(e=>i.hasAudioGroup(e))||p===Pk.SUBTITLE&&null!=(o=s.subtitleGroups)&&o.some(e=>i.hasSubtitleGroup(e))||g&&s.audioCodec===i.audioCodec||!g&&s.audioCodec!==i.audioCodec||v&&s.codecSet===i.codecSet)continue}l=r;break}}if(l>-1&&i.loadLevel!==l)return e.levelRetry=!0,this.playlistError=0,{action:aC.SendAlternateToPenaltyBox,flags:oC.None,nextAutoLevel:l}}return{action:aC.SendAlternateToPenaltyBox,flags:oC.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var i;switch(null==(i=t.errorAction)?void 0:i.action){case aC.DoNothing:break;case aC.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===_k.FRAG_GAP?/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError()):t.fatal=!0;break;case aC.RetryRequest:break}t.fatal&&this.hls.stopLoad()}sendAlternateToPenaltyBox(e){const t=this.hls,i=e.errorAction;if(!i)return;const{flags:s,hdcpLevel:r,nextAutoLevel:n}=i;switch(s){case oC.None:this.switchLevel(e,n);break;case oC.MoveAllAlternatesMatchingHDCP:r&&(t.maxHdcpLevel=E_[E_.indexOf(r)-1],i.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}i.resolved||this.switchLevel(e,n)}switchLevel(e,t){if(void 0!==t&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===_k.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&"audiovideo"!==e.sourceBufferName)){const t=d_(e.mimeType),i=this.hls.levels;for(let s=i.length;s--;)i[s][`${e.sourceBufferName}Codec`]===t&&this.hls.removeLevel(s)}}}function cC(e){const t={action:aC.DoNothing,flags:oC.None};return e&&(t.resolved=!0),t}var dC={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class hC{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Ck.BUFFER_APPENDED,this.onBufferAppended,this),e.on(Ck.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Ck.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Ck.BUFFER_APPENDED,this.onBufferAppended,this),e.off(Ck.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Ck.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const i=this.activePartLists[t];if(i)for(let s=i.length;s--;){const t=i[s];if(!t)break;const r=t.end;if(t.start<=e&&null!==r&&e<=r)return t}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,i){const{fragments:s}=this,r=Object.keys(s);for(let n=r.length;n--;){const a=s[r[n]];if((null==a?void 0:a.body.type)===t&&(!i||a.buffered)){const t=a.body;if(t.start<=e&&e<=t.end)return t}}return null}detectEvictedFragments(e,t,i,s,r){this.timeRanges&&(this.timeRanges[e]=t);const n=(null==s?void 0:s.fragment.sn)||-1;Object.keys(this.fragments).forEach(s=>{const a=this.fragments[s];if(!a)return;if(n>=a.body.sn)return;if(!a.buffered&&(!a.loaded||r))return void(a.body.type===i&&this.removeFragment(a.body));const o=a.range[e];o&&(0!==o.time.length?o.time.some(e=>{const i=!this.isTimeBuffered(e.startPTS,e.endPTS,t);return i&&this.removeFragment(a.body),i}):this.removeFragment(a.body))})}detectPartialFragments(e){const t=this.timeRanges;if(!t||"initSegment"===e.frag.sn)return;const i=e.frag,s=pC(i),r=this.fragments[s];if(!r||r.buffered&&i.gap)return;const n=!i.relurl;if(Object.keys(t).forEach(s=>{const a=i.elementaryStreams[s];if(!a)return;const o=t[s],l=n||!0===a.partial;r.range[s]=this.getBufferedTimes(i,e.part,l,o)}),r.loaded=null,Object.keys(r.range).length){r.buffered=!0;const e=r.body.endList=i.endList||r.body.endList;e&&(this.endListFragments[r.body.type]=r),uC(r)||this.removeParts(i.sn-1,i.type)}else this.removeFragment(r.body)}removeParts(e,t){const i=this.activePartLists[t];i&&(this.activePartLists[t]=fC(i,t=>t.fragment.sn>=e))}fragBuffered(e,t){const i=pC(e);let s=this.fragments[i];!s&&t&&(s=this.fragments[i]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),s&&(s.loaded=null,s.buffered=!0)}getBufferedTimes(e,t,i,s){const r={time:[],partial:i},n=e.start,a=e.end,o=e.minEndPTS||a,l=e.maxStartPTS||n;for(let c=0;c<s.length;c++){const e=s.start(c)-this.bufferPadding,t=s.end(c)+this.bufferPadding;if(l>=e&&o<=t){r.time.push({startPTS:Math.max(n,s.start(c)),endPTS:Math.min(a,s.end(c))});break}if(n<t&&a>e){const e=Math.max(n,s.start(c)),t=Math.min(a,s.end(c));t>e&&(r.partial=!0,r.time.push({startPTS:e,endPTS:t}))}else if(a<=e)break}return r}getPartialFragment(e){let t,i,s,r=null,n=0;const{bufferPadding:a,fragments:o}=this;return Object.keys(o).forEach(l=>{const c=o[l];c&&uC(c)&&(i=c.body.start-a,s=c.body.end+a,e>=i&&e<=s&&(t=Math.min(e-i,s-e),n<=t&&(r=c.body,n=t)))}),r}isEndListAppended(e){const t=this.endListFragments[e];return void 0!==t&&(t.buffered||uC(t))}getState(e){const t=pC(e),i=this.fragments[t];return i?i.buffered?uC(i)?dC.PARTIAL:dC.OK:dC.APPENDING:dC.NOT_LOADED}isTimeBuffered(e,t,i){let s,r;for(let n=0;n<i.length;n++){if(s=i.start(n)-this.bufferPadding,r=i.end(n)+this.bufferPadding,e>=s&&t<=r)return!0;if(t<=s)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if("initSegment"===t.frag.sn||t.frag.bitrateTest)return;const i=t.frag,s=t.part?null:t,r=pC(i);this.fragments[r]={body:i,appendedPTS:null,loaded:s,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:i,part:s,timeRanges:r,type:n}=t;if("initSegment"===i.sn)return;const a=i.type;if(s){let e=this.activePartLists[a];e||(this.activePartLists[a]=e=[]),e.push(s)}this.timeRanges=r;const o=r[n];this.detectEvictedFragments(n,o,a,s)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=pC(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,i=Object.keys(t);if(!e)return i.length>0;for(let s=i.length;s--;){const r=t[i[s]];if((null==r?void 0:r.body.type)===e)return!0}return!1}hasParts(e){var t;return!(null==(t=this.activePartLists[e])||!t.length)}removeFragmentsInRange(e,t,i,s,r){s&&!this.hasGaps||Object.keys(this.fragments).forEach(n=>{const a=this.fragments[n];if(!a)return;const o=a.body;o.type!==i||s&&!o.gap||o.start<t&&o.end>e&&(a.buffered||r)&&this.removeFragment(o)})}removeFragment(e){const t=pC(e);e.clearElementaryStreamInfo();const i=this.activePartLists[e.type];if(i){const t=e.sn;this.activePartLists[e.type]=fC(i,e=>e.fragment.sn!==t)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e,t;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const i=null==(e=this.hls)||null==(t=e.latestLevelDetails)?void 0:t.partList;i&&i.forEach(e=>e.clearElementaryStreamInfo())}}function uC(e){var t,i,s;return e.buffered&&(e.body.gap||(null==(t=e.range.video)?void 0:t.partial)||(null==(i=e.range.audio)?void 0:i.partial)||(null==(s=e.range.audiovideo)?void 0:s.partial))}function pC(e){return`${e.type}_${e.level}_${e.sn}`}function fC(e,t){return e.filter(e=>{const i=t(e);return i||e.clearElementaryStreamInfo(),i})}var gC={cbc:0,ctr:1};class mC{constructor(e,t,i){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=i}decrypt(e,t){switch(this.aesMode){case gC.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case gC.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function vC(e){const t=e.byteLength,i=t&&new DataView(e.buffer).getUint8(t-1);return i?e.slice(0,t-i):e}class yC{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),i=new Uint32Array(4);for(let s=0;s<4;s++)i[s]=t.getUint32(4*s);return i}initTable(){const e=this.sBox,t=this.invSBox,i=this.subMix,s=i[0],r=i[1],n=i[2],a=i[3],o=this.invSubMix,l=o[0],c=o[1],d=o[2],h=o[3],u=new Uint32Array(256);let p=0,f=0,g=0;for(g=0;g<256;g++)u[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){let i=f^f<<1^f<<2^f<<3^f<<4;i=i>>>8^255&i^99,e[p]=i,t[i]=p;const o=u[p],g=u[o],m=u[g];let v=257*u[i]^16843008*i;s[p]=v<<24|v>>>8,r[p]=v<<16|v>>>16,n[p]=v<<8|v>>>24,a[p]=v,v=16843009*m^65537*g^257*o^16843008*p,l[i]=v<<24|v>>>8,c[i]=v<<16|v>>>16,d[i]=v<<8|v>>>24,h[i]=v,p?(p=o^u[u[u[m^o]]],f^=u[u[f]]):p=f=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let i=!0,s=0;while(s<t.length&&i)i=t[s]===this.key[s],s++;if(i)return;this.key=t;const r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);const n=this.ksRows=4*(r+6+1);let a,o;const l=this.keySchedule=new Uint32Array(n),c=this.invKeySchedule=new Uint32Array(n),d=this.sBox,h=this.rcon,u=this.invSubMix,p=u[0],f=u[1],g=u[2],m=u[3];let v,y;for(a=0;a<n;a++)a<r?v=l[a]=t[a]:(y=v,a%r===0?(y=y<<8|y>>>24,y=d[y>>>24]<<24|d[y>>>16&255]<<16|d[y>>>8&255]<<8|d[255&y],y^=h[a/r|0]<<24):r>6&&a%r===4&&(y=d[y>>>24]<<24|d[y>>>16&255]<<16|d[y>>>8&255]<<8|d[255&y]),l[a]=v=(l[a-r]^y)>>>0);for(o=0;o<n;o++)a=n-o,y=3&o?l[a]:l[a-4],c[o]=o<4||a<=4?y:p[d[y>>>24]]^f[d[y>>>16&255]]^g[d[y>>>8&255]]^m[d[255&y]],c[o]=c[o]>>>0}networkToHostOrderSwap(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}decrypt(e,t,i){const s=this.keySize+6,r=this.invKeySchedule,n=this.invSBox,a=this.invSubMix,o=a[0],l=a[1],c=a[2],d=a[3],h=this.uint8ArrayToUint32Array_(i);let u=h[0],p=h[1],f=h[2],g=h[3];const m=new Int32Array(e),v=new Int32Array(m.length);let y,b,E,w,A,T,S,x,L,k,I,_,C,R;const P=this.networkToHostOrderSwap;while(t<m.length){for(L=P(m[t]),k=P(m[t+1]),I=P(m[t+2]),_=P(m[t+3]),A=L^r[0],T=_^r[1],S=I^r[2],x=k^r[3],C=4,R=1;R<s;R++)y=o[A>>>24]^l[T>>16&255]^c[S>>8&255]^d[255&x]^r[C],b=o[T>>>24]^l[S>>16&255]^c[x>>8&255]^d[255&A]^r[C+1],E=o[S>>>24]^l[x>>16&255]^c[A>>8&255]^d[255&T]^r[C+2],w=o[x>>>24]^l[A>>16&255]^c[T>>8&255]^d[255&S]^r[C+3],A=y,T=b,S=E,x=w,C+=4;y=n[A>>>24]<<24^n[T>>16&255]<<16^n[S>>8&255]<<8^n[255&x]^r[C],b=n[T>>>24]<<24^n[S>>16&255]<<16^n[x>>8&255]<<8^n[255&A]^r[C+1],E=n[S>>>24]<<24^n[x>>16&255]<<16^n[A>>8&255]<<8^n[255&T]^r[C+2],w=n[x>>>24]<<24^n[A>>16&255]<<16^n[T>>8&255]<<8^n[255&S]^r[C+3],v[t]=P(y^u),v[t+1]=P(w^p),v[t+2]=P(E^f),v[t+3]=P(b^g),u=L,p=k,f=I,g=_,t+=4}return v.buffer}}class bC{constructor(e,t,i){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=i}expandKey(){const e=EC(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function EC(e){switch(e){case gC.cbc:return"AES-CBC";case gC.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${e}`)}}const wC=16;class AC{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const e=self.crypto;e&&(this.subtle=e.subtle||e.webkitSubtle)}catch(tH){}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const i=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?vC(i):i}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,i,s){return this.useSoftware?new Promise((r,n)=>{const a=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(a,t,i,s);const o=this.flush();o?r(o.buffer):n(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,i,s)}softwareDecrypt(e,t,i,s){const{currentIV:r,currentResult:n,remainderData:a}=this;if(s!==gC.cbc||16!==t.byteLength)return qk.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),a&&(e=BI(a,e),this.remainderData=null);const o=this.getValidChunk(e);if(!o.length)return null;r&&(i=r);let l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new yC),l.expandKey(t);const c=n;return this.currentResult=l.decrypt(o.buffer,0,i),this.currentIV=o.slice(-16).buffer,c||null}webCryptoDecrypt(e,t,i,s){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,i,s));this.key=t,this.fastAesKey=new bC(this.subtle,t,s)}return this.fastAesKey.expandKey().then(t=>{if(!this.subtle)return Promise.reject(new Error("web crypto not initialized"));this.logOnce("WebCrypto AES decrypt");const r=new mC(this.subtle,new Uint8Array(i),s);return r.decrypt(e.buffer,t)}).catch(r=>(qk.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${r.name}: ${r.message}`),this.onWebCryptoError(e,t,i,s)))}onWebCryptoError(e,t,i,s){const r=this.enableSoftwareAES;if(r){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,i,s);const r=this.flush();if(r)return r.buffer}throw new Error("WebCrypto"+(r?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const i=e.length-e.length%wC;return i!==e.length&&(t=e.slice(0,i),this.remainderData=e.slice(i)),t}logOnce(e){this.logEnabled&&(qk.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const TC=Math.pow(2,17);class SC{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const i=e.url;if(!i)return Promise.reject(new IC({type:Ik.NETWORK_ERROR,details:_k.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error("Fragment does not have a "+(i?"part list":"url")),networkDetails:null}));this.abort();const s=this.config,r=s.fLoader,n=s.loader;return new Promise((a,o)=>{if(this.loader&&this.loader.destroy(),e.gap){if(e.tagList.some(e=>"GAP"===e[0]))return void o(LC(e));e.gap=!1}const l=this.loader=r?new r(s):new n(s),c=xC(e);e.loader=l;const d=sC(s.fragLoadPolicy.default),h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===e.sn?1/0:TC};e.stats=l.stats;const u={onSuccess:(t,i,s,r)=>{this.resetLoader(e,l);let n=t.data;s.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(n.slice(0,16)),n=n.slice(16)),a({frag:e,part:null,payload:n,networkDetails:r})},onError:(t,s,r,n)=>{this.resetLoader(e,l),o(new IC({type:Ik.NETWORK_ERROR,details:_k.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Fk({url:i,data:void 0},t),error:new Error(`HTTP Error ${t.code} ${t.text}`),networkDetails:r,stats:n}))},onAbort:(t,i,s)=>{this.resetLoader(e,l),o(new IC({type:Ik.NETWORK_ERROR,details:_k.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:s,stats:t}))},onTimeout:(t,i,s)=>{this.resetLoader(e,l),o(new IC({type:Ik.NETWORK_ERROR,details:_k.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:s,stats:t}))}};t&&(u.onProgress=(i,s,r,n)=>t({frag:e,part:null,payload:r,networkDetails:n})),l.load(c,h,u)})}loadPart(e,t,i){this.abort();const s=this.config,r=s.fLoader,n=s.loader;return new Promise((a,o)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap)return void o(LC(e,t));const l=this.loader=r?new r(s):new n(s),c=xC(e,t);e.loader=l;const d=sC(s.fragLoadPolicy.default),h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:TC};t.stats=l.stats,l.load(c,h,{onSuccess:(s,r,n,o)=>{this.resetLoader(e,l),this.updateStatsFromPart(e,t);const c={frag:e,part:t,payload:s.data,networkDetails:o};i(c),a(c)},onError:(i,s,r,n)=>{this.resetLoader(e,l),o(new IC({type:Ik.NETWORK_ERROR,details:_k.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:Fk({url:c.url,data:void 0},i),error:new Error(`HTTP Error ${i.code} ${i.text}`),networkDetails:r,stats:n}))},onAbort:(i,s,r)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,l),o(new IC({type:Ik.NETWORK_ERROR,details:_k.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:r,stats:i}))},onTimeout:(i,s,r)=>{this.resetLoader(e,l),o(new IC({type:Ik.NETWORK_ERROR,details:_k.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:r,stats:i}))}})})}updateStatsFromPart(e,t){const i=e.stats,s=t.stats,r=s.total;if(i.loaded+=s.loaded,r){const s=Math.round(e.duration/t.duration),n=Math.min(Math.round(i.loaded/r),s),a=s-n,o=a*Math.round(i.loaded/n);i.total=i.loaded+o}else i.total=Math.max(i.loaded,i.total);const n=i.loading,a=s.loading;n.start?n.first+=a.first-a.start:(n.start=a.start,n.first=a.first),n.end=a.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function xC(e,t=null){const i=t||e,s={frag:e,part:t,responseType:"arraybuffer",url:i.url,headers:{},rangeStart:0,rangeEnd:0},r=i.byteRangeStartOffset,n=i.byteRangeEndOffset;if(xk(r)&&xk(n)){var a;let t=r,i=n;if("initSegment"===e.sn&&kC(null==(a=e.decryptdata)?void 0:a.method)){const e=n-r;e%16&&(i=n+(16-e%16)),0!==r&&(s.resetIV=!0,t=r-16)}s.rangeStart=t,s.rangeEnd=i}return s}function LC(e,t){const i=new Error(`GAP ${e.gap?"tag":"attribute"} found`),s={type:Ik.MEDIA_ERROR,details:_k.FRAG_GAP,fatal:!1,frag:e,error:i,networkDetails:null};return t&&(s.part=t),(t||e).stats.aborted=!0,new IC(s)}function kC(e){return"AES-128"===e||"AES-256"===e}class IC extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class _C extends Gk{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)}clearNextTick(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)}tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class CC{constructor(e,t,i,s=0,r=-1,n=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=RC(),this.buffering={audio:RC(),video:RC(),audiovideo:RC()},this.level=e,this.sn=t,this.id=i,this.size=s,this.part=r,this.partial=n}}function RC(){return{start:0,executeStart:0,executeEnd:0,end:0}}const PC={length:0,start:()=>0,end:()=>0};class DC{static isBuffered(e,t){if(e){const i=DC.getBuffered(e);for(let e=i.length;e--;)if(t>=i.start(e)&&t<=i.end(e))return!0}return!1}static bufferedRanges(e){if(e){const t=DC.getBuffered(e);return DC.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t}static bufferInfo(e,t,i){if(e){const s=DC.bufferedRanges(e);if(s.length)return DC.bufferedInfo(s,t,i)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,i){t=Math.max(0,t),e.length>1&&e.sort((e,t)=>e.start-t.start||t.end-e.end);let s=-1,r=[];if(i)for(let c=0;c<e.length;c++){t>=e[c].start&&t<=e[c].end&&(s=c);const n=r.length;if(n){const t=r[n-1].end;e[c].start-t<i?e[c].end>t&&(r[n-1].end=e[c].end):r.push(e[c])}else r.push(e[c])}else r=e;let n,a=0,o=t,l=t;for(let c=0;c<r.length;c++){const e=r[c].start,d=r[c].end;if(-1===s&&t>=e&&t<=d&&(s=c),t+i>=e&&t<d)o=e,l=d,a=l-t;else if(t+i<e){n=e;break}}return{len:a,start:o||0,end:l||0,nextStart:n,buffered:e,bufferedIndex:s}}static getBuffered(e){try{return e.buffered||PC}catch(tH){return qk.log("failed to get media.buffered",tH),PC}}}const MC=/\{\$([a-zA-Z0-9-_]+)\}/g;function OC(e){return MC.test(e)}function NC(e,t){if(null!==e.variableList||e.hasVariableRefs){const i=e.variableList;return t.replace(MC,t=>{const s=t.substring(2,t.length-1),r=null==i?void 0:i[s];return void 0===r?(e.playlistParsingError||(e.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${s}"`)),t):r})}return t}function BC(e,t,i){let s,r,n=e.variableList;if(n||(e.variableList=n={}),"QUERYPARAM"in t){s=t.QUERYPARAM;try{const e=new self.URL(i).searchParams;if(!e.has(s))throw new Error(`"${s}" does not match any query parameter in URI: "${i}"`);r=e.get(s)}catch(a){e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${a.message}`))}}else s=t.NAME,r=t.VALUE;s in n?e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${s}"`)):n[s]=r||""}function FC(e,t,i){const s=t.IMPORT;if(i&&s in i){let t=e.variableList;t||(e.variableList=t={}),t[s]=i[s]}else e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${s}"`))}const $C=/^(\d+)x(\d+)$/,UC=/(.+?)=(".*?"|.*?)(?:,|$)/g;class GC{constructor(e,t){"string"===typeof e&&(e=GC.parseAttrList(e,t)),Nk(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>"X-"===e.substring(0,2))}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;const i=new Uint8Array(t.length/2);for(let e=0;e<t.length/2;e++)i[e]=parseInt(t.slice(2*e,2*e+2),16);return i}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const i=this[e];return i?parseFloat(i):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const i=this[e];return(i?i.split(/[ ,]+/):[]).reduce((e,t)=>(e[t.toLowerCase()]=!0,e),t)}bool(e){return"YES"===this[e]}decimalResolution(e){const t=$C.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let i;const s={},r='"';UC.lastIndex=0;while(null!==(i=UC.exec(e))){const n=i[1].trim();let a=i[2];const o=0===a.indexOf(r)&&a.lastIndexOf(r)===a.length-1;let l=!1;if(o)a=a.slice(1,-1);else switch(n){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":l=!0}if(t&&(o||l))a=NC(t,a);else if(!l&&!o)switch(n){case"CLOSED-CAPTIONS":if("NONE"===a)break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":qk.warn(`${e}: attribute ${n} is missing quotes`)}s[n]=a}return s}}const HC="com.apple.hls.interstitial";function jC(e){return"ID"!==e&&"CLASS"!==e&&"CUE"!==e&&"START-DATE"!==e&&"DURATION"!==e&&"END-DATE"!==e&&"END-ON-NEXT"!==e}function zC(e){return"SCTE35-OUT"===e||"SCTE35-IN"===e||"SCTE35-CMD"===e}class VC{constructor(e,t,i=0){var s;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(null==t?void 0:t.tagAnchor)||null,this.tagOrder=null!=(s=null==t?void 0:t.tagOrder)?s:i,t){const i=t.attr;for(const t in i)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==i[t]){qk.warn(`DATERANGE tag attribute: "${t}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=t;break}e=Nk(new GC({}),i,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const e=(null==t?void 0:t.endDate)||new Date(this.attr["END-DATE"]);xk(e.getTime())&&(this._endDate=e)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return void 0===e?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return null===e||null===e.programDateTime?(qk.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return null!==t?this._dateAtEnd=new Date(this._startDate.getTime()+1e3*t):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(xk(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===HC}get isValid(){return!!this.id&&!this._badValueForSameId&&xk(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const YC=10;class WC{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e)return this.advanced=!0,void(this.updated=!0);const t=this.lastPartSn-e.lastPartSn,i=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!i||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||0===t&&i>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1}get hasProgramDateTime(){return!!this.fragments.length&&xk(this.fragments[this.fragments.length-1].programDateTime)}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||YC}get drift(){const e=this.driftEndTime-this.driftStartTime;if(e>0){const t=this.driftEnd-this.driftStart;return 1e3*t/e}return 1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(-1!==t){for(let i=e.length;i--;)if(e[i].index>t)return e[i].index;return t}}return 0}get lastPartSn(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function KC(e){return"AES-128"===e||"AES-256"===e||"AES-256-CTR"===e}function qC(e){switch(e){case"AES-128":case"AES-256":return gC.cbc;case"AES-256-CTR":return gC.ctr;default:throw new Error(`invalid full segment method ${e}`)}}function XC(e){return Uint8Array.from(atob(e),e=>e.charCodeAt(0))}function QC(e){return Uint8Array.from(unescape(encodeURIComponent(e)),e=>e.charCodeAt(0))}function ZC(e){const t=QC(e).subarray(0,16),i=new Uint8Array(16);return i.set(t,16-t.length),i}function JC(e){const t=function(e,t,i){const s=e[t];e[t]=e[i],e[i]=s};t(e,0,3),t(e,1,2),t(e,4,5),t(e,6,7)}function eR(e){const t=e.split(":");let i=null;if("data"===t[0]&&2===t.length){const e=t[1].split(";"),s=e[e.length-1].split(",");if(2===s.length){const t="base64"===s[0],r=s[1];t?(e.splice(-1,1),i=XC(r)):i=ZC(r)}}return i}const tR="undefined"!==typeof self?self:void 0;var iR={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},sR={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function rR(e){switch(e){case sR.FAIRPLAY:return iR.FAIRPLAY;case sR.PLAYREADY:return iR.PLAYREADY;case sR.WIDEVINE:return iR.WIDEVINE;case sR.CLEARKEY:return iR.CLEARKEY}}function nR(e){switch(e){case iR.FAIRPLAY:return sR.FAIRPLAY;case iR.PLAYREADY:return sR.PLAYREADY;case iR.WIDEVINE:return sR.WIDEVINE;case iR.CLEARKEY:return sR.CLEARKEY}}function aR(e){const{drmSystems:t,widevineLicenseUrl:i}=e,s=t?[iR.FAIRPLAY,iR.WIDEVINE,iR.PLAYREADY,iR.CLEARKEY].filter(e=>!!t[e]):[];return!s[iR.WIDEVINE]&&i&&s.push(iR.WIDEVINE),s}const oR=function(e){return null!=tR&&null!=(e=tR.navigator)&&e.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function lR(e,t,i,s){let r;switch(e){case iR.FAIRPLAY:r=["cenc","sinf"];break;case iR.WIDEVINE:case iR.PLAYREADY:r=["cenc"];break;case iR.CLEARKEY:r=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${e}`)}return cR(r,t,i,s)}function cR(e,t,i,s){const r={initDataTypes:e,persistentState:s.persistentState||"optional",distinctiveIdentifier:s.distinctiveIdentifier||"optional",sessionTypes:s.sessionTypes||[s.sessionType||"temporary"],audioCapabilities:t.map(e=>({contentType:`audio/mp4; codecs=${e}`,robustness:s.audioRobustness||"",encryptionScheme:s.audioEncryptionScheme||null})),videoCapabilities:i.map(e=>({contentType:`video/mp4; codecs=${e}`,robustness:s.videoRobustness||"",encryptionScheme:s.videoEncryptionScheme||null}))};return[r]}function dR(e){var t;return"persistent-license"===e.sessionType||!(null==(t=e.sessionTypes)||!t.some(e=>"persistent-license"===e))}function hR(e){const t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2),i=String.fromCharCode.apply(null,Array.from(t)),s=i.substring(i.indexOf("<"),i.length),r=new DOMParser,n=r.parseFromString(s,"text/xml"),a=n.getElementsByTagName("KID")[0];if(a){const e=a.childNodes[0]?a.childNodes[0].nodeValue:a.getAttribute("VALUE");if(e){const t=XC(e).subarray(0,16);return JC(t),t}}return null}let uR={};class pR{static clearKeyUriToKeyIdMap(){uR={}}constructor(e,t,i,s=[1],r=null,n){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=i,this.keyFormatVersions=s,this.iv=r,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&!KC(e),null!=n&&n.startsWith("0x")&&(this.keyId=new Uint8Array(tI(n)))}matches(e){var t,i;return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&e.keyFormatVersions.join(",")===this.keyFormatVersions.join(",")&&(null==(t=e.iv)?void 0:t.join(","))===(null==(i=this.iv)?void 0:i.join(","))}isSupported(){if(this.method){if(KC(this.method)||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case sR.FAIRPLAY:case sR.WIDEVINE:case sR.PLAYREADY:case sR.CLEARKEY:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(KC(this.method)&&this.uri&&!this.iv){"number"!==typeof e&&(qk.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const t=fR(e),i=new pR(this.method,this.uri,"identity",this.keyFormatVersions,t);return i}if(this.pssh&&this.keyId)return this;const t=eR(this.uri);if(t)switch(this.keyFormat){case sR.WIDEVINE:if(this.pssh=t,!this.keyId&&t.length>=22){const e=t.length-22;this.keyId=t.subarray(e,e+16)}break;case sR.PLAYREADY:{const e=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=VI(e,null,t),this.keyId=hR(t);break}default:{let e=t.subarray(0,16);if(16!==e.length){const t=new Uint8Array(16);t.set(e,16-e.length),e=t}this.keyId=e;break}}if(!this.keyId||16!==this.keyId.byteLength){let e=uR[this.uri];if(!e){const t=Object.keys(uR).length%Number.MAX_SAFE_INTEGER;e=new Uint8Array(16);const i=new DataView(e.buffer,12,4);i.setUint32(0,t),uR[this.uri]=e}this.keyId=e}return this}}function fR(e){const t=new Uint8Array(16);for(let i=12;i<16;i++)t[i]=e>>8*(15-i)&255;return t}const gR=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,mR=/#EXT-X-MEDIA:(.*)/g,vR=/^#EXT(?:INF|-X-TARGETDURATION):/m,yR=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),bR=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class ER{static findGroup(e,t){for(let i=0;i<e.length;i++){const s=e[i];if(s.id===t)return s}}static resolve(e,t){return aI.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return vR.test(e)}static parseMasterPlaylist(e,t){const i=OC(e),s={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:i},r=[];let n;gR.lastIndex=0;while(null!=(n=gR.exec(e)))if(n[1]){var a;const e=new GC(n[1],s),i=NC(s,n[2]),o={attrs:e,bitrate:e.decimalInteger("BANDWIDTH")||e.decimalInteger("AVERAGE-BANDWIDTH"),name:e.NAME,url:ER.resolve(i,t)},l=e.decimalResolution("RESOLUTION");l&&(o.width=l.width,o.height=l.height),xR(e.CODECS,o);const c=e["SUPPLEMENTAL-CODECS"];c&&(o.supplemental={},xR(c,o.supplemental)),null!=(a=o.unknownCodecs)&&a.length||r.push(o),s.levels.push(o)}else if(n[3]){const e=n[3],i=n[4];switch(e){case"SESSION-DATA":{const e=new GC(i,s),t=e["DATA-ID"];t&&(null===s.sessionData&&(s.sessionData={}),s.sessionData[t]=e);break}case"SESSION-KEY":{const e=TR(i,t,s);e.encrypted&&e.isSupported()?(null===s.sessionKeys&&(s.sessionKeys=[]),s.sessionKeys.push(e)):qk.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${i}"`);break}case"DEFINE":{const e=new GC(i,s);BC(s,e,t)}break;case"CONTENT-STEERING":{const e=new GC(i,s);s.contentSteering={uri:ER.resolve(e["SERVER-URI"],t),pathwayId:e["PATHWAY-ID"]||"."};break}case"START":s.startTimeOffset=SR(i);break}}const o=r.length>0&&r.length<s.levels.length;return s.levels=o?r:s.levels,0===s.levels.length&&(s.playlistParsingError=new Error("no levels found in manifest")),s}static parseMasterPlaylistMedia(e,t,i){let s;const r={},n=i.levels,a={AUDIO:n.map(e=>({id:e.attrs.AUDIO,audioCodec:e.audioCodec})),SUBTITLES:n.map(e=>({id:e.attrs.SUBTITLES,textCodec:e.textCodec})),"CLOSED-CAPTIONS":[]};let o=0;mR.lastIndex=0;while(null!==(s=mR.exec(e))){const e=new GC(s[1],i),n=e.TYPE;if(n){const i=a[n],s=r[n]||[];r[n]=s;const l=e.LANGUAGE,c=e["ASSOC-LANGUAGE"],d=e.CHANNELS,h=e.CHARACTERISTICS,u=e["INSTREAM-ID"],p={attrs:e,bitrate:0,id:o++,groupId:e["GROUP-ID"]||"",name:e.NAME||l||"",type:n,default:e.bool("DEFAULT"),autoselect:e.bool("AUTOSELECT"),forced:e.bool("FORCED"),lang:l,url:e.URI?ER.resolve(e.URI,t):""};if(c&&(p.assocLang=c),d&&(p.channels=d),h&&(p.characteristics=h),u&&(p.instreamId=u),null!=i&&i.length){const e=ER.findGroup(i,p.groupId)||i[0];LR(p,e,"audioCodec"),LR(p,e,"textCodec")}s.push(p)}}return r}static parseLevelPlaylist(e,t,i,s,r,n){var a;const o={url:t},l=new WC(t),c=l.fragments,d=[];let h,u,p,f,g=null,m=0,v=0,y=0,b=0,E=0,w=null,A=new hI(s,o),T=-1,S=!1,x=null;if(yR.lastIndex=0,l.m3u8=e,l.hasVariableRefs=OC(e),"#EXTM3U"!==(null==(a=yR.exec(e))?void 0:a[0]))return l.playlistParsingError=new Error("Missing format identifier #EXTM3U"),l;while(null!==(h=yR.exec(e))){S&&(S=!1,A=new hI(s,o),A.playlistOffset=y,A.start=y,A.sn=m,A.cc=b,E&&(A.bitrate=E),A.level=i,g&&(A.initSegment=g,g.rawProgramDateTime&&(A.rawProgramDateTime=g.rawProgramDateTime,g.rawProgramDateTime=null),x&&(A.setByteRange(x),x=null)));const e=h[1];if(e){A.duration=parseFloat(e);const t=(" "+h[2]).slice(1);A.title=t||null,A.tagList.push(t?["INF",e,t]:["INF",e])}else if(h[3]){if(xk(A.duration)){A.playlistOffset=y,A.start=y,p&&CR(A,p,l),A.sn=m,A.level=i,A.cc=b,c.push(A);const e=(" "+h[3]).slice(1);A.relurl=NC(l,e),IR(A,w,d),w=A,y+=A.duration,m++,v=0,S=!0}}else{if(h=h[0].match(bR),!h){qk.warn("No matches on slow regex match for level playlist!");continue}for(u=1;u<h.length;u++)if(void 0!==h[u])break;const e=(" "+h[u]).slice(1),r=(" "+h[u+1]).slice(1),a=h[u+2]?(" "+h[u+2]).slice(1):null;switch(e){case"BYTERANGE":w?A.setByteRange(r,w):A.setByteRange(r);break;case"PROGRAM-DATE-TIME":A.rawProgramDateTime=r,A.tagList.push(["PROGRAM-DATE-TIME",r]),-1===T&&(T=c.length);break;case"PLAYLIST-TYPE":l.type&&RR(l,e,h),l.type=r.toUpperCase();break;case"MEDIA-SEQUENCE":0!==l.startSN?RR(l,e,h):c.length>0&&PR(l,e,h),m=l.startSN=parseInt(r);break;case"SKIP":{l.skippedSegments&&RR(l,e,h);const t=new GC(r,l),i=t.decimalInteger("SKIPPED-SEGMENTS");if(xk(i)){l.skippedSegments+=i;for(let e=i;e--;)c.push(null);m+=i}const s=t.enumeratedString("RECENTLY-REMOVED-DATERANGES");s&&(l.recentlyRemovedDateranges=(l.recentlyRemovedDateranges||[]).concat(s.split("\t")));break}case"TARGETDURATION":0!==l.targetduration&&RR(l,e,h),l.targetduration=Math.max(parseInt(r),1);break;case"VERSION":null!==l.version&&RR(l,e,h),l.version=parseInt(r);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":l.live||RR(l,e,h),l.live=!1;break;case"#":(r||a)&&A.tagList.push(a?[r,a]:[r]);break;case"DISCONTINUITY":b++,A.tagList.push(["DIS"]);break;case"GAP":A.gap=!0,A.tagList.push([e]);break;case"BITRATE":A.tagList.push([e,r]),E=1e3*parseInt(r),xk(E)?A.bitrate=E:E=0;break;case"DATERANGE":{const e=new GC(r,l),t=new VC(e,l.dateRanges[e.ID],l.dateRangeTagCount);l.dateRangeTagCount++,t.isValid||l.skippedSegments?l.dateRanges[t.id]=t:qk.warn(`Ignoring invalid DATERANGE tag: "${r}"`),A.tagList.push(["EXT-X-DATERANGE",r]);break}case"DEFINE":{const e=new GC(r,l);"IMPORT"in e?FC(l,e,n):BC(l,e,t)}break;case"DISCONTINUITY-SEQUENCE":0!==l.startCC?RR(l,e,h):c.length>0&&PR(l,e,h),l.startCC=b=parseInt(r);break;case"KEY":{const e=TR(r,t,l);if(e.isSupported()){if("NONE"===e.method){p=void 0;break}p||(p={});const t=p[e.keyFormat];null!=t&&t.matches(e)||(t&&(p=Nk({},p)),p[e.keyFormat]=e)}else qk.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${r}"`);break}case"START":l.startTimeOffset=SR(r);break;case"MAP":{const e=new GC(r,l);if(A.duration){const t=new hI(s,o);_R(t,e,i,p),g=t,A.initSegment=g,g.rawProgramDateTime&&!A.rawProgramDateTime&&(A.rawProgramDateTime=g.rawProgramDateTime)}else{const t=A.byteRangeEndOffset;if(t){const e=A.byteRangeStartOffset;x=`${t-e}@${e}`}else x=null;_R(A,e,i,p),g=A,S=!0}g.cc=b;break}case"SERVER-CONTROL":f&&RR(l,e,h),f=new GC(r),l.canBlockReload=f.bool("CAN-BLOCK-RELOAD"),l.canSkipUntil=f.optionalFloat("CAN-SKIP-UNTIL",0),l.canSkipDateRanges=l.canSkipUntil>0&&f.bool("CAN-SKIP-DATERANGES"),l.partHoldBack=f.optionalFloat("PART-HOLD-BACK",0),l.holdBack=f.optionalFloat("HOLD-BACK",0);break;case"PART-INF":{l.partTarget&&RR(l,e,h);const t=new GC(r);l.partTarget=t.decimalFloatingPoint("PART-TARGET");break}case"PART":{let e=l.partList;e||(e=l.partList=[]);const t=v>0?e[e.length-1]:void 0,i=v++,s=new GC(r,l),n=new uI(s,A,o,i,t);e.push(n),A.duration+=n.duration;break}case"PRELOAD-HINT":{const e=new GC(r,l);l.preloadHint=e;break}case"RENDITION-REPORT":{const e=new GC(r,l);l.renditionReports=l.renditionReports||[],l.renditionReports.push(e);break}default:qk.warn(`line parsed but not handled: ${h}`);break}}}w&&!w.relurl?(c.pop(),y-=w.duration,l.partList&&(l.fragmentHint=w)):l.partList&&(IR(A,w,d),A.cc=b,l.fragmentHint=A,p&&CR(A,p,l)),l.targetduration||(l.playlistParsingError=new Error("#EXT-X-TARGETDURATION is required"));const L=c.length,k=c[0],I=c[L-1];if(y+=l.skippedSegments*l.targetduration,y>0&&L&&I){l.averagetargetduration=y/L;const e=I.sn;l.endSN="initSegment"!==e?e:0,l.live||(I.endList=!0),k&&void 0===l.startCC&&(l.startCC=k.cc),T>0&&(kR(c,T),k&&d.unshift(k))}else l.endSN=0,l.startCC=0;return l.fragmentHint&&(y+=l.fragmentHint.duration),l.totalduration=y,d.length&&l.dateRangeTagCount&&k&&wR(d,l),l.endCC=b,l}}function wR(e,t){const i=e.length;if(!i)return;const s=e[i-1],r=t.live?1/0:t.totalduration,n=Object.keys(t.dateRanges);for(let a=n.length;a--;){const o=t.dateRanges[n[a]],l=o.startDate.getTime();o.tagAnchor=s.ref;for(let s=i;s--;){const i=AR(t,l,e,s,r);if(-1!==i){o.tagAnchor=t.fragments[i].ref;break}}}}function AR(e,t,i,s,r){const n=i[s];if(n){const o=n.programDateTime;if(t>=o||0===s){var a;const l=((null==(a=i[s+1])?void 0:a.start)||r)-n.start;if(t<=o+1e3*l){const r=i[s].sn-e.startSN,n=e.fragments;if(n.length>i.length){const a=i[s+1]||n[n.length-1],o=a.sn-e.startSN;for(let e=o;e>r;e--){const i=n[e].programDateTime;if(t>=i&&t<i+1e3*n[e].duration)return e}}return r}}}return-1}function TR(e,t,i){var s,r;const n=new GC(e,i),a=null!=(s=n.METHOD)?s:"",o=n.URI,l=n.hexadecimalInteger("IV"),c=n.KEYFORMATVERSIONS,d=null!=(r=n.KEYFORMAT)?r:"identity";o&&n.IV&&!l&&qk.error(`Invalid IV: ${n.IV}`);const h=o?ER.resolve(o,t):"",u=(c||"1").split("/").map(Number).filter(Number.isFinite);return new pR(a,h,d,u,l,n.KEYID)}function SR(e){const t=new GC(e),i=t.decimalFloatingPoint("TIME-OFFSET");return xk(i)?i:null}function xR(e,t){let i=(e||"").split(/[ ,]+/).filter(e=>e);["video","audio","text"].forEach(e=>{const s=i.filter(t=>KI(t,e));s.length&&(t[`${e}Codec`]=s.map(e=>e.split("/")[0]).join(","),i=i.filter(e=>-1===s.indexOf(e)))}),t.unknownCodecs=i}function LR(e,t,i){const s=t[i];s&&(e[i]=s)}function kR(e,t){let i=e[t];for(let s=t;s--;){const t=e[s];if(!t)return;t.programDateTime=i.programDateTime-1e3*t.duration,i=t}}function IR(e,t,i){e.rawProgramDateTime?i.push(e):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime)}function _R(e,t,i,s){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=i,e.sn="initSegment",s&&(e.levelkeys=s),e.initSegment=null}function CR(e,t,i){e.levelkeys=t;const{encryptedFragments:s}=i;s.length&&s[s.length-1].levelkeys===t||!Object.keys(t).some(e=>t[e].isCommonEncryption)||s.push(e)}function RR(e,t,i){e.playlistParsingError=new Error(`#EXT-X-${t} must not appear more than once (${i[0]})`)}function PR(e,t,i){e.playlistParsingError=new Error(`#EXT-X-${t} must appear before the first Media Segment (${i[0]})`)}function DR(e,t){const i=t.startPTS;if(xk(i)){let s,r=0;t.sn>e.sn?(r=i-e.start,s=e):(r=e.start-i,s=t),s.duration!==r&&s.setDuration(r)}else if(t.sn>e.sn){const i=e.cc===t.cc;i&&e.minEndPTS?t.setStart(e.start+(e.minEndPTS-e.start)):t.setStart(e.start+e.duration)}else t.setStart(Math.max(e.start-t.duration,0))}function MR(e,t,i,s,r,n){const a=s-i;a<=0&&(qk.warn("Fragment should have a positive duration",t),s=i+t.duration,n=r+t.duration);let o=i,l=s;const c=t.startPTS,d=t.endPTS;if(xk(c)){const e=Math.abs(c-i);xk(t.deltaPTS)?t.deltaPTS=Math.max(e,t.deltaPTS):t.deltaPTS=e,o=Math.max(i,c),i=Math.min(i,c),r=Math.min(r,t.startDTS),l=Math.min(s,d),s=Math.max(s,d),n=Math.max(n,t.endDTS)}const h=i-t.start;0!==t.start&&t.setStart(i),t.setDuration(s-t.start),t.startPTS=i,t.maxStartPTS=o,t.startDTS=r,t.endPTS=s,t.minEndPTS=l,t.endDTS=n;const u=t.sn;if(!e||u<e.startSN||u>e.endSN)return 0;let p;const f=u-e.startSN,g=e.fragments;for(g[f]=t,p=f;p>0;p--)DR(g[p],g[p-1]);for(p=f;p<g.length-1;p++)DR(g[p],g[p+1]);return e.fragmentHint&&DR(g[g.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,h}function OR(e,t){if(e===t)return;let i=null;const s=e.fragments;for(let c=s.length-1;c>=0;c--){const e=s[c].initSegment;if(e){i=e;break}}let r;e.fragmentHint&&delete e.fragmentHint.endPTS,FR(e,t,(e,s,n,a)=>{if((!t.startCC||t.skippedSegments)&&s.cc!==e.cc){const i=e.cc-s.cc;for(let e=n;e<a.length;e++)a[e].cc+=i;t.endCC=a[a.length-1].cc}xk(e.startPTS)&&xk(e.endPTS)&&(s.setStart(s.startPTS=e.startPTS),s.startDTS=e.startDTS,s.maxStartPTS=e.maxStartPTS,s.endPTS=e.endPTS,s.endDTS=e.endDTS,s.minEndPTS=e.minEndPTS,s.setDuration(e.endPTS-e.startPTS),s.duration&&(r=s),t.PTSKnown=t.alignedSliding=!0),e.hasStreams&&(s.elementaryStreams=e.elementaryStreams),s.loader=e.loader,e.hasStats&&(s.stats=e.stats),e.initSegment&&(s.initSegment=e.initSegment,i=e.initSegment)});const n=t.fragments,a=t.fragmentHint?n.concat(t.fragmentHint):n;if(i&&a.forEach(e=>{var t;!e||e.initSegment&&e.initSegment.relurl!==(null==(t=i)?void 0:t.relurl)||(e.initSegment=i)}),t.skippedSegments){if(t.deltaUpdateFailed=n.some(e=>!e),t.deltaUpdateFailed){qk.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let e=t.skippedSegments;e--;)n.shift();t.startSN=n[0].sn}else{t.canSkipDateRanges&&(t.dateRanges=NR(e.dateRanges,t));const i=e.fragments.filter(e=>e.rawProgramDateTime);if(e.hasProgramDateTime&&!t.hasProgramDateTime)for(let e=1;e<a.length;e++)null===a[e].programDateTime&&IR(a[e],a[e-1],i);wR(i,t)}t.endCC=n[n.length-1].cc}if(!t.startCC){var o;const i=jR(e,t.startSN-1);t.startCC=null!=(o=null==i?void 0:i.cc)?o:n[0].cc}BR(e.partList,t.partList,(e,t)=>{t.elementaryStreams=e.elementaryStreams,t.stats=e.stats}),r?MR(t,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):UR(e,t),n.length&&(t.totalduration=t.edge-n[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;const l=t.advancedDateTime;if(t.advanced&&l){const e=t.edge;t.driftStart||(t.driftStartTime=l,t.driftStart=e),t.driftEndTime=l,t.driftEnd=e}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime;-1===t.requestScheduled&&(t.requestScheduled=e.requestScheduled)}function NR(e,t){const{dateRanges:i,recentlyRemovedDateranges:s}=t,r=Nk({},e);s&&s.forEach(e=>{delete r[e]});const n=Object.keys(r),a=n.length;return a&&Object.keys(i).forEach(e=>{const t=r[e],s=new VC(i[e].attr,t);s.isValid?(r[e]=s,t||(s.tagOrder+=a)):qk.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${P_(i[e].attr)}"`)}),r}function BR(e,t,i){if(e&&t){let s=0;for(let r=0,n=e.length;r<=n;r++){const n=e[r],a=t[r+s];n&&a&&n.index===a.index&&n.fragment.sn===a.fragment.sn?i(n,a):s--}}}function FR(e,t,i){const s=t.skippedSegments,r=Math.max(e.startSN,t.startSN)-t.startSN,n=(e.fragmentHint?1:0)+(s?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,a=t.startSN-e.startSN,o=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments;for(let c=r;c<=n;c++){const r=l[a+c];let n=o[c];if(s&&!n&&r&&(n=t.fragments[c]=r),r&&n){if(i(r,n,c,o),r.url&&r.url!==n.url)return void(t.playlistParsingError=$R(`media sequence mismatch ${n.sn}:`,e,t,r,n));if(r.cc!==n.cc)return void(t.playlistParsingError=$R(`discontinuity sequence mismatch (${r.cc}!=${n.cc})`,e,t,r,n))}}}function $R(e,t,i,s,r){return new Error(`${e} ${r.url}\nPlaylist starting @${t.startSN}\n${t.m3u8}\n\nPlaylist starting @${i.startSN}\n${i.m3u8}`)}function UR(e,t,i=!0){const s=t.startSN+t.skippedSegments-e.startSN,r=e.fragments,n=s>=0;let a=0;if(n&&s<r.length)a=r[s].start;else if(n&&t.startSN===e.endSN+1)a=e.fragmentEnd;else if(n&&i)a=e.fragmentStart+s*t.levelTargetDuration;else{if(t.skippedSegments||0!==t.fragmentStart)return;a=e.fragmentStart}GR(t,a)}function GR(e,t){if(t){const i=e.fragments;for(let s=e.skippedSegments;s<i.length;s++)i[s].addStart(t);e.fragmentHint&&e.fragmentHint.addStart(t)}}function HR(e,t=1/0){let i=1e3*e.targetduration;if(e.updated){const s=e.fragments,r=4;if(s.length&&i*r>t){const e=1e3*s[s.length-1].duration;e<i&&(i=e)}}else i/=2;return Math.round(i)}function jR(e,t,i){if(!e)return null;let s=e.fragments[t-e.startSN];return s||(s=e.fragmentHint,s&&s.sn===t?s:t<e.startSN&&i&&i.sn===t?i:null)}function zR(e,t,i){return e?VR(e.partList,t,i):null}function VR(e,t,i){if(e)for(let s=e.length;s--;){const r=e[s];if(r.index===i&&r.fragment.sn===t)return r}return null}function YR(e){e.forEach((e,t)=>{var i;null==(i=e.details)||i.fragments.forEach(e=>{e.level=t,e.initSegment&&(e.initSegment.level=t)})})}function WR(e,t){for(let s=0,r=e.length;s<r;s++){var i;if((null==(i=e[s])?void 0:i.cc)===t)return e[s]}return null}function KR(e,t){return!!(e&&t.startCC<e.endCC&&t.endCC>e.startCC)}function qR(e,t){if(e){const i=e.start+t;e.start=e.startPTS=i,e.endPTS=i+e.duration}}function XR(e,t){const i=t.fragments;for(let s=0,r=i.length;s<r;s++)qR(i[s],e);t.fragmentHint&&qR(t.fragmentHint,e),t.alignedSliding=!0}function QR(e,t){e&&(ZR(t,e),!t.alignedSliding&&e&&JR(t,e),t.alignedSliding||!e||t.skippedSegments||UR(e,t,!1))}function ZR(e,t){if(!KR(t,e))return;const i=Math.min(t.endCC,e.endCC),s=WR(t.fragments,i),r=WR(e.fragments,i);if(!s||!r)return;qk.log(`Aligning playlist at start of dicontinuity sequence ${i}`);const n=s.start-r.start;XR(n,e)}function JR(e,t){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;const i=e.fragments,s=t.fragments;if(!i.length||!s.length)return;let r,n;const a=Math.min(t.endCC,e.endCC);t.startCC<a&&e.startCC<a&&(r=WR(s,a),n=WR(i,a)),r&&n||(r=s[Math.floor(s.length/2)],n=WR(i,r.cc)||i[Math.floor(i.length/2)]);const o=r.programDateTime,l=n.programDateTime;if(!o||!l)return;const c=(l-o)/1e3-(n.start-r.start);XR(c,e)}const eP={toString:function(e){let t="";const i=e.length;for(let s=0;s<i;s++)t+=`[${e.start(s).toFixed(3)}-${e.end(s).toFixed(3)}]`;return t}},tP={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class iP extends _C{constructor(e,t,i,s,r){super(s,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=tP.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:e,fragCurrent:t,media:i,mediaBuffer:s,state:r}=this,n=i?i.currentTime:0,a=DC.bufferInfo(s||i,n,e.maxBufferHole),o=!a.len;if(this.log(`Media seeking to ${xk(n)?n.toFixed(3):n}, state: ${r}, ${o?"out of":"in"} buffer`),this.state===tP.ENDED)this.resetLoadingState();else if(t){const i=e.maxFragLookUpTolerance,s=t.start-i,r=t.start+t.duration+i;if(o||r<a.start||s>a.end){const e=n>r;(n<s||e)&&(e&&t.loader&&(this.log(`Cancelling fragment load for seek (sn: ${t.sn})`),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(i){this.fragmentTracker.removeFragmentsInRange(n,1/0,this.playlistType,!0);const e=this.lastCurrentTime;if(n>e&&(this.lastCurrentTime=n),!this.loadingParts){const e=Math.max(a.end,n),t=this.shouldLoadParts(this.getLevelDetails(),e);t&&(this.log(`LL-Part loading ON after seeking to ${n.toFixed(2)} with buffer @${e.toFixed(2)}`),this.loadingParts=t)}}this.hls.hasEnoughToStart||(this.log(`Setting ${o?"startPosition":"nextLoadPosition"} to ${n} for seek without enough to start`),this.nextLoadPosition=n,o&&(this.startPosition=n)),this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=r,this.hls=e,this.fragmentLoader=new SC(e.config),this.keyLoader=i,this.fragmentTracker=t,this.config=e.config,this.decrypter=new AC(e.config)}registerListeners(){const{hls:e}=this;e.on(Ck.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Ck.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Ck.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Ck.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Ck.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Ck.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Ck.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Ck.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===tP.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=tP.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return-1===t&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const i=e.end||0,s=this.config.timelineOffset||0;if(i<=s)return!1;const r=e.buffered;this.config.maxBufferHole&&r&&r.length>1&&(e=DC.bufferedInfo(r,e.start,0));const n=e.nextStart,a=n&&n>s&&n<t.edge;if(a)return!1;if(this.media.currentTime<e.start)return!1;const o=t.partList;if(null!=o&&o.length){const e=o[o.length-1],t=DC.isBuffered(this.media,e.start+e.duration/2);return t}const l=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(l)}getLevelDetails(){var e;if(this.levels&&null!==this.levelLastLoaded)return null==(e=this.levelLastLoaded)?void 0:e.details}get timelineOffset(){const e=this.config.timelineOffset;var t;return e?(null==(t=this.getLevelDetails())?void 0:t.appliedTimelineOffset)||e:0}onMediaAttached(e,t){const i=this.media=this.mediaBuffer=t.media;i.removeEventListener("seeking",this.onMediaSeeking),i.removeEventListener("ended",this.onMediaEnded),i.addEventListener("seeking",this.onMediaSeeking),i.addEventListener("ended",this.onMediaEnded);const s=this.config;this.levels&&s.autoStartLoad&&this.state===tP.STOPPED&&this.startLoad(s.startPosition)}onMediaDetaching(e,t){const i=!!t.transferMedia,s=this.media;if(null!==s){if(s.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),s.removeEventListener("seeking",this.onMediaSeeking),s.removeEventListener("ended",this.onMediaEnded),this.keyLoader&&!i&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,i)return this.resetLoadingState(),void this.resetTransmuxer();this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=tP.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,i){this.startFragRequested=!0,this._loadFragForPlayback(e,t,i)}_loadFragForPlayback(e,t,i){const s=e=>{const t=e.frag;if(this.fragContextChanged(t))return this.warn(`${t.type} sn: ${t.sn}${e.part?" part: "+e.part.index:""} of ${this.fragInfo(t,!1,e.part)}) was dropped during download.`),void this.fragmentTracker.removeFragment(t);t.stats.chunkCount++,this._handleFragmentLoadProgress(e)};this._doFragLoad(e,t,i,s).then(e=>{if(!e)return;const t=this.state,i=e.frag;this.fragContextChanged(i)?(t===tP.FRAG_LOADING||!this.fragCurrent&&t===tP.PARSING)&&(this.fragmentTracker.removeFragment(i),this.state=tP.IDLE):("payload"in e&&(this.log(`Loaded ${i.type} sn: ${i.sn} of ${this.playlistLabel()} ${i.level}`),this.hls.trigger(Ck.FRAG_LOADED,e)),this._handleFragmentLoadComplete(e))}).catch(t=>{this.state!==tP.STOPPED&&this.state!==tP.ERROR&&(this.warn(`Frag error: ${(null==t?void 0:t.message)||t}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:i}=this,s=i.getState(e);if(s===dC.APPENDING){const t=e.type,s=this.getFwdBufferInfo(this.mediaBuffer,t),r=Math.max(e.duration,s?s.len:this.config.maxBufferLength),n=this.backtrackFragment,a=n?e.sn-n.sn:0;(1===a||this.reduceMaxBufferLength(r,e.duration))&&i.removeFragment(e)}else 0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?i.removeAllFragments():i.hasParts(e.type)&&(i.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),i.getState(e)===dC.PARTIAL&&i.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return(null==t?void 0:t.live)&&"EVENT"!==t.type&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,i=null){if(!(e-t))return;const s={startOffset:e,endOffset:t,type:i};this.hls.trigger(Ck.BUFFER_FLUSHING,s)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(e=>{const t=null==e?void 0:e.frag;if(!t||this.fragContextChanged(t)||!this.levels)throw new Error("init load aborted");return e}).then(e=>{const{hls:t}=this,{frag:i,payload:s}=e,r=i.decryptdata;if(s&&s.byteLength>0&&null!=r&&r.key&&r.iv&&KC(r.method)){const n=self.performance.now();return this.decrypter.decrypt(new Uint8Array(s),r.key.buffer,r.iv.buffer,qC(r.method)).catch(e=>{throw t.trigger(Ck.ERROR,{type:Ik.MEDIA_ERROR,details:_k.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:i}),e}).then(s=>{const r=self.performance.now();return t.trigger(Ck.FRAG_DECRYPTED,{frag:i,payload:s,stats:{tstart:n,tdecrypt:r}}),e.payload=s,this.completeInitSegmentLoad(e)})}return this.completeInitSegmentLoad(e)}).catch(t=>{this.state!==tP.STOPPED&&this.state!==tP.ERROR&&(this.warn(t),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const i=e.frag.stats;this.state!==tP.STOPPED&&(this.state=tP.IDLE),e.frag.data=new Uint8Array(e.payload),i.parsing.start=i.buffering.start=self.performance.now(),i.parsing.end=i.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const i=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${i?eP.toString(DC.getBuffered(i)):"(detached)"})`),dI(e)){var s;if(e.type!==Pk.SUBTITLE){const t=e.elementaryStreams;if(!Object.keys(t).some(e=>!!t[e]))return void(this.state=tP.IDLE)}const t=null==(s=this.levels)?void 0:s[e.level];null!=t&&t.fragmentError&&(this.log(`Resetting level fragment error count of ${t.fragmentError} on frag buffered`),t.fragmentError=0)}this.state=tP.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:i,part:s,partsLoaded:r}=e,n=!r||0===r.length||r.some(e=>!e),a=new CC(i.level,i.sn,i.stats.chunkCount+1,0,s?s.index:-1,!n);t.flush(a)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,i=null,s){var r;this.fragCurrent=e;const n=null==t?void 0:t.details;if(!this.levels||!n)throw new Error(`frag load aborted, missing level${n?"":" detail"}s`);let a=null;!e.encrypted||null!=(r=e.decryptdata)&&r.key?e.encrypted||(a=this.keyLoader.loadClear(e,n.encryptedFragments,this.startFragRequested),a&&this.log("[eme] blocking frag load until media-keys acquired")):(this.log(`Loading key for ${e.sn} of [${n.startSN}-${n.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=tP.KEY_LOADING,this.fragCurrent=e,a=this.keyLoader.load(e).then(e=>{if(!this.fragContextChanged(e.frag))return this.hls.trigger(Ck.KEY_LOADED,e),this.state===tP.KEY_LOADING&&(this.state=tP.IDLE),e}),this.hls.trigger(Ck.KEY_LOADING,{frag:e}),null===this.fragCurrent&&(a=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING"))));const o=this.fragPrevious;if(dI(e)&&(!o||e.sn!==o.sn)){const i=this.shouldLoadParts(t.details,e.end);i!==this.loadingParts&&(this.log(`LL-Part loading ${i?"ON":"OFF"} loading sn ${null==o?void 0:o.sn}->${e.sn}`),this.loadingParts=i)}if(i=Math.max(e.start,i||0),this.loadingParts&&dI(e)){const r=n.partList;if(r&&s){i>e.end&&n.fragmentHint&&(e=n.fragmentHint);const o=this.getNextPart(r,e,i);if(o>-1){const l=r[o];let c;return e=this.fragCurrent=l.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${l.index} (${o}/${r.length-1}) of ${this.fragInfo(e,!1,l)}) cc: ${e.cc} [${n.startSN}-${n.endSN}], target: ${parseFloat(i.toFixed(3))}`),this.nextLoadPosition=l.start+l.duration,this.state=tP.FRAG_LOADING,c=a?a.then(i=>!i||this.fragContextChanged(i.frag)?null:this.doFragPartsLoad(e,l,t,s)).catch(e=>this.handleFragLoadError(e)):this.doFragPartsLoad(e,l,t,s).catch(e=>this.handleFragLoadError(e)),this.hls.trigger(Ck.FRAG_LOADING,{frag:e,part:l,targetBufferTime:i}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):c}if(!e.url||this.loadedEndOfParts(r,i))return Promise.resolve(null)}}if(dI(e)&&this.loadingParts)this.log(`LL-Part loading OFF after next part miss @${i.toFixed(2)}`),this.loadingParts=!1;else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${n?"["+n.startSN+"-"+n.endSN+"]":""}, target: ${parseFloat(i.toFixed(3))}`),xk(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=tP.FRAG_LOADING;const l=this.config.progressive;let c;return c=l&&a?a.then(t=>!t||this.fragContextChanged(null==t?void 0:t.frag)?null:this.fragmentLoader.load(e,s)).catch(e=>this.handleFragLoadError(e)):Promise.all([this.fragmentLoader.load(e,l?s:void 0),a]).then(([e])=>(!l&&e&&s&&s(e),e)).catch(e=>this.handleFragLoadError(e)),this.hls.trigger(Ck.FRAG_LOADING,{frag:e,targetBufferTime:i}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):c}doFragPartsLoad(e,t,i,s){return new Promise((r,n)=>{var a;const o=[],l=null==(a=i.details)?void 0:a.partList,c=t=>{this.fragmentLoader.loadPart(e,t,s).then(s=>{o[t.index]=s;const n=s.part;this.hls.trigger(Ck.FRAG_LOADED,s);const a=zR(i.details,e.sn,t.index+1)||VR(l,e.sn,t.index+1);if(!a)return r({frag:e,part:n,partsLoaded:o});c(a)}).catch(n)};c(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===_k.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(Ck.ERROR,t)}else this.hls.trigger(Ck.ERROR,{type:Ik.OTHER_ERROR,details:_k.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==tP.PARSING)return void(this.fragCurrent||this.state===tP.STOPPED||this.state===tP.ERROR||(this.state=tP.IDLE));const{frag:i,part:s,level:r}=t,n=self.performance.now();i.stats.parsing.end=n,s&&(s.stats.parsing.end=n);const a=this.getLevelDetails(),o=a&&i.sn>a.endSN,l=o||this.shouldLoadParts(a,i.end);l!==this.loadingParts&&(this.log(`LL-Part loading ${l?"ON":"OFF"} after parsing segment ending @${i.end.toFixed(2)}`),this.loadingParts=l),this.updateLevelTiming(i,s,r,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(null!=e&&e.partList){var i;const r=e.partList[0],n=r.end+((null==(i=e.fragmentHint)?void 0:i.duration)||0);if(t>=n){var s;const e=this.hls.hasEnoughToStart?(null==(s=this.media)?void 0:s.currentTime)||this.lastCurrentTime:this.getLoadPosition();if(e>r.start-r.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:i}=this,{level:s,sn:r,part:n}=e;if(null==t||!t[s])return this.warn(`Levels object was unset while buffering fragment ${r} of ${this.playlistLabel()} ${s}. The current chunk will not be buffered.`),null;const a=t[s],o=a.details,l=n>-1?zR(o,r,n):null,c=l?l.fragment:jR(o,r,i);return c?(i&&i!==c&&(c.stats=i.stats),{frag:c,part:l,level:a}):null}bufferFragmentData(e,t,i,s,r){var n;if(!e||this.state!==tP.PARSING)return;const{data1:a,data2:o}=e;let l=a;if(a&&o&&(l=BI(a,o)),null==(n=l)||!n.length)return;const c=this.initPTS[t.cc],d=c?-c.baseTime/c.timescale:void 0,h={type:e.type,frag:t,part:i,chunkMeta:s,offset:d,parent:t.type,data:l};if(this.hls.trigger(Ck.BUFFER_APPENDING,h),e.dropped&&e.independent&&!i){if(r)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!DC.isBuffered(t,t.currentTime))return void this.flushMainBuffer(0,e.start);const i=t.currentTime,s=DC.bufferInfo(t,i,0),r=e.duration,n=Math.min(2*this.config.maxFragLookUpTolerance,.25*r),a=Math.max(Math.min(e.start-n,s.end-n),i+n);e.start-a>n&&this.flushMainBuffer(a,e.start)}getFwdBufferInfo(e,t){var i;const s=this.getLoadPosition();if(!xk(s))return null;const r=this.lastCurrentTime>s,n=r||null!=(i=this.media)&&i.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,s,t,n)}getFwdBufferInfoAtPos(e,t,i,s){const r=DC.bufferInfo(e,t,s);if(0===r.len&&void 0!==r.nextStart){const n=this.fragmentTracker.getBufferedFrag(t,i);if(n&&(r.nextStart<=n.end||n.gap)){const i=Math.max(Math.min(r.nextStart,n.end)-t,s);return DC.bufferInfo(e,t,i)}}return r}getMaxBufferLength(e){const{config:t}=this;let i;return i=e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength,Math.min(i,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const i=this.config,s=Math.max(Math.min(e-t,i.maxBufferLength),t),r=Math.max(e-3*t,i.maxMaxBufferLength/2,s);return r>=s&&(i.maxMaxBufferLength=r,this.warn(`Reduce max buffer length to ${r}s`),!0)}getAppendedFrag(e,t=Pk.MAIN){var i;const s=null==(i=this.fragmentTracker)?void 0:i.getAppendedFrag(e,t);return s&&"fragment"in s?s.fragment:s}getNextFragment(e,t){const i=t.fragments,s=i.length;if(!s)return null;const{config:r}=this,n=i[0].start,a=r.lowLatencyMode&&!!t.partList;let o=null;if(t.live){const i=r.initialLiveManifestSize;if(s<i)return this.warn(`Not enough fragments to start playback (have: ${s}, need: ${i})`),null;if(!t.PTSKnown&&!this.startFragRequested&&-1===this.startPosition||e<n){var l;a&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),o=this.getInitialLiveFragment(t);const i=this.hls.startPosition,s=this.hls.liveSyncPosition,r=o?(-1!==i&&i>=n?i:s)||o.start:e;this.log(`Setting startPosition to ${r} to match start frag at live edge. mainStart: ${i} liveSyncPosition: ${s} frag.start: ${null==(l=o)?void 0:l.start}`),this.startPosition=this.nextLoadPosition=r}}else e<=n&&(o=i[0]);if(!o){const i=this.loadingParts?t.partEnd:t.fragmentEnd;o=this.getFragmentAtPosition(e,i,t)}let c=this.filterReplacedPrimary(o,t);if(!c&&o){const e=o.sn-t.startSN;c=this.filterReplacedPrimary(i[e+1]||null,t)}return this.mapToInitFragWhenRequired(c)}isLoopLoading(e,t){const i=this.fragmentTracker.getState(e);return(i===dC.OK||i===dC.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,i,s,r){let n=null;if(e.gap&&(n=this.getNextFragment(this.nextLoadPosition,t),n&&!n.gap&&i.nextStart)){const e=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,i.nextStart,s,0);if(null!==e&&i.len+e.len>=r){const e=n.sn;return this.loopSn!==e&&(this.log(`buffer full after gaps in "${s}" playlist starting at sn: ${e}`),this.loopSn=e),null}}return this.loopSn=void 0,n}get primaryPrefetch(){if(sP(this.hls.config)){var e,t;const i=null==(e=this.hls.interstitialsManager)||null==(t=e.playingItem)?void 0:t.event;if(i)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if(sP(this.hls.config)&&e.type!==Pk.SUBTITLE){const i=this.hls.interstitialsManager,s=null==i?void 0:i.bufferingItem;if(s){const i=s.event;if(i){if(i.appendInPlace||Math.abs(e.start-s.start)>1||0===s.start)return null}else{if(e.end<=s.start&&!1===(null==t?void 0:t.live))return null;if(e.start>s.end&&s.nextEvent&&(s.nextEvent.appendInPlace||e.start-s.end>1))return null}}const r=null==i?void 0:i.playerQueue;if(r)for(let t=r.length;t--;){const i=r[t].interstitial;if(i.appendInPlace&&e.start>=i.startTime&&e.end<=i.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment}getNextPart(e,t,i){let s=-1,r=!1,n=!0;for(let a=0,o=e.length;a<o;a++){const o=e[a];if(n=n&&!o.independent,s>-1&&i<o.start)break;const l=o.loaded;l?s=-1:(r||o.independent||n)&&o.fragment===t&&(s=a),r=l}return s}loadedEndOfParts(e,t){const i=e[e.length-1];return i&&t>i.start&&i.loaded}getInitialLiveFragment(e){const t=e.fragments,i=this.fragPrevious;let s=null;if(i){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${i.programDateTime}`),s=K_(t,i.endProgramDateTime,this.config.maxFragLookUpTolerance)),!s){const r=i.sn+1;if(r>=e.startSN&&r<=e.endSN){const n=t[r-e.startSN];i.cc===n.cc&&(s=n,this.log(`Live playlist, switching playlist, load frag with next SN: ${s.sn}`))}s||(s=J_(e,i.cc,i.end),s&&this.log(`Live playlist, switching playlist, load frag with same CC: ${s.sn}`))}}else{const t=this.hls.liveSyncPosition;null!==t&&(s=this.getFragmentAtPosition(t,this.bitrateTest?e.fragmentEnd:e.edge,e))}return s}getFragmentAtPosition(e,t,i){const{config:s}=this;let{fragPrevious:r}=this,{fragments:n,endSN:a}=i;const{fragmentHint:o}=i,{maxFragLookUpTolerance:l}=s,c=i.partList,d=!!(this.loadingParts&&null!=c&&c.length&&o);let h;if(d&&o&&!this.bitrateTest&&c[c.length-1].fragment.sn===o.sn&&(n=n.concat(o),a=o.sn),e<t){var u;const i=e<this.lastCurrentTime,s=i||e>t-l||null!=(u=this.media)&&u.paused||!this.startFragRequested?0:l;h=q_(r,n,e,s)}else h=n[n.length-1];if(h){const e=h.sn-i.startSN,t=this.fragmentTracker.getState(h);if((t===dC.OK||t===dC.PARTIAL&&h.gap)&&(r=h),r&&h.sn===r.sn&&(!d||c[0].fragment.sn>h.sn||!i.live&&!d)){const t=r&&h.level===r.level;if(t){const t=n[e+1];h=h.sn<a&&this.fragmentTracker.getState(t)!==dC.OK?t:null}}}return h}alignPlaylists(e,t,i){const s=e.fragments.length;if(!s)return this.warn("No fragments in live playlist"),0;const r=e.fragmentStart,n=!t,a=e.alignedSliding&&xk(r);if(n||!a&&!r){QR(i,e);const r=e.fragmentStart;return this.log(`Live playlist sliding: ${r.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${s}`),r}return r}waitForCdnTuneIn(e){const t=3;return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*t)}setStartPosition(e,t){let i=this.startPosition;i<t&&(i=-1);const s=this.timelineOffset;if(-1===i){const r=null!==this.startTimeOffset,n=r?this.startTimeOffset:e.startTimeOffset;null!==n&&xk(n)?(i=t+n,n<0&&(i+=e.edge),i=Math.min(Math.max(t,i),t+e.totalduration),this.log(`Setting startPosition to ${i} for start time offset ${n} found in ${r?"multivariant":"media"} playlist`),this.startPosition=i):e.live?(i=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${i}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=i=0),this.lastCurrentTime=i+s}this.nextLoadPosition=i+s}getLoadPosition(){var e;const{media:t}=this;let i=0;return null!=(e=this.hls)&&e.hasEnoughToStart&&t?i=t.currentTime:this.nextLoadPosition>=0&&(i=this.nextLoadPosition),i}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&dI(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===tP.FRAG_LOADING_WAITING_RETRY)||(this.state=tP.IDLE)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const e=this.getCurrentContext(t.chunkMeta);e&&(t.frag=e.frag)}const i=t.frag;if(!i||i.type!==e||!this.levels)return;var s;if(this.fragContextChanged(i))return void this.warn(`Frag load error must match current frag to retry ${i.url} > ${null==(s=this.fragCurrent)?void 0:s.url}`);const r=t.details===_k.FRAG_GAP;r&&this.fragmentTracker.fragBuffered(i,!0);const n=t.errorAction,{action:a,flags:o,retryCount:l=0,retryConfig:c}=n||{},d=!!n&&!!c,h=d&&a===aC.RetryRequest,u=d&&!n.resolved&&o===oC.MoveAllAlternatesMatchingHost;if(!h&&u&&dI(i)&&!i.endList)this.resetFragmentErrors(e),this.treatAsGap(i),n.resolved=!0;else if((h||u)&&l<c.maxNumRetry){this.resetStartWhenNotLoaded(this.levelLastLoaded);const s=iC(c,l);this.warn(`Fragment ${i.sn} of ${e} ${i.level} errored with ${t.details}, retrying loading ${l+1}/${c.maxNumRetry} in ${s}ms`),n.resolved=!0,this.retryDate=self.performance.now()+s,this.state=tP.FRAG_LOADING_WAITING_RETRY}else if(c&&n){if(this.resetFragmentErrors(e),!(l<c.maxNumRetry))return void this.warn(`${t.details} reached or exceeded max retry (${l})`);r||a===aC.RemoveAlternatePermanently||(n.resolved=!0)}else a===aC.SendAlternateToPenaltyBox?this.state=tP.WAITING_LEVEL:this.state=tP.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===tP.PARSING||this.state===tP.PARSED){const t=e.frag,i=e.parent,s=this.getFwdBufferInfo(this.mediaBuffer,i),r=s&&s.len>.5;r&&this.reduceMaxBufferLength(s.len,(null==t?void 0:t.duration)||10);const n=!r;return n&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${i} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),n}return!1}resetFragmentErrors(e){e===Pk.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==tP.STOPPED&&(this.state=tP.IDLE)}afterBufferFlushed(e,t,i){if(!e)return;const s=DC.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,s,i),this.state===tP.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==tP.STOPPED&&(this.state=tP.IDLE)}resetStartWhenNotLoaded(e){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const t=e?e.details:null;null!=t&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of ${this.playlistLabel()} ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,i,s){const r=i.details;if(!r)return void this.warn("level.details undefined");const n=Object.keys(e.elementaryStreams).reduce((t,n)=>{const a=e.elementaryStreams[n];if(a){const o=a.endPTS-a.startPTS;if(o<=0)return this.warn(`Could not parse fragment ${e.sn} ${n} duration reliably (${o})`),t||!1;const l=s?0:MR(r,e,a.startPTS,a.endPTS,a.startDTS,a.endDTS);return this.hls.trigger(Ck.LEVEL_PTS_UPDATED,{details:r,level:i,drift:l,type:n,frag:e,start:a.startPTS,end:a.endPTS}),!0}return t},!1);var a;if(!n&&(0===i.fragmentError&&this.treatAsGap(e,i),null===(null==(a=this.transmuxer)?void 0:a.error))){const t=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(t.message),this.hls.trigger(Ck.ERROR,{type:Ik.MEDIA_ERROR,details:_k.FRAG_PARSING_ERROR,fatal:!1,error:t,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${i.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=tP.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger(Ck.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===Pk.MAIN?"level":"track"}fragInfo(e,t=!0,i){var s,r;return`${this.playlistLabel()} ${e.level} (${i?"part":"frag"}:[${(null!=(s=t&&!i?e.startPTS:(i||e).start)?s:NaN).toFixed(3)}-${(null!=(r=t&&!i?e.endPTS:(i||e).end)?r:NaN).toFixed(3)}]${i&&"main"===e.type?"INDEPENDENT="+(i.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;null==(e=this.transmuxer)||e.reset()}recoverWorkerError(e){"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function sP(e){return!!e.interstitialsController&&!1!==e.enableInterstitialPlayback}class rP{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let i;return e.length?(i=1===e.length?e[0]:nP(e,t),this.reset(),i):new Uint8Array(0)}reset(){this.chunks.length=0,this.dataLength=0}}function nP(e,t){const i=new Uint8Array(t);let s=0;for(let r=0;r<e.length;r++){const t=e[r];i.set(t,s),s+=t.length}return i}var aP,oP={exports:{}};function lP(){return aP||(aP=1,function(e){var t=Object.prototype.hasOwnProperty,i="~";function s(){}function r(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function n(e,t,s,n,a){if("function"!==typeof s)throw new TypeError("The listener must be a function");var o=new r(s,n||e,a),l=i?i+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new s:delete e._events[t]}function o(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(i=!1)),o.prototype.eventNames=function(){var e,s,r=[];if(0===this._eventsCount)return r;for(s in e=this._events)t.call(e,s)&&r.push(i?s.slice(1):s);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},o.prototype.listeners=function(e){var t=i?i+e:e,s=this._events[t];if(!s)return[];if(s.fn)return[s.fn];for(var r=0,n=s.length,a=new Array(n);r<n;r++)a[r]=s[r].fn;return a},o.prototype.listenerCount=function(e){var t=i?i+e:e,s=this._events[t];return s?s.fn?1:s.length:0},o.prototype.emit=function(e,t,s,r,n,a){var o=i?i+e:e;if(!this._events[o])return!1;var l,c,d=this._events[o],h=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),h){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,s),!0;case 4:return d.fn.call(d.context,t,s,r),!0;case 5:return d.fn.call(d.context,t,s,r,n),!0;case 6:return d.fn.call(d.context,t,s,r,n,a),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var u,p=d.length;for(c=0;c<p;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),h){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,s);break;case 4:d[c].fn.call(d[c].context,t,s,r);break;default:if(!l)for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=arguments[u];d[c].fn.apply(d[c].context,l)}}return!0},o.prototype.on=function(e,t,i){return n(this,e,t,i,!1)},o.prototype.once=function(e,t,i){return n(this,e,t,i,!0)},o.prototype.removeListener=function(e,t,s,r){var n=i?i+e:e;if(!this._events[n])return this;if(!t)return a(this,n),this;var o=this._events[n];if(o.fn)o.fn!==t||r&&!o.once||s&&o.context!==s||a(this,n);else{for(var l=0,c=[],d=o.length;l<d;l++)(o[l].fn!==t||r&&!o[l].once||s&&o[l].context!==s)&&c.push(o[l]);c.length?this._events[n]=1===c.length?c[0]:c:a(this,n)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&a(this,t)):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,e.exports=o}(oP)),oP.exports}var cP=lP(),dP=iI(cP);const hP="1.6.7",uP={};function pP(){return"function"===typeof __HLS_WORKER_BUNDLE__}function fP(){const e=uP[hP];if(e)return e.clientCount++,e;const t=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),i=self.URL.createObjectURL(t),s=new self.Worker(i),r={worker:s,objectURL:i,clientCount:1};return uP[hP]=r,r}function gP(e){const t=uP[e];if(t)return t.clientCount++,t;const i=new self.URL(e,self.location.href).href,s=new self.Worker(i),r={worker:s,scriptURL:i,clientCount:1};return uP[e]=r,r}function mP(e){const t=uP[e||hP];if(t){const i=t.clientCount--;if(1===i){const{worker:i,objectURL:s}=t;delete uP[e||hP],s&&self.URL.revokeObjectURL(s),i.terminate()}}}function vP(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function yP(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function bP(e,t){let i=0;return i=(127&e[t])<<21,i|=(127&e[t+1])<<14,i|=(127&e[t+2])<<7,i|=127&e[t+3],i}function EP(e,t){const i=t;let s=0;while(yP(e,t)){s+=10;const i=bP(e,t+6);s+=i,vP(e,t+10)&&(s+=10),t+=s}if(s>0)return e.subarray(i,i+s)}function wP(e,t,i,s){const r=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],n=t[i+2],a=n>>2&15;if(a>12){const t=new Error(`invalid ADTS sampling index:${a}`);return void e.emit(Ck.ERROR,Ck.ERROR,{type:Ik.MEDIA_ERROR,details:_k.FRAG_PARSING_ERROR,fatal:!0,error:t,reason:t.message})}const o=1+(n>>6&3),l=t[i+3]>>6&3|(1&n)<<2,c="mp4a.40."+o,d=r[a];let h=a;5!==o&&29!==o||(h-=3);const u=[o<<3|(14&h)>>1,(1&h)<<7|l<<3];return qk.log(`manifest codec:${s}, parsed codec:${c}, channels:${l}, rate:${d} (ADTS object type:${o} sampling index:${a})`),{config:u,samplerate:d,channelCount:l,codec:c,parsedCodec:c,manifestCodec:s}}function AP(e,t){return 255===e[t]&&240===(246&e[t+1])}function TP(e,t){return 1&e[t+1]?7:9}function SP(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function xP(e,t){return t+5<e.length}function LP(e,t){return t+1<e.length&&AP(e,t)}function kP(e,t){return xP(e,t)&&AP(e,t)&&SP(e,t)<=e.length-t}function IP(e,t){if(LP(e,t)){const i=TP(e,t);if(t+i>=e.length)return!1;const s=SP(e,t);if(s<=i)return!1;const r=t+s;return r===e.length||LP(e,r)}return!1}function _P(e,t,i,s,r){if(!e.samplerate){const n=wP(t,i,s,r);if(!n)return;Nk(e,n)}}function CP(e){return 9216e4/e}function RP(e,t){const i=TP(e,t);if(t+i<=e.length){const s=SP(e,t)-i;if(s>0)return{headerLength:i,frameLength:s}}}function PP(e,t,i,s,r){const n=CP(e.samplerate),a=s+r*n,o=RP(t,i);let l;if(o){const{frameLength:s,headerLength:r}=o,n=r+s,c=Math.max(0,i+n-t.length);c?(l=new Uint8Array(n-r),l.set(t.subarray(i+r,t.length),0)):l=t.subarray(i+r,i+n);const d={unit:l,pts:a};return c||e.samples.push(d),{sample:d,length:n,missing:c}}const c=t.length-i;l=new Uint8Array(c),l.set(t.subarray(i,t.length),0);const d={unit:l,pts:a};return{sample:d,length:c,missing:-1}}function DP(e,t){return yP(e,t)&&bP(e,t+6)+10<=e.length-t}function MP(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function OP(e,t=0,i=1/0){return NP(e,t,i,Uint8Array)}function NP(e,t,i,s){const r=BP(e);let n=1;"BYTES_PER_ELEMENT"in s&&(n=s.BYTES_PER_ELEMENT);const a=FP(e)?e.byteOffset:0,o=(a+e.byteLength)/n,l=(a+t)/n,c=Math.floor(Math.max(0,Math.min(l,o))),d=Math.floor(Math.min(c+Math.max(i,0),o));return new s(r,c,d-c)}function BP(e){return e instanceof ArrayBuffer?e:e.buffer}function FP(e){return e&&e.buffer instanceof ArrayBuffer&&void 0!==e.byteLength&&void 0!==e.byteOffset}function $P(e){const t={key:e.type,description:"",data:"",mimeType:null,pictureType:null},i=3;if(e.size<2)return;if(e.data[0]!==i)return void console.log("Ignore frame with unrecognized character encoding");const s=e.data.subarray(1).indexOf(0);if(-1===s)return;const r=Jk(OP(e.data,1,s)),n=e.data[2+s],a=e.data.subarray(3+s).indexOf(0);if(-1===a)return;const o=Jk(OP(e.data,3+s,a));let l;return l="--\x3e"===r?Jk(OP(e.data,4+s+a)):MP(e.data.subarray(4+s+a)),t.mimeType=r,t.pictureType=n,t.description=o,t.data=l,t}function UP(e){if(e.size<2)return;const t=Jk(e.data,!0),i=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:i.buffer}}function GP(e){if(e.size<2)return;if("TXXX"===e.type){let t=1;const i=Jk(e.data.subarray(t),!0);t+=i.length+1;const s=Jk(e.data.subarray(t));return{key:e.type,info:i,data:s}}const t=Jk(e.data.subarray(1));return{key:e.type,info:"",data:t}}function HP(e){if("WXXX"===e.type){if(e.size<2)return;let t=1;const i=Jk(e.data.subarray(t),!0);t+=i.length+1;const s=Jk(e.data.subarray(t));return{key:e.type,info:i,data:s}}const t=Jk(e.data);return{key:e.type,info:"",data:t}}function jP(e){return"PRIV"===e.type?UP(e):"W"===e.type[0]?HP(e):"APIC"===e.type?$P(e):GP(e)}function zP(e){const t=String.fromCharCode(e[0],e[1],e[2],e[3]),i=bP(e,4),s=10;return{type:t,size:i,data:e.subarray(s,s+i)}}const VP=10,YP=10;function WP(e){let t=0;const i=[];while(yP(e,t)){const s=bP(e,t+6);e[t+5]>>6&1&&(t+=VP),t+=VP;const r=t+s;while(t+YP<r){const s=zP(e.subarray(t)),r=jP(s);r&&i.push(r),t+=s.size+VP}vP(e,t)&&(t+=VP)}return i}function KP(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info}function qP(e){if(8===e.data.byteLength){const t=new Uint8Array(e.data),i=1&t[3];let s=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return s/=45,i&&(s+=47721858.84),Math.round(s)}}function XP(e){const t=WP(e);for(let i=0;i<t.length;i++){const e=t[i];if(KP(e))return qP(e)}}let QP=function(e){return e["audioId3"]="org.id3",e["dateRange"]="com.apple.quicktime.HLS",e["emsg"]="https://aomedia.org/emsg/ID3",e["misbklv"]="urn:misb:KLV:bin:1910.1",e}({});function ZP(e="",t=9e4){return{type:e,id:-1,pid:-1,inputTimeScale:t,sequenceNumber:-1,samples:[],dropped:0}}class JP{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,i,s){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,i){}demux(e,t){this.cachedData&&(e=BI(this.cachedData,e),this.cachedData=null);let i,s=EP(e,0),r=s?s.length:0;const n=this._audioTrack,a=this._id3Track,o=s?XP(s):void 0,l=e.length;(null===this.basePTS||0===this.frameIndex&&xk(o))&&(this.basePTS=eD(o,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),s&&s.length>0&&a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:s,type:QP.audioId3,duration:Number.POSITIVE_INFINITY});while(r<l){if(this.canParse(e,r)){const t=this.appendFrame(n,e,r);t?(this.frameIndex++,this.lastPTS=t.sample.pts,r+=t.length,i=r):r=l}else DP(e,r)?(s=EP(e,r),a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:s,type:QP.audioId3,duration:Number.POSITIVE_INFINITY}),r+=s.length,i=r):r++;if(r===l&&i!==l){const t=e.slice(i);this.cachedData?this.cachedData=BI(this.cachedData,t):this.cachedData=t}}return{audioTrack:n,videoTrack:ZP(),id3Track:a,textTrack:ZP()}}demuxSampleAes(e,t,i){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:ZP(),id3Track:this._id3Track,textTrack:ZP()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const eD=(e,t,i)=>{if(xk(e))return 90*e;const s=i?9e4*i.baseTime/i.timescale:0;return 9e4*t+s};let tD=null;const iD=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],sD=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],rD=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],nD=[0,1,1,4];function aD(e,t,i,s,r){if(i+24>t.length)return;const n=oD(t,i);if(n&&i+n.frameLength<=t.length){const a=9e4*n.samplesPerFrame/n.sampleRate,o=s+r*a,l={unit:t.subarray(i,i+n.frameLength),pts:o,dts:o};return e.config=[],e.channelCount=n.channelCount,e.samplerate=n.sampleRate,e.samples.push(l),{sample:l,length:n.frameLength,missing:0}}}function oD(e,t){const i=e[t+1]>>3&3,s=e[t+1]>>1&3,r=e[t+2]>>4&15,n=e[t+2]>>2&3;if(1!==i&&0!==r&&15!==r&&3!==n){const a=e[t+2]>>1&1,o=e[t+3]>>6,l=3===i?3-s:3===s?3:4,c=1e3*iD[14*l+r-1],d=3===i?0:2===i?1:2,h=sD[3*d+n],u=3===o?1:2,p=rD[i][s],f=nD[s],g=8*p*f,m=Math.floor(p*c/h+a)*f;if(null===tD){const e=navigator.userAgent||"",t=e.match(/Chrome\/(\d+)/i);tD=t?parseInt(t[1]):0}const v=!!tD&&tD<=87;return v&&2===s&&c>=224e3&&0===o&&(e[t+3]=128|e[t+3]),{sampleRate:h,channelCount:u,frameLength:m,samplesPerFrame:g}}}function lD(e,t){return 255===e[t]&&224===(224&e[t+1])&&0!==(6&e[t+1])}function cD(e,t){return t+1<e.length&&lD(e,t)}function dD(e,t){const i=4;return lD(e,t)&&i<=e.length-t}function hD(e,t){if(t+1<e.length&&lD(e,t)){const i=4,s=oD(e,t);let r=i;null!=s&&s.frameLength&&(r=s.frameLength);const n=t+r;return n===e.length||cD(e,n)}return!1}class uD extends JP{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,i,s){super.resetInitSegment(e,t,i,s),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const i=EP(e,0);let s=(null==i?void 0:i.length)||0;if(hD(e,s))return!1;for(let r=e.length;s<r;s++)if(IP(e,s))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return kP(e,t)}appendFrame(e,t,i){_P(e,this.observer,t,i,e.manifestCodec);const s=PP(e,t,i,this.basePTS,this.frameIndex);if(s&&0===s.missing)return s}}const pD=(e,t)=>{let i=0,s=5;t+=s;const r=new Uint32Array(1),n=new Uint32Array(1),a=new Uint8Array(1);while(s>0){a[0]=e[t];const o=Math.min(s,8),l=8-o;n[0]=4278190080>>>24+l<<l,r[0]=(a[0]&n[0])>>l,i=i?i<<o|r[0]:r[0],t+=1,s-=o}return i};class fD extends JP{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,i,s){super.resetInitSegment(e,t,i,s),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,i){const s=gD(e,t,i,this.basePTS,this.frameIndex);if(-1!==s){const t=e.samples[e.samples.length-1];return{sample:t,length:s,missing:0}}}static probe(e){if(!e)return!1;const t=EP(e,0);if(!t)return!1;const i=t.length;return 11===e[i]&&119===e[i+1]&&void 0!==XP(t)&&pD(e,i)<16}}function gD(e,t,i,s,r){if(i+8>t.length)return-1;if(11!==t[i]||119!==t[i+1])return-1;const n=t[i+4]>>6;if(n>=3)return-1;const a=[48e3,44100,32e3],o=a[n],l=63&t[i+4],c=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920],d=2*c[3*l+n];if(i+d>t.length)return-1;const h=t[i+6]>>5;let u=0;2===h?u+=2:(1&h&&1!==h&&(u+=2),4&h&&(u+=2));const p=(t[i+6]<<8|t[i+7])>>12-u&1,f=[2,1,2,3,3,4,4,5],g=f[h]+p,m=t[i+5]>>3,v=7&t[i+5],y=new Uint8Array([n<<6|m<<1|v>>2,(3&v)<<6|h<<3|p<<2|l>>4,l<<4&224]),b=1536/o*9e4,E=s+r*b,w=t.subarray(i,i+d);return e.config=y,e.channelCount=g,e.samplerate=o,e.samples.push({unit:w,pts:E}),d}class mD extends JP{resetInitSegment(e,t,i,s){super.resetInitSegment(e,t,i,s),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=EP(e,0);let i=(null==t?void 0:t.length)||0;if(t&&11===e[i]&&119===e[i+1]&&void 0!==XP(t)&&pD(e,i)<=16)return!1;for(let s=e.length;i<s;i++)if(hD(e,i))return qk.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return dD(e,t)}appendFrame(e,t,i){if(null!==this.basePTS)return aD(e,t,i,this.basePTS,this.frameIndex)}}const vD=/\/emsg[-/]ID3/i;class yD{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,i,s){const r=this.videoTrack=ZP("video",1),n=this.audioTrack=ZP("audio",1),a=this.txtTrack=ZP("text",1);if(this.id3Track=ZP("id3",1),this.timeOffset=0,null==e||!e.byteLength)return;const o=LI(e);if(o.video){const{id:e,timescale:t,codec:i,supplemental:s}=o.video;r.id=e,r.timescale=a.timescale=t,r.codec=i,r.supplemental=s}if(o.audio){const{id:e,timescale:t,codec:i}=o.audio;n.id=e,n.timescale=t,n.codec=i}a.id=vI.text,r.sampleDuration=0,r.duration=n.duration=s}resetContiguity(){this.remainderData=null}static probe(e){return TI(e)}demux(e,t){this.timeOffset=t;let i=e;const s=this.videoTrack,r=this.txtTrack;if(this.config.progressive){this.remainderData&&(i=BI(this.remainderData,e));const t=NI(i);this.remainderData=t.remainder,s.samples=t.valid||new Uint8Array}else s.samples=i;const n=this.extractID3Track(s,t);return r.samples=FI(t,s),{videoTrack:s,audioTrack:this.audioTrack,id3Track:n,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,i=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const s=this.extractID3Track(t,this.timeOffset);return i.samples=FI(e,t),{videoTrack:t,audioTrack:ZP(),id3Track:s,textTrack:ZP()}}extractID3Track(e,t){const i=this.id3Track;if(e.samples.length){const s=SI(e.samples,["emsg"]);s&&s.forEach(e=>{const s=jI(e);if(vD.test(s.schemeIdUri)){const e=bD(s,t);let r=4294967295===s.eventDuration?Number.POSITIVE_INFINITY:s.eventDuration/s.timeScale;r<=.001&&(r=Number.POSITIVE_INFINITY);const n=s.payload;i.samples.push({data:n,len:n.byteLength,dts:e,pts:e,type:QP.emsg,duration:r})}else if(this.config.enableEmsgKLVMetadata&&s.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const e=bD(s,t);i.samples.push({data:s.payload,len:s.payload.byteLength,dts:e,pts:e,type:QP.misbklv,duration:Number.POSITIVE_INFINITY})}})}return i}demuxSampleAes(e,t,i){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function bD(e,t){return xk(e.presentationTime)?e.presentationTime/e.timeScale:t+e.presentationTimeDelta/e.timeScale}class ED{constructor(e,t,i){this.keyData=void 0,this.decrypter=void 0,this.keyData=i,this.decrypter=new AC(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,gC.cbc)}decryptAacSample(e,t,i){const s=e[t].unit;if(s.length<=16)return;const r=s.subarray(16,s.length-s.length%16),n=r.buffer.slice(r.byteOffset,r.byteOffset+r.length);this.decryptBuffer(n).then(r=>{const n=new Uint8Array(r);s.set(n,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,i)})}decryptAacSamples(e,t,i){for(;;t++){if(t>=e.length)return void i();if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,i),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=16*Math.floor((e.length-48)/160)+16,i=new Int8Array(t);let s=0;for(let r=32;r<e.length-16;r+=160,s+=16)i.set(e.subarray(r,r+16),s);return i}getAvcDecryptedUnit(e,t){const i=new Uint8Array(t);let s=0;for(let r=32;r<e.length-16;r+=160,s+=16)e.set(i.subarray(s,s+16),r);return e}decryptAvcSample(e,t,i,s,r){const n=HI(r.data),a=this.getAvcEncryptedData(n);this.decryptBuffer(a.buffer).then(a=>{r.data=this.getAvcDecryptedUnit(n,a),this.decrypter.isSync()||this.decryptAvcSamples(e,t,i+1,s)})}decryptAvcSamples(e,t,i,s){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,i=0){if(t>=e.length)return void s();const r=e[t].units;for(;;i++){if(i>=r.length)break;const n=r[i];if(!(n.data.length<=48||1!==n.type&&5!==n.type)&&(this.decryptAvcSample(e,t,i,s,n),!this.decrypter.isSync()))return}}}}class wD{constructor(){this.VideoSample=null}createVideoSample(e,t,i){return{key:e,frame:!1,pts:t,dts:i,units:[],length:0}}getLastNalUnit(e){var t;let i,s=this.VideoSample;if(s&&0!==s.units.length||(s=e[e.length-1]),null!=(t=s)&&t.units){const e=s.units;i=e[e.length-1]}return i}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){const i=t.samples,s=i.length;if(!s)return void t.dropped++;{const t=i[s-1];e.pts=t.pts,e.dts=t.dts}}t.samples.push(e)}}parseNALu(e,t,i){const s=t.byteLength;let r=e.naluState||0;const n=r,a=[];let o,l,c,d=0,h=-1,u=0;-1===r&&(h=0,u=this.getNALuType(t,0),r=0,d=1);while(d<s)if(o=t[d++],r)if(1!==r)if(o)if(1===o){if(l=d-r-1,h>=0){const e={data:t.subarray(h,l),type:u};a.push(e)}else{const i=this.getLastNalUnit(e.samples);i&&(n&&d<=4-n&&i.state&&(i.data=i.data.subarray(0,i.data.byteLength-n)),l>0&&(i.data=BI(i.data,t.subarray(0,l)),i.state=0))}d<s?(c=this.getNALuType(t,d),h=d,u=c,r=0):r=-1}else r=0;else r=3;else r=o?0:2;else r=o?0:1;if(h>=0&&r>=0){const e={data:t.subarray(h,s),type:u,state:r};a.push(e)}if(0===a.length){const i=this.getLastNalUnit(e.samples);i&&(i.data=BI(i.data,t))}return e.naluState=r,a}}class AD{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,i=e.byteLength-t,s=new Uint8Array(4),r=Math.min(4,t);if(0===r)throw new Error("no bytes available");s.set(e.subarray(i,i+r)),this.word=new DataView(s.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r}skipBits(e){let t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const i=this.word>>>32-t;if(e>32&&qk.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return t=e-t,t>0&&this.bitsAvailable?i<<t|this.readBits(t):i}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(0!==(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return 1===this.readBits(1)}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class TD extends wD{parsePES(e,t,i,s){const r=this.parseNALu(e,i.data,s);let n,a=this.VideoSample,o=!1;i.data=null,a&&r.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),r.forEach(s=>{var r,l;switch(s.type){case 1:{let t=!1;n=!0;const r=s.data;if(o&&r.length>4){const e=this.readSliceType(r);2!==e&&4!==e&&7!==e&&9!==e||(t=!0)}var c;if(t)null!=(c=a)&&c.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null);a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.frame=!0,a.key=t;break}case 5:n=!0,null!=(r=a)&&r.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.key=!0,a.frame=!0;break;case 6:n=!0,GI(s.data,1,i.pts,t.samples);break;case 7:{var d,h;n=!0,o=!0;const t=s.data,i=this.readSPS(t);if(!e.sps||e.width!==i.width||e.height!==i.height||(null==(d=e.pixelRatio)?void 0:d[0])!==i.pixelRatio[0]||(null==(h=e.pixelRatio)?void 0:h[1])!==i.pixelRatio[1]){e.width=i.width,e.height=i.height,e.pixelRatio=i.pixelRatio,e.sps=[t];const s=t.subarray(1,4);let r="avc1.";for(let e=0;e<3;e++){let t=s[e].toString(16);t.length<2&&(t="0"+t),r+=t}e.codec=r}break}case 8:n=!0,e.pps=[s.data];break;case 9:n=!0,e.audFound=!0,null!=(l=a)&&l.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts));break;case 12:n=!0;break;default:n=!1;break}if(a&&n){const e=a.units;e.push(s)}}),s&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}getNALuType(e,t){return 31&e[t]}readSliceType(e){const t=new AD(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let i,s=8,r=8;for(let n=0;n<e;n++)0!==r&&(i=t.readEG(),r=(s+i+256)%256),s=0===r?s:r}readSPS(e){const t=new AD(e);let i,s,r,n=0,a=0,o=0,l=0;const c=t.readUByte.bind(t),d=t.readBits.bind(t),h=t.readUEG.bind(t),u=t.readBoolean.bind(t),p=t.skipBits.bind(t),f=t.skipEG.bind(t),g=t.skipUEG.bind(t),m=this.skipScalingList.bind(this);c();const v=c();if(d(5),p(3),c(),g(),100===v||110===v||122===v||244===v||44===v||83===v||86===v||118===v||128===v){const e=h();if(3===e&&p(1),g(),g(),p(1),u())for(s=3!==e?8:12,r=0;r<s;r++)u()&&m(r<6?16:64,t)}g();const y=h();if(0===y)h();else if(1===y)for(p(1),f(),f(),i=h(),r=0;r<i;r++)f();g(),p(1);const b=h(),E=h(),w=d(1);0===w&&p(1),p(1),u()&&(n=h(),a=h(),o=h(),l=h());let A=[1,1];if(u()&&u()){const e=c();switch(e){case 1:A=[1,1];break;case 2:A=[12,11];break;case 3:A=[10,11];break;case 4:A=[16,11];break;case 5:A=[40,33];break;case 6:A=[24,11];break;case 7:A=[20,11];break;case 8:A=[32,11];break;case 9:A=[80,33];break;case 10:A=[18,11];break;case 11:A=[15,11];break;case 12:A=[64,33];break;case 13:A=[160,99];break;case 14:A=[4,3];break;case 15:A=[3,2];break;case 16:A=[2,1];break;case 255:A=[c()<<8|c(),c()<<8|c()];break}}return{width:Math.ceil(16*(b+1)-2*n-2*a),height:(2-w)*(E+1)*16-(w?2:4)*(o+l),pixelRatio:A}}}class SD extends wD{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,i,s){const r=this.parseNALu(e,i.data,s);let n,a=this.VideoSample,o=!1;i.data=null,a&&r.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),r.forEach(s=>{var r,l;switch(s.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:a||(a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),a.frame=!0,n=!0;break;case 16:case 17:case 18:case 21:var c;if(n=!0,o)null!=(c=a)&&c.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null);a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.key=!0,a.frame=!0;break;case 19:case 20:n=!0,null!=(r=a)&&r.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.key=!0,a.frame=!0;break;case 39:n=!0,GI(s.data,2,i.pts,t.samples);break;case 32:n=!0,e.vps||("object"!==typeof e.params&&(e.params={}),e.params=Nk(e.params,this.readVPS(s.data)),this.initVPS=s.data),e.vps=[s.data];break;case 33:if(n=!0,o=!0,void 0===e.vps||e.vps[0]===this.initVPS||void 0===e.sps||this.matchSPS(e.sps[0],s.data)||(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const t=this.readSPS(s.data);e.width=t.width,e.height=t.height,e.pixelRatio=t.pixelRatio,e.codec=t.codecString,e.sps=[],"object"!==typeof e.params&&(e.params={});for(const i in t.params)e.params[i]=t.params[i]}this.pushParameterSet(e.sps,s.data,e.vps),a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.key=!0;break;case 34:if(n=!0,"object"===typeof e.params){if(!e.pps){e.pps=[];const t=this.readPPS(s.data);for(const i in t)e.params[i]=t[i]}this.pushParameterSet(e.pps,s.data,e.vps)}break;case 35:n=!0,e.audFound=!0,null!=(l=a)&&l.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts));break;default:n=!1;break}if(a&&n){const e=a.units;e.push(s)}}),s&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}pushParameterSet(e,t,i){(i&&i[0]===this.initVPS||!i&&!e.length)&&e.push(t)}getNALuType(e,t){return(126&e[t])>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let i=0;for(let s=0;s<e.byteLength;s++)s>=2&&3===e[s]&&0===e[s-1]&&0===e[s-2]||(t[i]=e[s],i++);return new Uint8Array(t.buffer,0,i)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new AD(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);const i=t.readBits(3),s=t.readBoolean();return{numTemporalLayers:i+1,temporalIdNested:s}}readSPS(e){const t=new AD(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const i=t.readBits(3);t.readBoolean();const s=t.readBits(2),r=t.readBoolean(),n=t.readBits(5),a=t.readUByte(),o=t.readUByte(),l=t.readUByte(),c=t.readUByte(),d=t.readUByte(),h=t.readUByte(),u=t.readUByte(),p=t.readUByte(),f=t.readUByte(),g=t.readUByte(),m=t.readUByte(),v=[],y=[];for(let Q=0;Q<i;Q++)v.push(t.readBoolean()),y.push(t.readBoolean());if(i>0)for(let Q=i;Q<8;Q++)t.readBits(2);for(let Q=0;Q<i;Q++)v[Q]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),y[Q]&&t.readUByte();t.readUEG();const b=t.readUEG();3==b&&t.skipBits(1);const E=t.readUEG(),w=t.readUEG(),A=t.readBoolean();let T=0,S=0,x=0,L=0;A&&(T+=t.readUEG(),S+=t.readUEG(),x+=t.readUEG(),L+=t.readUEG());const k=t.readUEG(),I=t.readUEG(),_=t.readUEG(),C=t.readBoolean();for(let Q=C?0:i;Q<=i;Q++)t.skipUEG(),t.skipUEG(),t.skipUEG();t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG();const R=t.readBoolean();if(R){const e=t.readBoolean();if(e)for(let i=0;i<4;i++)for(let e=0;e<(3===i?2:6);e++){const e=t.readBoolean();if(e){const e=Math.min(64,1<<4+(i<<1));i>1&&t.readEG();for(let i=0;i<e;i++)t.readEG()}else t.readUEG()}}t.readBoolean(),t.readBoolean();const P=t.readBoolean();P&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const D=t.readUEG();let M=0;for(let Q=0;Q<D;Q++){let e=!1;if(0!==Q&&(e=t.readBoolean()),e){Q===D&&t.readUEG(),t.readBoolean(),t.readUEG();let e=0;for(let i=0;i<=M;i++){const i=t.readBoolean();let s=!1;i||(s=t.readBoolean()),(i||s)&&e++}M=e}else{const e=t.readUEG(),i=t.readUEG();M=e+i;for(let s=0;s<e;s++)t.readUEG(),t.readBoolean();for(let s=0;s<i;s++)t.readUEG(),t.readBoolean()}}const O=t.readBoolean();if(O){const e=t.readUEG();for(let i=0;i<e;i++){for(let e=0;e<_+4;e++)t.readBits(1);t.readBits(1)}}let N=0,B=1,F=1,$=!0,U=1,G=0;t.readBoolean(),t.readBoolean();let H=!1;const j=t.readBoolean();if(j){const e=t.readBoolean();if(e){const e=t.readUByte(),i=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],s=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];e>0&&e<16?(B=i[e-1],F=s[e-1]):255===e&&(B=t.readBits(16),F=t.readBits(16))}const s=t.readBoolean();s&&t.readBoolean();const r=t.readBoolean();if(r){t.readBits(3),t.readBoolean();const e=t.readBoolean();e&&(t.readUByte(),t.readUByte(),t.readUByte())}const n=t.readBoolean();n&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),H=t.readBoolean(),H&&(T+=t.readUEG(),S+=t.readUEG(),x+=t.readUEG(),L+=t.readUEG());const a=t.readBoolean();if(a){U=t.readBits(32),G=t.readBits(32);const e=t.readBoolean();e&&t.readUEG();const s=t.readBoolean();if(s){const e=t.readBoolean(),s=t.readBoolean();let r=!1;(e||s)&&(r=t.readBoolean(),r&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),r&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let n=0;n<=i;n++){$=t.readBoolean();const i=$||t.readBoolean();let n=!1;i?t.readEG():n=t.readBoolean();const a=n?1:t.readUEG()+1;if(e)for(let e=0;e<a;e++)t.readUEG(),t.readUEG(),r&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(s)for(let e=0;e<a;e++)t.readUEG(),t.readUEG(),r&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}}const o=t.readBoolean();o&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),N=t.readUEG())}let z=E,V=w;if(A||H){let e=1,t=1;1===b?e=t=2:2==b&&(e=2),z=E-e*S-e*T,V=w-t*L-t*x}const Y=s?["A","B","C"][s]:"",W=a<<24|o<<16|l<<8|c;let K=0;for(let Q=0;Q<32;Q++)K=(K|(W>>Q&1)<<31-Q)>>>0;let q=K.toString(16);1===n&&"2"===q&&(q="6");const X=r?"H":"L";return{codecString:`hvc1.${Y}${n}.${q}.${X}${m}.B0`,params:{general_tier_flag:r,general_profile_idc:n,general_profile_space:s,general_profile_compatibility_flags:[a,o,l,c],general_constraint_indicator_flags:[d,h,u,p,f,g],general_level_idc:m,bit_depth:k+8,bit_depth_luma_minus8:k,bit_depth_chroma_minus8:I,min_spatial_segmentation_idc:N,chroma_format_idc:b,frame_rate:{fixed:$,fps:G/U}},width:z,height:V,pixelRatio:[B,F]}}readPPS(e){const t=new AD(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2);const i=t.readBoolean();i&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const s=t.readBoolean(),r=t.readBoolean();let n=1;return r&&s?n=0:r?n=3:s&&(n=2),{parallelismType:n}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const xD=188;class LD{constructor(e,t,i,s){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.logger=s,this.videoParser=null}static probe(e,t){const i=LD.syncOffset(e);return i>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${i}`),-1!==i}static syncOffset(e){const t=e.length;let i=Math.min(5*xD,t-xD)+1,s=0;while(s<i){let r=!1,n=-1,a=0;for(let o=s;o<t;o+=xD){if(71!==e[o]||t-o!==xD&&71!==e[o+xD]){if(a)return-1;break}if(a++,-1===n&&(n=o,0!==n&&(i=Math.min(n+99*xD,e.length-xD)+1)),r||(r=0===kD(e,o)),r&&a>1&&(0===n&&a>2||o+xD>i))return n}s++}return-1}static createTrack(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:vI[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}}resetInitSegment(e,t,i,s){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=LD.createTrack("video"),this._videoTrack.duration=s,this._audioTrack=LD.createTrack("audio",s),this._id3Track=LD.createTrack("id3"),this._txtTrack=LD.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=i}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:i}=this;e&&(e.pesData=null),t&&(t.pesData=null),i&&(i.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,i=!1,s=!1){let r;i||(this.sampleAes=null);const n=this._videoTrack,a=this._audioTrack,o=this._id3Track,l=this._txtTrack;let c=n.pid,d=n.pesData,h=a.pid,u=o.pid,p=a.pesData,f=o.pesData,g=null,m=this.pmtParsed,v=this._pmtId,y=e.length;if(this.remainderData&&(e=BI(this.remainderData,e),y=e.length,this.remainderData=null),y<xD&&!s)return this.remainderData=e,{audioTrack:a,videoTrack:n,id3Track:o,textTrack:l};const b=Math.max(0,LD.syncOffset(e));y-=(y-b)%xD,y<e.byteLength&&!s&&(this.remainderData=new Uint8Array(e.buffer,y,e.buffer.byteLength-y));let E=0;for(let A=b;A<y;A+=xD)if(71===e[A]){const t=!!(64&e[A+1]),s=kD(e,A),y=(48&e[A+3])>>4;let E;if(y>1){if(E=A+5+e[A+4],E===A+xD)continue}else E=A+4;switch(s){case c:if(t){if(d&&(r=PD(d,this.logger))){if(null===this.videoParser)switch(n.segmentCodec){case"avc":this.videoParser=new TD;break;case"hevc":this.videoParser=new SD;break}null!==this.videoParser&&this.videoParser.parsePES(n,l,r,!1)}d={data:[],size:0}}d&&(d.data.push(e.subarray(E,A+xD)),d.size+=A+xD-E);break;case h:if(t){if(p&&(r=PD(p,this.logger)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,r);break;case"mp3":this.parseMPEGPES(a,r);break;case"ac3":this.parseAC3PES(a,r);break}p={data:[],size:0}}p&&(p.data.push(e.subarray(E,A+xD)),p.size+=A+xD-E);break;case u:t&&(f&&(r=PD(f,this.logger))&&this.parseID3PES(o,r),f={data:[],size:0}),f&&(f.data.push(e.subarray(E,A+xD)),f.size+=A+xD-E);break;case 0:t&&(E+=e[E]+1),v=this._pmtId=ID(e,E);break;case v:{t&&(E+=e[E]+1);const s=_D(e,E,this.typeSupported,i,this.observer,this.logger);c=s.videoPid,c>0&&(n.pid=c,n.segmentCodec=s.segmentVideoCodec),h=s.audioPid,h>0&&(a.pid=h,a.segmentCodec=s.segmentAudioCodec),u=s.id3Pid,u>0&&(o.pid=u),null===g||m||(this.logger.warn(`MPEG-TS PMT found at ${A} after unknown PID '${g}'. Backtracking to sync byte @${b} to parse all TS packets.`),g=null,A=b-188),m=this.pmtParsed=!0;break}case 17:case 8191:break;default:g=s;break}}else E++;E>0&&CD(this.observer,new Error(`Found ${E} TS packet/s that do not start with 0x47`),void 0,this.logger),n.pesData=d,a.pesData=p,o.pesData=f;const w={audioTrack:a,videoTrack:n,id3Track:o,textTrack:l};return s&&this.extractRemainingSamples(w),w}flush(){const{remainderData:e}=this;let t;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:i,id3Track:s,textTrack:r}=e,n=i.pesData,a=t.pesData,o=s.pesData;let l;if(n&&(l=PD(n,this.logger))){if(null===this.videoParser)switch(i.segmentCodec){case"avc":this.videoParser=new TD;break;case"hevc":this.videoParser=new SD;break}null!==this.videoParser&&(this.videoParser.parsePES(i,r,l,!0),i.pesData=null)}else i.pesData=n;if(a&&(l=PD(a,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,l);break;case"mp3":this.parseMPEGPES(t,l);break;case"ac3":this.parseAC3PES(t,l);break}t.pesData=null}else null!=a&&a.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=a;o&&(l=PD(o,this.logger))?(this.parseID3PES(s,l),s.pesData=null):s.pesData=o}demuxSampleAes(e,t,i){const s=this.demux(e,i,!0,!this.config.progressive),r=this.sampleAes=new ED(this.observer,this.config,t);return this.decrypt(s,r)}decrypt(e,t){return new Promise(i=>{const{audioTrack:s,videoTrack:r}=e;s.samples&&"aac"===s.segmentCodec?t.decryptAacSamples(s.samples,0,()=>{r.samples?t.decryptAvcSamples(r.samples,0,0,()=>{i(e)}):i(e)}):r.samples&&t.decryptAvcSamples(r.samples,0,0,()=>{i(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let i=0;const s=this.aacOverFlow;let r,n,a,o=t.data;if(s){this.aacOverFlow=null;const t=s.missing,r=s.sample.unit.byteLength;if(-1===t)o=BI(s.sample.unit,o);else{const n=r-t;s.sample.unit.set(o.subarray(0,t),n),e.samples.push(s.sample),i=s.missing}}for(r=i,n=o.length;r<n-1;r++)if(LP(o,r))break;if(r!==i){let e;const t=r<n-1;if(e=t?`AAC PES did not start with ADTS header,offset:${r}`:"No ADTS header found in AAC PES",CD(this.observer,new Error(e),t,this.logger),!t)return}if(_P(e,this.observer,o,r,this.audioCodec),void 0!==t.pts)a=t.pts;else{if(!s)return void this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");{const t=CP(e.samplerate);a=s.sample.pts+t}}let l,c=0;while(r<n){if(l=PP(e,o,r,a,c),r+=l.length,l.missing){this.aacOverFlow=l;break}for(c++;r<n-1;r++)if(LP(o,r))break}}parseMPEGPES(e,t){const i=t.data,s=i.length;let r=0,n=0;const a=t.pts;if(void 0!==a)while(n<s)if(cD(i,n)){const t=aD(e,i,n,a,r);if(!t)break;n+=t.length,r++}else n++;else this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")}parseAC3PES(e,t){{const i=t.data,s=t.pts;if(void 0===s)return void this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");const r=i.length;let n,a=0,o=0;while(o<r&&(n=gD(e,i,o,s,a++))>0)o+=n}}parseID3PES(e,t){if(void 0===t.pts)return void this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");const i=Nk({},t,{type:this._videoTrack?QP.emsg:QP.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(i)}}function kD(e,t){return((31&e[t+1])<<8)+e[t+2]}function ID(e,t){return(31&e[t+10])<<8|e[t+11]}function _D(e,t,i,s,r,n){const a={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=(15&e[t+1])<<8|e[t+2],l=t+3+o-4,c=(15&e[t+10])<<8|e[t+11];t+=12+c;while(t<l){const o=kD(e,t),l=(15&e[t+3])<<8|e[t+4];switch(e[t]){case 207:if(!s){RD("ADTS AAC",n);break}case 15:-1===a.audioPid&&(a.audioPid=o);break;case 21:-1===a.id3Pid&&(a.id3Pid=o);break;case 219:if(!s){RD("H.264",n);break}case 27:-1===a.videoPid&&(a.videoPid=o);break;case 3:case 4:i.mpeg||i.mp3?-1===a.audioPid&&(a.audioPid=o,a.segmentAudioCodec="mp3"):n.log("MPEG audio found, not supported in this browser");break;case 193:if(!s){RD("AC-3",n);break}case 129:i.ac3?-1===a.audioPid&&(a.audioPid=o,a.segmentAudioCodec="ac3"):n.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===a.audioPid&&l>0){let s=t+5,r=l;while(r>2){const t=e[s];switch(t){case 106:!0!==i.ac3?n.log("AC-3 audio found, not supported in this browser for now"):(a.audioPid=o,a.segmentAudioCodec="ac3");break}const l=e[s+1]+2;s+=l,r-=l}}break;case 194:case 135:return CD(r,new Error("Unsupported EC-3 in M2TS found"),void 0,n),a;case 36:-1===a.videoPid&&(a.videoPid=o,a.segmentVideoCodec="hevc",n.log("HEVC in M2TS found"));break}t+=l+5}return a}function CD(e,t,i,s){s.warn(`parsing error: ${t.message}`),e.emit(Ck.ERROR,Ck.ERROR,{type:Ik.MEDIA_ERROR,details:_k.FRAG_PARSING_ERROR,fatal:!1,levelRetry:i,error:t,reason:t.message})}function RD(e,t){t.log(`${e} with AES-128-CBC encryption found in unencrypted stream`)}function PD(e,t){let i,s,r,n,a,o=0;const l=e.data;if(!e||0===e.size)return null;while(l[0].length<19&&l.length>1)l[0]=BI(l[0],l[1]),l.splice(1,1);i=l[0];const c=(i[0]<<16)+(i[1]<<8)+i[2];if(1===c){if(s=(i[4]<<8)+i[5],s&&s>e.size-6)return null;const c=i[7];192&c&&(n=536870912*(14&i[9])+4194304*(255&i[10])+16384*(254&i[11])+128*(255&i[12])+(254&i[13])/2,64&c?(a=536870912*(14&i[14])+4194304*(255&i[15])+16384*(254&i[16])+128*(255&i[17])+(254&i[18])/2,n-a>54e5&&(t.warn(`${Math.round((n-a)/9e4)}s delta between PTS and DTS, align them`),n=a)):a=n),r=i[8];let d=r+9;if(e.size<=d)return null;e.size-=d;const h=new Uint8Array(e.size);for(let e=0,t=l.length;e<t;e++){i=l[e];let t=i.byteLength;if(d){if(d>t){d-=t;continue}i=i.subarray(d),t-=d,d=0}h.set(i,o),o+=t}return s&&(s-=r+3),{data:h,pts:n,dts:a,len:s}}return null}class DD{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const MD=Math.pow(2,32)-1;class OD{static init(){let e;for(e in OD.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},OD.types)OD.types.hasOwnProperty(e)&&(OD.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);OD.HDLR_TYPES={video:t,audio:i};const s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);OD.STTS=OD.STSC=OD.STCO=r,OD.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),OD.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),OD.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),OD.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const n=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),o=new Uint8Array([0,0,0,1]);OD.FTYP=OD.box(OD.types.ftyp,n,o,n,a),OD.DINF=OD.box(OD.types.dinf,OD.box(OD.types.dref,s))}static box(e,...t){let i=8,s=t.length;const r=s;while(s--)i+=t[s].byteLength;const n=new Uint8Array(i);for(n[0]=i>>24&255,n[1]=i>>16&255,n[2]=i>>8&255,n[3]=255&i,n.set(e,4),s=0,i=8;s<r;s++)n.set(t[s],i),i+=t[s].byteLength;return n}static hdlr(e){return OD.box(OD.types.hdlr,OD.HDLR_TYPES[e])}static mdat(e){return OD.box(OD.types.mdat,e)}static mdhd(e,t){t*=e;const i=Math.floor(t/(MD+1)),s=Math.floor(t%(MD+1));return OD.box(OD.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,s>>24,s>>16&255,s>>8&255,255&s,85,196,0,0]))}static mdia(e){return OD.box(OD.types.mdia,OD.mdhd(e.timescale||0,e.duration||0),OD.hdlr(e.type),OD.minf(e))}static mfhd(e){return OD.box(OD.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}static minf(e){return"audio"===e.type?OD.box(OD.types.minf,OD.box(OD.types.smhd,OD.SMHD),OD.DINF,OD.stbl(e)):OD.box(OD.types.minf,OD.box(OD.types.vmhd,OD.VMHD),OD.DINF,OD.stbl(e))}static moof(e,t,i){return OD.box(OD.types.moof,OD.mfhd(e),OD.traf(i,t))}static moov(e){let t=e.length;const i=[];while(t--)i[t]=OD.trak(e[t]);return OD.box.apply(null,[OD.types.moov,OD.mvhd(e[0].timescale||0,e[0].duration||0)].concat(i).concat(OD.mvex(e)))}static mvex(e){let t=e.length;const i=[];while(t--)i[t]=OD.trex(e[t]);return OD.box.apply(null,[OD.types.mvex,...i])}static mvhd(e,t){t*=e;const i=Math.floor(t/(MD+1)),s=Math.floor(t%(MD+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,s>>24,s>>16&255,s>>8&255,255&s,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return OD.box(OD.types.mvhd,r)}static sdtp(e){const t=e.samples||[],i=new Uint8Array(4+t.length);let s,r;for(s=0;s<t.length;s++)r=t[s].flags,i[s+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return OD.box(OD.types.sdtp,i)}static stbl(e){return OD.box(OD.types.stbl,OD.stsd(e),OD.box(OD.types.stts,OD.STTS),OD.box(OD.types.stsc,OD.STSC),OD.box(OD.types.stsz,OD.STSZ),OD.box(OD.types.stco,OD.STCO))}static avc1(e){let t,i,s,r=[],n=[];for(t=0;t<e.sps.length;t++)i=e.sps[t],s=i.byteLength,r.push(s>>>8&255),r.push(255&s),r=r.concat(Array.prototype.slice.call(i));for(t=0;t<e.pps.length;t++)i=e.pps[t],s=i.byteLength,n.push(s>>>8&255),n.push(255&s),n=n.concat(Array.prototype.slice.call(i));const a=OD.box(OD.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|e.sps.length].concat(r).concat([e.pps.length]).concat(n))),o=e.width,l=e.height,c=e.pixelRatio[0],d=e.pixelRatio[1];return OD.box(OD.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,OD.box(OD.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),OD.box(OD.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,255&t,0,0])}static mp4a(e){return OD.box(OD.types.mp4a,OD.audioStsd(e),OD.box(OD.types.esds,OD.esds(e)))}static mp3(e){return OD.box(OD.types[".mp3"],OD.audioStsd(e))}static ac3(e){return OD.box(OD.types["ac-3"],OD.audioStsd(e),OD.box(OD.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if("audio"===e.type){if("aac"===t)return OD.box(OD.types.stsd,OD.STSD,OD.mp4a(e));if("ac3"===t&&e.config)return OD.box(OD.types.stsd,OD.STSD,OD.ac3(e));if("mp3"===t&&"mp3"===e.codec)return OD.box(OD.types.stsd,OD.STSD,OD.mp3(e))}else{if(!e.pps||!e.sps)throw new Error("video track missing pps or sps");if("avc"===t)return OD.box(OD.types.stsd,OD.STSD,OD.avc1(e));if("hevc"===t&&e.vps)return OD.box(OD.types.stsd,OD.STSD,OD.hvc1(e))}throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,i=(e.duration||0)*(e.timescale||0),s=e.width||0,r=e.height||0,n=Math.floor(i/(MD+1)),a=Math.floor(i%(MD+1));return OD.box(OD.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,a>>24,a>>16&255,a>>8&255,255&a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>8&255,255&s,0,0,r>>8&255,255&r,0,0]))}static traf(e,t){const i=OD.sdtp(e),s=e.id,r=Math.floor(t/(MD+1)),n=Math.floor(t%(MD+1));return OD.box(OD.types.traf,OD.box(OD.types.tfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s])),OD.box(OD.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,n>>24,n>>16&255,n>>8&255,255&n])),OD.trun(e,i.length+16+20+8+16+8+8),i)}static trak(e){return e.duration=e.duration||4294967295,OD.box(OD.types.trak,OD.tkhd(e),OD.mdia(e))}static trex(e){const t=e.id;return OD.box(OD.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const i=e.samples||[],s=i.length,r=12+16*s,n=new Uint8Array(r);let a,o,l,c,d,h;for(t+=8+r,n.set(["video"===e.type?1:0,0,15,1,s>>>24&255,s>>>16&255,s>>>8&255,255&s,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),a=0;a<s;a++)o=i[a],l=o.duration,c=o.size,d=o.flags,h=o.cts,n.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,c>>>24&255,c>>>16&255,c>>>8&255,255&c,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,61440&d.degradPrio,15&d.degradPrio,h>>>24&255,h>>>16&255,h>>>8&255,255&h],12+16*a);return OD.box(OD.types.trun,n)}static initSegment(e){OD.types||OD.init();const t=OD.moov(e),i=BI(OD.FTYP,t);return i}static hvc1(e){const t=e.params,i=[e.vps,e.sps,e.pps],s=4,r=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),s-1|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),i.length]);let n=r.length;for(let p=0;p<i.length;p+=1){n+=3;for(let e=0;e<i[p].length;e+=1)n+=2+i[p][e].length}const a=new Uint8Array(n);a.set(r,0),n=r.length;const o=i.length-1;for(let p=0;p<i.length;p+=1){a.set(new Uint8Array([32+p|(p===o?128:0),0,i[p].length]),n),n+=3;for(let e=0;e<i[p].length;e+=1)a.set(new Uint8Array([i[p][e].length>>8,255&i[p][e].length]),n),n+=2,a.set(i[p][e],n),n+=i[p][e].length}const l=OD.box(OD.types.hvcC,a),c=e.width,d=e.height,h=e.pixelRatio[0],u=e.pixelRatio[1];return OD.box(OD.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,c>>8&255,255&c,d>>8&255,255&d,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),l,OD.box(OD.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),OD.box(OD.types.pasp,new Uint8Array([h>>24,h>>16&255,h>>8&255,255&h,u>>24,u>>16&255,u>>8&255,255&u])))}}OD.types=void 0,OD.HDLR_TYPES=void 0,OD.STTS=void 0,OD.STSC=void 0,OD.STCO=void 0,OD.STSZ=void 0,OD.VMHD=void 0,OD.SMHD=void 0,OD.STSD=void 0,OD.FTYP=void 0,OD.DINF=void 0;const ND=9e4;function BD(e,t,i=1,s=!1){const r=e*t*i;return s?Math.round(r):r}function FD(e,t,i=1,s=!1){return BD(e,t,1/i,s)}function $D(e,t=!1){return BD(e,1e3,1/ND,t)}function UD(e,t=1){return BD(e,ND,1/t)}const GD=1e4,HD=1024,jD=1152,zD=1536;let VD,YD=null,WD=null;function KD(e,t,i,s){return{duration:t,size:i,cts:s,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}class qD extends Gk{constructor(e,t,i,s){if(super("mp4-remuxer",s),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.ISGenerated=!1,null===YD){const e=navigator.userAgent||"",t=e.match(/Chrome\/(\d+)/i);YD=t?parseInt(t[1]):0}if(null===WD){const e=navigator.userAgent.match(/Safari\/(\d+)/i);WD=e?parseInt(e[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){this.log("initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const i=e[0].pts,s=e.reduce((e,s)=>{let r=s.pts,n=r-e;return n<-4294967296&&(t=!0,r=XD(r,i),n=r-e),n>0?e:r},i);return t&&this.debug("PTS rollover detected"),s}remux(e,t,i,s,r,n,a,o){let l,c,d,h,u,p,f=r,g=r;const m=e.pid>-1,v=t.pid>-1,y=t.samples.length,b=e.samples.length>0,E=a&&y>0||y>1,w=(!m||b)&&(!v||E)||this.ISGenerated||a;if(w){if(this.ISGenerated){var A,T,S,x;const e=this.videoTrackConfig;(e&&(t.width!==e.width||t.height!==e.height||(null==(A=t.pixelRatio)?void 0:A[0])!==(null==(T=e.pixelRatio)?void 0:T[0])||(null==(S=t.pixelRatio)?void 0:S[1])!==(null==(x=e.pixelRatio)?void 0:x[1]))||!e&&E||null===this.nextAudioTs&&b)&&this.resetInitSegment()}this.ISGenerated||(d=this.generateIS(e,t,r,n));const i=this.isVideoContiguous;let s,a=-1;if(E&&(a=QD(t.samples),!i&&this.config.forceKeyFrameOnDiscontinuity))if(p=!0,a>0){this.warn(`Dropped ${a} out of ${y} video samples due to a missing keyframe`);const e=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(a),t.dropped+=a,g+=(t.samples[0].pts-e)/t.inputTimeScale,s=g}else-1===a&&(this.warn(`No keyframe found out of ${y} video samples`),p=!1);if(this.ISGenerated){if(b&&E){const i=this.getVideoStartPts(t.samples),s=XD(e.samples[0].pts,i)-i,r=s/t.inputTimeScale;f+=Math.max(0,r),g+=Math.max(0,-r)}if(b){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),d=this.generateIS(e,t,r,n)),c=this.remuxAudio(e,f,this.isAudioContiguous,n,v||E||o===Pk.AUDIO?g:void 0),E){const s=c?c.endPTS-c.startPTS:0;t.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),d=this.generateIS(e,t,r,n)),l=this.remuxVideo(t,g,i,s)}}else E&&(l=this.remuxVideo(t,g,i,0));l&&(l.firstKeyFrame=a,l.independent=-1!==a,l.firstKeyFramePTS=s)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(i.samples.length&&(u=ZD(i,r,this._initPTS,this._initDTS)),s.samples.length&&(h=JD(s,r,this._initPTS))),{audio:c,video:l,initSegment:d,independent:p,text:h,id3:u}}generateIS(e,t,i,s){const r=e.samples,n=t.samples,a=this.typeSupported,o={},l=this._initPTS;let c,d,h,u,p=!l||s,f="audio/mp4";if(p&&(c=d=1/0),e.config&&r.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":a.mpeg?(f="audio/mpeg",e.codec=""):a.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}o.audio={id:"audio",container:f,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&a.mpeg?new Uint8Array(0):OD.initSegment([e]),metadata:{channelCount:e.channelCount}},p&&(u=e.id,h=e.inputTimeScale,l&&h===l.timescale?p=!1:c=d=r[0].pts-Math.round(h*i))}if(t.sps&&t.pps&&n.length){if(t.timescale=t.inputTimeScale,o.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:OD.initSegment([t]),metadata:{width:t.width,height:t.height}},p)if(u=t.id,h=t.inputTimeScale,l&&h===l.timescale)p=!1;else{const e=this.getVideoStartPts(n),t=Math.round(h*i);d=Math.min(d,XD(n[0].dts,e)-t),c=Math.min(c,e-t)}this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(o).length)return this.ISGenerated=!0,p?(this._initPTS={baseTime:c,timescale:h},this._initDTS={baseTime:d,timescale:h}):c=h=void 0,{tracks:o,initPTS:c,timescale:h,trackId:u}}remuxVideo(e,t,i,s){const r=e.inputTimeScale,n=e.samples,a=[],o=n.length,l=this._initPTS,c=l.baseTime*r/l.timescale;let d,h,u=this.nextVideoTs,p=8,f=this.videoSampleDuration,g=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,v=!1;if(!i||null===u){const e=c+t*r,s=n[0].pts-XD(n[0].dts,n[0].pts);YD&&null!==u&&Math.abs(e-s-(u+c))<15e3?i=!0:u=e-s-c}const y=u+c;for(let B=0;B<o;B++){const e=n[B];e.pts=XD(e.pts,y),e.dts=XD(e.dts,y),e.dts<n[B>0?B-1:B].dts&&(v=!0)}v&&n.sort(function(e,t){const i=e.dts-t.dts,s=e.pts-t.pts;return i||s}),d=n[0].dts,h=n[n.length-1].dts;const b=h-d,E=b?Math.round(b/(o-1)):f||e.inputTimeScale/30;if(i){const i=d-y,s=i>E,r=i<-1;if((s||r)&&(s?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${$D(i,!0)} ms (${i}dts) hole between fragments detected at ${t.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${$D(-i,!0)} ms (${i}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!r||y>=n[0].pts||YD)){d=y;const e=n[0].pts-i;if(s)n[0].dts=d,n[0].pts=e;else{let t=!0;for(let s=0;s<n.length;s++){if(n[s].dts>e&&t)break;const r=n[s].pts;if(n[s].dts-=i,n[s].pts-=i,s<n.length-1){const e=n[s+1].pts,i=n[s].pts,a=e<=i,o=e<=r;t=a==o}}}this.log(`Video: Initial PTS/DTS adjusted: ${$D(e,!0)}/${$D(d,!0)}, delta: ${$D(i,!0)} ms`)}}d=Math.max(0,d);let w=0,A=0,T=d;for(let B=0;B<o;B++){const e=n[B],t=e.units,i=t.length;let s=0;for(let r=0;r<i;r++)s+=t[r].data.length;A+=s,w+=i,e.length=s,e.dts<T?(e.dts=T,T+=E/4|0||1):T=e.dts,g=Math.min(e.pts,g),m=Math.max(e.pts,m)}h=n[o-1].dts;const S=A+4*w+8;let x;try{x=new Uint8Array(S)}catch(N){return void this.observer.emit(Ck.ERROR,Ck.ERROR,{type:Ik.MUX_ERROR,details:_k.REMUX_ALLOC_ERROR,fatal:!1,error:N,bytes:S,reason:`fail allocating video mdat ${S}`})}const L=new DataView(x.buffer);L.setUint32(0,S),x.set(OD.types.mdat,4);let k=!1,I=Number.POSITIVE_INFINITY,_=Number.POSITIVE_INFINITY,C=Number.NEGATIVE_INFINITY,R=Number.NEGATIVE_INFINITY;for(let B=0;B<o;B++){const e=n[B],t=e.units;let i,l=0;for(let s=0,r=t.length;s<r;s++){const e=t[s],i=e.data,r=e.data.byteLength;L.setUint32(p,r),p+=4,x.set(i,p),p+=r,l+=4+r}if(B<o-1)f=n[B+1].dts-e.dts,i=n[B+1].pts-e.pts;else{const t=this.config,a=B>0?e.dts-n[B-1].dts:E;if(i=B>0?e.pts-n[B-1].pts:E,t.stretchShortVideoTrack&&null!==this.nextAudioTs){const i=Math.floor(t.maxBufferHole*r),n=(s?g+s*r:this.nextAudioTs+c)-e.pts;n>i?(f=n-a,f<0?f=a:k=!0,this.log(`It is approximately ${n/90} ms to the next segment; using duration ${f/90} ms for the last video frame.`)):f=a}else f=a}const d=Math.round(e.pts-e.dts);I=Math.min(I,f),C=Math.max(C,f),_=Math.min(_,i),R=Math.max(R,i),a.push(KD(e.key,f,l,d))}if(a.length)if(YD){if(YD<70){const e=a[0].flags;e.dependsOn=2,e.isNonSync=0}}else if(WD&&R-_<C-I&&E/C<.025&&0===a[0].cts){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let e=d;for(let t=0,i=a.length;t<i;t++){const s=e+a[t].duration,r=e+a[t].cts;if(t<i-1){const e=s+a[t+1].cts;a[t].duration=e-r}else a[t].duration=t?a[t-1].duration:E;a[t].cts=0,e=s}}f=k||!f?E:f;const P=h+f;this.nextVideoTs=u=P-c,this.videoSampleDuration=f,this.isVideoContiguous=!0;const D=OD.moof(e.sequenceNumber++,d,Nk(e,{samples:a})),M="video",O={data1:D,data2:x,startPTS:(g-c)/r,endPTS:(m+f-c)/r,startDTS:(d-c)/r,endDTS:u/r,type:M,hasAudio:!1,hasVideo:!0,nb:a.length,dropped:e.dropped};return e.samples=[],e.dropped=0,O}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return jD;case"ac3":return zD;default:return HD}}remuxAudio(e,t,i,s,r){const n=e.inputTimeScale,a=e.samplerate?e.samplerate:n,o=n/a,l=this.getSamplesPerFrame(e),c=l*o,d=this._initPTS,h="mp3"===e.segmentCodec&&this.typeSupported.mpeg,u=[],p=void 0!==r;let f=e.samples,g=h?0:8,m=this.nextAudioTs||-1;const v=d.baseTime*n/d.timescale,y=v+t*n;if(this.isAudioContiguous=i=i||f.length&&m>0&&(s&&Math.abs(y-(m+v))<9e3||Math.abs(XD(f[0].pts,y)-(m+v))<20*c),f.forEach(function(e){e.pts=XD(e.pts,y)}),!i||m<0){if(f=f.filter(e=>e.pts>=0),!f.length)return;m=0===r?0:s&&!p?Math.max(0,y-v):f[0].pts-v}if("aac"===e.segmentCodec){const t=this.config.maxAudioFramesDrift;for(let i=0,s=m+v;i<f.length;i++){const r=f[i],a=r.pts,o=a-s,l=Math.abs(1e3*o/n);if(o<=-t*c&&p)0===i&&(this.warn(`Audio frame @ ${(a/n).toFixed(3)}s overlaps marker by ${Math.round(1e3*o/n)} ms.`),this.nextAudioTs=m=a-v,s=a);else if(o>=t*c&&l<GD&&p){let t=Math.round(o/c);s=a-t*c;while(s<0&&t&&c)t--,s+=c;0===i&&(this.nextAudioTs=m=s-v),this.warn(`Injecting ${t} audio frames @ ${((s-v)/n).toFixed(3)}s due to ${Math.round(1e3*o/n)} ms gap.`);for(let n=0;n<t;n++){let t=DD.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);t||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),t=r.unit.subarray()),f.splice(i,0,{unit:t,pts:s}),s+=c,i++}}r.pts=s,s+=c}}let b,E=null,w=null,A=0,T=f.length;while(T--)A+=f[T].unit.byteLength;for(let P=0,D=f.length;P<D;P++){const t=f[P],s=t.unit;let r=t.pts;if(null!==w){const e=u[P-1];e.duration=Math.round((r-w)/o)}else{if(i&&"aac"===e.segmentCodec&&(r=m+v),E=r,!(A>0))return;A+=g;try{b=new Uint8Array(A)}catch(R){return void this.observer.emit(Ck.ERROR,Ck.ERROR,{type:Ik.MUX_ERROR,details:_k.REMUX_ALLOC_ERROR,fatal:!1,error:R,bytes:A,reason:`fail allocating audio mdat ${A}`})}if(!h){const e=new DataView(b.buffer);e.setUint32(0,A),b.set(OD.types.mdat,4)}}b.set(s,g);const n=s.byteLength;g+=n,u.push(KD(!0,l,n,0)),w=r}const S=u.length;if(!S)return;const x=u[u.length-1];m=w-v,this.nextAudioTs=m+o*x.duration;const L=h?new Uint8Array(0):OD.moof(e.sequenceNumber++,E/o,Nk({},e,{samples:u}));e.samples=[];const k=(E-v)/n,I=m/n,_="audio",C={data1:L,data2:b,startPTS:k,endPTS:I,startDTS:k,endDTS:I,type:_,hasAudio:!0,hasVideo:!1,nb:S};return this.isAudioContiguous=!0,C}}function XD(e,t){let i;if(null===t)return e;i=t<e?-8589934592:8589934592;while(Math.abs(e-t)>4294967296)e+=i;return e}function QD(e){for(let t=0;t<e.length;t++)if(e[t].key)return t;return-1}function ZD(e,t,i,s){const r=e.samples.length;if(!r)return;const n=e.inputTimeScale;for(let o=0;o<r;o++){const r=e.samples[o];r.pts=XD(r.pts-i.baseTime*n/i.timescale,t*n)/n,r.dts=XD(r.dts-s.baseTime*n/s.timescale,t*n)/n}const a=e.samples;return e.samples=[],{samples:a}}function JD(e,t,i){const s=e.samples.length;if(!s)return;const r=e.inputTimeScale;for(let a=0;a<s;a++){const s=e.samples[a];s.pts=XD(s.pts-i.baseTime*r/i.timescale,t*r)/r}e.samples.sort((e,t)=>e.pts-t.pts);const n=e.samples;return e.samples=[],{samples:n}}class eM extends Gk{constructor(e,t,i,s){super("passthrough-remuxer",s),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const t=this.initPTS;t&&e&&t.baseTime===e.baseTime&&t.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,t,i,s){this.audioCodec=t,this.videoCodec=i,this.generateInitSegment(DI(e,s)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:i}=this;if(null==e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);const s=this.initData=LI(e);s.audio&&(t=sM(s.audio,lI.AUDIO,this)),s.video&&(i=sM(s.video,lI.VIDEO,this));const r={};s.audio&&s.video?r.audiovideo={container:"video/mp4",codec:t+","+i,supplemental:s.video.supplemental,initSegment:e,id:"main"}:s.audio?r.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:s.video?r.video={container:"video/mp4",codec:i,supplemental:s.video.supplemental,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=r}remux(e,t,i,s,r,n){var a,o;let{initPTS:l,lastEndTime:c}=this;const d={audio:void 0,video:void 0,text:s,id3:i,initSegment:void 0};xk(c)||(c=this.lastEndTime=r||0);const h=t.samples;if(null==h||!h.length)return d;const u={initPTS:void 0,timescale:void 0,trackId:void 0};let p=this.initData;if(null!=(a=p)&&a.length||(this.generateInitSegment(h),p=this.initData),null==(o=p)||!o.length)return this.warn("Failed to generate initSegment."),d;this.emitInitSegment&&(u.tracks=this.initTracks,this.emitInitSegment=!1);const f=OI(h,p,this),g=p.audio?f[p.audio.id]:null,m=p.video?f[p.video.id]:null,v=tM(m,1/0),y=tM(g,1/0),b=tM(m,0,!0),E=tM(g,0,!0);let w,A=r,T=0;if(g&&(!m||!l&&y<v||l&&l.trackId===p.audio.id)?(u.trackId=p.audio.id,w=g,T=E-y):m&&(u.trackId=p.video.id,w=m,T=b-v),w){const e=w.timescale;A=w.start/e,u.initPTS=w.start-r*e,u.timescale=e,l||(this.initPTS=l={baseTime:u.initPTS,timescale:e,trackId:u.trackId})}!n&&l||!iM(l,A,r,T)&&u.timescale===l.timescale||(u.initPTS=A-r,u.timescale=1,l&&1===l.timescale&&this.warn(`Adjusting initPTS @${r} from ${l.baseTime/l.timescale} to ${u.initPTS}`),this.initPTS=l={baseTime:u.initPTS,timescale:1});const S=e?A-l.baseTime/l.timescale:c,x=S+T;T>0?this.lastEndTime=x:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const L=!!p.audio,k=!!p.video;let I="";L&&(I+="audio"),k&&(I+="video");const _={data1:h,startPTS:S,startDTS:S,endPTS:x,endDTS:x,type:I,hasAudio:L,hasVideo:k,nb:1,dropped:0};d.audio=L&&!k?_:void 0,d.video=k?_:void 0;const C=null==m?void 0:m.sampleCount;if(C){const e=m.keyFrameIndex,t=-1!==e;_.nb=C,_.dropped=0===e||this.isVideoContiguous?0:t?e:C,_.independent=t,_.firstKeyFrame=e,t&&m.keyFrameStart&&(_.firstKeyFramePTS=(m.keyFrameStart-l.baseTime)/l.timescale),this.isVideoContiguous||(d.independent=t),this.isVideoContiguous||(this.isVideoContiguous=t),_.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${e}/${C} dropped: ${_.dropped} start: ${_.firstKeyFramePTS||"NA"}`)}return d.initSegment=u,d.id3=ZD(i,r,l,l),s.samples.length&&(d.text=JD(s,r,l)),d}}function tM(e,t,i=!1){return void 0!==(null==e?void 0:e.start)?(e.start+(i?e.duration:0))/e.timescale:t}function iM(e,t,i,s){if(null===e)return!0;const r=Math.max(s,1),n=t-e.baseTime/e.timescale;return Math.abs(n-i)>r}function sM(e,t,i){const s=null==e?void 0:e.codec;if(s&&s.length>4)return s;if(t===lI.AUDIO){if("ec-3"===s||"ac-3"===s||"alac"===s)return s;if("fLaC"===s||"Opus"===s){const e=!1;return s_(s,e)}return i.warn(`Unhandled audio codec "${s}" in mp4 MAP`),s||"mp4a"}return i.warn(`Unhandled video codec "${s}" in mp4 MAP`),s||"avc1"}try{VD=self.performance.now.bind(self.performance)}catch(iH){VD=Date.now}const rM=[{demux:yD,remux:eM},{demux:LD,remux:qD},{demux:uD,remux:qD},{demux:mD,remux:qD}];rM.splice(2,0,{demux:fD,remux:qD});class nM{constructor(e,t,i,s,r,n){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=i,this.id=r,this.logger=n}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,i,s){const r=i.transmuxing;r.executeStart=VD();let n=new Uint8Array(e);const{currentTransmuxState:a,transmuxConfig:o}=this;s&&(this.currentTransmuxState=s);const{contiguous:l,discontinuity:c,trackSwitch:d,accurateTimeOffset:h,timeOffset:u,initSegmentChange:p}=s||a,{audioCodec:f,videoCodec:g,defaultInitPts:m,duration:v,initSegmentData:y}=o,b=aM(n,t);if(b&&KC(b.method)){const e=this.getDecrypter(),t=qC(b.method);if(!e.isSync())return this.asyncResult=!0,this.decryptionPromise=e.webCryptoDecrypt(n,b.key.buffer,b.iv.buffer,t).then(e=>{const t=this.push(e,null,i);return this.decryptionPromise=null,t}),this.decryptionPromise;{let s=e.softwareDecrypt(n,b.key.buffer,b.iv.buffer,t);const a=i.part>-1;if(a){const t=e.flush();s=t?t.buffer:t}if(!s)return r.executeEnd=VD(),oM(i);n=new Uint8Array(s)}}const E=this.needsProbing(c,d);if(E){const e=this.configureTransmuxer(n);if(e)return this.logger.warn(`[transmuxer] ${e.message}`),this.observer.emit(Ck.ERROR,Ck.ERROR,{type:Ik.MEDIA_ERROR,details:_k.FRAG_PARSING_ERROR,fatal:!1,error:e,reason:e.message}),r.executeEnd=VD(),oM(i)}(c||d||p||E)&&this.resetInitSegment(y,f,g,v,t),(c||p||E)&&this.resetInitialTimestamp(m),l||this.resetContiguity();const w=this.transmux(n,b,u,h,i);this.asyncResult=lM(w);const A=this.currentTransmuxState;return A.contiguous=!0,A.discontinuity=!1,A.trackSwitch=!1,r.executeEnd=VD(),w}flush(e){const t=e.transmuxing;t.executeStart=VD();const{decrypter:i,currentTransmuxState:s,decryptionPromise:r}=this;if(r)return this.asyncResult=!0,r.then(()=>this.flush(e));const n=[],{timeOffset:a}=s;if(i){const t=i.flush();t&&n.push(this.push(t.buffer,null,e))}const{demuxer:o,remuxer:l}=this;if(!o||!l){t.executeEnd=VD();const i=[oM(e)];return this.asyncResult?Promise.resolve(i):i}const c=o.flush(a);return lM(c)?(this.asyncResult=!0,c.then(t=>(this.flushRemux(n,t,e),n))):(this.flushRemux(n,c,e),this.asyncResult?Promise.resolve(n):n)}flushRemux(e,t,i){const{audioTrack:s,videoTrack:r,id3Track:n,textTrack:a}=t,{accurateTimeOffset:o,timeOffset:l}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${i.sn}${i.part>-1?" part: "+i.part:""} of ${this.id===Pk.MAIN?"level":"track"} ${i.level}`);const c=this.remuxer.remux(s,r,n,a,l,o,!0,this.id);e.push({remuxResult:c,chunkMeta:i}),i.transmuxing.executeEnd=VD()}resetInitialTimestamp(e){const{demuxer:t,remuxer:i}=this;t&&i&&(t.resetTimeStamp(e),i.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,i,s,r){const{demuxer:n,remuxer:a}=this;n&&a&&(n.resetInitSegment(e,t,i,s),a.resetInitSegment(e,t,i,r))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,i,s,r){let n;return n=t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,i,s,r):this.transmuxUnencrypted(e,i,s,r),n}transmuxUnencrypted(e,t,i,s){const{audioTrack:r,videoTrack:n,id3Track:a,textTrack:o}=this.demuxer.demux(e,t,!1,!this.config.progressive),l=this.remuxer.remux(r,n,a,o,t,i,!1,this.id);return{remuxResult:l,chunkMeta:s}}transmuxSampleAes(e,t,i,s,r){return this.demuxer.demuxSampleAes(e,t,i).then(e=>{const t=this.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,i,s,!1,this.id);return{remuxResult:t,chunkMeta:r}})}configureTransmuxer(e){const{config:t,observer:i,typeSupported:s}=this;let r;for(let d=0,h=rM.length;d<h;d++){var n;if(null!=(n=rM[d].demux)&&n.probe(e,this.logger)){r=rM[d];break}}if(!r)return new Error("Failed to find demuxer by probing fragment data");const a=this.demuxer,o=this.remuxer,l=r.remux,c=r.demux;o&&o instanceof l||(this.remuxer=new l(i,t,s,this.logger)),a&&a instanceof c||(this.demuxer=new c(i,t,s,this.logger),this.probe=c.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new AC(this.config)),e}}function aM(e,t){let i=null;return e.byteLength>0&&null!=(null==t?void 0:t.key)&&null!==t.iv&&null!=t.method&&(i=t),i}const oM=e=>({remuxResult:{},chunkMeta:e});function lM(e){return"then"in e&&e.then instanceof Function}class cM{constructor(e,t,i,s,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=i,this.duration=s,this.defaultInitPts=r||null}}class dM{constructor(e,t,i,s,r,n){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=i,this.trackSwitch=s,this.timeOffset=r,this.initSegmentChange=n}}let hM=0;class uM{constructor(e,t,i,s){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=hM++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=e=>{const t=e.data,i=this.hls;if(i&&null!=t&&t.event&&t.instanceNo===this.instanceNo)switch(t.event){case"init":{var s;const e=null==(s=this.workerContext)?void 0:s.objectURL;e&&self.URL.revokeObjectURL(e);break}case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":i.logger[t.data.logType]&&i.logger[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.part=this.part,t.data.id=this.id,i.trigger(t.event,t.data);break}},this.onWorkerError=e=>{if(!this.hls)return;const t=new Error(`${e.message}  (${e.filename}:${e.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(Ck.ERROR,{type:Ik.OTHER_ERROR,details:_k.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:t})};const r=e.config;this.hls=e,this.id=t,this.useWorker=!!r.enableWorker,this.onTransmuxComplete=i,this.onFlush=s;const n=(e,t)=>{t=t||{},t.frag=this.frag||void 0,e===Ck.ERROR&&(t.parent=this.id,t.part=this.part,this.error=t.error),this.hls.trigger(e,t)};this.observer=new dP,this.observer.on(Ck.FRAG_DECRYPTED,n),this.observer.on(Ck.ERROR,n);const a=c_(r.preferManagedMediaSource);if(this.useWorker&&"undefined"!==typeof Worker){const i=this.hls.logger,s=r.workerPath||pP();if(s){try{r.workerPath?(i.log(`loading Web Worker ${r.workerPath} for "${t}"`),this.workerContext=gP(r.workerPath)):(i.log(`injecting Web Worker for "${t}"`),this.workerContext=fP());const{worker:e}=this.workerContext;e.addEventListener("message",this.onWorkerMessage),e.addEventListener("error",this.onWorkerError),e.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:a,id:t,config:P_(r)})}catch(iH){i.warn(`Error setting up "${t}" Web Worker, fallback to inline`,iH),this.terminateWorker(),this.error=null,this.transmuxer=new nM(this.observer,a,r,"",t,e.logger)}return}}this.transmuxer=new nM(this.observer,a,r,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=hM++;const t=this.hls.config,i=c_(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:i,id:this.id,config:P_(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),mP(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,i,s,r,n,a,o,l,c){var d,h;l.transmuxing.start=self.performance.now();const{instanceNo:u,transmuxer:p}=this,f=n?n.start:r.start,g=r.decryptdata,m=this.frag,v=!(m&&r.cc===m.cc),y=!(m&&l.level===m.level),b=m?l.sn-m.sn:-1,E=this.part?l.part-this.part.index:-1,w=0===b&&l.id>1&&l.id===(null==m?void 0:m.stats.chunkCount),A=!y&&(1===b||0===b&&(1===E||w&&E<=0)),T=self.performance.now();(y||b||0===r.stats.parsing.start)&&(r.stats.parsing.start=T),!n||!E&&A||(n.stats.parsing.start=T);const S=!(m&&(null==(d=r.initSegment)?void 0:d.url)===(null==(h=m.initSegment)?void 0:h.url)),x=new dM(v,A,o,y,f,S);if(!A||v||S){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${r.type} sn: ${l.sn}${l.part>-1?" part: "+l.part:""} ${this.id===Pk.MAIN?"level":"track"}: ${l.level} id: ${l.id}\n        discontinuity: ${v}\n        trackSwitch: ${y}\n        contiguous: ${A}\n        accurateTimeOffset: ${o}\n        timeOffset: ${f}\n        initSegmentChange: ${S}`);const e=new cM(i,s,t,a,c);this.configureTransmuxer(e)}if(this.frag=r,this.part=n,this.workerContext)this.workerContext.worker.postMessage({instanceNo:u,cmd:"demux",data:e,decryptdata:g,chunkMeta:l,state:x},e instanceof ArrayBuffer?[e]:[]);else if(p){const t=p.push(e,g,l,x);lM(t)?t.then(e=>{this.handleTransmuxComplete(e)}).catch(e=>{this.transmuxerError(e,l,"transmuxer-interface push error")}):this.handleTransmuxComplete(t)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:i}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(i){const t=i.flush(e);lM(t)?t.then(t=>{this.handleFlushResult(t,e)}).catch(t=>{this.transmuxerError(t,e,"transmuxer-interface flush error")}):this.handleFlushResult(t,e)}}transmuxerError(e,t,i){this.hls&&(this.error=e,this.hls.trigger(Ck.ERROR,{type:Ik.MEDIA_ERROR,details:_k.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:i}))}handleFlushResult(e,t){e.forEach(e=>{this.handleTransmuxComplete(e)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:i}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):i&&i.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const pM=100;class fM extends iP{constructor(e,t,i){super(e,t,i,"audio-stream-controller",Pk.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(Ck.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Ck.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(Ck.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Ck.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(Ck.BUFFER_RESET,this.onBufferReset,this),e.on(Ck.BUFFER_CREATED,this.onBufferCreated,this),e.on(Ck.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Ck.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Ck.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(Ck.FRAG_LOADING,this.onFragLoading,this),e.on(Ck.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(Ck.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Ck.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(Ck.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Ck.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(Ck.BUFFER_RESET,this.onBufferReset,this),e.off(Ck.BUFFER_CREATED,this.onBufferCreated,this),e.off(Ck.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Ck.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Ck.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(Ck.FRAG_LOADING,this.onFragLoading,this),e.off(Ck.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:i,initPTS:s,timescale:r}){if(i===Pk.MAIN){const e=t.cc,i=this.fragCurrent;if(this.initPTS[e]={baseTime:s,timescale:r},this.log(`InitPTS for cc: ${e} found from main: ${s}/${r}`),this.mainAnchor=t,this.state===tP.WAITING_INIT_PTS){const i=this.waitingData;(!i&&!this.loadingParts||i&&i.frag.cc!==e)&&this.syncWithAnchor(t,null==i?void 0:i.frag)}else!this.hls.hasEnoughToStart&&i&&i.cc!==e?(i.abortRequests(),this.syncWithAnchor(t,i)):this.state===tP.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,t){var i;const s=(null==(i=this.mainFragLoading)?void 0:i.frag)||null;if(t&&(null==s?void 0:s.cc)===t.cc)return;const r=(s||e).cc,n=this.getLevelDetails(),a=this.getLoadPosition(),o=J_(n,r,a);o&&(this.log(`Syncing with main frag at ${o.start} cc ${o.cc}`),this.startFragRequested=!1,this.nextLoadPosition=o.start,this.resetLoadingState(),this.state===tP.IDLE&&this.doTickIdle())}startLoad(e,t){if(!this.levels)return this.startPosition=e,void(this.state=tP.STOPPED);const i=this.lastCurrentTime;this.stopLoad(),this.setInterval(pM),i>0&&-1===e?(this.log(`Override startPosition with lastCurrentTime @${i.toFixed(3)}`),e=i,this.state=tP.IDLE):this.state=tP.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case tP.IDLE:this.doTickIdle();break;case tP.WAITING_TRACK:{const{levels:e,trackId:t}=this,i=null==e?void 0:e[t],s=null==i?void 0:i.details;if(s&&!this.waitForLive(i)){if(this.waitForCdnTuneIn(s))break;this.state=tP.WAITING_INIT_PTS}break}case tP.FRAG_LOADING_WAITING_RETRY:{var e;const t=performance.now(),i=this.retryDate;if(!i||t>=i||null!=(e=this.media)&&e.seeking){const{levels:e,trackId:t}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((null==e?void 0:e[t])||null),this.state=tP.IDLE}break}case tP.WAITING_INIT_PTS:{const e=this.waitingData;if(e){const{frag:t,part:i,cache:s,complete:r}=e,n=this.mainAnchor;if(void 0!==this.initPTS[t.cc]){this.waitingData=null,this.state=tP.FRAG_LOADING;const e=s.flush().buffer,n={frag:t,part:i,payload:e,networkDetails:null};this._handleFragmentLoadProgress(n),r&&super._handleFragmentLoadComplete(n)}else n&&n.cc!==e.frag.cc&&this.syncWithAnchor(n,e.frag)}else this.state=tP.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:i,media:s,trackId:r}=this,n=t.config;if(!this.buffering||!s&&!this.primaryPrefetch&&(this.startFragRequested||!n.startFragPrefetch)||null==i||!i[r])return;const a=i[r],o=a.details;if(!o||this.waitForLive(a)||this.waitForCdnTuneIn(o))return this.state=tP.WAITING_TRACK,void(this.startFragRequested=!1);const l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,lI.AUDIO,Pk.AUDIO));const c=this.getFwdBufferInfo(l,Pk.AUDIO);if(null===c)return;if(!this.switchingTrack&&this._streamEnded(c,o))return t.trigger(Ck.BUFFER_EOS,{type:"audio"}),void(this.state=tP.ENDED);const d=c.len,h=t.maxBufferLength,u=o.fragments,p=u[0].start,f=this.getLoadPosition(),g=this.flushing?f:c.end;if(this.switchingTrack&&s){const e=f;o.PTSKnown&&e<p&&(c.end>p||c.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),s.currentTime=p+.05)}if(d>=h&&!this.switchingTrack&&g<u[u.length-1].start)return;let m=this.getNextFragment(g,o);if(m&&this.isLoopLoading(m,g)&&(m=this.getNextFragmentLoopLoading(m,o,c,Pk.MAIN,h)),!m)return void(this.bufferFlushed=!0);let v=(null==(e=this.mainFragLoading)?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&v&&dI(m)&&!m.endList&&(!o.live||!this.loadingParts&&g<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(v)===dC.OK&&(this.mainFragLoading=v=null),v&&dI(v))){if(m.start>v.end){const e=this.fragmentTracker.getFragAtPos(g,Pk.MAIN);e&&e.end>v.end&&(v=e,this.mainFragLoading={frag:e,targetBufferTime:null})}const e=m.start>v.end;if(e)return}this.loadFragment(m,a,g)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(e=>new k_(e))}onAudioTrackSwitching(e,t){const i=!!t.url;this.trackId=t.id;const{fragCurrent:s}=this;s&&(s.abortRequests(),this.removeUnbufferedFrags(s.start)),this.resetLoadingState(),i?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==tP.STOPPED&&(this.setInterval(pM),this.state=tP.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const i=this.cachedTrackLoadedData;i&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(Ck.AUDIO_TRACK_LOADED,i))}onAudioTrackLoaded(e,t){var i;const{levels:s}=this,{details:r,id:n,groupId:a,track:o}=t;if(!s)return void this.warn(`Audio tracks reset while loading track ${n} "${o.name}" of "${a}"`);const l=this.mainDetails;if(!l||r.endCC>l.endCC||l.expired)return this.cachedTrackLoadedData=t,void(this.state!==tP.STOPPED&&(this.state=tP.WAITING_TRACK));this.cachedTrackLoadedData=null,this.log(`Audio track ${n} "${o.name}" of "${a}" loaded [${r.startSN},${r.endSN}]${r.lastPartSn?`[part-${r.lastPartSn}-${r.lastPartIndex}]`:""},duration:${r.totalduration}`);const c=s[n];let d=0;if(r.live||null!=(i=c.details)&&i.live){if(this.checkLiveUpdate(r),r.deltaUpdateFailed)return;var h;if(c.details)d=this.alignPlaylists(r,c.details,null==(h=this.levelLastLoaded)?void 0:h.details);r.alignedSliding||(ZR(r,l),r.alignedSliding||JR(r,l),d=r.fragmentStart)}c.details=r,this.levelLastLoaded=c,this.startFragRequested||this.setStartPosition(l,d),this.hls.trigger(Ck.AUDIO_TRACK_UPDATED,{details:r,id:n,groupId:t.groupId}),this.state!==tP.WAITING_TRACK||this.waitForCdnTuneIn(r)||(this.state=tP.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const i=e.frag,{part:s,payload:r}=e,{config:n,trackId:a,levels:o}=this;if(!o)return void this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);const l=o[a];if(!l)return void this.warn("Audio track is undefined on fragment load progress");const c=l.details;if(!c)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(i.start);const d=n.defaultAudioCodec||l.audioCodec||"mp4a.40.2";let h=this.transmuxer;h||(h=this.transmuxer=new uM(this.hls,Pk.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const u=this.initPTS[i.cc],p=null==(t=i.initSegment)?void 0:t.data;if(void 0!==u){const e=!1,t=s?s.index:-1,n=-1!==t,a=new CC(i.level,i.sn,i.stats.chunkCount,r.byteLength,t,n);h.push(r,p,d,"",i,s,c.totalduration,e,a,u)}else{this.log(`Unknown video PTS for cc ${i.cc}, waiting for video PTS before demuxing audio frag ${i.sn} of [${c.startSN} ,${c.endSN}],track ${a}`);const{cache:e}=this.waitingData=this.waitingData||{frag:i,part:s,cache:new rP,complete:!1};e.push(new Uint8Array(r)),this.state!==tP.STOPPED&&(this.state=tP.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){this.waitingData?this.waitingData.complete=!0:super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const i=t.tracks.audio;i&&(this.mediaBuffer=i.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===Pk.MAIN&&dI(t.frag)&&(this.mainFragLoading=t,this.state===tP.IDLE&&this.tick())}onFragBuffered(e,t){const{frag:i,part:s}=t;if(i.type===Pk.AUDIO)if(this.fragContextChanged(i))this.warn(`Fragment ${i.sn}${s?" p: "+s.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);else{if(dI(i)){this.fragPrevious=i;const e=this.switchingTrack;e&&(this.bufferedTrack=e,this.switchingTrack=null,this.hls.trigger(Ck.AUDIO_TRACK_SWITCHED,Fk({},e)))}this.fragBufferedComplete(i,s),this.media&&this.tick()}else this.audioOnly||i.type!==Pk.MAIN||i.elementaryStreams.video||i.elementaryStreams.audiovideo||(this.audioOnly=!0,this.mainFragLoading=null)}onError(e,t){var i;if(t.fatal)this.state=tP.ERROR;else switch(t.details){case _k.FRAG_GAP:case _k.FRAG_PARSING_ERROR:case _k.FRAG_DECRYPT_ERROR:case _k.FRAG_LOAD_ERROR:case _k.FRAG_LOAD_TIMEOUT:case _k.KEY_LOAD_ERROR:case _k.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Pk.AUDIO,t);break;case _k.AUDIO_TRACK_LOAD_ERROR:case _k.AUDIO_TRACK_LOAD_TIMEOUT:case _k.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==tP.WAITING_TRACK||(null==(i=t.context)?void 0:i.type)!==Rk.AUDIO_TRACK||(this.state=tP.IDLE);break;case _k.BUFFER_ADD_CODEC_ERROR:case _k.BUFFER_APPEND_ERROR:if("audio"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)||this.resetLoadingState();break;case _k.BUFFER_FULL_ERROR:if("audio"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case _k.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==lI.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==lI.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===tP.ENDED&&(this.state=tP.IDLE);const e=this.mediaBuffer||this.media;e&&(this.afterBufferFlushed(e,t,Pk.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const i="audio",{hls:s}=this,{remuxResult:r,chunkMeta:n}=e,a=this.getCurrentContext(n);if(!a)return void this.resetWhenMissingContext(n);const{frag:o,part:l,level:c}=a,{details:d}=c,{audio:h,text:u,id3:p,initSegment:f}=r;if(!this.fragContextChanged(o)&&d){if(this.state=tP.PARSING,this.switchingTrack&&h&&this.completeAudioSwitch(this.switchingTrack),null!=f&&f.tracks){const e=o.initSegment||o;this._bufferInitSegment(c,f.tracks,e,n),s.trigger(Ck.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:i,tracks:f.tracks})}if(h){const{startPTS:e,endPTS:t,startDTS:i,endDTS:s}=h;l&&(l.elementaryStreams[lI.AUDIO]={startPTS:e,endPTS:t,startDTS:i,endDTS:s}),o.setElementaryStreamInfo(lI.AUDIO,e,t,i,s),this.bufferFragmentData(h,o,l,n)}if(null!=p&&null!=(t=p.samples)&&t.length){const e=Nk({id:i,frag:o,details:d},p);s.trigger(Ck.FRAG_PARSING_METADATA,e)}if(u){const e=Nk({id:i,frag:o,details:d},u);s.trigger(Ck.FRAG_PARSING_USERDATA,e)}}else this.fragmentTracker.removeFragment(o)}_bufferInitSegment(e,t,i,s){if(this.state!==tP.PARSING)return;if(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio)return;const r=t.audio;r.id=Pk.AUDIO;const n=e.audioCodec;this.log(`Init audio buffer, container:${r.container}, codecs[level/parsed]=[${n}/${r.codec}]`),n&&1===n.split(",").length&&(r.levelCodec=n),this.hls.trigger(Ck.BUFFER_CODECS,t);const a=r.initSegment;if(null!=a&&a.byteLength){const e={type:"audio",frag:i,part:null,chunkMeta:s,parent:i.type,data:a};this.hls.trigger(Ck.BUFFER_APPENDING,e)}this.tickImmediate()}loadFragment(e,t,i){const s=this.fragmentTracker.getState(e);var r;if(this.switchingTrack||s===dC.NOT_LOADED||s===dC.PARTIAL)if(dI(e))if(null!=(r=t.details)&&r.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=tP.WAITING_INIT_PTS;const i=this.mainDetails;i&&i.fragmentStart!==t.details.fragmentStart&&JR(t.details,i)}else super.loadFragment(e,t,i);else this._loadInitSegment(e,t);else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:i,assocLang:s,characteristics:r,audioCodec:n,channels:a}=this.bufferedTrack;$_({name:t,lang:i,assocLang:s,characteristics:r,audioCodec:n,channels:a},e,H_)||(V_(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(Ck.AUDIO_TRACK_SWITCHED,Fk({},e))}}class gM extends Gk{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,i){const s=null==t?void 0:t.renditionReports;if(s){let n=-1;for(let i=0;i<s.length;i++){const a=s[i];let o;try{o=new self.URL(a.URI,t.url).href}catch(r){this.warn(`Could not construct new URL for Rendition Report: ${r}`),o=a.URI||""}if(o===e){n=i;break}o===e.substring(0,o.length)&&(n=i)}if(-1!==n){const e=s[n],r=parseInt(e["LAST-MSN"])||(null==t?void 0:t.lastPartSn);let a=parseInt(e["LAST-PART"])||(null==t?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const e=Math.min(t.age-t.partTarget,t.targetduration);a>=0&&e>t.partTarget&&(a+=1)}const o=i&&x_(i);return new L_(r,a>=0?a:void 0,o)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(i){this.warn(`Could not construct new URL with HLS Delivery Directives: ${i}`)}return e}playlistLoaded(e,t,i){const{details:s,stats:r}=t,n=self.performance.now(),a=r.loading.first?Math.max(0,n-r.loading.first):0;s.advancedDateTime=Date.now()-a;const o=this.hls.config.timelineOffset;if(o!==s.appliedTimelineOffset){const e=Math.max(o||0,0);s.appliedTimelineOffset=e,s.fragments.forEach(t=>{t.start=t.playlistOffset+e})}if(s.live||null!=i&&i.live){const o="levelInfo"in t?t.levelInfo:t.track;if(s.reloaded(i),i&&s.fragments.length>0){OR(i,s);const e=s.playlistParsingError;if(e){this.warn(e);const i=this.hls;if(!i.config.ignorePlaylistParsingErrors){var l;const{networkDetails:n}=t;return void i.trigger(Ck.ERROR,{type:Ik.NETWORK_ERROR,details:_k.LEVEL_PARSING_ERROR,fatal:!1,url:s.url,error:e,reason:e.message,level:t.level||void 0,parent:null==(l=s.fragments[0])?void 0:l.type,networkDetails:n,stats:r})}s.playlistParsingError=null}}-1===s.requestScheduled&&(s.requestScheduled=r.loading.start);const c=this.hls.mainForwardBufferInfo,d=c?c.end-c.len:0,h=1e3*(s.edge-d),u=HR(s,h);if(s.requestScheduled+u<n?s.requestScheduled=n:s.requestScheduled+=u,this.log(`live playlist ${e} ${s.advanced?"REFRESHED "+s.lastPartSn+"-"+s.lastPartIndex:s.updated?"UPDATED":"MISSED"}`),!this.canLoad||!s.live)return;let p,f,g;if(s.canBlockReload&&s.endSN&&s.advanced){const e=this.hls.config.lowLatencyMode,r=s.lastPartSn,a=s.endSN,l=s.lastPartIndex,c=-1!==l,d=r===a;c?d?(f=a+1,g=e?0:l):(f=r,g=e?l+1:s.maxPartIndex):f=a+1;const h=s.age,u=h+s.ageHeader;let m=Math.min(u-s.partTarget,1.5*s.targetduration);if(m>0){if(u>3*s.targetduration)this.log(`Playlist last advanced ${h.toFixed(2)}s ago. Omitting segment and part directives.`),f=void 0,g=void 0;else if(null!=i&&i.tuneInGoal&&u-s.partTarget>i.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${i.tuneInGoal} to: ${m} with playlist age: ${s.age}`),m=0;else{const e=Math.floor(m/s.targetduration);if(f+=e,void 0!==g){const e=Math.round(m%s.targetduration/s.partTarget);g+=e}this.log(`CDN Tune-in age: ${s.ageHeader}s last advanced ${h.toFixed(2)}s goal: ${m} skip sn ${e} to part ${g}`)}s.tuneInGoal=m}if(p=this.getDeliveryDirectives(s,t.deliveryDirectives,f,g),e||!d)return s.requestScheduled=n,void this.loadingPlaylist(o,p)}else(s.canBlockReload||s.canSkipUntil)&&(p=this.getDeliveryDirectives(s,t.deliveryDirectives,f,g));p&&void 0!==f&&s.canBlockReload&&(s.requestScheduled=r.loading.first+Math.max(u-2*a,u/2)),this.scheduleLoading(o,p,s)}else this.clearTimer()}scheduleLoading(e,t,i){const s=i||e.details;if(!s)return void this.loadingPlaylist(e,t);const r=self.performance.now(),n=s.requestScheduled;if(r>=n)return void this.loadingPlaylist(e,t);const a=n-r;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(a)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),a)}getDeliveryDirectives(e,t,i,s){let r=x_(e);return null!=t&&t.skip&&e.deltaUpdateFailed&&(i=t.msn,s=t.part,r=S_.No),new L_(i,s,r)}checkRetry(e){const t=e.details,i=eC(e),s=e.errorAction,{action:r,retryCount:n=0,retryConfig:a}=s||{},o=!!s&&!!a&&(r===aC.RetryRequest||!s.resolved&&r===aC.SendAlternateToPenaltyBox);if(o){var l;if(n>=a.maxNumRetry)return!1;if(i&&null!=(l=e.context)&&l.deliveryDirectives)this.warn(`Retrying playlist loading ${n+1}/${a.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const e=iC(a,n);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),e),this.warn(`Retrying playlist loading ${n+1}/${a.maxNumRetry} after "${t}" in ${e}ms`)}e.levelRetry=!0,s.resolved=!0}return o}}function mM(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!vM(e[i].attrs,t[i].attrs))return!1;return!0}function vM(e,t,i){const s=e["STABLE-RENDITION-ID"];return s&&!i?s===t["STABLE-RENDITION-ID"]:!(i||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(i=>e[i]!==t[i])}function yM(e,t){return t.label.toLowerCase()===e.name.toLowerCase()&&(!t.language||t.language.toLowerCase()===(e.lang||"").toLowerCase())}class bM extends gM{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Ck.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Ck.LEVEL_LOADING,this.onLevelLoading,this),e.on(Ck.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Ck.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(Ck.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Ck.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Ck.LEVEL_LOADING,this.onLevelLoading,this),e.off(Ck.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Ck.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(Ck.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:i,groupId:s,details:r}=t,n=this.tracksInGroup[i];if(!n||n.groupId!==s)return void this.warn(`Audio track with id:${i} and group:${s} not found in active group ${null==n?void 0:n.groupId}`);const a=n.details;n.details=t.details,this.log(`Audio track ${i} "${n.name}" lang:${n.lang} group:${s} loaded [${r.startSN}-${r.endSN}]`),i===this.trackId&&this.playlistLoaded(i,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const i=t.audioGroups||null,s=this.groupIds;let r=this.currentTrack;if(!i||(null==s?void 0:s.length)!==(null==i?void 0:i.length)||null!=i&&i.some(e=>-1===(null==s?void 0:s.indexOf(e)))){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter(e=>!i||-1!==i.indexOf(e.groupId));if(e.length)this.selectDefaultTrack&&!e.some(e=>e.default)&&(this.selectDefaultTrack=!1),e.forEach((e,t)=>{e.id=t});else if(!r&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.audioPreference;if(!r&&t){const i=F_(t,e,H_);if(i>-1)r=e[i];else{const e=F_(t,this.tracks);r=this.tracks[e]}}let s=this.findTrackId(r);-1===s&&r&&(s=this.findTrackId(null));const a={audioTracks:e};this.log(`Updating audio tracks, ${e.length} track(s) found in group(s): ${null==i?void 0:i.join(",")}`),this.hls.trigger(Ck.AUDIO_TRACKS_UPDATED,a);const o=this.trackId;if(-1!==s&&-1===o)this.setAudioTrack(s);else if(e.length&&-1===o){var n;const t=new Error(`No audio track selected for current audio group-ID(s): ${null==(n=this.groupIds)?void 0:n.join(",")} track count: ${e.length}`);this.warn(t.message),this.hls.trigger(Ck.ERROR,{type:Ik.MEDIA_ERROR,details:_k.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:t})}}}onError(e,t){!t.fatal&&t.context&&(t.context.type!==Rk.AUDIO_TRACK||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const i=this.allAudioTracks;if(this.selectDefaultTrack=!1,i.length){const s=this.currentTrack;if(s&&$_(e,s,H_))return s;const r=F_(e,this.tracksInGroup,H_);if(r>-1){const e=this.tracksInGroup[r];return this.setAudioTrack(r),e}if(s){let s=t.loadLevel;-1===s&&(s=t.firstAutoLevel);const r=j_(e,t.levels,i,s,H_);if(-1===r)return null;t.nextLoadLevel=r}if(e.channels||e.audioCodec){const t=F_(e,i);if(t>-1)return i[t]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length)return void this.warn(`Invalid audio track id: ${e}`);this.selectDefaultTrack=!1;const i=this.currentTrack,s=t[e],r=s.details&&!s.details.live;if(e===this.trackId&&s===i&&r)return;if(this.log(`Switching to audio-track ${e} "${s.name}" lang:${s.lang} group:${s.groupId} channels:${s.channels}`),this.trackId=e,this.currentTrack=s,this.hls.trigger(Ck.AUDIO_TRACK_SWITCHING,Fk({},s)),r)return;const n=this.switchParams(s.url,null==i?void 0:i.details,s.details);this.loadPlaylist(n)}findTrackId(e){const t=this.tracksInGroup;for(let i=0;i<t.length;i++){const s=t[i];if((!this.selectDefaultTrack||s.default)&&(!e||$_(e,s,H_)))return i}if(e){const{name:i,lang:s,assocLang:r,characteristics:n,audioCodec:a,channels:o}=e;for(let e=0;e<t.length;e++){const l=t[e];if($_({name:i,lang:s,assocLang:r,characteristics:n,audioCodec:a,channels:o},l,H_))return e}for(let l=0;l<t.length;l++){const i=t[l];if(vM(e.attrs,i.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return l}for(let l=0;l<t.length;l++){const i=t[l];if(vM(e.attrs,i.attrs,["LANGUAGE"]))return l}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&V_(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const i=e.id,s=e.groupId,r=this.getUrlWithDirectives(e.url,t),n=e.details,a=null==n?void 0:n.age;this.log(`Loading audio-track ${i} "${e.name}" lang:${e.lang} group:${s}${void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:""}${a&&n.live?" age "+a.toFixed(1)+(n.type&&" "+n.type||""):""} ${r}`),this.hls.trigger(Ck.AUDIO_TRACK_LOADING,{url:r,id:i,groupId:s,deliveryDirectives:t||null,track:e})}}class EM{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,i){if(null===this.queues||null===this.tracks)return;const s=this.queues[t];s.push(e),1!==s.length||i||this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const i={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(i,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const i={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(i)}})}removeBlockers(){null!==this.queues&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const i=null==(t=e[0])?void 0:t.label;"async-blocker"!==i&&"async-blocker-prepend"!==i||(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(null===this.queues)return;const t=this.queues.audio;t[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(null===this.queues||null===this.tracks)return;const t=this.queues[e];if(t.length){const r=t[0];try{r.execute()}catch(s){var i;if(r.onError(s),null===this.queues||null===this.tracks)return;const t=null==(i=this.tracks[e])?void 0:i.buffer;null!=t&&t.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){null!==this.queues&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return(null==(t=this.queues)?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return null===e||null===t?"<destroyed>":`\n${this.list("video")}\n${this.list("audio")}\n${this.list("audiovideo")}}`}list(e){var t,i;return null!=(t=this.queues)&&t[e]||null!=(i=this.tracks)&&i[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const i=null==(t=this.tracks)?void 0:t[e],s=null==i?void 0:i.buffer;return s?`SourceBuffer${s.updating?" updating":""}${i.ended?" ended":""}${i.ending?" ending":""}`:"none"}listOps(e){var t;return(null==(t=this.queues)?void 0:t[e].map(e=>e.label).join(", "))||""}}const wM=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,AM="HlsJsTrackRemovedError";class TM extends Error{constructor(e){super(e),this.name=AM}}class SM extends Gk{constructor(e,t){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=e=>{var t;this.hls&&"open"===(null==(t=this.mediaSource)?void 0:t.readyState)&&this.hls.pauseBuffering()},this._onStartStreaming=e=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=e=>{const{media:t,mediaSource:i}=this;e&&this.log("Media source opened"),t&&i&&(i.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(Ck.MEDIA_ATTACHED,{media:t,mediaSource:i}),null!==this.mediaSource&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:e,_objectUrl:t}=this;e!==t&&this.error(`Media element src was set while attaching MediaSource (${t} > ${e})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=Qk(Xk(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(Ck.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Ck.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Ck.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Ck.BUFFER_RESET,this.onBufferReset,this),e.on(Ck.BUFFER_APPENDING,this.onBufferAppending,this),e.on(Ck.BUFFER_CODECS,this.onBufferCodecs,this),e.on(Ck.BUFFER_EOS,this.onBufferEos,this),e.on(Ck.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Ck.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Ck.FRAG_PARSED,this.onFragParsed,this),e.on(Ck.FRAG_CHANGED,this.onFragChanged,this),e.on(Ck.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Ck.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Ck.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Ck.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Ck.BUFFER_RESET,this.onBufferReset,this),e.off(Ck.BUFFER_APPENDING,this.onBufferAppending,this),e.off(Ck.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Ck.BUFFER_EOS,this.onBufferEos,this),e.off(Ck.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Ck.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Ck.FRAG_PARSED,this.onFragParsed,this),e.off(Ck.FRAG_CHANGED,this.onFragChanged,this),e.off(Ck.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const i={};if(this.operationQueue){const e=this.isUpdating();e||this.operationQueue.removeBlockers();const t=this.isQueued();(e||t)&&this.warn(`Transfering MediaSource with${t?" operations in queue":""}${e?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const s=this.transferData;return!this.sourceBufferCount&&s&&s.mediaSource===t?Nk(i,s.tracks):this.sourceBuffers.forEach(e=>{const[t]=e;t&&(i[t]=Nk({},this.tracks[t]),this.removeBuffer(t)),e[0]=e[1]=null}),{media:e,mediaSource:t,tracks:i}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var i;let s=2;(t.audio&&!t.video||!t.altAudio)&&(s=1),this.bufferCodecEventsTotal=s,this.log(`${s} bufferCodec event(s) expected.`),null!=(i=this.transferData)&&i.mediaSource&&this.sourceBufferCount&&s&&this.bufferCreated()}onMediaAttaching(e,t){const i=this.media=t.media,s=Xk(this.appendSource);if(this.transferData=this.overrides=void 0,i&&s){const e=!!t.mediaSource;(e||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const n=this.mediaSource=t.mediaSource||new s;if(this.assignMediaSource(n),e)this._objectUrl=i.src,this.attachTransferred();else{const e=this._objectUrl=self.URL.createObjectURL(n);if(this.appendSource)try{i.removeAttribute("src");const t=self.ManagedMediaSource;i.disableRemotePlayback=i.disableRemotePlayback||t&&n instanceof t,xM(i),LM(i,e),i.load()}catch(r){i.src=e}else i.src=e}i.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,i;this.log(`${(null==(t=this.transferData)?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${null==(i=e.constructor)?void 0:i.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const i=this.tracks,s=t.tracks,r=s?Object.keys(s):null,n=r?r.length:0,a=()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()};if(s&&r&&n){if(!this.tracksReady)return this.hls.config.startFragPrefetch=!0,void this.log("attachTransferred: waiting for SourceBuffer track info");if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})\nrequired tracks: ${P_(i,(e,t)=>"initSegment"===e?void 0:t)};\ntransfer tracks: ${P_(s,(e,t)=>"initSegment"===e?void 0:t)}}`),!Zk(s,i)){t.mediaSource=null,t.tracks=void 0;const r=e.currentTime,n=this.details,a=Math.max(r,(null==n?void 0:n.fragments[0].start)||0);return a-r>1?void this.log(`attachTransferred: waiting for playback to reach new tracks start time ${r} -> ${a}`):(this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(s)}"->"${Object.keys(i)}") start time: ${a} currentTime: ${r}`),this.onMediaDetaching(Ck.MEDIA_DETACHING,{}),this.onMediaAttaching(Ck.MEDIA_ATTACHING,t),void(e.currentTime=a))}this.transferData=void 0,r.forEach(e=>{const t=e,i=s[t];if(i){const e=i.buffer;if(e){const s=this.fragmentTracker,r=i.id;if(s.hasFragments(r)||s.hasParts(r)){const i=DC.getBuffered(e);s.detectEvictedFragments(t,i,r,null,!0)}const n=kM(t),a=[t,e];this.sourceBuffers[n]=a,e.updating&&this.operationQueue&&this.operationQueue.prependBlocker(t),this.trackSourceBuffer(t,i)}}}),a(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),a()}get mediaSourceOpenOrEnded(){var e;const t=null==(e=this.mediaSource)?void 0:e.readyState;return"open"===t||"ended"===t}onMediaDetaching(e,t){const i=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:s,mediaSource:r,_objectUrl:n}=this;if(r){if(this.log("media source "+(i?"transferring":"detaching")),i)this.sourceBuffers.forEach(([e])=>{e&&this.removeBuffer(e)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const e="open"===r.readyState;try{const t=r.sourceBuffers;for(let i=t.length;i--;)e&&t[i].abort(),r.removeSourceBuffer(t[i]);e&&r.endOfStream()}catch(iH){this.warn(`onMediaDetaching: ${iH.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}r.removeEventListener("sourceopen",this._onMediaSourceOpen),r.removeEventListener("sourceended",this._onMediaSourceEnded),r.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(r.removeEventListener("startstreaming",this._onStartStreaming),r.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}s&&(s.removeEventListener("emptied",this._onMediaEmptied),i||(n&&self.URL.revokeObjectURL(n),this.mediaSrc===n?(s.removeAttribute("src"),this.appendSource&&xM(s),s.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(Ck.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;const i=null==(t=this.tracks[e])?void 0:t.buffer;if(this.removeBuffer(e),i)try{var s;null!=(s=this.mediaSource)&&s.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(i)}catch(iH){this.warn(`onBufferReset ${e}`,iH)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[kM(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new EM(this.tracks)}onBufferCodecs(e,t){const i=this.tracks,s=Object.keys(t);this.log(`BUFFER_CODECS: "${s}" (current SB count ${this.sourceBufferCount})`);const r="audiovideo"in t&&(i.audio||i.video)||i.audiovideo&&("audio"in t||"video"in t),n=!r&&this.sourceBufferCount&&this.media&&s.some(e=>!i[e]);r||n?this.warn(`Unsupported transition between "${Object.keys(i)}" and "${s}" SourceBuffers`):(s.forEach(e=>{var s,r,n;const a=t[e],{id:o,codec:l,levelCodec:c,container:d,metadata:h,supplemental:u}=a;let p=i[e];const f=null==(s=this.transferData)||null==(r=s.tracks)?void 0:r[e],g=null!=f&&f.buffer?f:p,m=(null==g?void 0:g.pendingCodec)||(null==g?void 0:g.codec),v=null==g?void 0:g.levelCodec;p||(p=i[e]={buffer:void 0,listeners:[],codec:l,supplemental:u,container:d,levelCodec:c,metadata:h,id:o});const y=n_(m,v),b=null==y?void 0:y.replace(wM,"$1");let E=n_(l,c);const w=null==(n=E)?void 0:n.replace(wM,"$1");E&&y&&b!==w&&("audio"===e.slice(0,5)&&(E=s_(E,this.appendSource)),this.log(`switching codec ${m} to ${E}`),E!==(p.pendingCodec||p.codec)&&(p.pendingCodec=E),p.container=d,this.appendChangeType(e,d,E))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),this.sourceBufferCount||this.mediaSourceOpenOrEnded&&this.checkPendingTracks())}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const i=this.tracks[t];return e[t]={id:i.id,container:i.container,codec:i.codec,levelCodec:i.levelCodec},e},{})}appendChangeType(e,t,i){const s=`${t};codecs=${i}`,r={label:`change-type=${s}`,execute:()=>{const r=this.tracks[e];if(r){const n=r.buffer;null!=n&&n.changeType&&(this.log(`changing ${e} sourceBuffer type to ${s}`),n.changeType(s),r.codec=i,r.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:t=>{this.warn(`Failed to change ${e} SourceBuffer type`,t)}};this.append(r,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const i=e.start,s=i+.05*e.duration,r=!0===(null==(t=this.fragmentTracker.getAppendedFrag(i,Pk.MAIN))?void 0:t.gap);if(r)return;const n={label:"block-audio",execute:()=>{var e;const t=this.tracks.video;(this.lastVideoAppendEnd>s||null!=t&&t.buffer&&DC.isBuffered(t.buffer,s)||!0===(null==(e=this.fragmentTracker.getAppendedFrag(s,Pk.MAIN))?void 0:e.gap))&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:e=>{this.warn("Error executing block-audio operation",e)}};this.blockedAudioAppend={op:n,frag:e},this.append(n,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:i}=this,{data:s,type:r,parent:n,frag:a,part:o,chunkMeta:l,offset:c}=t,d=l.buffering[r],{sn:h,cc:u}=a,p=self.performance.now();d.start=p;const f=a.stats.buffering,g=o?o.stats.buffering:null;0===f.start&&(f.start=p),g&&0===g.start&&(g.start=p);const m=i.audio;let v=!1;"audio"===r&&"audio/mpeg"===(null==m?void 0:m.container)&&(v=!this.lastMpegAudioChunk||1===l.id||this.lastMpegAudioChunk.sn!==l.sn,this.lastMpegAudioChunk=l);const y=i.video,b=null==y?void 0:y.buffer;if(b&&"initSegment"!==h){const e=o||a,t=this.blockedAudioAppend;if("audio"!==r||"main"===n||this.blockedAudioAppend){if("video"===r){const i=e.end;if(t){const e=t.frag.start;(i>e||i<this.lastVideoAppendEnd||DC.isBuffered(b,e))&&this.unblockAudio()}this.lastVideoAppendEnd=i}}else{const t=e.start,i=t+.05*e.duration,s=b.buffered,r=this.currentOp("video");s.length||r?!r&&!DC.isBuffered(b,i)&&this.lastVideoAppendEnd<i&&this.blockAudio(e):this.blockAudio(e)}}const E=(o||a).start,w={label:`append-${r}`,execute:()=>{var e;d.executeStart=self.performance.now();const t=null==(e=this.tracks[r])?void 0:e.buffer;t&&(v?this.updateTimestampOffset(t,E,.1,r,h,u):void 0!==c&&xk(c)&&this.updateTimestampOffset(t,c,1e-6,r,h,u)),this.appendExecutor(s,r)},onStart:()=>{},onComplete:()=>{const e=self.performance.now();d.executeEnd=d.end=e,0===f.first&&(f.first=e),g&&0===g.first&&(g.first=e);const t={};this.sourceBuffers.forEach(([e,i])=>{e&&(t[e]=DC.getBuffered(i))}),this.appendErrors[r]=0,"audio"===r||"video"===r?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(Ck.BUFFER_APPENDED,{type:r,frag:a,part:o,chunkMeta:l,parent:a.type,timeRanges:t})},onError:e=>{var t;const i={type:Ik.MEDIA_ERROR,parent:a.type,details:_k.BUFFER_APPEND_ERROR,sourceBufferName:r,frag:a,part:o,chunkMeta:l,error:e,err:e,fatal:!1},s=null==(t=this.media)?void 0:t.error;if(e.code===DOMException.QUOTA_EXCEEDED_ERR||"QuotaExceededError"==e.name||"quota"in e)i.details=_k.BUFFER_FULL_ERROR;else if(e.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!s)i.errorAction=cC(!0);else if(e.name===AM&&0===this.sourceBufferCount)i.errorAction=cC(!0);else{const e=++this.appendErrors[r];this.warn(`Failed ${e}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${r}" sourceBuffer (${s||"no media error"})`),(e>=this.hls.config.appendErrorMaxRetry||s)&&(i.fatal=!0)}this.hls.trigger(Ck.ERROR,i)}};this.append(w,r,this.isPending(this.tracks[r]))}getFlushOp(e,t,i){return this.log(`queuing "${e}" remove ${t}-${i}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,i)},onStart:()=>{},onComplete:()=>{this.hls.trigger(Ck.BUFFER_FLUSHED,{type:e})},onError:s=>{this.warn(`Failed to remove ${t}-${i} from "${e}" SourceBuffer`,s)}}}onBufferFlushing(e,t){const{type:i,startOffset:s,endOffset:r}=t;i?this.append(this.getFlushOp(i,s,r),i):this.sourceBuffers.forEach(([e])=>{e&&this.append(this.getFlushOp(e,s,r),e)})}onFragParsed(e,t){const{frag:i,part:s}=t,r=[],n=s?s.elementaryStreams:i.elementaryStreams;n[lI.AUDIOVIDEO]?r.push("audiovideo"):(n[lI.AUDIO]&&r.push("audio"),n[lI.VIDEO]&&r.push("video"));const a=()=>{const e=self.performance.now();i.stats.buffering.end=e,s&&(s.stats.buffering.end=e);const t=s?s.stats:i.stats;this.hls.trigger(Ck.FRAG_BUFFERED,{frag:i,part:s,stats:t,id:i.type})};0===r.length&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${i.type} level: ${i.level} sn: ${i.sn}`),this.blockBuffers(a,r).catch(e=>{this.warn(`Fragment buffered callback ${e}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{var t,i;return e&&(!(null!=(t=this.tracks[e])&&t.ended)||(null==(i=this.tracks[e])?void 0:i.ending))})}onBufferEos(e,t){var i;this.sourceBuffers.forEach(([e])=>{if(e){const i=this.tracks[e];t.type&&t.type!==e||(i.ending=!0,i.ended||(i.ended=!0,this.log(`${e} buffer reached EOS`)))}});const s=!1!==(null==(i=this.overrides)?void 0:i.endOfStream),r=this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{var t;return e&&!(null!=(t=this.tracks[e])&&t.ended)});r&&(s?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:e}=this;e&&"open"===e.readyState?(this.log("Calling mediaSource.endOfStream()"),e.endOfStream(),this.hls.trigger(Ck.BUFFERED_TO_END,void 0)):e&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${e.readyState}`)})):(this.tracksEnded(),this.hls.trigger(Ck.BUFFERED_TO_END,void 0)))}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(null!==e){const t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,t){if(t.details===_k.BUFFER_APPEND_ERROR&&t.frag){var i;const e=null==(i=t.errorAction)?void 0:i.nextAutoLevel;xk(e)&&e!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:i}=this;if(!i||null===t)return;if(!this.sourceBufferCount)return;const s=e.config,r=i.currentTime,n=t.levelTargetDuration,a=t.live&&null!==s.liveBackBufferLength?s.liveBackBufferLength:s.backBufferLength;if(xk(a)&&a>=0){const e=Math.max(a,n),t=Math.floor(r/n)*n-e;this.flushBackBuffer(r,n,t)}if(xk(s.frontBufferFlushThreshold)&&s.frontBufferFlushThreshold>0){const e=Math.max(s.maxBufferLength,s.frontBufferFlushThreshold),t=Math.max(e,n),i=Math.floor(r/n)*n+t;this.flushFrontBuffer(r,n,i)}}flushBackBuffer(e,t,i){this.sourceBuffers.forEach(([e,t])=>{if(t){const r=DC.getBuffered(t);if(r.length>0&&i>r.start(0)){var s;this.hls.trigger(Ck.BACK_BUFFER_REACHED,{bufferEnd:i});const t=this.tracks[e];if(null!=(s=this.details)&&s.live)this.hls.trigger(Ck.LIVE_BACK_BUFFER_REACHED,{bufferEnd:i});else if(null!=t&&t.ended)return void this.log(`Cannot flush ${e} back buffer while SourceBuffer is in ended state`);this.hls.trigger(Ck.BUFFER_FLUSHING,{startOffset:0,endOffset:i,type:e})}}})}flushFrontBuffer(e,t,i){this.sourceBuffers.forEach(([t,s])=>{if(s){const r=DC.getBuffered(s),n=r.length;if(n<2)return;const a=r.start(n-1),o=r.end(n-1);if(i>a||e>=a&&e<=o)return;this.hls.trigger(Ck.BUFFER_FLUSHING,{startOffset:a,endOffset:1/0,type:t})}})}getDurationAndRange(){var e;const{details:t,mediaSource:i}=this;if(!t||!this.media||"open"!==(null==i?void 0:i.readyState))return null;const s=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){const e=t.fragments.length;if(e&&t.live&&i.setLiveSeekableRange){const e=Math.max(0,t.fragmentStart),i=Math.max(e,s);return{duration:1/0,start:e,end:i}}return{duration:1/0}}const r=null==(e=this.overrides)?void 0:e.duration;if(r)return xk(r)?{duration:r}:null;const n=this.media.duration,a=xk(i.duration)?i.duration:0;return s>a&&s>n||!xk(n)?{duration:s}:null}updateMediaSource({duration:e,start:t,end:i}){const s=this.mediaSource;this.media&&s&&"open"===s.readyState&&(s.duration!==e&&(xk(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),s.duration=e),void 0!==t&&void 0!==i&&(this.log(`MediaSource duration is set to ${s.duration}. Setting seekable range to ${t}-${i}.`),s.setLiveSeekableRange(t,i)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:i}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${P_(i)}`),this.tracksReady){var s;const e=null==(s=this.transferData)?void 0:s.tracks;e&&Object.keys(e).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([t,i])=>{if(t){const s=this.tracks[t];e[t]={buffer:i,container:s.container,codec:s.codec,supplemental:s.supplemental,levelCodec:s.levelCodec,id:s.id,metadata:s.metadata}}}),this.hls.trigger(Ck.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([e])=>{this.executeNext(e)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(Ck.ERROR,{type:Ik.MEDIA_ERROR,details:_k.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:i}=this;if(!i)throw new Error("createSourceBuffers called when mediaSource was null");for(const n in e){const a=n,o=e[a];if(this.isPending(o)){const e=this.getTrackCodec(o,a),n=`${o.container};codecs=${e}`;o.codec=e,this.log(`creating sourceBuffer(${n})${this.currentOp(a)?" Queued":""} ${P_(o)}`);try{const e=i.addSourceBuffer(n),s=kM(a),r=[a,e];t[s]=r,o.buffer=e}catch(r){var s;return this.error(`error while trying to add sourceBuffer: ${r.message}`),this.shiftAndExecuteNext(a),null==(s=this.operationQueue)||s.removeBlockers(),delete this.tracks[a],void this.hls.trigger(Ck.ERROR,{type:Ik.MEDIA_ERROR,details:_k.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:r,sourceBufferName:a,mimeType:n,parent:o.id})}this.trackSourceBuffer(a,o)}}this.bufferCreated()}getTrackCodec(e,t){const i=e.supplemental;let s=e.codec;i&&("video"===t||"audiovideo"===t)&&qI(i,"video")&&(s=r_(s,i));const r=n_(s,e.levelCodec);return r?"audio"===t.slice(0,5)?s_(r,this.appendSource):r:""}trackSourceBuffer(e,t){const i=t.buffer;if(!i)return;const s=this.getTrackCodec(t,e);this.tracks[e]={buffer:i,codec:s,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(e,t)=>{const i=t.removedRanges;null!=i&&i.length&&this.hls.trigger(Ck.BUFFER_FLUSHED,{type:e})})}get mediaSrc(){var e,t;const i=(null==(e=this.media)||null==(t=e.querySelector)?void 0:t.call(e,"source"))||this.media;return null==i?void 0:i.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if("closed"===(null==(t=this.mediaSource)?void 0:t.readyState))return void this.resetBuffer(e);const i=this.currentOp(e);i&&(i.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var i;const s=new Error(`${e} SourceBuffer error. MediaSource readyState: ${null==(i=this.mediaSource)?void 0:i.readyState}`);this.error(`${s}`,t),this.hls.trigger(Ck.ERROR,{type:Ik.MEDIA_ERROR,details:_k.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:s,fatal:!1});const r=this.currentOp(e);r&&r.onError(s)}updateTimestampOffset(e,t,i,s,r,n){const a=t-e.timestampOffset;Math.abs(a)>=i&&(this.log(`Updating ${s} SourceBuffer timestampOffset to ${t} (sn: ${r} cc: ${n})`),e.timestampOffset=t)}removeExecutor(e,t,i){const{media:s,mediaSource:r}=this,n=this.tracks[e],a=null==n?void 0:n.buffer;if(!s||!r||!a)return this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),void this.shiftAndExecuteNext(e);const o=xk(s.duration)?s.duration:1/0,l=xk(r.duration)?r.duration:1/0,c=Math.max(0,t),d=Math.min(i,o,l);d>c&&(!n.ending||n.ended)?(n.ended=!1,this.log(`Removing [${c},${d}] from the ${e} SourceBuffer`),a.remove(c,d)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const i=this.tracks[t],s=null==i?void 0:i.buffer;if(!s)throw new TM(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);i.ending=!1,i.ended=!1,s.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(e=>{this.warn(`SourceBuffer blocked callback ${e}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(t){this.warn(`Callback run without blocking ${this.operationQueue} ${t}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:i}=this,s=t.map(e=>this.appendBlocker(e)),r=t.length>1&&!!this.blockedAudioAppend;return r&&this.unblockAudio(),Promise.all(s).then(t=>{i===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(e=>{var t;const i=null==(t=this.tracks[e])?void 0:t.buffer;i&&!i.updating&&this.shiftAndExecuteNext(e)})}append(e,t,i){this.operationQueue&&this.operationQueue.append(e,t,i)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,i){const s=this.tracks[e];if(!s)return;const r=s.buffer;if(!r)return;const n=i.bind(this,e);s.listeners.push({event:t,listener:n}),r.addEventListener(t,n)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const i=t.buffer;i&&(t.listeners.forEach(e=>{i.removeEventListener(e.event,e.listener)}),t.listeners.length=0)}}function xM(e){const t=e.querySelectorAll("source");[].slice.call(t).forEach(t=>{e.removeChild(t)})}function LM(e,t){const i=self.document.createElement("source");i.type="video/mp4",i.src=t,e.appendChild(i)}function kM(e){return"audio"===e?1:0}class IM{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(Ck.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(Ck.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Ck.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Ck.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Ck.BUFFER_CODECS,this.onBufferCodecs,this),e.on(Ck.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(Ck.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(Ck.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Ck.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Ck.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Ck.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Ck.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const i=this.hls.levels[t.droppedLevel];this.isLevelAllowed(i)&&this.restrictedLevels.push({bitrate:i.bitrate,height:i.height,width:i.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const i=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,i.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&xk(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){const i=this.hls;i.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0)return void(this.clientRect=null);const e=this.hls.levels;if(e.length){const t=this.hls,i=this.getMaxLevel(e.length-1);i!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${i}: ${e[i].height}p@${e[i].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=i,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const i=t.filter((t,i)=>this.isLevelAllowed(t)&&i<=e);return this.clientRect=null,IM.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const i=e.getBoundingClientRect();t.width=i.width,t.height=i.height,t.width||t.height||(t.width=i.right-i.left||e.width||0,t.height=i.bottom-i.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(tH){}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){const t=this.restrictedLevels;return!t.some(t=>e.bitrate===t.bitrate&&e.width===t.width&&e.height===t.height)}static getMaxLevelByMediaSize(e,t,i){if(null==e||!e.length)return-1;const s=(e,t)=>!t||(e.width!==t.width||e.height!==t.height);let r=e.length-1;const n=Math.max(t,i);for(let a=0;a<e.length;a+=1){const t=e[a];if((t.width>=n||t.height>=n)&&s(t,e[a+1])){r=a;break}}return r}}const _M={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},CM=_M,RM={HLS:"h"},PM=RM,DM="CMCD-Object",MM="CMCD-Request",OM="CMCD-Session",NM="CMCD-Status",BM={OBJECT:DM,REQUEST:MM,SESSION:OM,STATUS:NM},FM={[BM.OBJECT]:["br","ab","d","ot","tb","tpb","lb","tab","lab","url"],[BM.REQUEST]:["pb","bl","tbl","dl","ltc","mtp","nor","nrr","rc","sn","sta","su","ttfb","ttfbb","ttlb","cmsdd","cmsds","smrt","df","cs"],[BM.SESSION]:["cid","pr","sf","sid","st","v","msd"],[BM.STATUS]:["bs","bsd","cdn","rtp","bg","pt","ec","e"]};class $M{constructor(e,t){Array.isArray(e)&&(e=e.map(e=>e instanceof $M?e:new $M(e))),this.value=e,this.params=t}}const UM="Dict";function GM(e){return Array.isArray(e)?JSON.stringify(e):e instanceof Map?"Map{}":e instanceof Set?"Set{}":"object"===typeof e?JSON.stringify(e):String(e)}function HM(e,t,i,s){return new Error(`failed to ${e} "${GM(t)}" as ${i}`,{cause:s})}function jM(e,t,i){return HM("serialize",e,t,i)}class zM{constructor(e){this.description=e}}const VM="Bare Item",YM="Boolean";function WM(e){if("boolean"!==typeof e)throw jM(e,YM);return e?"?1":"?0"}function KM(e){return btoa(String.fromCharCode(...e))}const qM="Byte Sequence";function XM(e){if(!1===ArrayBuffer.isView(e))throw jM(e,qM);return`:${KM(e)}:`}const QM="Integer";function ZM(e){return e<-999999999999999||999999999999999<e}function JM(e){if(ZM(e))throw jM(e,QM);return e.toString()}function eO(e){return`@${JM(e.getTime()/1e3)}`}function tO(e,t){if(e<0)return-tO(-e,t);const i=Math.pow(10,t),s=Math.abs(e*i%1-.5)<Number.EPSILON;if(s){const t=Math.floor(e*i);return(t%2===0?t:t+1)/i}return Math.round(e*i)/i}const iO="Decimal";function sO(e){const t=tO(e,3);if(Math.floor(Math.abs(t)).toString().length>12)throw jM(e,iO);const i=t.toString();return i.includes(".")?i:`${i}.0`}const rO="String",nO=/[\x00-\x1f\x7f]+/;function aO(e){if(nO.test(e))throw jM(e,rO);return`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function oO(e){return e.description||e.toString().slice(7,-1)}const lO="Token";function cO(e){const t=oO(e);if(!1===/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(t))throw jM(t,lO);return t}function dO(e){switch(typeof e){case"number":if(!xk(e))throw jM(e,VM);return Number.isInteger(e)?JM(e):sO(e);case"string":return aO(e);case"symbol":return cO(e);case"boolean":return WM(e);case"object":if(e instanceof Date)return eO(e);if(e instanceof Uint8Array)return XM(e);if(e instanceof zM)return cO(e);default:throw jM(e,VM)}}const hO="Key";function uO(e){if(!1===/^[a-z*][a-z0-9\-_.*]*$/.test(e))throw jM(e,hO);return e}function pO(e){return null==e?"":Object.entries(e).map(([e,t])=>!0===t?`;${uO(e)}`:`;${uO(e)}=${dO(t)}`).join("")}function fO(e){return e instanceof $M?`${dO(e.value)}${pO(e.params)}`:dO(e)}function gO(e){return`(${e.value.map(fO).join(" ")})${pO(e.params)}`}function mO(e,t={whitespace:!0}){if("object"!==typeof e)throw jM(e,UM);const i=e instanceof Map?e.entries():Object.entries(e),s=(null===t||void 0===t?void 0:t.whitespace)?" ":"";return Array.from(i).map(([e,t])=>{t instanceof $M===!1&&(t=new $M(t));let i=uO(e);return!0===t.value?i+=pO(t.params):(i+="=",Array.isArray(t.value)?i+=gO(t):i+=fO(t)),i}).join(`,${s}`)}function vO(e,t){return mO(e,t)}function yO(e){return["ot","sf","st","e","sta"].includes(e)}function bO(e){return"number"===typeof e?xk(e):null!=e&&""!==e&&!1!==e}function EO(e,t){const i=new URL(e),s=new URL(t);if(i.origin!==s.origin)return e;const r=i.pathname.split("/").slice(1),n=s.pathname.split("/").slice(1,-1);while(r[0]===n[0])r.shift(),n.shift();while(n.length)n.shift(),r.unshift("..");return r.join("/")}const wO=e=>Math.round(e),AO=(e,t)=>((null===t||void 0===t?void 0:t.baseUrl)&&(e=EO(e,t.baseUrl)),encodeURIComponent(e)),TO=e=>100*wO(e/100),SO={br:wO,d:wO,bl:TO,dl:TO,mtp:TO,nor:AO,rtp:TO,tb:wO};function xO(e,t){const i={};if(null==e||"object"!==typeof e)return i;const s=Object.keys(e).sort(),r=Nk({},SO,null===t||void 0===t?void 0:t.formatters),n=null===t||void 0===t?void 0:t.filter;return s.forEach(s=>{if(!1===(null===n||void 0===n?void 0:n(s)))return;let a=e[s];const o=r[s];o&&(a=o(a,t)),"v"===s&&1===a||"pr"==s&&1===a||bO(a)&&(yO(s)&&"string"===typeof a&&(a=new zM(a)),i[s]=a)}),i}function LO(e,t={}){return e?vO(xO(e,t),Nk({whitespace:!1},t)):""}function kO(e,t={}){const i={};if(!e)return i;const s=Object.entries(e),r=Object.entries(FM).concat(Object.entries((null===t||void 0===t?void 0:t.customHeaderMap)||{})),n=s.reduce((e,t)=>{var i,s;const[n,a]=t,o=(null===(i=r.find(e=>e[1].includes(n)))||void 0===i?void 0:i[0])||BM.REQUEST;return null!==(s=e[o])&&void 0!==s||(e[o]={}),e[o][n]=a,e},{});return Object.entries(n).reduce((e,[i,s])=>(e[i]=LO(s,t),e),i)}function IO(e,t,i){return Nk(e,kO(t,i))}const _O="CMCD";function CO(e,t={}){if(!e)return"";const i=LO(e,t);return`${_O}=${encodeURIComponent(i)}`}const RO=/CMCD=[^&#]+/;function PO(e,t,i){const s=CO(t,i);if(!s)return e;if(RO.test(e))return e.replace(RO,s);const r=e.includes("?")?"&":"?";return`${e}${r}${s}`}class DO{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=e=>{try{this.apply(e,{ot:CM.MANIFEST,su:!this.initialized})}catch(t){this.hls.logger.warn("Could not generate manifest CMCD data.",t)}},this.applyFragmentData=e=>{try{const{frag:t,part:i}=e,s=this.hls.levels[t.level],r=this.getObjectType(t),n={d:1e3*(i||t).duration,ot:r};r!==CM.VIDEO&&r!==CM.AUDIO&&r!=CM.MUXED||(n.br=s.bitrate/1e3,n.tb=this.getTopBandwidth(r)/1e3,n.bl=this.getBufferLength(r));const a=i?this.getNextPart(i):this.getNextFrag(t);null!=a&&a.url&&a.url!==t.url&&(n.nor=a.url),this.apply(e,n)}catch(t){this.hls.logger.warn("Could not generate segment CMCD data.",t)}},this.hls=e;const t=this.config=e.config,{cmcd:i}=t;null!=i&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=i.sessionId||e.sessionId,this.cid=i.contentId,this.useHeaders=!0===i.useHeaders,this.includeKeys=i.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(Ck.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Ck.MEDIA_DETACHED,this.onMediaDetached,this),e.on(Ck.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(Ck.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Ck.MEDIA_DETACHED,this.onMediaDetached,this),e.off(Ck.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var i,s;this.audioBuffer=null==(i=t.tracks.audio)?void 0:i.buffer,this.videoBuffer=null==(s=t.tracks.video)?void 0:s.buffer}createData(){var e;return{v:1,sf:PM.HLS,sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){Nk(t,this.createData());const i=t.ot===CM.INIT||t.ot===CM.VIDEO||t.ot===CM.MUXED;this.starved&&i&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering);const{includeKeys:s}=this;s&&(t=Object.keys(t).reduce((e,i)=>(s.includes(i)&&(e[i]=t[i]),e),{}));const r={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),IO(e.headers,t,r)):e.url=PO(e.url,t,r)}getNextFrag(e){var t;const i=null==(t=this.hls.levels[e.level])?void 0:t.details;if(i){const t=e.sn-i.startSN;return i.fragments[t+1]}}getNextPart(e){var t,i;const{index:s,fragment:r}=e,n=null==(t=this.hls.levels[r.level])||null==(i=t.details)?void 0:i.partList;if(n){const{sn:e}=r;for(let t=n.length-1;t>=0;t--){const i=n[t];if(i.index===s&&i.fragment.sn===e)return n[t+1]}}}getObjectType(e){const{type:t}=e;return"subtitle"===t?CM.TIMED_TEXT:"initSegment"===e.sn?CM.INIT:"audio"===t?CM.AUDIO:"main"===t?this.hls.audioTracks.length?CM.VIDEO:CM.MUXED:void 0}getTopBandwidth(e){let t,i=0;const s=this.hls;if(e===CM.AUDIO)t=s.audioTracks;else{const e=s.maxAutoLevel,i=e>-1?e+1:s.levels.length;t=s.levels.slice(0,i)}return t.forEach(e=>{e.bitrate>i&&(i=e.bitrate)}),i>0?i:NaN}getBufferLength(e){const t=this.media,i=e===CM.AUDIO?this.audioBuffer:this.videoBuffer;if(!i||!t)return NaN;const s=DC.bufferInfo(i,t.currentTime,this.config.maxBufferHole);return 1e3*s.len}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,i=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new i(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,i,s){t(e),this.loader.load(e,i,s)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,i=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new i(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,i,s){t(e),this.loader.load(e,i,s)}}}}const MO=3e5;class OO extends Gk{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Ck.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Ck.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Ck.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Ck.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Ck.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Ck.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(-1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=1e3*this.timeToLoad-(performance.now()-this.updated);if(e>0)return void this.scheduleRefresh(this.uri,e)}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(t=>t!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:i}=t;null!==i&&(this.pathwayId=i.pathwayId,this.uri=i.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:i}=t;if((null==i?void 0:i.action)===aC.SendAlternateToPenaltyBox&&i.flags===oC.MoveAllAlternatesMatchingHost){const e=this.levels;let s=this._pathwayPriority,r=this.pathwayId;if(t.context){const{groupId:i,pathwayId:s,type:n}=t.context;i&&e?r=this.getPathwayForGroupId(i,n,r):s&&(r=s)}r in this.penalizedPathways||(this.penalizedPathways[r]=performance.now()),!s&&e&&(s=this.pathways()),s&&s.length>1&&(this.updatePathwayPriority(s),i.resolved=this.pathwayId!==r),t.details!==_k.BUFFER_APPEND_ERROR||t.fatal?i.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${r} levels: ${e?e.length:e} priorities: ${P_(s)} penalized: ${P_(this.penalizedPathways)}`):i.resolved=!0}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){const i=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${i}"`),t=this.getLevelsForPathway(i),this.pathwayId=i}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return null===this.levels?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){let t;this._pathwayPriority=e;const i=this.penalizedPathways,s=performance.now();Object.keys(i).forEach(e=>{s-i[e]>MO&&delete i[e]});for(let r=0;r<e.length;r++){const s=e[r];if(s in i)continue;if(s===this.pathwayId)return;const n=this.hls.nextLoadLevel,a=this.hls.levels[n];if(t=this.getLevelsForPathway(s),t.length>0){this.log(`Setting Pathway to "${s}"`),this.pathwayId=s,YR(t),this.hls.trigger(Ck.LEVELS_UPDATED,{levels:t});const e=this.hls.levels[n];a&&e&&this.levels&&(e.attrs["STABLE-VARIANT-ID"]!==a.attrs["STABLE-VARIANT-ID"]&&e.bitrate!==a.bitrate&&this.log(`Unstable Pathways change from bitrate ${a.bitrate} to ${e.bitrate}`),this.hls.nextLoadLevel=n);break}}}getPathwayForGroupId(e,t,i){const s=this.getLevelsForPathway(i).concat(this.levels||[]);for(let r=0;r<s.length;r++)if(t===Rk.AUDIO_TRACK&&s[r].hasAudioGroup(e)||t===Rk.SUBTITLE_TRACK&&s[r].hasSubtitleGroup(e))return s[r].pathwayId;return i}clonePathways(e){const t=this.levels;if(!t)return;const i={},s={};e.forEach(e=>{const{ID:r,"BASE-ID":n,"URI-REPLACEMENT":a}=e;if(t.some(e=>e.pathwayId===r))return;const o=this.getLevelsForPathway(n).map(e=>{const t=new GC(e.attrs);t["PATHWAY-ID"]=r;const n=t.AUDIO&&`${t.AUDIO}_clone_${r}`,o=t.SUBTITLES&&`${t.SUBTITLES}_clone_${r}`;n&&(i[t.AUDIO]=n,t.AUDIO=n),o&&(s[t.SUBTITLES]=o,t.SUBTITLES=o);const l=BO(e.uri,t["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",a),c=new k_({attrs:t,audioCodec:e.audioCodec,bitrate:e.bitrate,height:e.height,name:e.name,url:l,videoCodec:e.videoCodec,width:e.width});if(e.audioGroups)for(let i=1;i<e.audioGroups.length;i++)c.addGroupId("audio",`${e.audioGroups[i]}_clone_${r}`);if(e.subtitleGroups)for(let i=1;i<e.subtitleGroups.length;i++)c.addGroupId("text",`${e.subtitleGroups[i]}_clone_${r}`);return c});t.push(...o),NO(this.audioTracks,i,a,r),NO(this.subtitleTracks,s,a,r)})}loadSteeringManifest(e){const t=this.hls.config,i=t.loader;let s;this.loader&&this.loader.destroy(),this.loader=new i(t);try{s=new self.URL(e)}catch(c){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest URI: ${e}`)}if("data:"!==s.protocol){const e=0|(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate);s.searchParams.set("_HLS_pathway",this.pathwayId),s.searchParams.set("_HLS_throughput",""+e)}const r={responseType:"json",url:s.href},n=t.steeringManifestLoadPolicy.default,a=n.errorRetry||n.timeoutRetry||{},o={loadPolicy:n,timeout:n.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},l={onSuccess:(e,t,i,r)=>{this.log(`Loaded steering manifest: "${s}"`);const n=e.data;if(1!==(null==n?void 0:n.VERSION))return void this.log(`Steering VERSION ${n.VERSION} not supported!`);this.updated=performance.now(),this.timeToLoad=n.TTL;const{"RELOAD-URI":a,"PATHWAY-CLONES":o,"PATHWAY-PRIORITY":l}=n;if(a)try{this.uri=new self.URL(a,s).href}catch(c){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest RELOAD-URI: ${a}`)}this.scheduleRefresh(this.uri||i.url),o&&this.clonePathways(o);const d={steeringManifest:n,url:s.toString()};this.hls.trigger(Ck.STEERING_MANIFEST_LOADED,d),l&&this.updatePathwayPriority(l)},onError:(e,t,i,s)=>{if(this.log(`Error loading steering manifest: ${e.code} ${e.text} (${t.url})`),this.stopLoad(),410===e.code)return this.enabled=!1,void this.log(`Steering manifest ${t.url} no longer available`);let r=1e3*this.timeToLoad;if(429===e.code){const e=this.loader;if("function"===typeof(null==e?void 0:e.getResponseHeader)){const t=e.getResponseHeader("Retry-After");t&&(r=1e3*parseFloat(t))}return void this.log(`Steering manifest ${t.url} rate limited`)}this.scheduleRefresh(this.uri||t.url,r)},onTimeout:(e,t,i)=>{this.log(`Timeout loading steering manifest (${t.url})`),this.scheduleRefresh(this.uri||t.url)}};this.log(`Requesting steering manifest: ${s}`),this.loader.load(r,o,l)}scheduleRefresh(e,t=1e3*this.timeToLoad){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var t;const i=null==(t=this.hls)?void 0:t.media;!i||i.ended?this.scheduleRefresh(e,1e3*this.timeToLoad):this.loadSteeringManifest(e)},t)}}function NO(e,t,i,s){e&&Object.keys(t).forEach(r=>{const n=e.filter(e=>e.groupId===r).map(e=>{const n=Nk({},e);return n.details=void 0,n.attrs=new GC(n.attrs),n.url=n.attrs.URI=BO(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",i),n.groupId=n.attrs["GROUP-ID"]=t[r],n.attrs["PATHWAY-ID"]=s,n});e.push(...n)})}function BO(e,t,i,s){const{HOST:r,PARAMS:n,[i]:a}=s;let o;t&&(o=null==a?void 0:a[t],o&&(e=o));const l=new self.URL(e);return r&&!o&&(l.host=r),n&&Object.keys(n).sort().forEach(e=>{e&&l.searchParams.set(e,n[e])}),l.href}function FO(e,t,i){$O(e,t,i),e.addEventListener(t,i)}function $O(e,t,i){e.removeEventListener(t,i)}class UO extends Gk{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=UO.CDMCleanupPromise?[UO.CDMCleanupPromise]:[],this.onWaitingForKey=e=>{this.log(`"${e.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onWaitingForKey=null}registerListeners(){this.hls.on(Ck.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Ck.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(Ck.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(Ck.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(Ck.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(Ck.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(Ck.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(Ck.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(Ck.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(Ck.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:i}=this.config,s=t[e];return s?s.licenseUrl:e===iR.WIDEVINE&&i?i:void 0}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(void 0===t)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,i=t[e];if(i)return i.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,i=(e,t,i)=>!!e&&i.indexOf(e)===t,s=t.map(e=>e.audioCodec).filter(i),r=t.map(e=>e.videoCodec).filter(i);return s.length+r.length===0&&r.push("avc1.42e01e"),new Promise((t,i)=>{const n=e=>{const a=e.shift();this.getMediaKeysPromise(a,s,r).then(e=>t({keySystem:a,mediaKeys:e})).catch(t=>{e.length?n(e):i(t instanceof GO?t:new GO({type:Ik.KEY_SYSTEM_ERROR,details:_k.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message))})};n(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:i}=this.config;if("function"!==typeof i){let e=`Configured requestMediaKeySystemAccess is not a function ${i}`;return null===oR&&"http:"===self.location.protocol&&(e=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(e))}return i(e,t)}getMediaKeysPromise(e,t,i){const s=lR(e,t,i,this.config.drmSystemOptions),r=this.keySystemAccessPromises[e];let n=null==r?void 0:r.keySystemAccess;if(!n){this.log(`Requesting encrypted media "${e}" key-system access with config: ${P_(s)}`),n=this.requestMediaKeySystemAccess(e,s);const t=this.keySystemAccessPromises[e]={keySystemAccess:n};return n.catch(t=>{this.log(`Failed to obtain access to key-system "${e}": ${t}`)}),n.then(i=>{this.log(`Access for key-system "${i.keySystem}" obtained`);const s=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),t.mediaKeys=i.createMediaKeys().then(i=>(this.log(`Media-keys created for "${e}"`),t.hasMediaKeys=!0,s.then(t=>t?this.setMediaKeysServerCertificate(i,e,t):i))),t.mediaKeys.catch(t=>{this.error(`Failed to create media-keys for "${e}"}: ${t}`)}),t.mediaKeys})}return n.then(()=>r.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:i}){this.log(`Creating key-system session "${t}" keyId: ${eI.hexDump(e.keyId||[])}`);const s=i.createSession(),r={decryptdata:e,keySystem:t,mediaKeys:i,mediaKeysSession:s,keyStatus:"status-pending"};return this.mediaKeySessions.push(r),r}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const i=this.createMediaKeySessionContext(e),s=this.getKeyIdString(t),r="cenc";this.keyIdToKeySessionPromise[s]=this.generateRequestWithPreferredKeySession(i,r,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return eI.hexDump(e.keyId)}updateKeySession(e,t){var i;const s=e.mediaKeysSession;return this.log(`Updating key-session "${s.sessionId}" for keyID ${eI.hexDump((null==(i=e.decryptdata)?void 0:i.keyId)||[])}\n      } (data length: ${t?t.byteLength:t})`),s.update(t)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>nR(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:e,mediaKeys:t})=>this.attemptSetMediaKeys(e,t))}selectKeySystem(e){return new Promise((t,i)=>this.getKeySystemSelectionPromise(e).then(({keySystem:e})=>{const s=nR(e);s?t(s):i(new Error(`Unable to find format for key-system "${e}"`))}).catch(i))}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){const t=aR(this.config),i=e.map(rR).filter(e=>!!e&&-1!==t.indexOf(e));return this.selectKeySystem(i)}loadKey(e){const t=e.keyInfo.decryptdata,i=this.getKeyIdString(t),s=`(keyId: ${i} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${s}`);let r=this.keyIdToKeySessionPromise[i];if(!r){r=this.getKeySystemForKeyPromise(t).then(({keySystem:i,mediaKeys:r})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${s}`),this.attemptSetMediaKeys(i,r).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:i,mediaKeys:r,decryptdata:t})))));const n=this.keyIdToKeySessionPromise[i]=r.then(e=>{const i="cenc",s=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(e,i,s,"playlist-key")});n.catch(e=>this.handleError(e))}return r}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof GO?this.hls.trigger(Ck.ERROR,e.data):this.hls.trigger(Ck.ERROR,{type:Ik.KEY_SYSTEM_ERROR,details:_k.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),i=this.keyIdToKeySessionPromise[t];if(!i){const t=rR(e.keyFormat),i=t?[t]:aR(this.config);return this.attemptKeySystemAccess(i)}return i}getKeySystemSelectionPromise(e){if(e.length||(e=aR(this.config)),0===e.length)throw new GO({type:Ik.KEY_SYSTEM_ERROR,details:_k.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${P_({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){if(this.mediaKeys===t)return Promise.resolve();const i=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const s=Promise.all(i).then(()=>{if(!this.media)throw this.mediaKeys=null,new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.mediaKeys=t,this.setMediaKeysQueue.push(s),s.then(()=>{this.log(`Media-keys set for "${e}"`),i.push(s),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(e=>-1===i.indexOf(e))})}generateRequestWithPreferredKeySession(e,t,i,s){var r,n;const a=null==(r=this.config.drmSystems)||null==(n=r[e.keySystem])?void 0:n.generateRequest;if(a)try{const s=a.call(this.hls,t,i,e);if(!s)throw new Error("Invalid response from configured generateRequest filter");t=s.initDataType,i=s.initData?s.initData:null,e.decryptdata.pssh=i?new Uint8Array(i):null}catch(p){var o;if(this.warn(p.message),null!=(o=this.hls)&&o.config.debug)throw p}if(null===i)return this.log(`Skipping key-session request for "${s}" (no initData)`),Promise.resolve(e);const l=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${s}": ${l} (init data type: ${t} length: ${i?i.byteLength:null})`);const c=new dP,d=e._onmessage=t=>{const i=e.mediaKeysSession;if(!i)return void c.emit("error",new Error("invalid state"));const{messageType:s,message:r}=t;this.log(`"${s}" message event for session "${i.sessionId}" message size: ${r.byteLength}`),"license-request"===s||"license-renewal"===s?this.renewLicense(e,r).catch(e=>{c.eventNames().length?c.emit("error",e):this.handleError(e)}):"license-release"===s?e.keySystem===iR.FAIRPLAY&&(this.updateKeySession(e,QC("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${s}"`)},h=e._onkeystatuseschange=t=>{const i=e.mediaKeysSession;if(!i)return void c.emit("error",new Error("invalid state"));this.onKeyStatusChange(e);const s=e.keyStatus;c.emit("keyStatus",s),"expired"===s&&(this.warn(`${e.keySystem} expired for key ${l}`),this.renewKeySession(e))};FO(e.mediaKeysSession,"message",d),FO(e.mediaKeysSession,"keystatuseschange",h);const u=new Promise((e,t)=>{c.on("error",t),c.on("keyStatus",i=>{i.startsWith("usable")?e():"output-restricted"===i?t(new GO({type:Ik.KEY_SYSTEM_ERROR,details:_k.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===i?t(new GO({type:Ik.KEY_SYSTEM_ERROR,details:_k.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${i}"`)):"expired"===i?t(new Error("key expired while generating request")):this.warn(`unhandled key status change "${i}"`)})});return e.mediaKeysSession.generateRequest(t,i).then(()=>{var t;this.log(`Request generated for key-session "${null==(t=e.mediaKeysSession)?void 0:t.sessionId}" keyId: ${l}`)}).catch(e=>{throw new GO({type:Ik.KEY_SYSTEM_ERROR,details:_k.KEY_SYSTEM_NO_SESSION,error:e,fatal:!1},`Error generating key-session request: ${e}`)}).then(()=>u).catch(t=>{throw c.removeAllListeners(),this.removeSession(e),t}).then(()=>(c.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((t,i)=>{if("string"===typeof i&&"object"===typeof t){const e=i;i=t,t=e}this.log(`key status change "${t}" for keyStatuses keyId: ${eI.hexDump("buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i))} session keyId: ${eI.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t})}fetchServerCertificate(e){const t=this.config,i=t.loader,s=new i(t),r=this.getServerCertificateUrl(e);return r?(this.log(`Fetching server certificate for "${e}"`),new Promise((i,n)=>{const a={responseType:"arraybuffer",url:r},o=t.certLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(e,t,s,r)=>{i(e.data)},onError:(t,i,s,o)=>{n(new GO({type:Ik.KEY_SYSTEM_ERROR,details:_k.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:s,response:Fk({url:a.url,data:void 0},t)},`"${e}" certificate request failed (${r}). Status: ${t.code} (${t.text})`))},onTimeout:(t,i,s)=>{n(new GO({type:Ik.KEY_SYSTEM_ERROR,details:_k.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:s,response:{url:a.url,data:void 0}},`"${e}" certificate request timed out (${r})`))},onAbort:(e,t,i)=>{n(new Error("aborted"))}};s.load(a,l,c)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,i){return new Promise((s,r)=>{e.setServerCertificate(i).then(r=>{this.log(`setServerCertificate ${r?"success":"not supported by CDM"} (${null==i?void 0:i.byteLength}) on "${t}"`),s(e)}).catch(e=>{r(new GO({type:Ik.KEY_SYSTEM_ERROR,details:_k.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(t=>this.updateKeySession(e,new Uint8Array(t)).catch(e=>{throw new GO({type:Ik.KEY_SYSTEM_ERROR,details:_k.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:e,fatal:!0},e.message)}))}unpackPlayReadyKeyMessage(e,t){const i=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!i.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const s=(new DOMParser).parseFromString(i,"application/xml"),r=s.querySelectorAll("HttpHeader");if(r.length>0){let t;for(let i=0,s=r.length;i<s;i++){var n,a;t=r[i];const s=null==(n=t.querySelector("name"))?void 0:n.textContent,o=null==(a=t.querySelector("value"))?void 0:a.textContent;s&&o&&e.setRequestHeader(s,o)}}const o=s.querySelector("Challenge"),l=null==o?void 0:o.textContent;if(!l)throw new Error("Cannot find <Challenge> in key message");return QC(atob(l))}setupLicenseXHR(e,t,i,s){const r=this.config.licenseXhrSetup;return r?Promise.resolve().then(()=>{if(!i.decryptdata)throw new Error("Key removed");return r.call(this.hls,e,t,i,s)}).catch(n=>{if(!i.decryptdata)throw n;return e.open("POST",t,!0),r.call(this.hls,e,t,i,s)}).then(i=>{e.readyState||e.open("POST",t,!0);const r=i||s;return{xhr:e,licenseChallenge:r}}):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:s}))}requestLicense(e,t){const i=this.config.keyLoadPolicy.default;return new Promise((s,r)=>{const n=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${n}`);const a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return r(new Error("invalid state"));if(4===a.readyState)if(200===a.status){this._requestLicenseFailureCount=0;let t=a.response;this.log(`License received ${t instanceof ArrayBuffer?t.byteLength:t}`);const i=this.config.licenseResponseCallback;if(i)try{t=i.call(this.hls,a,n,e)}catch(o){this.error(o)}s(t)}else{const o=i.errorRetry,l=o?o.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>l||a.status>=400&&a.status<500)r(new GO({type:Ik.KEY_SYSTEM_ERROR,details:_k.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:{url:n,data:void 0,code:a.status,text:a.statusText}},`License Request XHR failed (${n}). Status: ${a.status} (${a.statusText})`));else{const i=l-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${i} attempts left`),this.requestLicense(e,t).then(s,r)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=a,this.setupLicenseXHR(a,n,e,t).then(({xhr:t,licenseChallenge:i})=>{e.keySystem==iR.PLAYREADY&&(i=this.unpackPlayReadyKeyMessage(t,i)),t.send(i)})})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const i=t.media;this.media=i,FO(i,"waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media;e&&($O(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;if(this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},!this.mediaKeys&&!this.mediaKeySessions.length)return;const t=this.media,i=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,pR.clearKeyUriToKeyIdMap();const s=i.length;UO.CDMCleanupPromise=Promise.all(i.map(e=>this.removeSession(e)).concat(null==t||null==(e=t.setMediaKeys(null))?void 0:e.catch(e=>{var t;this.log(`Could not clear media keys: ${e}`),null==(t=this.hls)||t.trigger(Ck.ERROR,{type:Ik.OTHER_ERROR,details:_k.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${e}`)})}))).catch(e=>{var t;this.log(`Could not close sessions and clear media keys: ${e}`),null==(t=this.hls)||t.trigger(Ck.ERROR,{type:Ik.OTHER_ERROR,details:_k.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${e}`)})}).then(()=>{s&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(t&&this.config.emeEnabled&&!this.keyFormatPromise){const e=t.reduce((e,t)=>(-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e),[]);this.log(`Selecting key-system from session-keys ${e.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(e)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:i}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const s=this.mediaKeySessions.indexOf(e);s>-1&&this.mediaKeySessions.splice(s,1);const{drmSystemOptions:r}=this.config,n=dR(r)?new Promise((e,i)=>{self.setTimeout(()=>i(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(e)}):Promise.resolve();return n.catch(e=>{var t;this.log(`Could not remove session: ${e}`),null==(t=this.hls)||t.trigger(Ck.ERROR,{type:Ik.OTHER_ERROR,details:_k.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${e}`)})}).then(()=>t.close()).catch(e=>{var t;this.log(`Could not close session: ${e}`),null==(t=this.hls)||t.trigger(Ck.ERROR,{type:Ik.OTHER_ERROR,details:_k.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${e}`)})})}}}UO.CDMCleanupPromise=void 0;class GO extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}class HO{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(Ck.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(Ck.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(Ck.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(Ck.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const i=this.hls.config;if(i.capLevelOnFPSDrop){const e=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=e,e&&"function"===typeof e.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,i){const s=performance.now();if(t){if(this.lastTime){const e=s-this.lastTime,r=i-this.lastDroppedFrames,n=t-this.lastDecodedFrames,a=1e3*r/e,o=this.hls;if(o.trigger(Ck.FPS_DROP,{currentDropped:r,currentDecoded:n,totalDroppedFrames:i}),a>0&&r>o.config.fpsDroppedMonitoringThreshold*n){let e=o.currentLevel;o.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+e),e>0&&(-1===o.autoLevelCapping||o.autoLevelCapping>=e)&&(e-=1,o.trigger(Ck.FPS_DROP_LEVEL_CAPPING,{level:e,droppedLevel:o.currentLevel}),o.autoLevelCapping=e,this.streamController.nextLevelSwitch())}}this.lastTime=s,this.lastDroppedFrames=i,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function jO(e,t){let i;try{i=new Event("addtrack")}catch(iH){i=document.createEvent("Event"),i.initEvent("addtrack",!1,!1)}i.track=e,t.dispatchEvent(i)}function zO(e,t){const i=e.mode;if("disabled"===i&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error(`addCue is failed for: ${t}`)}catch(iH){qk.debug(`[texttrack-utils]: ${iH}`);try{const i=new self.TextTrackCue(t.startTime,t.endTime,t.text);i.id=t.id,e.addCue(i)}catch(s){qk.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${s}`)}}"disabled"===i&&(e.mode=i)}function VO(e,t){const i=e.mode;if("disabled"===i&&(e.mode="hidden"),e.cues)for(let s=e.cues.length;s--;)t&&e.cues[s].removeEventListener("enter",t),e.removeCue(e.cues[s]);"disabled"===i&&(e.mode=i)}function YO(e,t,i,s){const r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues&&e.cues.length>0){const r=KO(e.cues,t,i);for(let t=0;t<r.length;t++)s&&!s(r[t])||e.removeCue(r[t])}"disabled"===r&&(e.mode=r)}function WO(e,t){if(t<=e[0].startTime)return 0;const i=e.length-1;if(t>e[i].endTime)return-1;let s,r=0,n=i;while(r<=n)if(s=Math.floor((n+r)/2),t<e[s].startTime)n=s-1;else{if(!(t>e[s].startTime&&r<i))return s;r=s+1}return e[r].startTime-t<t-e[n].startTime?r:n}function KO(e,t,i){const s=[],r=WO(e,t);if(r>-1)for(let n=r,a=e.length;n<a;n++){const r=e[n];if(r.startTime>=t&&r.endTime<=i)s.push(r);else if(r.startTime>i)return s}return s}function qO(e){const t=[];for(let i=0;i<e.length;i++){const s=e[i];"subtitles"!==s.kind&&"captions"!==s.kind||!s.label||t.push(e[i])}return t}class XO extends gM{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let e=null;const t=qO(this.media.textTracks);for(let s=0;s<t.length;s++)if("hidden"===t[s].mode)e=t[s];else if("showing"===t[s].mode){e=t[s];break}const i=this.findTrackForTextTrack(e);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(Ck.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Ck.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Ck.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Ck.LEVEL_LOADING,this.onLevelLoading,this),e.on(Ck.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Ck.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(Ck.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Ck.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Ck.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Ck.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Ck.LEVEL_LOADING,this.onLevelLoading,this),e.off(Ck.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Ck.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(Ck.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const i=this.media;if(!i)return;const s=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||i.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,s)return;const r=qO(i.textTracks);r.forEach(e=>{VO(e)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:i,groupId:s,details:r}=t,n=this.tracksInGroup[i];if(!n||n.groupId!==s)return void this.warn(`Subtitle track with id:${i} and group:${s} not found in active group ${null==n?void 0:n.groupId}`);const a=n.details;n.details=t.details,this.log(`Subtitle track ${i} "${n.name}" lang:${n.lang} group:${s} loaded [${r.startSN}-${r.endSN}]`),i===this.trackId&&this.playlistLoaded(i,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const i=t.subtitleGroups||null,s=this.groupIds;let r=this.currentTrack;if(!i||(null==s?void 0:s.length)!==(null==i?void 0:i.length)||null!=i&&i.some(e=>-1===(null==s?void 0:s.indexOf(e)))){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter(e=>!i||-1!==i.indexOf(e.groupId));if(e.length)this.selectDefaultTrack&&!e.some(e=>e.default)&&(this.selectDefaultTrack=!1),e.forEach((e,t)=>{e.id=t});else if(!r&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.subtitlePreference;if(!r&&t){this.selectDefaultTrack=!1;const i=F_(t,e);if(i>-1)r=e[i];else{const e=F_(t,this.tracks);r=this.tracks[e]}}let s=this.findTrackId(r);-1===s&&r&&(s=this.findTrackId(null));const n={subtitleTracks:e};this.log(`Updating subtitle tracks, ${e.length} track(s) found in "${null==i?void 0:i.join(",")}" group-id`),this.hls.trigger(Ck.SUBTITLE_TRACKS_UPDATED,n),-1!==s&&-1===this.trackId&&this.setSubtitleTrack(s)}}findTrackId(e){const t=this.tracksInGroup,i=this.selectDefaultTrack;for(let s=0;s<t.length;s++){const r=t[s];if((!i||r.default)&&(i||e)&&(!e||$_(r,e)))return s}if(e){for(let i=0;i<t.length;i++){const s=t[i];if(vM(e.attrs,s.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<t.length;i++){const s=t[i];if(vM(e.attrs,s.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let i=0;i<t.length;i++){const s=t[i];if(yM(s,e))return i}}return-1}onError(e,t){!t.fatal&&t.context&&(t.context.type!==Rk.SUBTITLE_TRACK||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(-1===e.id)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const i=this.currentTrack;if(i&&$_(e,i))return i;const s=F_(e,this.tracksInGroup);if(s>-1){const e=this.tracksInGroup[s];return this.setSubtitleTrack(s),e}if(i)return null;{const i=F_(e,t);if(i>-1)return t[i]}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const i=e.id,s=e.groupId,r=this.getUrlWithDirectives(e.url,t),n=e.details,a=null==n?void 0:n.age;this.log(`Loading subtitle ${i} "${e.name}" lang:${e.lang} group:${s}${void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:""}${a&&n.live?" age "+a.toFixed(1)+(n.type&&" "+n.type||""):""} ${r}`),this.hls.trigger(Ck.SUBTITLE_TRACK_LOADING,{url:r,id:i,groupId:s,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=qO(e.textTracks),i=this.currentTrack;let s;if(i&&(s=t.filter(e=>yM(i,e))[0],s||this.warn(`Unable to find subtitle TextTrack with name "${i.name}" and language "${i.lang}"`)),[].slice.call(t).forEach(e=>{"disabled"!==e.mode&&e!==s&&(e.mode="disabled")}),s){const e=this.subtitleDisplay?"showing":"hidden";s.mode!==e&&(s.mode=e)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media)return void(this.queuedDefaultTrack=e);if(e<-1||e>=t.length||!xk(e))return void this.warn(`Invalid subtitle track id: ${e}`);this.selectDefaultTrack=!1;const i=this.currentTrack,s=t[e]||null;if(this.trackId=e,this.currentTrack=s,this.toggleTrackModes(),!s)return void this.hls.trigger(Ck.SUBTITLE_TRACK_SWITCH,{id:e});const r=!!s.details&&!s.details.live;if(e===this.trackId&&s===i&&r)return;this.log(`Switching to subtitle-track ${e}`+(s?` "${s.name}" lang:${s.lang} group:${s.groupId}`:""));const{id:n,groupId:a="",name:o,type:l,url:c}=s;this.hls.trigger(Ck.SUBTITLE_TRACK_SWITCH,{id:n,groupId:a,name:o,type:l,url:c});const d=this.switchParams(s.url,null==i?void 0:i.details,s.details);this.loadPlaylist(d)}}function QO(){try{return crypto.randomUUID()}catch(e){try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch(t){let e=(new Date).getTime();const i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:3&i|8).toString(16)});return i}}}function ZO(e){let t=5381,i=e.length;while(i)t=33*t^e.charCodeAt(--i);return(t>>>0).toString()}const JO=.025;let eN=function(e){return e[e["Point"]=0]="Point",e[e["Range"]=1]="Range",e}({});function tN(e,t,i){return`${e.identifier}-${i+1}-${ZO(t)}`}class iN{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,null==(e=this.assetListLoader)||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var t;if(e>0&&e>=this.assetList.length)return!0;const i=this.playoutLimit;if(e<=0||isNaN(i))return!1;if(0===i)return!0;const s=(null==(t=this.assetList[e])?void 0:t.startOffset)||0;return s>i}findAssetIndex(e){const t=this.assetList.indexOf(e);return t}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return sN(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(0===this.startTime||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime,i=sN(t,e);return t-i<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=xk(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return sN(e,t)}return e}get appendInPlace(){return!!this.appendInPlaceStarted||!this.appendInPlaceDisabled&&!(this.cue.once||this.cue.pre||!this.startIsAligned||!(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<JO))}set appendInPlace(e){this.appendInPlaceStarted?this.resetOnResume=!e:this.appendInPlaceDisabled=!e}get timelineStart(){return null!==this._timelineStart?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return t=null!==this._duration?this._duration:this.dateRange.duration?this.dateRange.duration:this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return"RANGE"===this.dateRange.attr["X-TIMELINE-OCCUPIES"]?eN.Range:eN.Point}get supplementsPrimary(){return"PRIMARY"===this.dateRange.attr["X-TIMELINE-STYLE"]}get contentMayVary(){return"NO"!==this.dateRange.attr["X-CONTENT-MAY-VARY"]}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||null!==this.assetListResponse}toString(){return aN(this)}}function sN(e,t){return e-t.start<t.duration/2&&!(Math.abs(e-(t.start+t.duration))<JO)?t.start:t.start+t.duration}function rN(e,t,i){const s=new self.URL(e,i);return"data:"!==s.protocol&&s.searchParams.set("_HLS_primary_id",t),s}function nN(e,t){while(null!=(i=e.assetList[++t])&&i.error)var i;return t}function aN(e){return`["${e.identifier}" ${e.cue.pre?"<pre>":e.cue.post?"<post>":""}${e.timelineStart.toFixed(2)}-${e.resumeTime.toFixed(2)}]`}function oN(e){const t=e.timelineStart,i=e.duration||0;return`["${e.identifier}" ${t.toFixed(2)}-${(t+i).toFixed(2)}]`}class lN{constructor(e,t,i,s){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls.trigger(Ck.PLAYOUT_LIMIT_REACHED,{})};const r=this.hls=new e(t);this.interstitial=i,this.assetItem=s;let n=s.uri;try{n=rN(n,t.primarySessionId).href}catch(o){}r.loadSource(n);const a=()=>{this.hasDetails=!0};r.once(Ck.LEVEL_LOADED,a),r.once(Ck.AUDIO_TRACK_LOADED,a),r.once(Ck.SUBTITLE_TRACK_LOADED,a),r.on(Ck.MEDIA_ATTACHING,(e,{media:t})=>{this.removeMediaListeners(),this.mediaAttached=t;const i=this.interstitial;i.playoutLimit&&(t.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&r.on(Ck.BUFFER_APPENDED,()=>{const e=this.bufferedEnd;this.reachedPlayout(e)&&(this._bufferedEosTime=e,r.trigger(Ck.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){var e;return(null==(e=this.interstitial)?void 0:e.appendInPlace)||!1}bufferedInPlaceToEnd(e){var t;if(!this.appendInPlace)return!1;if(null!=(t=this.hls)&&t.bufferedToEnd)return!0;if(!e||!this._bufferedEosTime)return!1;const i=this.timelineOffset,s=DC.bufferInfo(e,i,0),r=this.getAssetTime(s.end);return r>=this._bufferedEosTime-.02}reachedPlayout(e){const t=this.interstitial,i=t.playoutLimit;return this.startOffset+e>=i}get destroyed(){var e;return!(null!=(e=this.hls)&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return(null==(e=this.hls)?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=DC.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;return e||0}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return(null==(e=this.hls)?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const i=e-t;if(Math.abs(i)>1/9e4){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,i=this.duration;return Math.min(Math.max(0,e-t),i)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){var e;this.mediaAttached&&(null!=(e=this.hls)&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd))}destroy(){this.removeMediaListeners(),this.hls.destroy(),this.hls=this.interstitial=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){this.hls.attachMedia(e)}detachMedia(){this.removeMediaListeners(),this.mediaAttached=null,this.hls.detachMedia()}resumeBuffering(){this.hls.resumeBuffering()}pauseBuffering(){this.hls.pauseBuffering()}transferMedia(){return this.bufferSnapShot(),this.hls.transferMedia()}resetDetails(){const e=this.hls;if(this.hasDetails){e.stopLoad();const t=e=>delete e.details;e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}}on(e,t,i){this.hls.on(e,t)}once(e,t,i){this.hls.once(e,t)}off(e,t,i){this.hls.off(e,t)}toString(){var e;return`HlsAssetPlayer: ${oN(this.assetItem)} ${null==(e=this.hls)?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const cN=.033;class dN extends Gk{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((i,s)=>e<=s.startOffset&&t>s.startOffset?(delete s.error,i+1):i,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let i=-1;e.nextEvent?i=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(i=this.findEventIndex(e.previousEvent.identifier)+1);const s=this.items;if(s){s[i]||(void 0===t&&(t=e.start),i=this.findItemIndexAtTime(t));while(i>=0&&null!=(r=s[i])&&r.event){var r;i--}}return i}findItemIndexAtTime(e,t){const i=this.items;if(i)for(let s=0;s<i.length;s++){let r=i[s];if(t&&"primary"!==t&&(r=r[t]),e===r.start||e>r.start&&e<r.end)return s}return-1}findJumpRestrictedIndex(e,t){const i=this.items;if(i)for(let s=e;s<=t;s++){if(!i[s])break;const e=i[s].event;if(null!=e&&e.restrictions.jump&&!e.appendInPlace)return s}return-1}findEventIndex(e){const t=this.items;if(t)for(let s=t.length;s--;){var i;if((null==(i=t[s].event)?void 0:i.identifier)===e)return s}return-1}findAssetIndex(e,t){const i=e.assetList,s=i.length;if(s>1)for(let r=0;r<s;r++){const e=i[r];if(!e.error){const i=e.timelineStart;if(t===i||t>i&&t<i+(e.duration||0))return r}}return 0}get assetIdAtEnd(){var e,t;const i=null==(e=this.items)||null==(t=e[this.length-1])?void 0:t.event;if(i){const e=i.assetList,t=e[e.length-1];if(t)return t.identifier}return null}parseInterstitialDateRanges(e,t){const i=e.main.details,{dateRanges:s}=i,r=this.events,n=this.parseDateRanges(s,{url:i.url},t),a=Object.keys(s),o=r?r.filter(e=>!a.includes(e.identifier)):[];n.length&&n.sort((e,t)=>{const i=e.cue.pre,s=e.cue.post,r=t.cue.pre,n=t.cue.post;if(i&&!r)return-1;if(r&&!i)return 1;if(s&&!n)return 1;if(n&&!s)return-1;if(!i&&!r&&!s&&!n){const i=e.startTime,s=t.startTime;if(i!==s)return i-s}return e.dateRange.tagOrder-t.dateRange.tagOrder}),this.events=n,o.forEach(e=>{this.removeEvent(e)}),this.updateSchedule(e,o)}updateSchedule(e,t=[]){const i=this.events||[];if(i.length||t.length||this.length<2){const s=this.items,r=this.parseSchedule(i,e),n=t.length||(null==s?void 0:s.length)!==r.length||r.some((e,t)=>Math.abs(e.playout.start-s[t].playout.start)>.005||Math.abs(e.playout.end-s[t].playout.end)>.005);n&&(this.items=r,this.onScheduleUpdate(t,s))}}parseDateRanges(e,t,i){const s=[],r=Object.keys(e);for(let n=0;n<r.length;n++){const a=r[n],o=e[a];if(o.isInterstitial){let e=this.eventMap[a];e?e.setDateRange(o):(e=new iN(o,t),this.eventMap[a]=e,!1===i&&(e.appendInPlace=i)),s.push(e)}}return s}parseSchedule(e,t){const i=[],s=t.main.details,r=s.live?1/0:s.edge;let n=0;if(e=e.filter(e=>!e.error&&!(e.cue.once&&e.hasPlayed)),e.length){this.resolveOffsets(e,t);let s=0,o=0;if(e.forEach((t,a)=>{const l=t.cue.pre,c=t.cue.post,d=e[a-1]||null,h=t.appendInPlace,u=c?r:t.startOffset,p=t.duration,f=t.timelineOccupancy===eN.Range?p:0,g=t.resumptionOffset,m=(null==d?void 0:d.startTime)===u,v=u+t.cumulativeDuration;let y=h?v+p:u+g;if(l||!c&&u<=0){const e=o;o+=f,t.timelineStart=v;const s=n;n+=p,i.push({event:t,start:v,end:y,playout:{start:s,end:n},integrated:{start:e,end:o}})}else{if(!(u<=r))return;{if(!m){const r=u-s;if(r>cN){const l=s,c=o;o+=r;const d=n;n+=r;const h={previousEvent:e[a-1]||null,nextEvent:t,start:l,end:l+r,playout:{start:d,end:n},integrated:{start:c,end:o}};i.push(h)}else r>0&&d&&(d.cumulativeDuration+=r,i[i.length-1].end=u)}c&&(y=v),t.timelineStart=v;const r=o;o+=f;const l=n;n+=p,i.push({event:t,start:v,end:y,playout:{start:l,end:n},integrated:{start:r,end:o}})}}const b=t.resumeTime;s=c||b>r?r:b}),s<r){var a;const e=s,t=o,l=r-s;o+=l;const c=n;n+=l,i.push({previousEvent:(null==(a=i[i.length-1])?void 0:a.event)||null,nextEvent:null,start:s,end:e+l,playout:{start:c,end:n},integrated:{start:t,end:o}})}this.setDurations(r,n,o)}else{const e=0;i.push({previousEvent:null,nextEvent:null,start:e,end:r,playout:{start:e,end:r},integrated:{start:e,end:r}}),this.setDurations(r,r,r)}return i}setDurations(e,t,i){this.durations={primary:e,playout:t,integrated:i}}resolveOffsets(e,t){const i=t.main.details,s=i.live?1/0:i.edge;let r=0,n=-1;e.forEach((a,o)=>{const l=a.cue.pre,c=a.cue.post,d=l?0:c?s:a.startTime;this.updateAssetDurations(a);const h=n===d;if(h?a.cumulativeDuration=r:(r=0,n=d),!c&&a.snapOptions.in&&(a.resumeAnchor=q_(null,i.fragments,a.startOffset+a.resumptionOffset,0,0)||void 0),a.appendInPlace&&!a.appendInPlaceStarted){const e=this.primaryCanResumeInPlaceAt(a,t);e||(a.appendInPlace=!1)}if(!a.appendInPlace&&o+1<e.length){const t=e[o+1].startTime-e[o].resumeTime;t<cN&&(e[o+1].appendInPlace=!1,e[o+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${a}`))}const u=xk(a.resumeOffset)?a.resumeOffset:a.duration;r+=u})}primaryCanResumeInPlaceAt(e,t){const i=e.resumeTime,s=e.startTime+e.resumptionOffset;if(Math.abs(i-s)>JO)return this.log(`"${e.identifier}" resumption ${i} not aligned with estimated timeline end ${s}`),!1;if(!t)return this.log(`"${e.identifier}" resumption ${i} can not be aligned with media (none selected)`),!1;const r=Object.keys(t);return!r.some(s=>{const r=t[s].details,n=r.edge;if(i>=n)return this.log(`"${e.identifier}" resumption ${i} past ${s} playlist end ${n}`),!1;const a=q_(null,r.fragments,i);if(!a)return this.log(`"${e.identifier}" resumption ${i} does not align with any fragments in ${s} playlist (${r.fragStart}-${r.fragmentEnd})`),!0;const o="audio"===s?.175:0,l=Math.abs(a.start-i)<JO+o||Math.abs(a.end-i)<JO+o;return!l&&(this.log(`"${e.identifier}" resumption ${i} not aligned with ${s} fragment bounds (${a.start}-${a.end} sn: ${a.sn} cc: ${a.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let i=0,s=!1,r=!1;e.assetList.forEach((e,n)=>{const a=t+i;e.startOffset=i,e.timelineStart=a,s||(s=null===e.duration),r||(r=!!e.error);const o=e.error?0:e.duration||0;i+=o}),e.duration=s&&!r?Math.max(i,e.duration):i}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function hN(e){return`[${e.event?'"'+e.event.identifier+'"':"primary"}: ${e.start.toFixed(2)}-${e.end.toFixed(2)}]`}class uN{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const i=e.assetListUrl;let s;try{s=rN(i,this.hls.sessionId,e.baseUrl)}catch(h){const t=this.assignAssetListError(e,_k.ASSET_LIST_LOAD_ERROR,h,i);return void this.hls.trigger(Ck.ERROR,t)}t&&"data:"!==s.protocol&&s.searchParams.set("_HLS_start_offset",""+t);const r=this.hls.config,n=r.loader,a=new n(r),o={responseType:"json",url:s.href},l=r.interstitialAssetListLoadPolicy.default,c={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(t,i,s,r)=>{const n=t.data,a=null==n?void 0:n.ASSETS;if(!Array.isArray(a)){const t=this.assignAssetListError(e,_k.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),s.url,i,r);return void this.hls.trigger(Ck.ERROR,t)}e.assetListResponse=n,this.hls.trigger(Ck.ASSET_LIST_LOADED,{event:e,assetListResponse:n,networkDetails:r})},onError:(t,i,s,r)=>{const n=this.assignAssetListError(e,_k.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${t.code} ${t.text} (${i.url})`),i.url,r,s);this.hls.trigger(Ck.ERROR,n)},onTimeout:(t,i,s)=>{const r=this.assignAssetListError(e,_k.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${i.url})`),i.url,t,s);this.hls.trigger(Ck.ERROR,r)}};return a.load(o,c,d),this.hls.trigger(Ck.ASSET_LIST_LOADING,{event:e}),a}assignAssetListError(e,t,i,s,r,n){return e.error=i,{type:Ik.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:s,error:i,networkDetails:n,stats:r}}}function pN(e){null==e||e.play().catch(()=>{})}class fN extends Gk{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const e=this.currentTime;if(void 0===e||this.playbackDisabled)return;const t=e-this.timelinePos,i=Math.abs(t)<1/7056e5;if(i)return;const s=t<=-.01;this.timelinePos=e,this.bufferedPos=e;const r=this.playingItem;if(!r)return void this.checkBuffer();if(s){const i=this.schedule.resetErrorsInRange(e,e-t);i&&this.updateSchedule()}if(this.checkBuffer(),s&&e<r.start||e>=r.end){var n;const e=this.schedule.findItemIndexAtTime(this.timelinePos);if(!this.isInterstitial(r)&&null!=(n=this.media)&&n.paused&&(this.shouldPlay=!1),!s){const t=this.findItemIndex(r);if(e>t){const i=this.schedule.findJumpRestrictedIndex(t+1,e);if(i>t)return void this.setSchedulePosition(i)}}return void this.setSchedulePosition(e)}const a=this.playingAsset;if(!a){if(this.playingLastItem&&this.isInterstitial(r)){const t=r.event.assetList[0];t&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(e,t))}return}const o=a.timelineStart,l=a.duration||0;(s&&e<o||e>=o+l)&&this.setScheduleToAssetAtTime(e,a)},this.onTimeupdate=()=>{const e=this.currentTime;if(void 0===e||this.playbackDisabled)return;if(!(e>this.timelinePos))return;this.timelinePos=e,e>this.bufferedPos&&this.checkBuffer();const t=this.playingItem;if(!t||this.playingLastItem)return;if(e>=t.end){this.timelinePos=t.end;const e=this.findItemIndex(t);this.setSchedulePosition(e+1)}const i=this.playingAsset;if(!i)return;const s=i.timelineStart+(i.duration||0);e>=s&&this.setScheduleToAssetAtTime(e,i)},this.onScheduleUpdate=(e,t)=>{const i=this.schedule,s=this.playingItem,r=i.events||[],n=i.items||[],a=i.durations,o=e.map(e=>e.identifier),l=!(!r.length&&!o.length);(l||t)&&this.log(`INTERSTITIALS_UPDATED (${r.length}): ${r}\nSchedule: ${n.map(e=>hN(e))} pos: ${this.timelinePos}`),o.length&&this.log(`Removed events ${o}`),this.playerQueue.forEach(e=>{if(e.interstitial.appendInPlace){const t=e.assetItem.timelineStart,i=e.timelineOffset-t;if(i)try{e.timelineOffset=t}catch(tH){Math.abs(i)>JO&&this.warn(`${tH} ("${e.assetId}" ${e.timelineOffset}->${t})`)}}});let c=null;if(s){const e=this.updateItem(s,this.timelinePos);this.itemsMatch(s,e)&&(this.playingItem=e,this.waitingItem=this.endedItem=null,c=()=>this.trimInPlace(e,s))}else this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const d=this.bufferingItem;if(d){const e=this.updateItem(d,this.bufferedPos);this.itemsMatch(d,e)?(this.bufferingItem=e,c||(c=()=>this.trimInPlace(e,d))):d.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(d.event,null))}if(e.forEach(e=>{e.assetList.forEach(e=>{this.clearAssetPlayer(e.identifier,null)})}),l||t){if(this.hls.trigger(Ck.INTERSTITIALS_UPDATED,{events:r.slice(0),schedule:n.slice(0),durations:a,removedIds:o}),this.isInterstitial(s)&&o.includes(s.event.identifier))return this.warn(`Interstitial "${s.event.identifier}" removed while playing`),void this.primaryFallback(s.event);c&&c(),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new uN(e),this.schedule=new dN(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e.on(Ck.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Ck.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Ck.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Ck.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Ck.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Ck.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(Ck.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(Ck.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(Ck.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(Ck.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(Ck.BUFFER_APPENDED,this.onBufferAppended,this),e.on(Ck.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Ck.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(Ck.MEDIA_ENDED,this.onMediaEnded,this),e.on(Ck.ERROR,this.onError,this),e.on(Ck.DESTROYING,this.onDestroying,this)}unregisterListeners(){const e=this.hls;e&&(e.off(Ck.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Ck.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Ck.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Ck.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Ck.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Ck.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(Ck.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(Ck.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(Ck.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(Ck.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(Ck.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Ck.BUFFER_APPENDED,this.onBufferAppended,this),e.off(Ck.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Ck.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(Ck.MEDIA_ENDED,this.onMediaEnded,this),e.off(Ck.ERROR,this.onError,this),e.off(Ck.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;null==(e=this.getBufferingPlayer())||e.resumeBuffering()}pauseBuffering(){var e;null==(e=this.getBufferingPlayer())||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.manager=null,this.hls=this.HlsPlayerClass=this.schedule=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){$O(e,"play",this.onPlay),$O(e,"pause",this.onPause),$O(e,"seeking",this.onSeeking),$O(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const i=this.media=t.media;FO(i,"seeking",this.onSeeking),FO(i,"timeupdate",this.onTimeupdate),FO(i,"play",this.onPlay),FO(i,"pause",this.onPause)}onMediaAttached(e,t){const i=this.effectivePlayingItem,s=this.detachedData;if(this.detachedData=null,null===i)this.checkStart();else if(!s){this.clearScheduleState();const e=this.findItemIndex(i);this.setSchedulePosition(e)}}clearScheduleState(){this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const i=!!t.transferMedia,s=this.media;if(this.media=null,!i&&(s&&this.removeMediaListeners(s),this.detachedData)){const e=this.getBufferingPlayer();e&&(this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,e.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.manager){if(!this.hls)return null;const e=this,t=()=>e.bufferingItem||e.waitingItem,i=t=>t?e.getAssetPlayer(t.identifier):t,s=(t,s,r,a,o)=>{if(t){let l=t[s].start;const c=t.event;if(c){if("playout"===s||c.timelineOccupancy!==eN.Point){const e=i(r);(null==e?void 0:e.interstitial)===c&&(l+=e.assetItem.startOffset+e[o])}}else{const i="bufferedPos"===a?n():e[a];l+=i-t.start}return l}return 0},r=(t,i)=>{if(0!==t&&"primary"!==i&&e.schedule.length){var s;const r=e.schedule.findItemIndexAtTime(t),n=null==(s=e.schedule.items)?void 0:s[r];if(n){const e=n[i].start-n.start;return t+e}}return t},n=()=>{const t=e.bufferedPos;return t===Number.MAX_VALUE?a("primary"):Math.max(t,0)},a=t=>{var i;return null!=(i=e.primaryDetails)&&i.live?e.primaryDetails.edge:e.schedule.durations[t]},o=(t,r)=>{var n,a;const o=e.effectivePlayingItem;if(null!=o&&null!=(n=o.event)&&n.restrictions.skip)return;e.log(`seek to ${t} "${r}"`);const l=e.effectivePlayingItem,c=e.schedule.findItemIndexAtTime(t,r),d=null==(a=e.schedule.items)?void 0:a[c],h=e.getBufferingPlayer(),u=null==h?void 0:h.interstitial,p=null==u?void 0:u.appendInPlace,f=l&&e.itemsMatch(l,d);if(l&&(p||f)){const n=i(e.playingAsset),a=(null==n?void 0:n.media)||e.primaryMedia;if(a){const i="primary"===r?a.currentTime:s(l,r,e.playingAsset,"timelinePos","currentTime"),o=t-i,c=(p?i:a.currentTime)+o;if(c>=0&&(!n||p||c<=n.duration))return void(a.currentTime=c)}}if(d){let i=t;if("primary"!==r){const e=d[r].start,s=t-e;i=d.start+s}const s=!e.isInterstitial(d);if(e.isInterstitial(l)&&!l.event.appendInPlace||!s&&!d.event.appendInPlace){if(l){const n=e.findItemIndex(l);if(c>n){const t=e.schedule.findJumpRestrictedIndex(n+1,c);if(t>n)return void e.setSchedulePosition(t)}let a=0;if(s)e.timelinePos=i,e.checkBuffer();else{var g;const e=null==d||null==(g=d.event)?void 0:g.assetList;if(e){const i=t-(d[r]||d).start;for(let t=e.length;t--;){const s=e[t];if(s.duration&&i>=s.startOffset&&i<s.startOffset+s.duration){a=t;break}}}}e.setSchedulePosition(c,a)}}else{const t=e.media||(p?null==h?void 0:h.media:null);t&&(t.currentTime=i)}}},l=()=>{const i=e.effectivePlayingItem;if(e.isInterstitial(i))return i;const s=t();return e.isInterstitial(s)?s:null},c={get currentTime(){const t=l(),i=e.effectivePlayingItem;return i&&i===t?s(i,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-i.playout.start:0},set currentTime(t){const i=l(),s=e.effectivePlayingItem;s&&s===i&&o(t+s.playout.start,"playout")},get duration(){const e=l();return e?e.playout.end-e.playout.start:0},get assetPlayers(){var t;const i=null==(t=l())?void 0:t.event.assetList;return i?i.map(t=>e.getAssetPlayer(t.identifier)):[]},get playingIndex(){var t;const i=null==(t=l())?void 0:t.event;return i&&e.effectivePlayingAsset?i.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return l()}};this.manager={get events(){var t,i;return(null==(t=e.schedule)||null==(i=t.events)?void 0:i.slice(0))||[]},get schedule(){var t,i;return(null==(t=e.schedule)||null==(i=t.items)?void 0:i.slice(0))||[]},get interstitialPlayer(){return l()?c:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const i=t();return e.findItemIndex(i)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const t=e.effectivePlayingItem;return e.findItemIndex(t)},primary:{get bufferedEnd(){return n()},get currentTime(){const t=e.timelinePos;return t>0?t:0},set currentTime(e){o(e,"primary")},get duration(){return a("primary")},get seekableStart(){var t;return(null==(t=e.primaryDetails)?void 0:t.fragmentStart)||0}},integrated:{get bufferedEnd(){return s(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return s(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(e){o(e,"integrated")},get duration(){return a("integrated")},get seekableStart(){var t;return r((null==(t=e.primaryDetails)?void 0:t.fragmentStart)||0,"integrated")}},skip:()=>{const t=e.effectivePlayingItem,i=null==t?void 0:t.event;if(i&&!i.restrictions.skip){const s=e.findItemIndex(t);if(i.appendInPlace){const e=t.playout.start+t.event.duration;o(e+.001,"playout")}else e.advanceAfterAssetEnded(i,s,1/0)}}}}return this.manager}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,i=null==(e=this.schedule)?void 0:e.items;return!!(this.playbackStarted&&t&&i)&&this.findItemIndex(t)===i.length-1}get playbackStarted(){return null!==this.effectivePlayingItem}get currentTime(){var e,t,i;if(null===this.mediaSelection)return;const s=this.waitingItem||this.playingItem;if(this.isInterstitial(s)&&!s.event.appendInPlace)return;let r=this.media;!r&&null!=(e=this.bufferingItem)&&null!=(t=e.event)&&t.appendInPlace&&(r=this.primaryMedia);const n=null==(i=r)?void 0:i.currentTime;return void 0!==n&&xk(n)?n:void 0}get primaryMedia(){var e;return this.media||(null==(e=this.detachedData)?void 0:e.media)||null}isInterstitial(e){return!(null==e||!e.event)}retreiveMediaSource(e,t){const i=this.getAssetPlayer(e);i&&this.transferMediaFromPlayer(i,t)}transferMediaFromPlayer(e,t){const i=e.interstitial.appendInPlace,s=e.media;if(i&&s===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&s)return void(this.detachedData={media:s});const i=e.transferMedia();this.log(`transfer MediaSource from ${e} ${P_(i)}`),this.detachedData=i}else t&&s&&(this.shouldPlay||(this.shouldPlay=!s.paused))}transferMediaTo(e,t){var i,s;if(e.media===t)return;let r=null;const n=this.hls,a=e!==n,o=a&&e.interstitial.appendInPlace,l=null==(i=this.detachedData)?void 0:i.mediaSource;let c;if(n.media)o&&(r=n.transferMedia(),this.detachedData=r),c="Primary";else if(l){const e=this.getBufferingPlayer();e?(r=e.transferMedia(),c=`${e}`):c="detached MediaSource"}else c="detached media";if(!r)if(l)r=this.detachedData,this.log(`using detachedData: MediaSource ${P_(r)}`);else if(!this.detachedData||n.media===t){const e=this.playerQueue;e.length>1&&e.forEach(e=>{if(a&&e.interstitial.appendInPlace!==o){const t=e.interstitial;this.clearInterstitial(e.interstitial,null),t.appendInPlace=!1,t.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${t}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}const d=r&&"mediaSource"in r&&"closed"!==(null==(s=r.mediaSource)?void 0:s.readyState),h=d&&r?r:t;if(this.log(`${d?"transfering MediaSource":"attaching media"} to ${a?e:"Primary"} from ${c}`),h===r){const t=a&&e.assetId===this.schedule.assetIdAtEnd;h.overrides={duration:this.schedule.duration,endOfStream:!a||t,cueRemoval:!a}}e.attachMedia(h)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=e.events;if(!t||this.playbackDisabled||!this.media)return;-1===this.bufferedPos&&(this.bufferedPos=0);const i=this.timelinePos,s=this.effectivePlayingItem;if(-1===i){const i=this.hls.startPosition;if(this.timelinePos=i,t.length&&t[0].cue.pre){const i=e.findEventIndex(t[0].identifier);this.setSchedulePosition(i)}else if(i>=0||!this.primaryLive){const t=this.timelinePos=i>0?i:0,s=e.findItemIndexAtTime(t);this.setSchedulePosition(s)}}else if(s&&!this.playingItem){const t=e.findItemIndex(s);this.setSchedulePosition(t)}}advanceAfterAssetEnded(e,t,i){const s=nN(e,i);if(e.isAssetPastPlayoutLimit(s)){const i=this.schedule.items;if(i){const s=t+1,r=i.length;if(s>=r)return void this.setSchedulePosition(-1);const n=e.resumeTime;this.timelinePos<n&&(this.timelinePos=n,this.checkBuffer()),this.setSchedulePosition(s)}}else this.setSchedulePosition(t,s)}setScheduleToAssetAtTime(e,t){const i=this.schedule,s=t.parentIdentifier,r=i.getEvent(s);if(r){const t=i.findEventIndex(s),n=i.findAssetIndex(r,e);this.advanceAfterAssetEnded(r,t,n-1)}}setSchedulePosition(e,t){const i=this.schedule.items;if(!i||this.playbackDisabled)return;this.log(`setSchedulePosition ${e}, ${t}`);const s=e>=0?i[e]:null,r=this.playingItem,n=this.playingLastItem;if(this.isInterstitial(r)){var a;const l=r.event,c=this.playingAsset,d=null==c?void 0:c.identifier,h=d?this.getAssetPlayer(d):null;if(h&&d&&(!this.eventItemsMatch(r,s)||void 0!==t&&d!==(null==(a=l.assetList)?void 0:a[t].identifier))){var o;const t=l.findAssetIndex(c);if(this.log(`INTERSTITIAL_ASSET_ENDED ${t+1}/${l.assetList.length} ${oN(c)}`),this.endedAsset=c,this.playingAsset=null,this.hls.trigger(Ck.INTERSTITIAL_ASSET_ENDED,{asset:c,assetListIndex:t,event:l,schedule:i.slice(0),scheduleIndex:e,player:h}),r!==this.playingItem)return void(this.itemsMatch(r,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(l,this.findItemIndex(this.playingItem),t));this.retreiveMediaSource(d,s),!h.media||null!=(o=this.detachedData)&&o.mediaSource||h.detachMedia()}if(!this.eventItemsMatch(r,s)&&(this.endedItem=r,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${l} ${hN(r)}`),l.hasPlayed=!0,this.hls.trigger(Ck.INTERSTITIAL_ENDED,{event:l,schedule:i.slice(0),scheduleIndex:e}),l.cue.once)){this.updateSchedule();const e=this.schedule.items;if(s&&e){const i=this.findItemIndex(s);this.advanceSchedule(i,e,t,r,n)}return}}this.advanceSchedule(e,i,t,r,n)}advanceSchedule(e,t,i,s,r){const n=e>=0?t[e]:null,a=this.primaryMedia,o=this.playerQueue;if(o.length&&o.forEach(t=>{const i=t.interstitial,s=this.schedule.findEventIndex(i.identifier);(s<e||s>e+1)&&this.clearInterstitial(i,n)}),this.isInterstitial(n)){this.timelinePos=Math.min(Math.max(this.timelinePos,n.start),n.end);const r=n.event;if(void 0===i){i=this.schedule.findAssetIndex(r,this.timelinePos);const t=nN(r,i-1);if(r.isAssetPastPlayoutLimit(t))return void this.advanceAfterAssetEnded(r,e,i);i=t}const o=this.waitingItem;this.assetsBuffered(n,a)||this.setBufferingItem(n);let l=this.preloadAssets(r,i);if(this.eventItemsMatch(n,o||s)||(this.waitingItem=n,this.log(`INTERSTITIAL_STARTED ${hN(n)} ${r.appendInPlace?"append in place":""}`),this.hls.trigger(Ck.INTERSTITIAL_STARTED,{event:r,schedule:t.slice(0),scheduleIndex:e})),!r.assetListLoaded)return void this.log(`Waiting for ASSET-LIST to complete loading ${r}`);if(r.assetListLoader&&(r.assetListLoader.destroy(),r.assetListLoader=void 0),!a)return void this.log(`Waiting for attachMedia to start Interstitial ${r}`);this.waitingItem=this.endedItem=null,this.playingItem=n;const c=r.assetList[i];if(!c){const s=t[e+1],n=this.media;return s&&n&&!this.isInterstitial(s)&&n.currentTime<s.start&&(n.currentTime=this.timelinePos=s.start),void this.advanceAfterAssetEnded(r,e,i||0)}if(l||(l=this.getAssetPlayer(c.identifier)),null===l||l.destroyed){const e=r.assetList.length;this.warn(`asset ${i+1}/${e} player destroyed ${r}`),l=this.createAssetPlayer(r,c,i)}if(!this.eventItemsMatch(n,this.bufferingItem)&&r.appendInPlace&&this.isAssetBuffered(c))return;this.startAssetPlayer(l,i,t,e,a),this.shouldPlay&&pN(l.media)}else null!==n?(this.resumePrimary(n,e,s),this.shouldPlay&&pN(this.hls.media)):r&&this.isInterstitial(s)&&(this.endedItem=null,this.playingItem=s,s.event.appendInPlace||this.attachPrimary(this.schedule.durations.primary,null))}get playbackDisabled(){return!1===this.hls.config.enableInterstitialPlayback}get primaryDetails(){var e,t;return null==(e=this.mediaSelection)||null==(t=e.main)?void 0:t.details}get primaryLive(){var e;return!(null==(e=this.primaryDetails)||!e.live)}resumePrimary(e,t,i){var s;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${hN(e)}`),null==(s=this.detachedData)||!s.mediaSource){let i=this.timelinePos;(i<e.start||i>=e.end)&&(i=this.getPrimaryResumption(e,t),this.timelinePos=i),this.attachPrimary(i,e)}if(!i)return;const r=this.schedule.items;r&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${hN(e)}`),this.hls.trigger(Ck.INTERSTITIALS_PRIMARY_RESUMED,{schedule:r.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const i=e.start;if(this.primaryLive){const e=this.primaryDetails;if(0===t)return this.hls.startPosition;if(e&&(i<e.fragmentStart||i>e.edge))return this.hls.liveSyncPosition||-1}return i}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);if(null!=t&&t.hls)return t.hls.bufferedToEnd;const i=DC.bufferInfo(this.primaryMedia,this.timelinePos,0);return i.end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,i){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const s=this.primaryMedia;if(!s)return;const r=this.hls;r.media?this.checkBuffer():(this.transferMediaTo(r,s),i&&this.startLoadingPrimaryAt(e,i)),i||(this.timelinePos=e,this.startLoadingPrimaryAt(e,i))}startLoadingPrimaryAt(e,t){var i;const s=this.hls;!s.loadingEnabled||!s.media||Math.abs(((null==(i=s.mainForwardBufferInfo)?void 0:i.start)||s.media.currentTime)-e)>.5?s.startLoad(e,t):s.bufferingEnabled||s.resumeBuffering()}onManifestLoading(){this.stopLoad(),this.schedule.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(Ck.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(Ck.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(-1===t.level)return;const i=this.hls.levels[t.level],s=Fk(Fk({},this.mediaSelection||this.altSelection),{},{main:i});this.mediaSelection=s,this.schedule.parseInterstitialDateRanges(s,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const i=this.hls.audioTracks[t.id],s=this.mediaSelection;if(!s)return void(this.altSelection=Fk(Fk({},this.altSelection),{},{audio:i}));const r=Fk(Fk({},s),{},{audio:i});this.mediaSelection=r}onSubtitleTrackUpdated(e,t){const i=this.hls.subtitleTracks[t.id],s=this.mediaSelection;if(!s)return void(this.altSelection=Fk(Fk({},this.altSelection),{},{subtitles:i}));const r=Fk(Fk({},s),{},{subtitles:i});this.mediaSelection=r}onAudioTrackSwitching(e,t){const i=B_(t);this.playerQueue.forEach(e=>e.hls.setAudioOption(t)||e.hls.setAudioOption(i))}onSubtitleTrackSwitch(e,t){const i=B_(t);this.playerQueue.forEach(e=>e.hls.setSubtitleOption(t)||-1!==t.id&&e.hls.setSubtitleOption(i))}onBufferCodecs(e,t){const i=t.tracks;i&&(this.requiredTracks=i)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const i=this.playingItem;if(i&&!this.itemsMatch(i,this.bufferingItem)&&!this.isInterstitial(i)){const e=this.timelinePos;this.bufferedPos=e,this.checkBuffer()}}onBufferedToEnd(e){const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let e=0;e<t.length;e++){const s=t[e];if(s.cue.post){var i;const e=this.schedule.findEventIndex(s.identifier),t=null==(i=this.schedule.items)?void 0:i[e];this.isInterstitial(t)&&this.eventItemsMatch(t,this.bufferingItem)&&this.bufferedToItem(t,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const e=this.findItemIndex(t);this.setSchedulePosition(e+1)}else this.shouldPlay=!1}updateItem(e,t){const i=this.schedule.items;if(e&&i){const s=this.findItemIndex(e,t);return i[s]||null}return null}trimInPlace(e,t){if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach((t,i)=>{e.event.isAssetPastPlayoutLimit(i)&&this.clearAssetPlayer(t.identifier,null)});const t=e.end+.25,i=DC.bufferInfo(this.primaryMedia,t,0);(i.end>t||(i.nextStart||0)>t)&&(this.attachPrimary(t,null),this.flushFrontBuffer(t))}}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var i;return!!t&&(e===t||e.event.identifier===(null==(i=t.event)?void 0:i.identifier))}findItemIndex(e,t){return e?this.schedule.findItemIndex(e,t):-1}updateSchedule(){const e=this.mediaSelection;e&&this.schedule.updateSchedule(e,[])}checkBuffer(e){const t=this.schedule.items;if(!t)return;const i=DC.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=i.len<1),this.updateBufferedPos(i.end,t,e)}updateBufferedPos(e,t,i){const s=this.schedule,r=this.bufferingItem;if(this.bufferedPos>e)return;if(1===t.length&&this.itemsMatch(t[0],r))return void(this.bufferedPos=e);const n=this.playingItem,a=this.findItemIndex(n);let o=s.findItemIndexAtTime(e);if(this.bufferedPos<e){var l,c;const i=this.findItemIndex(r),s=Math.min(i+1,t.length-1),n=t[s];if((-1===o&&r&&e>=r.end||null!=(l=n.event)&&l.appendInPlace&&e+.01>=n.start)&&(o=s),s-a>1&&!1===(null==r||null==(c=r.event)?void 0:c.appendInPlace))return;if(this.bufferedPos=e,o>i&&o>a)this.bufferedToItem(n);else{const t=this.primaryDetails;this.primaryLive&&t&&e>t.edge-t.targetduration&&n.start<t.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(n)&&this.preloadAssets(n.event,0)}}else i&&n&&!this.itemsMatch(n,r)&&(o===a?this.bufferedToItem(n):o===a+1&&this.bufferedToItem(t[o]))}assetsBuffered(e,t){const i=e.event.assetList;return 0!==i.length&&!e.event.assetList.some(e=>{const i=this.getAssetPlayer(e.identifier);return!(null!=i&&i.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,i=this.schedule;if(this.itemsMatch(e,t))this.bufferingItem!==e&&(this.bufferingItem=e);else{const{items:s,events:r}=i;if(!s||!r)return t;const n=this.isInterstitial(e),a=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const o=a?a.remaining:t?t.end-this.timelinePos:0;this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${hN(e)}`+(t?` (${o.toFixed(2)} remaining)`:"")),this.playbackDisabled||(n?e.event.assetList.forEach(e=>{const t=this.getAssetPlayer(e.identifier);t&&t.resumeBuffering()}):(this.hls.resumeBuffering(),this.playerQueue.forEach(e=>e.pauseBuffering()))),this.hls.trigger(Ck.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:r.slice(0),schedule:s.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}return t}bufferedToItem(e,t=0){const i=this.setBufferingItem(e);if(!this.playbackDisabled)if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(null!==i){this.bufferingAsset=null;const t=this.detachedData;if(t)if(t.mediaSource){const t=!0;this.attachPrimary(e.start,e,t)}else this.preloadPrimary(e);else this.preloadPrimary(e)}}preloadPrimary(e){const t=this.findItemIndex(e),i=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(i)}bufferedToEvent(e,t){const i=e.event,s=0===i.assetList.length&&!i.assetListLoader,r=i.cue.once;if(s||!r){const e=this.preloadAssets(i,t);if(null!=e&&e.interstitial.appendInPlace){const s=i.assetList[t],r=this.primaryMedia;s&&r&&this.bufferAssetPlayer(e,r)}}}preloadAssets(e,t){const i=e.assetUrl,s=e.assetList.length,r=0===s&&!e.assetListLoader,n=e.cue.once;if(r){const r=e.timelineStart;if(e.appendInPlace){var a;const t=this.playingItem;this.isInterstitial(t)||(null==t||null==(a=t.nextEvent)?void 0:a.identifier)!==e.identifier||this.flushFrontBuffer(r+.25)}let n,o=0;if(!this.playingItem&&this.primaryLive&&(o=this.hls.startPosition,-1===o&&(o=this.hls.liveSyncPosition||0)),o&&!e.cue.pre&&!e.cue.post){const e=o-r;e>0&&(n=Math.round(1e3*e)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${i?1:s} ${e}${n?` live-start: ${o} start-offset: ${n}`:""}`),i)return this.createAsset(e,0,0,r,e.duration,i);const l=this.assetListLoader.loadAssetList(e,n);l&&(e.assetListLoader=l)}else if(!n&&s){for(let i=t;i<s;i++){const t=e.assetList[i],s=this.getAssetPlayerQueueIndex(t.identifier);-1!==s&&!this.playerQueue[s].destroyed||t.error||this.createAssetPlayer(e,t,i)}return this.getAssetPlayer(e.assetList[t].identifier)}return null}flushFrontBuffer(e){const t=this.requiredTracks;if(!t)return;this.log(`Removing front buffer starting at ${e}`);const i=Object.keys(t);i.forEach(t=>{this.hls.trigger(Ck.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:t})})}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let i=0;i<t.length;i++)if(e===t[i].assetId)return i;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t)for(let i=0;i<e.length;i++)if(e[i].media===t)return e[i];return null}createAsset(e,t,i,s,r,n){const a={parentIdentifier:e.identifier,identifier:tN(e,n,t),duration:r,startOffset:i,timelineStart:s,uri:n};return this.createAssetPlayer(e,a,t)}createAssetPlayer(e,t,i){const s=this.hls,r=s.userConfig;let n=r.videoPreference;const a=s.loadLevelObj||s.levels[s.currentLevel];(n||a)&&(n=Nk({},n),a.videoCodec&&(n.videoCodec=a.videoCodec),a.videoRange&&(n.allowedVideoRanges=[a.videoRange]));const o=s.audioTracks[s.audioTrack],l=s.subtitleTracks[s.subtitleTrack];let c=0;if(this.primaryLive||e.appendInPlace){const e=this.timelinePos-t.timelineStart;if(e>1){const i=t.duration;i&&e<i&&(c=e)}}const d=t.identifier,h=Fk(Fk({},r),{},{autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:s.sessionId,assetPlayerId:d,abrEwmaDefaultEstimate:s.bandwidthEstimate,interstitialsController:void 0,startPosition:c,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:n,audioPreference:o||r.audioPreference,subtitlePreference:l||r.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(h.timelineOffset=t.timelineStart));const u=h.cmcd;null!=u&&u.sessionId&&u.contentId&&(h.cmcd=Nk({},u,{contentId:ZO(t.uri)})),this.getAssetPlayer(d)&&this.warn(`Duplicate date range identifier ${e} and asset ${d}`);const p=new lN(this.HlsPlayerClass,h,e,t);this.playerQueue.push(p),e.assetList[i]=t;const f=s=>{if(s.live){const t=new Error(`Interstitials MUST be VOD assets ${e}`),s={fatal:!0,type:Ik.OTHER_ERROR,details:_k.INTERSTITIAL_ASSET_ITEM_ERROR,error:t};return void this.handleAssetItemError(s,e,this.schedule.findEventIndex(e.identifier),i,t.message)}const r=s.edge-s.fragmentStart,n=t.duration;(null===n||r>n)&&(this.log(`Interstitial asset "${d}" duration change ${n} > ${r}`),t.duration=r,this.updateSchedule())};p.on(Ck.LEVEL_UPDATED,(e,{details:t})=>f(t)),p.on(Ck.LEVEL_PTS_UPDATED,(e,{details:t})=>f(t));const g=(e,t)=>{const i=this.getAssetPlayer(d);if(i&&t.tracks){i.off(Ck.BUFFER_CODECS,g),i.tracks=t.tracks;const e=this.primaryMedia;this.bufferingAsset===i.assetItem&&e&&!i.media&&this.bufferAssetPlayer(i,e)}};p.on(Ck.BUFFER_CODECS,g);const m=()=>{var i;const s=this.getAssetPlayer(d);if(this.log(`buffered to end of asset ${s}`),!s)return;const r=this.schedule.findEventIndex(e.identifier),n=null==(i=this.schedule.items)?void 0:i[r];if(this.isInterstitial(n)){const i=e.findAssetIndex(t),s=nN(e,i);if(e.isAssetPastPlayoutLimit(s)){var a;const e=null==(a=this.schedule.items)?void 0:a[r+1];e&&this.bufferedToItem(e)}else this.bufferedToItem(n,s)}};p.on(Ck.BUFFERED_TO_END,m);const v=t=>()=>{const i=this.getAssetPlayer(d);if(!i)return;this.shouldPlay=!0;const s=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,s,t)};return p.once(Ck.MEDIA_ENDED,v(i)),p.once(Ck.PLAYOUT_LIMIT_REACHED,v(1/0)),p.on(Ck.ERROR,(t,s)=>{const r=this.getAssetPlayer(d);if(s.details!==_k.BUFFER_STALLED_ERROR)this.handleAssetItemError(s,e,this.schedule.findEventIndex(e.identifier),i,`Asset player error ${s.error} ${e}`);else if(null!=r&&r.media){const t=r.currentTime,i=r.duration-t;t&&e.appendInPlace&&i/r.media.playbackRate<.5?(this.log(`Advancing buffer past end of asset ${d} ${e} at ${r.media.currentTime}`),m()):(this.warn(`Stalled at ${t} of ${t+i} in asset ${d} ${e}`),this.onTimeupdate(),this.checkBuffer(!0))}}),p.on(Ck.DESTROYING,()=>{const t=this.getAssetPlayer(d);if(!t)return;const s=new Error(`Asset player destroyed unexpectedly ${d}`),r={fatal:!0,type:Ik.OTHER_ERROR,details:_k.INTERSTITIAL_ASSET_ITEM_ERROR,error:s};this.handleAssetItemError(r,e,this.schedule.findEventIndex(e.identifier),i,s.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${oN(t)}`),this.hls.trigger(Ck.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:i,event:e,player:p}),p}clearInterstitial(e,t){e.assetList.forEach(e=>{this.clearAssetPlayer(e.identifier,t)}),e.reset()}resetAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);if(-1!==t){this.log(`reset asset player "${e}" after error`);const i=this.playerQueue[t];this.transferMediaFromPlayer(i,null),i.resetDetails()}}clearAssetPlayer(e,t){const i=this.getAssetPlayerQueueIndex(e);if(-1!==i){this.log(`clear asset player "${e}" toSegment: ${t?hN(t):t}`);const s=this.playerQueue[i];this.transferMediaFromPlayer(s,t),this.playerQueue.splice(i,1),s.destroy()}}emptyPlayerQueue(){let e;while(e=this.playerQueue.pop())e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,i,s,r){const{interstitial:n,assetItem:a,assetId:o}=e,l=n.assetList.length,c=this.playingAsset;this.endedAsset=null,this.playingAsset=a,c&&c.identifier===o||(c&&(this.clearAssetPlayer(c.identifier,i[s]),delete c.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${l} ${oN(a)}`),this.hls.trigger(Ck.INTERSTITIAL_ASSET_STARTED,{asset:a,assetListIndex:t,event:n,schedule:i.slice(0),scheduleIndex:s,player:e})),this.bufferAssetPlayer(e,r)}bufferAssetPlayer(e,t){var i,s;const{interstitial:r,assetItem:n}=e,a=this.schedule.findEventIndex(r.identifier),o=null==(i=this.schedule.items)?void 0:i[a];if(!o)return;this.setBufferingItem(o),this.bufferingAsset=n;const l=this.getBufferingPlayer();if(l===e)return;const c=r.appendInPlace;if(c&&!1===(null==l?void 0:l.interstitial.appendInPlace))return;const d=(null==l?void 0:l.tracks)||(null==(s=this.detachedData)?void 0:s.tracks)||this.requiredTracks;if(c&&n!==this.playingAsset){if(!e.tracks)return;if(d&&!Zk(d,e.tracks)){const t=new Error(`Asset ${oN(n)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(d)}')`),i={fatal:!0,type:Ik.OTHER_ERROR,details:_k.INTERSTITIAL_ASSET_ITEM_ERROR,error:t},s=r.findAssetIndex(n);return void this.handleAssetItemError(i,r,a,s,t.message)}}this.transferMediaTo(e,t)}handleAssetItemError(e,t,i,s,r){if(e.details===_k.BUFFER_STALLED_ERROR)return;const n=t.assetList[s];this.warn(`INTERSTITIAL_ASSET_ERROR ${n?oN(n):n} ${e.error}`);const a=null==n?void 0:n.identifier,o=this.getAssetPlayerQueueIndex(a),l=this.playerQueue[o]||null,c=this.schedule.items,d=Nk({},e,{fatal:!1,errorAction:cC(!0),asset:n,assetListIndex:s,event:t,schedule:c,scheduleIndex:i,player:l});if(this.hls.trigger(Ck.INTERSTITIAL_ASSET_ERROR,d),!e.fatal)return;const h=this.playingAsset,u=new Error(r);if(n&&(this.clearAssetPlayer(a,null),n.error=u),t.assetList.some(e=>!e.error)){for(let e=s;e<t.assetList.length;e++)this.resetAssetPlayer(t.assetList[e].identifier);this.updateSchedule()}else t.error=u;t.error?this.primaryFallback(t):h&&h.identifier===a&&this.advanceAfterAssetEnded(t,i,s)}primaryFallback(e){const t=e.timelineStart,i=this.effectivePlayingItem;if(this.updateSchedule(),i){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${this.timelinePos} playing: ${i?hN(i):"<none>"} error: ${e.error}`);let s=this.timelinePos;-1===s&&(s=this.hls.startPosition);const r=this.updateItem(i,s);this.itemsMatch(i,r)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t));const n=this.schedule.findItemIndexAtTime(s);this.setSchedulePosition(n)}else this.checkStart()}onAssetListLoaded(e,t){var i;const s=t.event,r=s.identifier,n=t.assetListResponse.ASSETS;if(!this.schedule.hasEvent(r))return;const a=s.timelineStart,o=s.duration;let l=0;n.forEach((e,t)=>{const i=parseFloat(e.DURATION);this.createAsset(s,t,l,a+l,i,e.URI),l+=i}),s.duration=l,this.log(`Loaded asset-list with duration: ${l} (was: ${o}) ${s}`);const c=this.waitingItem,d=(null==c?void 0:c.event.identifier)===r;this.updateSchedule();const h=null==(i=this.bufferingItem)?void 0:i.event;if(d){var u;const e=this.schedule.findEventIndex(r),t=null==(u=this.schedule.items)?void 0:u[e];if(t){if(!this.playingItem&&this.timelinePos>t.end){const t=this.schedule.findItemIndexAtTime(this.timelinePos);if(t!==e)return s.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${s}`),void this.primaryFallback(s)}this.setBufferingItem(t)}this.setSchedulePosition(e)}else if((null==h?void 0:h.identifier)===r&&h.appendInPlace){const e=s.assetList[0],t=this.getAssetPlayer(e.identifier),i=this.primaryMedia;e&&t&&i&&this.bufferAssetPlayer(t,i)}}onError(e,t){switch(t.details){case _k.ASSET_LIST_PARSING_ERROR:case _k.ASSET_LIST_LOAD_ERROR:case _k.ASSET_LIST_LOAD_TIMEOUT:{const e=t.interstitial;e&&this.primaryFallback(e);break}case _k.BUFFER_STALLED_ERROR:this.onTimeupdate(),this.checkBuffer(!0);break}}}const gN=500;class mN extends iP{constructor(e,t,i){super(e,t,i,"subtitle-stream-controller",Pk.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(Ck.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Ck.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(Ck.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(Ck.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(Ck.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(Ck.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(Ck.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Ck.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(Ck.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(Ck.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(Ck.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(Ck.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=tP.IDLE,this.setInterval(gN),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:i,success:s}=t;if(this.fragContextChanged(i)||(dI(i)&&(this.fragPrevious=i),this.state=tP.IDLE),!s)return;const r=this.tracksBuffered[this.currentTrackId];if(!r)return;let n;const a=i.start;for(let l=0;l<r.length;l++)if(a>=r[l].start&&a<=r[l].end){n=r[l];break}const o=i.start+i.duration;n?n.end=o:(n={start:a,end:o},r.push(n)),this.fragmentTracker.fragBuffered(i),this.fragBufferedComplete(i,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:i,endOffset:s}=t;if(0===i&&s!==Number.POSITIVE_INFINITY){const e=s-1;if(e<=0)return;t.endOffsetSubtitles=Math.max(0,e),this.tracksBuffered.forEach(t=>{for(let i=0;i<t.length;)if(t[i].end<=e)t.shift();else{if(!(t[i].start<e))break;t[i].start=e,i++}}),this.fragmentTracker.removeFragmentsInRange(i,e,Pk.SUBTITLE)}}onError(e,t){const i=t.frag;(null==i?void 0:i.type)===Pk.SUBTITLE&&(t.details===_k.FRAG_GAP&&this.fragmentTracker.fragBuffered(i,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==tP.STOPPED&&(this.state=tP.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){this.levels&&mM(this.levels,t)?this.levels=t.map(e=>new k_(e)):(this.tracksBuffered=[],this.levels=t.map(e=>{const t=new k_(e);return this.tracksBuffered[t.id]=[],t}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Pk.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null)}onSubtitleTrackSwitch(e,t){var i;if(this.currentTrackId=t.id,null==(i=this.levels)||!i.length||-1===this.currentTrackId)return void this.clearInterval();const s=this.levels[this.currentTrackId];null!=s&&s.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,s&&this.state!==tP.STOPPED&&this.setInterval(gN)}onSubtitleTrackLoaded(e,t){var i;const{currentTrackId:s,levels:r}=this,{details:n,id:a}=t;if(!r)return void this.warn(`Subtitle tracks were reset while loading level ${a}`);const o=r[a];if(a>=r.length||!o)return;this.log(`Subtitle track ${a} loaded [${n.startSN},${n.endSN}]${n.lastPartSn?`[part-${n.lastPartSn}-${n.lastPartIndex}]`:""},duration:${n.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let l=0;if(n.live||null!=(i=o.details)&&i.live){if(n.deltaUpdateFailed)return;const e=this.mainDetails;if(!e)return void(this.startFragRequested=!1);const t=e.fragments[0];var c;if(o.details)l=this.alignPlaylists(n,o.details,null==(c=this.levelLastLoaded)?void 0:c.details),0===l&&t&&(l=t.start,GR(n,l));else n.hasProgramDateTime&&e.hasProgramDateTime?(JR(n,e),l=n.fragmentStart):t&&(l=t.start,GR(n,l));e&&!this.startFragRequested&&this.setStartPosition(e,l)}if(o.details=n,this.levelLastLoaded=o,a===s&&(this.hls.trigger(Ck.SUBTITLE_TRACK_UPDATED,{details:n,id:a,groupId:t.groupId}),this.tick(),n.live&&!this.fragCurrent&&this.media&&this.state===tP.IDLE)){const e=q_(null,n.fragments,this.media.currentTime,0);e||(this.warn("Subtitle playlist not aligned with playback"),o.details=void 0)}}_handleFragmentLoadComplete(e){const{frag:t,payload:i}=e,s=t.decryptdata,r=this.hls;if(!this.fragContextChanged(t)&&i&&i.byteLength>0&&null!=s&&s.key&&s.iv&&KC(s.method)){const e=performance.now();this.decrypter.decrypt(new Uint8Array(i),s.key.buffer,s.iv.buffer,qC(s.method)).catch(e=>{throw r.trigger(Ck.ERROR,{type:Ik.MEDIA_ERROR,details:_k.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:t}),e}).then(i=>{const s=performance.now();r.trigger(Ck.FRAG_DECRYPTED,{frag:t,payload:i,stats:{tstart:e,tdecrypt:s}})}).catch(e=>{this.warn(`${e.name}: ${e.message}`),this.state=tP.IDLE})}}doTick(){if(this.media){if(this.state===tP.IDLE){const{currentTrackId:e,levels:t}=this,i=null==t?void 0:t[e];if(!i||!t.length||!i.details)return;if(this.waitForLive(i))return;const{config:s}=this,r=this.getLoadPosition(),n=DC.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],r,s.maxBufferHole),{end:a,len:o}=n,l=i.details,c=this.hls.maxBufferLength+l.levelTargetDuration;if(o>c)return;const d=l.fragments,h=d.length,u=l.edge;let p=null;const f=this.fragPrevious;if(a<u){const e=s.maxFragLookUpTolerance,t=a>u-e?0:e;p=q_(f,d,Math.max(d[0].start,a),t),!p&&f&&f.start<d[0].start&&(p=d[0])}else p=d[h-1];if(p=this.filterReplacedPrimary(p,i.details),!p)return;const g=p.sn-l.startSN,m=d[g-1];if(m&&m.cc===p.cc&&this.fragmentTracker.getState(m)===dC.NOT_LOADED&&(p=m),this.fragmentTracker.getState(p)===dC.NOT_LOADED){const e=this.mapToInitFragWhenRequired(p);e&&this.loadFragment(e,i,a)}}}else this.state=tP.IDLE}loadFragment(e,t,i){dI(e)?super.loadFragment(e,t,i):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new vN(this.tracksBuffered[this.currentTrackId]||[])}}class vN{constructor(e){this.buffered=void 0;const t=(t,i,s)=>{if(i>>>=0,i>s-1)throw new DOMException(`Failed to execute '${t}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${s})`);return e[i][t]};this.buffered={get length(){return e.length},end(i){return t("end",i,e.length)},start(i){return t("start",i,e.length)}}}}const yN={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},bN=e=>String.fromCharCode(yN[e]||e),EN=15,wN=100,AN={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},TN={17:2,18:4,21:6,22:8,23:10,19:13,20:15},SN={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},xN={25:2,26:4,29:6,30:8,31:10,27:13,28:15},LN=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class kN{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const i="function"===typeof t?t():t;qk.log(`${this.time} [${e}] ${i}`)}}}const IN=function(e){const t=[];for(let i=0;i<e.length;i++)t.push(e[i].toString(16));return t};class _N{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let i=0;i<t.length;i++){const s=t[i];e.hasOwnProperty(s)&&(this[s]=e[s])}}isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class CN{constructor(){this.uchar=" ",this.penState=new _N}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return" "===this.uchar&&this.penState.isDefault()}}class RN{constructor(e){this.chars=[],this.pos=0,this.currPenState=new _N,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<wN;t++)this.chars.push(new CN);this.logger=e}equals(e){for(let t=0;t<wN;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<wN;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<wN;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>wN&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=wN)}moveCursor(e){const t=this.pos+e;if(e>1)for(let i=this.pos+1;i<t+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=bN(e);this.pos>=wN?this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))}clearFromPos(e){let t;for(t=e;t<wN;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let i=0;i<wN;i++){const s=this.chars[i].uchar;" "!==s&&(t=!1),e.push(s)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e);const t=this.chars[this.pos];t.setPenState(this.currPenState)}}class PN{constructor(e){this.rows=[],this.currRow=EN-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<EN;t++)this.rows.push(new RN(e));this.logger=e}reset(){for(let e=0;e<EN;e++)this.rows[e].clear();this.currRow=EN-1}equals(e){let t=!0;for(let i=0;i<EN;i++)if(!this.rows[i].equals(e.rows[i])){t=!1;break}return t}copy(e){for(let t=0;t<EN;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<EN;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){const e=this.rows[this.currRow];e.backSpace()}clearToEndOfRow(){const e=this.rows[this.currRow];e.clearToEndOfRow()}insertChar(e){const t=this.rows[this.currRow];t.insertChar(e)}setPen(e){const t=this.rows[this.currRow];t.setPenStyles(e)}moveCursor(e){const t=this.rows[this.currRow];t.moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e);const t=this.rows[this.currRow];t.setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+P_(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let t=0;t<EN;t++)this.rows[t].clear();const e=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){const s=i.rows[e].cueStartTime,r=this.logger.time;if(null!==s&&null!==r&&s<r)for(let n=0;n<this.nrRollUpRows;n++)this.rows[t-this.nrRollUpRows+n+1].copy(i.rows[e+n])}}this.currRow=t;const i=this.rows[this.currRow];if(null!==e.indent){const t=e.indent,s=Math.max(t-1,0);i.setCursor(e.indent),e.color=i.chars[s].penState.foreground}const s={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(s)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+P_(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(null===this.nrRollUpRows)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let i="",s=-1;for(let r=0;r<EN;r++){const i=this.rows[r].getTextString();i&&(s=r+1,e?t.push("Row "+s+": '"+i+"'"):t.push(i.trim()))}return t.length>0&&(i=e?"["+t.join(" | ")+"]":t.join("\n")),i}getTextAndFormat(){return this.rows}}class DN{constructor(e,t,i){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new PN(i),this.nonDisplayedMemory=new PN(i),this.lastOutputScreen=new PN(i),this.currRollUpRow=this.displayedMemory.rows[EN-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=i}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[EN-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let i=0;i<e.length;i++)this.writeScreen.insertChar(e[i]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const i=Math.floor(e/2)-16,s=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=s[i]}this.logger.log(2,"MIDROW: "+P_(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class MN{constructor(e,t,i){this.channels=void 0,this.currentChannel=0,this.cmdHistory=BN(),this.logger=void 0;const s=this.logger=new kN;this.channels=[null,new DN(e,t,s),new DN(e+1,i,s)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let i=0;i<t.length;i+=2){const e=127&t[i],s=127&t[i+1];let r=!1,n=null;if(0===e&&0===s)continue;this.logger.log(3,()=>"["+IN([t[i],t[i+1]])+"] -> ("+IN([e,s])+")");const a=this.cmdHistory,o=e>=16&&e<=31;if(o){if(NN(e,s,a)){ON(null,null,a),this.logger.log(3,()=>"Repeated command ("+IN([e,s])+") is dropped");continue}ON(e,s,this.cmdHistory),r=this.parseCmd(e,s),r||(r=this.parseMidrow(e,s)),r||(r=this.parsePAC(e,s)),r||(r=this.parseBackgroundAttributes(e,s))}else ON(null,null,a);if(!r&&(n=this.parseChars(e,s),n)){const e=this.currentChannel;if(e&&e>0){const t=this.channels[e];t.insertChars(n)}else this.logger.log(2,"No channel found yet. TEXT-MODE?")}r||n||this.logger.log(2,()=>"Couldn't parse cleaned data "+IN([e,s])+" orig: "+IN([t[i],t[i+1]]))}}parseCmd(e,t){const i=(20===e||28===e||21===e||29===e)&&t>=32&&t<=47,s=(23===e||31===e)&&t>=33&&t<=35;if(!i&&!s)return!1;const r=20===e||21===e||23===e?1:2,n=this.channels[r];return 20===e||21===e||28===e||29===e?32===t?n.ccRCL():33===t?n.ccBS():34===t?n.ccAOF():35===t?n.ccAON():36===t?n.ccDER():37===t?n.ccRU(2):38===t?n.ccRU(3):39===t?n.ccRU(4):40===t?n.ccFON():41===t?n.ccRDC():42===t?n.ccTR():43===t?n.ccRTD():44===t?n.ccEDM():45===t?n.ccCR():46===t?n.ccENM():47===t&&n.ccEOC():n.ccTO(t-32),this.currentChannel=r,!0}parseMidrow(e,t){let i=0;if((17===e||25===e)&&t>=32&&t<=47){if(i=17===e?1:2,i!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const s=this.channels[i];return!!s&&(s.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+IN([e,t])+")"),!0)}return!1}parsePAC(e,t){let i;const s=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,r=(16===e||24===e)&&t>=64&&t<=95;if(!s&&!r)return!1;const n=e<=23?1:2;i=t>=64&&t<=95?1===n?AN[e]:SN[e]:1===n?TN[e]:xN[e];const a=this.channels[n];return!!a&&(a.setPAC(this.interpretPAC(i,t)),this.currentChannel=n,!0)}interpretPAC(e,t){let i;const s={color:null,italics:!1,indent:null,underline:!1,row:e};return i=t>95?t-96:t-64,s.underline=1===(1&i),i<=13?s.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(s.italics=!0,s.color="white"):s.indent=4*Math.floor((i-16)/2),s}parseChars(e,t){let i,s=null,r=null;if(e>=25?(i=2,r=e-8):(i=1,r=e),r>=17&&r<=19){let e;e=17===r?t+80:18===r?t+112:t+144,this.logger.log(2,()=>"Special char '"+bN(e)+"' in channel "+i),s=[e]}else e>=32&&e<=127&&(s=0===t?[e]:[e,t]);return s&&this.logger.log(3,()=>"Char codes =  "+IN(s).join(",")),s}parseBackgroundAttributes(e,t){const i=(16===e||24===e)&&t>=32&&t<=47,s=(23===e||31===e)&&t>=45&&t<=47;if(!i&&!s)return!1;let r;const n={};16===e||24===e?(r=Math.floor((t-32)/2),n.background=LN[r],t%2===1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0));const a=e<=23?1:2,o=this.channels[a];return o.setBkgData(n),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}ON(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const i=this.channels[t];i&&i.cueSplitAtTime(e)}}}function ON(e,t,i){i.a=e,i.b=t}function NN(e,t,i){return i.a===e&&i.b===t}function BN(){return{a:null,b:null}}var FN=function(){if(null!=tR&&tR.VTTCue)return self.VTTCue;const e=["","lr","rl"],t=["start","middle","end","left","right"];function i(e,t){if("string"!==typeof t)return!1;if(!Array.isArray(e))return!1;const i=t.toLowerCase();return!!~e.indexOf(i)&&i}function s(t){return i(e,t)}function r(e){return i(t,e)}function n(e,...t){let i=1;for(;i<arguments.length;i++){const t=arguments[i];for(const i in t)e[i]=t[i]}return e}function a(e,t,i){const a=this,o={enumerable:!0};a.hasBeenReset=!1;let l="",c=!1,d=e,h=t,u=i,p=null,f="",g=!0,m="auto",v="start",y=50,b="middle",E=50,w="middle";Object.defineProperty(a,"id",n({},o,{get:function(){return l},set:function(e){l=""+e}})),Object.defineProperty(a,"pauseOnExit",n({},o,{get:function(){return c},set:function(e){c=!!e}})),Object.defineProperty(a,"startTime",n({},o,{get:function(){return d},set:function(e){if("number"!==typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"endTime",n({},o,{get:function(){return h},set:function(e){if("number"!==typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"text",n({},o,{get:function(){return u},set:function(e){u=""+e,this.hasBeenReset=!0}})),Object.defineProperty(a,"region",n({},o,{get:function(){return p},set:function(e){p=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"vertical",n({},o,{get:function(){return f},set:function(e){const t=s(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");f=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"snapToLines",n({},o,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(a,"line",n({},o,{get:function(){return m},set:function(e){if("number"!==typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"lineAlign",n({},o,{get:function(){return v},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"position",n({},o,{get:function(){return y},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"positionAlign",n({},o,{get:function(){return b},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"size",n({},o,{get:function(){return E},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"align",n({},o,{get:function(){return w},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");w=t,this.hasBeenReset=!0}})),a.displayState=void 0}return a.prototype.getCueAsHTML=function(){const e=self.WebVTT;return e.convertCueToDOMTree(self,this.text)},a}();class $N{decode(e,t){if(!e)return"";if("string"!==typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function UN(e){function t(e,t,i,s){return 3600*(0|e)+60*(0|t)+(0|i)+parseFloat(s||0)}const i=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return i?parseFloat(i[2])>59?t(i[2],i[3],0,i[4]):t(i[1],i[2],i[3],i[4]):null}class GN{constructor(){this.values=Object.create(null)}set(e,t){this.get(e)||""===t||(this.values[e]=t)}get(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,i){for(let s=0;s<i.length;++s)if(t===i[s]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const i=parseFloat(t);if(i>=0&&i<=100)return this.set(e,i),!0}return!1}}function HN(e,t,i,s){const r=s?e.split(s):[e];for(const n in r){if("string"!==typeof r[n])continue;const e=r[n].split(i);if(2!==e.length)continue;const s=e[0],a=e[1];t(s,a)}}const jN=new FN(0,0,""),zN="middle"===jN.align?"middle":"center";function VN(e,t,i){const s=e;function r(){const t=UN(e);if(null===t)throw new Error("Malformed timestamp: "+s);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function n(e,t){const s=new GN;HN(e,function(e,t){let r;switch(e){case"region":for(let r=i.length-1;r>=0;r--)if(i[r].id===t){s.set(e,i[r].region);break}break;case"vertical":s.alt(e,t,["rl","lr"]);break;case"line":r=t.split(","),s.integer(e,r[0]),s.percent(e,r[0])&&s.set("snapToLines",!1),s.alt(e,r[0],["auto"]),2===r.length&&s.alt("lineAlign",r[1],["start",zN,"end"]);break;case"position":r=t.split(","),s.percent(e,r[0]),2===r.length&&s.alt("positionAlign",r[1],["start",zN,"end","line-left","line-right","auto"]);break;case"size":s.percent(e,t);break;case"align":s.alt(e,t,["start",zN,"end","left","right"]);break}},/:/,/\s/),t.region=s.get("region",null),t.vertical=s.get("vertical","");let r=s.get("line","auto");"auto"===r&&-1===jN.line&&(r=-1),t.line=r,t.lineAlign=s.get("lineAlign","start"),t.snapToLines=s.get("snapToLines",!0),t.size=s.get("size",100),t.align=s.get("align",zN);let n=s.get("position","auto");"auto"===n&&50===jN.position&&(n="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=n}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=r(),a(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+s);e=e.slice(3),a(),t.endTime=r(),a(),n(e,t)}function YN(e){return e.replace(/<br(?: \/)?>/gi,"\n")}class WN{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new $N,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;function i(){let e=t.buffer,i=0;e=YN(e);while(i<e.length&&"\r"!==e[i]&&"\n"!==e[i])++i;const s=e.slice(0,i);return"\r"===e[i]&&++i,"\n"===e[i]&&++i,t.buffer=e.slice(i),s}function s(e){HN(e,function(e,t){},/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{let e="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;e=i();const s=e.match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(null==s||!s[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let r=!1;while(t.buffer){if(!/\r\n|\n/.test(t.buffer))return this;switch(r?r=!1:e=i(),t.state){case"HEADER":/:/.test(e)?s(e):e||(t.state="ID");continue;case"NOTE":e||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(e)){t.state="NOTE";break}if(!e)continue;if(t.cue=new FN(0,0,""),t.state="CUE",-1===e.indexOf("--\x3e")){t.cue.id=e;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{VN(e,t.cue,t.regionList)}catch(tH){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const i=-1!==e.indexOf("--\x3e");if(!e||i&&(r=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=e}continue;case"BADCUE":e||(t.state="ID")}}}catch(tH){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(tH){e.onparsingerror&&e.onparsingerror(tH)}return e.onflush&&e.onflush(),this}}const KN=/\r\n|\n\r|\n|\r/g,qN=function(e,t,i=0){return e.slice(i,i+t.length)===t},XN=function(e){let t=parseInt(e.slice(-3));const i=parseInt(e.slice(-6,-4)),s=parseInt(e.slice(-9,-7)),r=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!xk(t)||!xk(i)||!xk(s)||!xk(r))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*i,t+=6e4*s,t+=36e5*r,t};function QN(e,t,i){return ZO(e.toString())+ZO(t.toString())+ZO(i)}const ZN=function(e,t,i){let s=e[t],r=e[s.prevCC];if(!r||!r.new&&s.new)return e.ccOffset=e.presentationOffset=s.start,void(s.new=!1);while(null!=(n=r)&&n.new){var n;e.ccOffset+=s.start-r.start,s.new=!1,s=r,r=e[s.prevCC]}e.presentationOffset=i};function JN(e,t,i,s,r,n,a){const o=new WN,l=Jk(new Uint8Array(e)).trim().replace(KN,"\n").split("\n"),c=[],d=t?UD(t.baseTime,t.timescale):0;let h,u="00:00.000",p=0,f=0,g=!0;o.oncue=function(e){const n=i[s];let a=i.ccOffset;const o=(p-d)/9e4;if(null!=n&&n.new&&(void 0!==f?a=i.ccOffset=n.start:ZN(i,s,o)),o){if(!t)return void(h=new Error("Missing initPTS for VTT MPEGTS"));a=o-i.presentationOffset}const l=e.endTime-e.startTime,u=XD(9e4*(e.startTime+a-f),9e4*r)/9e4;e.startTime=Math.max(u,0),e.endTime=Math.max(u+l,0);const g=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(g)),e.id||(e.id=QN(e.startTime,e.endTime,g)),e.endTime>0&&c.push(e)},o.onparsingerror=function(e){h=e},o.onflush=function(){h?a(h):n(c)},l.forEach(e=>{if(g){if(qN(e,"X-TIMESTAMP-MAP=")){g=!1,e.slice(16).split(",").forEach(e=>{qN(e,"LOCAL:")?u=e.slice(6):qN(e,"MPEGTS:")&&(p=parseInt(e.slice(7)))});try{f=XN(u)/1e3}catch(t){h=t}return}""===e&&(g=!1)}o.parse(e+"\n")}),o.flush()}const eB="stpp.ttml.im1t",tB=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,iB=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,sB={left:"start",center:"center",right:"end",start:"start",end:"end"};function rB(e,t,i,s){const r=SI(new Uint8Array(e),["mdat"]);if(0===r.length)return void s(new Error("Could not parse IMSC1 mdat"));const n=r.map(e=>Jk(e)),a=FD(t.baseTime,1,t.timescale);try{n.forEach(e=>i(nB(e,a)))}catch(o){s(o)}}function nB(e,t){const i=new DOMParser,s=i.parseFromString(e,"text/xml"),r=s.getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");const n={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(n).reduce((e,t)=>(e[t]=r.getAttribute(`ttp:${t}`)||n[t],e),{}),o="preserve"!==r.getAttribute("xml:space"),l=oB(aB(r,"styling","style")),c=oB(aB(r,"layout","region")),d=aB(r,"body","[begin]");return[].map.call(d,e=>{const i=lB(e,o);if(!i||!e.hasAttribute("begin"))return null;const s=uB(e.getAttribute("begin"),a),r=uB(e.getAttribute("dur"),a);let n=uB(e.getAttribute("end"),a);if(null===s)throw hB(e);if(null===n){if(null===r)throw hB(e);n=s+r}const d=new FN(s-t,n-t,i);d.id=QN(d.startTime,d.endTime,d.text);const h=c[e.getAttribute("region")],u=l[e.getAttribute("style")],p=cB(h,u,l),{textAlign:f}=p;if(f){const e=sB[f];e&&(d.lineAlign=e),d.align=f}return Nk(d,p),d}).filter(e=>null!==e)}function aB(e,t,i){const s=e.getElementsByTagName(t)[0];return s?[].slice.call(s.querySelectorAll(i)):[]}function oB(e){return e.reduce((e,t)=>{const i=t.getAttribute("xml:id");return i&&(e[i]=t),e},{})}function lB(e,t){return[].slice.call(e.childNodes).reduce((e,i,s)=>{var r;return"br"===i.nodeName&&s?e+"\n":null!=(r=i.childNodes)&&r.length?lB(i,t):t?e+i.textContent.trim().replace(/\s+/g," "):e+i.textContent},"")}function cB(e,t,i){const s="http://www.w3.org/ns/ttml#styling";let r=null;const n=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=null!=e&&e.hasAttribute("style")?e.getAttribute("style"):null;return a&&i.hasOwnProperty(a)&&(r=i[a]),n.reduce((i,n)=>{const a=dB(t,s,n)||dB(e,s,n)||dB(r,s,n);return a&&(i[n]=a),i},{})}function dB(e,t,i){return e&&e.hasAttributeNS(t,i)?e.getAttributeNS(t,i):null}function hB(e){return new Error(`Could not parse ttml timestamp ${e}`)}function uB(e,t){if(!e)return null;let i=UN(e);return null===i&&(tB.test(e)?i=pB(e,t):iB.test(e)&&(i=fB(e,t))),i}function pB(e,t){const i=tB.exec(e),s=(0|i[4])+(0|i[5])/t.subFrameRate;return 3600*(0|i[1])+60*(0|i[2])+(0|i[3])+s/t.frameRate}function fB(e,t){const i=iB.exec(e),s=Number(i[1]),r=i[2];switch(r){case"h":return 3600*s;case"m":return 60*s;case"ms":return 1e3*s;case"f":return s/t.frameRate;case"t":return s/t.tickRate}return s}class gB{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,i){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=i,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class mB{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=EB(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(Ck.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Ck.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Ck.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Ck.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(Ck.FRAG_LOADING,this.onFragLoading,this),e.on(Ck.FRAG_LOADED,this.onFragLoaded,this),e.on(Ck.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(Ck.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(Ck.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(Ck.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(Ck.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(Ck.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Ck.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Ck.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Ck.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(Ck.FRAG_LOADING,this.onFragLoading,this),e.off(Ck.FRAG_LOADED,this.onFragLoaded,this),e.off(Ck.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(Ck.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(Ck.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(Ck.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(Ck.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new gB(this,"textTrack1"),t=new gB(this,"textTrack2"),i=new gB(this,"textTrack3"),s=new gB(this,"textTrack4");this.cea608Parser1=new MN(1,e,t),this.cea608Parser2=new MN(3,i,s)}addCues(e,t,i,s,r){let n=!1;for(let a=r.length;a--;){const e=r[a],s=bB(e[0],e[1],t,i);if(s>=0&&(e[0]=Math.min(e[0],t),e[1]=Math.max(e[1],i),n=!0,s/(i-t)>.5))return}if(n||r.push([t,i]),this.config.renderTextTracksNatively){const r=this.captionsTracks[e];this.Cues.newCue(r,t,i,s)}else{const r=this.Cues.newCue(null,t,i,s);this.hls.trigger(Ck.CUES_PARSED,{type:"captions",cues:r,track:e})}}onInitPtsFound(e,{frag:t,id:i,initPTS:s,timescale:r}){const{unparsedVttFrags:n}=this;i===Pk.MAIN&&(this.initPTS[t.cc]={baseTime:s,timescale:r}),n.length&&(this.unparsedVttFrags=[],n.forEach(e=>{this.initPTS[e.frag.cc]?this.onFragLoaded(Ck.FRAG_LOADED,e):this.hls.trigger(Ck.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,t){const{media:i}=this;if(i)for(let s=0;s<i.textTracks.length;s++){const r=i.textTracks[s];if(yB(r,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return r}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:i,media:s}=this,{label:r,languageCode:n}=t[e],a=this.getExistingTrack(r,n);if(a)i[e]=a,VO(i[e]),jO(i[e],s);else{const t=this.createTextTrack("captions",r,n);t&&(t[e]=!0,i[e]=t)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const i=t.label,s={_id:e,label:i,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=s,this.hls.trigger(Ck.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[s]})}createTextTrack(e,t,i){const s=this.media;if(s)return s.addTextTrack(e,t,i)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const i=!!t.transferMedia;if(this.media=null,i)return;const{captionsTracks:s}=this;Object.keys(s).forEach(e=>{VO(s[e]),delete s[e]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=EB(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let i=0;i<t.length;i++)VO(t[i])}onSubtitleTracksUpdated(e,t){const i=t.subtitleTracks||[],s=i.some(e=>e.textCodec===eB);if(this.config.enableWebVTT||s&&this.config.enableIMSC1){const e=mM(this.tracks,i);if(e)return void(this.tracks=i);if(this.textTracks=[],this.tracks=i,this.config.renderTextTracksNatively){const e=this.media,t=e?qO(e.textTracks):null;if(this.tracks.forEach((e,i)=>{let s;if(t){let i=null;for(let s=0;s<t.length;s++)if(t[s]&&yB(t[s],e)){i=t[s],t[s]=null;break}i&&(s=i)}if(s)VO(s);else{const t=vB(e);s=this.createTextTrack(t,e.name,e.lang),s&&(s.mode="disabled")}s&&this.textTracks.push(s)}),null!=t&&t.length){const e=t.filter(e=>null!==e).map(e=>e.label);e.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${e.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const e=this.tracks.map(e=>({label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}));this.hls.trigger(Ck.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:e})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(e=>{const t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(!t)return;const i=`textTrack${t[1]}`,s=this.captionsProperties[i];s&&(s.label=e.name,e.lang&&(s.languageCode=e.lang),s.media=e)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===Pk.MAIN){var i,s;const{cea608Parser1:e,cea608Parser2:r,lastSn:n}=this,{cc:a,sn:o}=t.frag,l=null!=(i=null==(s=t.part)?void 0:s.index)?i:-1;e&&r&&(o!==n+1||o===n&&l!==this.lastPartIndex+1||a!==this.lastCc)&&(e.reset(),r.reset()),this.lastCc=a,this.lastSn=o,this.lastPartIndex=l}}onFragLoaded(e,t){const{frag:i,payload:s}=t;if(i.type===Pk.SUBTITLE)if(s.byteLength){const e=i.decryptdata,r="stats"in t;if(null==e||!e.encrypted||r){const e=this.tracks[i.level],r=this.vttCCs;r[i.cc]||(r[i.cc]={start:i.start,prevCC:this.prevCC,new:!0},this.prevCC=i.cc),e&&e.textCodec===eB?this._parseIMSC1(i,s):this._parseVTTs(t)}}else this.hls.trigger(Ck.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const i=this.hls;rB(t,this.initPTS[e.cc],t=>{this._appendCues(t,e.level),i.trigger(Ck.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},t=>{i.logger.log(`Failed to parse IMSC1: ${t}`),i.trigger(Ck.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})})}_parseVTTs(e){var t;const{frag:i,payload:s}=e,{initPTS:r,unparsedVttFrags:n}=this,a=r.length-1;if(!r[i.cc]&&-1===a)return void n.push(e);const o=this.hls,l=null!=(t=i.initSegment)&&t.data?BI(i.initSegment.data,new Uint8Array(s)).buffer:s;JN(l,this.initPTS[i.cc],this.vttCCs,i.cc,i.start,e=>{this._appendCues(e,i.level),o.trigger(Ck.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:i})},t=>{const r="Missing initPTS for VTT MPEGTS"===t.message;r?n.push(e):this._fallbackToIMSC1(i,s),o.logger.log(`Failed to parse VTT cue: ${t}`),r&&a>i.cc||o.trigger(Ck.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:t})})}_fallbackToIMSC1(e,t){const i=this.tracks[e.level];i.textCodec||rB(t,this.initPTS[e.cc],()=>{i.textCodec=eB,this._parseIMSC1(e,t)},()=>{i.textCodec="wvtt"})}_appendCues(e,t){const i=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[t];if(!i||"disabled"===i.mode)return;e.forEach(e=>zO(i,e))}else{const s=this.tracks[t];if(!s)return;const r=s.default?"default":"subtitles"+t;i.trigger(Ck.CUES_PARSED,{type:"subtitles",cues:e,track:r})}}onFragDecrypted(e,t){const{frag:i}=t;i.type===Pk.SUBTITLE&&this.onFragLoaded(Ck.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:i,samples:s}=t;if(i.type!==Pk.MAIN||"NONE"!==this.closedCaptionsForLevel(i))for(let r=0;r<s.length;r++){const e=s[r].bytes;if(e){this.cea608Parser1||this.initCea608Parsers();const t=this.extractCea608Data(e);this.cea608Parser1.addData(s[r].pts,t[0]),this.cea608Parser2.addData(s[r].pts,t[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:i,endOffsetSubtitles:s,type:r}){const{media:n}=this;if(n&&!(n.currentTime<i)){if(!r||"video"===r){const{captionsTracks:e}=this;Object.keys(e).forEach(s=>YO(e[s],t,i))}if(this.config.renderTextTracksNatively&&0===t&&void 0!==s){const{textTracks:e}=this;Object.keys(e).forEach(i=>YO(e[i],t,s))}}}extractCea608Data(e){const t=[[],[]],i=31&e[0];let s=2;for(let r=0;r<i;r++){const i=e[s++],r=127&e[s++],n=127&e[s++];if(0===r&&0===n)continue;const a=0!==(4&i);if(a){const e=3&i;0!==e&&1!==e||(t[e].push(r),t[e].push(n))}}return t}}function vB(e){return e.characteristics&&/transcribes-spoken-dialog/gi.test(e.characteristics)&&/describes-music-and-sound/gi.test(e.characteristics)?"captions":"subtitles"}function yB(e,t){return!!e&&e.kind===vB(t)&&yM(t,e)}function bB(e,t,i,s){return Math.min(t,s)-Math.max(e,i)}function EB(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const wB=/\s/,AB={newCue(e,t,i,s){const r=[];let n,a,o,l,c;const d=self.VTTCue||self.TextTrackCue;for(let u=0;u<s.rows.length;u++)if(n=s.rows[u],o=!0,l=0,c="",!n.isEmpty()){var h;for(let e=0;e<n.chars.length;e++)wB.test(n.chars[e].uchar)&&o?l++:(c+=n.chars[e].uchar,o=!1);n.cueStartTime=t,t===i&&(i+=1e-4),l>=16?l--:l++;const s=YN(c.trim()),p=QN(t,i,s);null!=e&&null!=(h=e.cues)&&h.getCueById(p)||(a=new d(t,i,s),a.id=p,a.line=u+1,a.align="left",a.position=10+Math.min(80,10*Math.floor(8*l/32)),r.push(a))}return e&&r.length&&(r.sort((e,t)=>"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line),r.forEach(t=>zO(e,t))),r}};function TB(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(tH){}return!1}const SB=/(\d+)-(\d+)\/(\d+)/;class xB{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||_B,this.controller=new self.AbortController,this.stats=new oI}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,i){const s=this.stats;if(s.loading.start)throw new Error("Loader can only be used once.");s.loading.start=self.performance.now();const r=LB(e,this.controller.signal),n="arraybuffer"===e.responseType,a=n?"byteLength":"length",{maxTimeToFirstByteMs:o,maxLoadTimeMs:l}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=i,this.request=this.fetchSetup(e,r),self.clearTimeout(this.requestTimeout),t.timeout=o&&xk(o)?o:l,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(s,e,this.response))},t.timeout);const c=lM(this.request)?this.request.then(self.fetch):self.fetch(this.request);c.then(i=>{var r;this.response=this.loader=i;const a=Math.max(self.performance.now(),s.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=l,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(s,e,this.response))},l-(a-s.loading.start)),!i.ok){const{status:e,statusText:t}=i;throw new CB(t||"fetch, bad network response",e,i)}s.loading.first=a,s.total=IB(i.headers)||s.total;const o=null==(r=this.callbacks)?void 0:r.onProgress;return o&&xk(t.highWaterMark)?this.loadProgressively(i,s,e,t.highWaterMark,o):n?i.arrayBuffer():"json"===e.responseType?i.json():i.text()}).then(i=>{var r,n;const o=this.response;if(!o)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),s.loading.end=Math.max(self.performance.now(),s.loading.first);const l=i[a];l&&(s.loaded=s.total=l);const c={url:o.url,data:i,code:o.status},d=null==(r=this.callbacks)?void 0:r.onProgress;d&&!xk(t.highWaterMark)&&d(s,e,i,o),null==(n=this.callbacks)||n.onSuccess(c,s,e,o)}).catch(t=>{var i;if(self.clearTimeout(this.requestTimeout),s.aborted)return;const r=t&&t.code||0,n=t?t.message:null;null==(i=this.callbacks)||i.onError({code:r,text:n},e,t?t.details:null,s)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,i,s=0,r){const n=new rP,a=e.body.getReader(),o=()=>a.read().then(a=>{if(a.done)return n.dataLength&&r(t,i,n.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const l=a.value,c=l.length;return t.loaded+=c,c<s||n.dataLength?(n.push(l),n.dataLength>=s&&r(t,i,n.flush().buffer,e)):r(t,i,l.buffer,e),o()}).catch(()=>Promise.reject());return o()}}function LB(e,t){const i={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(Nk({},e.headers))};return e.rangeEnd&&i.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),i}function kB(e){const t=SB.exec(e);if(t)return parseInt(t[2])-parseInt(t[1])+1}function IB(e){const t=e.get("Content-Range");if(t){const e=kB(t);if(xk(e))return e}const i=e.get("Content-Length");if(i)return parseInt(i)}function _B(e,t){return new self.Request(e.url,t)}class CB extends Error{constructor(e,t,i){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=i}}const RB=/^age:\s*[\d.]+\s*$/im;class PB{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new oI,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=i,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const i=this.loader=new self.XMLHttpRequest,s=this.stats;s.loading.first=0,s.loaded=0,s.aborted=!1;const r=this.xhrSetup;r?Promise.resolve().then(()=>{if(this.loader===i&&!this.stats.aborted)return r(i,t.url)}).catch(e=>{if(this.loader===i&&!this.stats.aborted)return i.open("GET",t.url,!0),r(i,t.url)}).then(()=>{this.loader!==i||this.stats.aborted||this.openAndSendXhr(i,t,e)}).catch(e=>{var r;null==(r=this.callbacks)||r.onError({code:i.status,text:e.message},t,i,s)}):this.openAndSendXhr(i,t,e)}openAndSendXhr(e,t,i){e.readyState||e.open("GET",t.url,!0);const s=t.headers,{maxTimeToFirstByteMs:r,maxLoadTimeMs:n}=i.loadPolicy;if(s)for(const a in s)e.setRequestHeader(a,s[a]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),i.timeout=r&&xk(r)?r:n,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:i}=this;if(!e||!t)return;const s=t.readyState,r=this.config;if(!i.aborted&&s>=2&&(0===i.loading.first&&(i.loading.first=Math.max(self.performance.now(),i.loading.start),r.timeout!==r.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),r.timeout=r.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.loadPolicy.maxLoadTimeMs-(i.loading.first-i.loading.start)))),4===s)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const s=t.status,l="text"===t.responseType?t.responseText:null;if(s>=200&&s<300){const r=null!=l?l:t.response;if(null!=r){var n,a;i.loading.end=Math.max(self.performance.now(),i.loading.first);const o="arraybuffer"===t.responseType?r.byteLength:r.length;i.loaded=i.total=o,i.bwEstimate=8e3*i.total/(i.loading.end-i.loading.first);const l=null==(n=this.callbacks)?void 0:n.onProgress;l&&l(i,e,r,t);const c={url:t.responseURL,data:r,code:s};return void(null==(a=this.callbacks)||a.onSuccess(c,i,e,t))}}const c=r.loadPolicy.errorRetry,d=i.retry,h={url:e.url,data:void 0,code:s};var o;if(rC(c,d,!1,h))this.retry(c);else qk.error(`${s} while loading ${e.url}`),null==(o=this.callbacks)||o.onError({code:s,text:t.statusText},e,t,i)}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(rC(e,t,!0))this.retry(e);else{var i;qk.warn(`timeout while loading ${null==(i=this.context)?void 0:i.url}`);const e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:i}=this;this.retryDelay=iC(e,i.retry),i.retry++,qk.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${null==t?void 0:t.url}, retrying ${i.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&RB.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const DB={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},MB=Fk(Fk({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:6e7,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:PB,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:Y_,bufferController:SM,capLevelController:IM,errorController:lC,fpsController:HO,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:oR,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:DB},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},OB()),{},{subtitleStreamController:mN,subtitleTrackController:XO,timelineController:mB,audioStreamController:fM,audioTrackController:bM,emeController:UO,cmcdController:DO,contentSteeringController:OO,interstitialsController:fN});function OB(){return{cueHandler:AB,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function NB(e,t,i){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const s=BB(e),r=["manifest","level","frag"],n=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return r.forEach(e=>{const r=`${"level"===e?"playlist":e}LoadPolicy`,a=void 0===t[r],o=[];n.forEach(i=>{const n=`${e}Loading${i}`,l=t[n];if(void 0!==l&&a){o.push(n);const e=s[r].default;switch(t[r]={default:e},i){case"TimeOut":e.maxLoadTimeMs=l,e.maxTimeToFirstByteMs=l;break;case"MaxRetry":e.errorRetry.maxNumRetry=l,e.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":e.errorRetry.retryDelayMs=l,e.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":e.errorRetry.maxRetryDelayMs=l,e.timeoutRetry.maxRetryDelayMs=l;break}}}),o.length&&i.warn(`hls.js config: "${o.join('", "')}" setting(s) are deprecated, use "${r}": ${P_(t[r])}`)}),Fk(Fk({},s),t)}function BB(e){return e&&"object"===typeof e?Array.isArray(e)?e.map(BB):Object.keys(e).reduce((t,i)=>(t[i]=BB(e[i]),t),{}):e}function FB(e,t){const i=e.loader;if(i!==xB&&i!==PB)t.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1;else{const i=TB();i&&(e.loader=xB,e.progressive=!0,e.enableSoftwareAES=!0,t.log("[config]: Progressive streaming enabled, using FetchLoader"))}}const $B=2,UB=.1,GB=.05,HB=100;class jB extends _C{constructor(e,t){super("gap-controller",e.logger),this.hls=null,this.fragmentTracker=null,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var e;null!=(e=this.media)&&e.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{var e;this.hls&&(this.ended=(null==(e=this.media)?void 0:e.currentTime)||1,this.hls.trigger(Ck.MEDIA_ENDED,{stalled:!1}))},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(Ck.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Ck.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Ck.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(Ck.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Ck.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Ck.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(HB),this.mediaSource=t.mediaSource;const i=this.media=t.media;FO(i,"playing",this.onMediaPlaying),FO(i,"waiting",this.onMediaWaiting),FO(i,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:i}=this;i&&($O(i,"playing",this.onMediaPlaying),$O(i,"waiting",this.onMediaWaiting),$O(i,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(null==(e=this.media)||!e.readyState||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var i,s;const r=null==(i=this.hls)?void 0:i.config;if(!r)return;const n=this.media;if(!n)return;const{seeking:a}=n,o=this.seeking&&!a,l=!this.seeking&&a,c=n.paused&&!a||n.ended||0===n.playbackRate;if(this.seeking=a,e!==t)return t&&(this.ended=0),this.moved=!0,a||(this.nudgeRetry=0,r.nudgeOnVideoHole&&!c&&e>t&&this.nudgeOnVideoHole(e,t)),void(0===this.waiting&&this.stallResolved(e));if(l||o)return void(o&&this.stallResolved(e));if(c)return this.nudgeRetry=0,this.stallResolved(e),void(!this.ended&&n.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(Ck.MEDIA_ENDED,{stalled:!1})));if(!DC.getBuffered(n).length)return void(this.nudgeRetry=0);const d=DC.bufferInfo(n,e,0),h=d.nextStart||0,u=this.fragmentTracker;if(a&&u&&this.hls){const t=zB(this.hls.inFlightFragments,e),i=d.len>$B,s=!h||t||h-e>$B&&!u.getPartialFragment(e);if(i||s)return;this.moved=!1}const p=null==(s=this.hls)?void 0:s.latestLevelDetails;if(!this.moved&&null!==this.stalled&&u){const t=d.len>0;if(!t&&!h)return;const i=Math.max(h,d.start||0)-e,s=!(null==p||!p.live),r=s?2*p.targetduration:$B,a=u.getPartialFragment(e);if(i>0&&(i<=r||a))return void(n.paused||this._trySkipBufferHole(a))}const f=r.detectStallWithCurrentTimeMs,g=self.performance.now(),m=this.waiting;let v=this.stalled;if(null===v){if(!(m>0&&g-m<f))return void(this.stalled=g);v=this.stalled=m}const y=g-v;if(!a&&(y>=f||m)&&this.hls){var b;if("ended"===(null==(b=this.mediaSource)?void 0:b.readyState)&&(null==p||!p.live)&&Math.abs(e-((null==p?void 0:p.edge)||0))<1){if(this.ended)return;return this.ended=e||1,void this.hls.trigger(Ck.MEDIA_ENDED,{stalled:!0})}if(this._reportStall(d),!this.media||!this.hls)return}const E=DC.bufferInfo(n,e,r.maxBufferHole);this._tryFixBufferStall(E,y,e)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const i=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(i)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(Ck.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var i;const s=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&null!=(i=this.buffered.audio)&&i.length&&s&&s.length>1&&e>s.end(0)){const i=DC.bufferedInfo(DC.timeRangesToArray(this.buffered.audio),e,0);if(i.len>1&&t>=i.start){const i=DC.timeRangesToArray(s),r=DC.bufferedInfo(i,t,0).bufferedIndex;if(r>-1&&r<i.length-1){const t=DC.bufferedInfo(i,e,0).bufferedIndex,s=i[r].end,n=i[r+1].start;if((-1===t||t>r)&&n-s<1&&e-s<2){const i=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${s} -> ${n} buffered index: ${t}`);this.warn(i.message),this.media.currentTime+=1e-6;const r=this.fragmentTracker.getPartialFragment(e)||void 0,a=DC.bufferInfo(this.media,e,0);this.hls.trigger(Ck.ERROR,{type:Ik.MEDIA_ERROR,details:_k.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:i,reason:i.message,frag:r,buffer:a.len,bufferInfo:a})}}}}}_tryFixBufferStall(e,t,i){var s,r;const{fragmentTracker:n,media:a}=this,o=null==(s=this.hls)?void 0:s.config;if(!a||!n||!o)return;const l=null==(r=this.hls)?void 0:r.latestLevelDetails,c=n.getPartialFragment(i);if(c||null!=l&&l.live&&i<l.fragmentStart){const e=this._trySkipBufferHole(c);if(e||!this.media)return}const d=e.buffered,h=this.adjacentTraversal(e,i);(d&&d.length>1&&e.len>o.maxBufferHole||e.nextStart&&(e.nextStart-i<o.maxBufferHole||h))&&(t>1e3*o.highBufferWatchdogPeriod||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,t){const i=this.fragmentTracker,s=e.nextStart;if(i&&s){const e=i.getFragAtPos(t,Pk.MAIN),r=i.getFragAtPos(s,Pk.MAIN);if(e&&r)return r.sn-e.sn<2}return!1}_reportStall(e){const{hls:t,media:i,stallReported:s,stalled:r}=this;if(!s&&null!==r&&i&&t){this.stallReported=!0;const s=new Error(`Playback stalling at @${i.currentTime} due to low buffer (${P_(e)})`);this.warn(s.message),t.trigger(Ck.ERROR,{type:Ik.MEDIA_ERROR,details:_k.BUFFER_STALLED_ERROR,fatal:!1,error:s,buffer:e.len,bufferInfo:e,stalled:{start:r}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:i,media:s}=this,r=null==(t=this.hls)?void 0:t.config;if(!s||!i||!r)return 0;const n=s.currentTime,a=DC.bufferInfo(s,n,0),o=n<a.start?a.start:a.nextStart;if(o&&this.hls){const t=a.len<=r.maxBufferHole,c=a.len>0&&a.len<1&&s.readyState<3,d=o-n;if(d>0&&(t||c)){if(d>r.maxBufferHole){let t=!1;if(0===n){const e=i.getAppendedFrag(0,Pk.MAIN);e&&o<e.end&&(t=!0)}if(!t){const t=e||i.getAppendedFrag(n,Pk.MAIN);if(t){var l;if(null==(l=this.hls.loadLevelObj)||!l.details)return 0;const e=zB(this.hls.inFlightFragments,o);if(e)return 0;let s=!1,r=t.end;while(r<o){const e=i.getAppendedFrag(r,Pk.MAIN)||i.getPartialFragment(r);if(!e){s=!0;break}r+=e.duration}if(s)return 0}}}const t=Math.max(o+GB,n+UB);if(this.warn(`skipping hole, adjusting currentTime from ${n} to ${t}`),this.moved=!0,s.currentTime=t,null==e||!e.gap){const i=new Error(`fragment loaded with buffer holes, seeking from ${n} to ${t}`);this.hls.trigger(Ck.ERROR,{type:Ik.MEDIA_ERROR,details:_k.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:i,reason:i.message,frag:e||void 0,buffer:a.len,bufferInfo:a})}return t}}return 0}_tryNudgeBuffer(e){const{hls:t,media:i,nudgeRetry:s}=this,r=null==t?void 0:t.config;if(!i||!r)return 0;const n=i.currentTime;if(this.nudgeRetry++,s<r.nudgeMaxRetry){const a=n+(s+1)*r.nudgeOffset,o=new Error(`Nudging 'currentTime' from ${n} to ${a}`);this.warn(o.message),i.currentTime=a,t.trigger(Ck.ERROR,{type:Ik.MEDIA_ERROR,details:_k.BUFFER_NUDGE_ON_STALL,error:o,fatal:!1,buffer:e.len,bufferInfo:e})}else{const i=new Error(`Playhead still not moving while enough data buffered @${n} after ${r.nudgeMaxRetry} nudges`);this.error(i.message),t.trigger(Ck.ERROR,{type:Ik.MEDIA_ERROR,details:_k.BUFFER_STALLED_ERROR,error:i,fatal:!0,buffer:e.len,bufferInfo:e})}}}function zB(e,t){const i=VB(e.main);if(i&&i.start<=t)return i;const s=VB(e.audio);return s&&s.start<=t?s:null}function VB(e){if(!e)return null;switch(e.state){case tP.IDLE:case tP.STOPPED:case tP.ENDED:case tP.ERROR:return null}return e.frag}const YB=.25;function WB(){if("undefined"!==typeof self)return self.VTTCue||self.TextTrackCue}function KB(e,t,i,s,r){let n=new e(t,i,"");try{n.value=s,r&&(n.type=r)}catch(tH){n=new e(t,i,P_(r?Fk({type:r},s):s))}return n}const qB=(()=>{const e=WB();try{e&&new e(0,Number.POSITIVE_INFINITY,"")}catch(tH){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class XB{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(Ck.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e.on(Ck.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Ck.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Ck.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Ck.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(Ck.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Ck.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Ck.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(Ck.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Ck.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Ck.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Ck.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(Ck.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Ck.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Ck.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}onMediaAttaching(e,t){var i;this.media=t.media,!1===(null==(i=t.overrides)?void 0:i.cueRemoval)&&(this.removeCues=!1)}onMediaAttached(){const e=this.hls.latestLevelDetails;e&&this.updateDateRangeCues(e)}onMediaDetaching(e,t){this.media=null;const i=!!t.transferMedia;i||(this.id3Track&&(this.removeCues&&VO(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const i=e[t];if("metadata"===i.kind&&"id3"===i.label)return jO(i,this.media),i}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:i,enableID3MetadataCues:s}}}=this;if(!i&&!s)return;const{samples:r}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const n=WB();if(n)for(let a=0;a<r.length;a++){const e=r[a].type;if(e===QP.emsg&&!i||!s)continue;const t=WP(r[a].data);if(t){const i=r[a].pts;let s=i+r[a].duration;s>qB&&(s=qB);const o=s-i;o<=0&&(s=i+YB);for(let r=0;r<t.length;r++){const a=t[r];if(!KP(a)){this.updateId3CueEnds(i,e);const t=KB(n,i,s,a,e);t&&this.id3Track.addCue(t)}}}}}updateId3CueEnds(e,t){var i;const s=null==(i=this.id3Track)?void 0:i.cues;if(s)for(let r=s.length;r--;){const i=s[r];i.type===t&&i.startTime<e&&i.endTime===qB&&(i.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:i,type:s}){const{id3Track:r,hls:n}=this;if(!n)return;const{config:{enableEmsgMetadataCues:a,enableID3MetadataCues:o}}=n;if(r&&(a||o)){let e;e="audio"===s?e=>e.type===QP.audioId3&&o:"video"===s?e=>e.type===QP.emsg&&a:e=>e.type===QP.audioId3&&o||e.type===QP.emsg&&a,YO(r,t,i,e)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.media||!e.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{id3Track:i}=this,{dateRanges:s}=e,r=Object.keys(s);let n=this.dateRangeCuesAppended;var a;if(i&&t)if(null!=(a=i.cues)&&a.length){const e=Object.keys(n).filter(e=>!r.includes(e));for(let t=e.length;t--;){const s=e[t],r=n[s].cues;delete n[s],Object.keys(r).forEach(e=>{try{const t=r[e];t.removeEventListener("enter",this.onEventCueEnter),i.removeCue(t)}catch(tH){}})}}else n=this.dateRangeCuesAppended={};const o=e.fragments[e.fragments.length-1];if(0===r.length||!xk(null==o?void 0:o.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=WB();for(let c=0;c<r.length;c++){const e=r[c],t=s[e],i=t.startTime,a=n[e],o=(null==a?void 0:a.cues)||{};let d=(null==a?void 0:a.durationKnown)||!1,h=qB;const{duration:u,endDate:p}=t;if(p&&null!==u)h=i+u,d=!0;else if(t.endOnNext&&!d){const e=r.reduce((e,i)=>{if(i!==t.id){const r=s[i];if(r.class===t.class&&r.startDate>t.startDate&&(!e||t.startDate<e.startDate))return r}return e},null);e&&(h=e.startTime,d=!0)}const f=Object.keys(t.attr);for(let s=0;s<f.length;s++){const r=f[s];if(!jC(r))continue;const n=o[r];if(n)d&&!a.durationKnown?n.endTime=h:Math.abs(n.startTime-i)>.01&&(n.startTime=i,n.endTime=h);else if(l){let s=t.attr[r];zC(r)&&(s=tI(s));const n={key:r,data:s},a=KB(l,i,h,n,QP.dateRange);a&&(a.id=e,this.id3Track.addCue(a),o[r]=a,this.hls.config.interstitialsController&&("X-ASSET-LIST"!==r&&"X-ASSET-URL"!==r||a.addEventListener("enter",this.onEventCueEnter)))}}n[e]={cues:o,dateRange:t,durationKnown:d}}}}class QB{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:e}=this,t=this.levelDetails;if(!e||!t)return;this.currentTime=e.currentTime;const i=this.computeLatency();if(null===i)return;this._latency=i;const{lowLatencyMode:s,maxLiveSyncPlaybackRate:r}=this.config;if(!s||1===r||!t.live)return;const n=this.targetLatency;if(null===n)return;const a=i-n,o=Math.min(this.maxLatency,n+t.targetduration),l=a<o;if(l&&a>.05&&this.forwardBufferLength>1){const t=Math.min(2,Math.max(1,r)),i=Math.round(2/(1+Math.exp(-.75*a-this.edgeStalled))*20)/20,s=Math.min(t,Math.max(1,i));this.changeMediaPlaybackRate(e,s)}else 1!==e.playbackRate&&0!==e.playbackRate&&this.changeMediaPlaybackRate(e,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return(null==(e=this.hls)?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(void 0!==e.liveMaxLatencyDuration)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(null===e||null===this.hls)return null;const{holdBack:t,partHoldBack:i,targetduration:s}=e,{liveSyncDuration:r,liveSyncDurationCount:n,lowLatencyMode:a}=this.config,o=this.hls.userConfig;let l=a&&i||t;(this._targetLatencyUpdated||o.liveSyncDuration||o.liveSyncDurationCount||0===l)&&(l=void 0!==r?r:n*s);const c=s;return l+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,c)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(null===e||null===t)return null;const i=this.levelDetails;if(null===i)return null;const s=i.edge,r=e-t-this.edgeStalled,n=s-i.totalduration,a=s-(this.config.lowLatencyMode&&i.partTarget||i.targetduration);return Math.min(Math.max(n,r),a)}get drift(){const e=this.levelDetails;return null===e?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(null===e)return 0;const t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const i=e.buffered.length;return(i?e.buffered.end(i-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(Ck.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Ck.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Ck.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Ck.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(Ck.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Ck.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Ck.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Ck.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var i;t.details===_k.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&null!=(i=this.levelDetails)&&i.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var i,s;e.playbackRate!==t&&(null==(i=this.hls)||i.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${null==(s=this.targetLatency)?void 0:s.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return null===e?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return null===e?null:e-this.currentTime}}class ZB extends gM{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Ck.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Ck.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Ck.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Ck.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Ck.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Ck.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Ck.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Ck.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Ck.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Ck.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){const e=this._levels;e.forEach(e=>{e.loadError=0,e.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const i=this.hls.config.preferManagedMediaSource,s=[],r={},n={};let a=!1,o=!1,l=!1;t.levels.forEach(e=>{const t=e.attrs;let{audioCodec:c,videoCodec:d}=e;c&&(e.audioCodec=c=s_(c,i)||void 0),d&&(d=e.videoCodec=o_(d));const{width:h,height:u,unknownCodecs:p}=e;let f=p?p.length:0;if(p)for(let i=f;i--;){const t=p[i];this.isAudioSupported(t)?(e.audioCodec=c=c?`${c},${t}`:t,f--,WI.audio[c.substring(0,4)]=2):this.isVideoSupported(t)&&(e.videoCodec=d=d?`${d},${t}`:t,f--,WI.video[d.substring(0,4)]=2)}if(a||(a=!(!h||!u)),o||(o=!!d),l||(l=!!c),f||c&&!this.isAudioSupported(c)||d&&!this.isVideoSupported(d))return void this.log(`Some or all CODECS not supported "${t.CODECS}"`);const{CODECS:g,"FRAME-RATE":m,"HDCP-LEVEL":v,"PATHWAY-ID":y,RESOLUTION:b,"VIDEO-RANGE":E}=t,w=`${y||"."}-`,A=`${w}${e.bitrate}-${b}-${m}-${g}-${E}-${v}`;if(r[A])if(r[A].uri===e.url||e.attrs["PATHWAY-ID"])r[A].addGroupId("audio",t.AUDIO),r[A].addGroupId("text",t.SUBTITLES);else{const t=n[A]+=1;e.attrs["PATHWAY-ID"]=new Array(t+1).join(".");const i=this.createLevel(e);r[A]=i,s.push(i)}else{const t=this.createLevel(e);r[A]=t,n[A]=1,s.push(t)}}),this.filterAndSortMediaOptions(s,t,a,o,l)}createLevel(e){const t=new k_(e),i=e.supplemental;if(null!=i&&i.videoCodec&&!this.isVideoSupported(i.videoCodec)){const e=new Error(`SUPPLEMENTAL-CODECS not supported "${i.videoCodec}"`);this.log(e.message),t.supportedResult=u_(e,[])}return t}isAudioSupported(e){return qI(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return qI(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,i,s,r){let n=[],a=[],o=e;if((i||s)&&r&&(o=o.filter(({videoCodec:e,videoRange:t,width:i,height:s})=>(!!e||!(!i||!s))&&T_(t))),0===o.length)return void Promise.resolve().then(()=>{if(this.hls){let e="no level with compatible codecs found in manifest",i=e;t.levels.length&&(i=`one or more CODECS in variant not supported: ${P_(t.levels.map(e=>e.attrs.CODECS).filter((e,t,i)=>i.indexOf(e)===t))}`,this.warn(i),e+=` (${i})`);const s=new Error(e);this.hls.trigger(Ck.ERROR,{type:Ik.MEDIA_ERROR,details:_k.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:s,reason:i})}});t.audioTracks&&(n=t.audioTracks.filter(e=>!e.audioCodec||this.isAudioSupported(e.audioCodec)),JB(n)),t.subtitles&&(a=t.subtitles,JB(a));const l=o.slice(0);o.sort((e,t)=>{if(e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"])return(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1;if(i&&e.height!==t.height)return e.height-t.height;if(e.frameRate!==t.frameRate)return e.frameRate-t.frameRate;if(e.videoRange!==t.videoRange)return A_.indexOf(e.videoRange)-A_.indexOf(t.videoRange);if(e.videoCodec!==t.videoCodec){const i=ZI(e.videoCodec),s=ZI(t.videoCodec);if(i!==s)return s-i}if(e.uri===t.uri&&e.codecSet!==t.codecSet){const i=JI(e.codecSet),s=JI(t.codecSet);if(i!==s)return s-i}return e.averageBitrate!==t.averageBitrate?e.averageBitrate-t.averageBitrate:0});let c=l[0];if(this.steering&&(o=this.steering.filterParsedLevels(o),o.length!==l.length))for(let g=0;g<l.length;g++)if(l[g].pathwayId===o[0].pathwayId){c=l[g];break}this._levels=o;for(let g=0;g<o.length;g++)if(o[g]===c){var d;this._firstLevel=g;const e=c.bitrate,t=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${o.length} level(s) found, first bitrate: ${e}`),void 0===(null==(d=this.hls.userConfig)?void 0:d.abrEwmaDefaultEstimate)){const i=Math.min(e,this.hls.config.abrEwmaDefaultEstimateMax);i>t&&t===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=i)}break}const h=r&&!s,u=this.hls.config,p=!(!u.audioStreamController||!u.audioTrackController),f={levels:o,audioTracks:n,subtitleTracks:a,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:r,video:s,altAudio:p&&!h&&n.some(e=>!!e.url)};this.hls.trigger(Ck.MANIFEST_PARSED,f)}get levels(){return 0===this._levels.length?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(0===t.length)return;if(e<0||e>=t.length){const i=new Error("invalid level idx"),s=e<0;if(this.hls.trigger(Ck.ERROR,{type:Ik.OTHER_ERROR,details:_k.LEVEL_SWITCH_ERROR,level:e,fatal:s,error:i,reason:i.message}),s)return;e=Math.min(e,t.length-1)}const i=this.currentLevelIndex,s=this.currentLevel,r=s?s.attrs["PATHWAY-ID"]:void 0,n=t[e],a=n.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=n,i===e&&s&&r===a)return;this.log(`Switching to level ${e} (${n.height?n.height+"p ":""}${n.videoRange?n.videoRange+" ":""}${n.codecSet?n.codecSet+" ":""}@${n.bitrate})${a?" with Pathway "+a:""} from level ${i}${r?" with Pathway "+r:""}`);const o={level:e,attrs:n.attrs,details:n.details,bitrate:n.bitrate,averageBitrate:n.averageBitrate,maxBitrate:n.maxBitrate,realBitrate:n.realBitrate,width:n.width,height:n.height,codecSet:n.codecSet,audioCodec:n.audioCodec,videoCodec:n.videoCodec,audioGroups:n.audioGroups,subtitleGroups:n.subtitleGroups,loaded:n.loaded,loadError:n.loadError,fragmentError:n.fragmentError,name:n.name,id:n.id,uri:n.uri,url:n.url,urlId:0,audioGroupIds:n.audioGroupIds,textGroupIds:n.textGroupIds};this.hls.trigger(Ck.LEVEL_SWITCHING,o);const l=n.details;if(!l||l.live){const e=this.switchParams(n.uri,null==s?void 0:s.details,l);this.loadPlaylist(e)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(void 0===this._startLevel){const e=this.hls.config.startLevel;return void 0!==e?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),i=e.filter(e=>-1!==t.indexOf(e));if(e.length<1)return void this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);this.steering.pathwayPriority=i}}onError(e,t){!t.fatal&&t.context&&t.context.type===Rk.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(void 0!==t&&t.type===Pk.MAIN){const e=t.elementaryStreams;if(!Object.keys(e).some(t=>!!e[t]))return;const i=this._levels[t.level];null!=i&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(e,t){var i;const{level:s,details:r}=t,n=t.levelInfo;var a;if(!n)return this.warn(`Invalid level index ${s}`),void(null!=(a=t.deliveryDirectives)&&a.skip&&(r.deltaUpdateFailed=!0));if(n===this.currentLevel||t.withoutMultiVariant){0===n.fragmentError&&(n.loadError=0);let e=n.details;e===t.details&&e.advanced&&(e=void 0),this.playlistLoaded(s,t,e)}else null!=(i=t.deliveryDirectives)&&i.skip&&(r.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const i=this.getUrlWithDirectives(e.uri,t),s=this.currentLevelIndex,r=e.attrs["PATHWAY-ID"],n=e.details,a=null==n?void 0:n.age;this.log(`Loading level index ${s}${void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:""}${r?" Pathway "+r:""}${a&&n.live?" age "+a.toFixed(1)+(n.type&&" "+n.type||""):""} ${i}`),this.hls.trigger(Ck.LEVEL_LOADING,{url:i,level:s,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(1===this._levels.length)return;const i=this._levels.filter((t,i)=>i!==e||(this.steering&&this.steering.removeLevel(t),t===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,t.details&&t.details.fragments.forEach(e=>e.level=-1)),!1));YR(i),this._levels=i,this.currentLevelIndex>-1&&null!=(t=this.currentLevel)&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const s=i.length-1;this._firstLevel=Math.min(this._firstLevel,s),this._startLevel&&(this._startLevel=Math.min(this._startLevel,s)),this.hls.trigger(Ck.LEVELS_UPDATED,{levels:i})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:i}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(Ck.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:i}))}}function JB(e){const t={};e.forEach(e=>{const i=e.groupId||"";e.id=t[i]=t[i]||0,t[i]++})}function eF(){return self.SourceBuffer||self.WebKitSourceBuffer}function tF(){const e=Xk();if(!e)return!1;const t=eF();return!t||t.prototype&&"function"===typeof t.prototype.appendBuffer&&"function"===typeof t.prototype.remove}function iF(){if(!tF())return!1;const e=Xk();return"function"===typeof(null==e?void 0:e.isTypeSupported)&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(t=>e.isTypeSupported(QI(t,"video")))||["mp4a.40.2","fLaC"].some(t=>e.isTypeSupported(QI(t,"audio"))))}function sF(){var e;const t=eF();return"function"===typeof(null==t||null==(e=t.prototype)?void 0:e.changeType)}const rF=100;class nF extends iP{constructor(e,t,i){super(e,t,i,"stream-controller",Pk.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const e=this.media,t=e?e.currentTime:null;if(null===t||!xk(t))return;if(this.log(`Media seeked to ${t.toFixed(3)}`),!this.getBufferedFrag(t))return;const i=this.getFwdBufferInfoAtPos(e,t,Pk.MAIN,0);null!==i&&0!==i.len?this.tick():this.warn(`Main forward buffer length at ${t} on "seeked" event ${i?i.len:"empty"})`)},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(Ck.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Ck.LEVEL_LOADING,this.onLevelLoading,this),e.on(Ck.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Ck.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(Ck.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Ck.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(Ck.BUFFER_CREATED,this.onBufferCreated,this),e.on(Ck.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Ck.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Ck.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(Ck.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Ck.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Ck.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(Ck.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Ck.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(Ck.BUFFER_CREATED,this.onBufferCreated,this),e.off(Ck.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Ck.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Ck.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:i,hls:s}=this;if(this.stopLoad(),this.setInterval(rF),this.level=-1,!this.startFragRequested){let e=s.startLevel;-1===e&&(s.config.testBandwidth&&this.levels.length>1?(e=0,this.bitrateTest=!0):e=s.firstAutoLevel),s.nextLoadLevel=e,this.level=s.loadLevel,this._hasEnoughToStart=!!t}i>0&&-1===e&&!t&&(this.log(`Override startPosition with lastCurrentTime @${i.toFixed(3)}`),e=i),this.state=tP.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=tP.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case tP.WAITING_LEVEL:{const{levels:e,level:t}=this,i=null==e?void 0:e[t],s=null==i?void 0:i.details;if(s&&(!s.live||this.levelLastLoaded===i&&!this.waitForLive(i))){if(this.waitForCdnTuneIn(s))break;this.state=tP.IDLE;break}if(this.hls.nextLoadLevel!==this.level){this.state=tP.IDLE;break}break}case tP.FRAG_LOADING_WAITING_RETRY:{var e;const t=self.performance.now(),i=this.retryDate;if(!i||t>=i||null!=(e=this.media)&&e.seeking){const{levels:e,level:t}=this,i=null==e?void 0:e[t];this.resetStartWhenNotLoaded(i||null),this.state=tP.IDLE}}break}this.state===tP.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),null!=(e=this.media)&&e.readyState&&!1===this.media.seeking&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:i,media:s}=this;if(null===t||!s&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch))return;if(this.altAudio&&this.audioOnly)return;const r=this.buffering?e.nextLoadLevel:e.loadLevel;if(null==i||!i[r])return;const n=i[r],a=this.getMainFwdBufferInfo();if(null===a)return;const o=this.getLevelDetails();if(o&&this._streamEnded(a,o)){const e={};return 2===this.altAudio&&(e.type="video"),this.hls.trigger(Ck.BUFFER_EOS,e),void(this.state=tP.ENDED)}if(!this.buffering)return;e.loadLevel!==r&&-1===e.manualLevel&&this.log(`Adapting to level ${r} from level ${this.level}`),this.level=e.nextLoadLevel=r;const l=n.details;if(!l||this.state===tP.WAITING_LEVEL||this.waitForLive(n))return this.level=r,this.state=tP.WAITING_LEVEL,void(this.startFragRequested=!1);const c=a.len,d=this.getMaxBufferLength(n.maxBitrate);if(c>=d)return;this.backtrackFragment&&this.backtrackFragment.start>a.end&&(this.backtrackFragment=null);const h=this.backtrackFragment?this.backtrackFragment.start:a.end;let u=this.getNextFragment(h,l);if(this.couldBacktrack&&!this.fragPrevious&&u&&dI(u)&&this.fragmentTracker.getState(u)!==dC.OK){var p;const e=(null!=(p=this.backtrackFragment)?p:u).sn,t=e-l.startSN,i=l.fragments[t-1];i&&u.cc===i.cc&&(u=i,this.fragmentTracker.removeFragment(i))}else this.backtrackFragment&&a.len&&(this.backtrackFragment=null);if(u&&this.isLoopLoading(u,h)){const e=u.gap;if(!e){const e=this.audioOnly&&!this.altAudio?lI.AUDIO:lI.VIDEO,t=(e===lI.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;t&&this.afterBufferFlushed(t,e,Pk.MAIN)}u=this.getNextFragmentLoopLoading(u,l,a,Pk.MAIN,d)}u&&(!u.initSegment||u.initSegment.data||this.bitrateTest||(u=u.initSegment),this.loadFragment(u,n,h))}loadFragment(e,t,i){const s=this.fragmentTracker.getState(e);s===dC.NOT_LOADED||s===dC.PARTIAL?dI(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,i):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,Pk.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(null!=t&&t.readyState){let i;const s=this.getAppendedFrag(t.currentTime);s&&s.start>1&&this.flushMainBuffer(0,s.start-1);const r=this.getLevelDetails();if(null!=r&&r.live){const e=this.getMainFwdBufferInfo();if(!e||e.len<2*r.targetduration)return}if(!t.paused&&e){const t=this.hls.nextLoadLevel,s=e[t],r=this.fragLastKbps;i=r&&this.fragCurrent?this.fragCurrent.duration*s.maxBitrate/(1e3*r)+1:0}else i=0;const n=this.getBufferedFrag(t.currentTime+i);if(n){const e=this.followingBufferedFrag(n);if(e){this.abortCurrentFrag();const t=e.maxStartPTS?e.maxStartPTS:e.start,i=e.duration,s=Math.max(n.end,t+Math.min(Math.max(i-this.config.maxFragLookUpTolerance,i*(this.couldBacktrack?.5:.125)),i*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(s,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case tP.KEY_LOADING:case tP.FRAG_LOADING:case tP.FRAG_LOADING_WAITING_RETRY:case tP.PARSING:case tP.PARSED:this.state=tP.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,2===this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const i=t.media;FO(i,"playing",this.onMediaPlaying),FO(i,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:i}=this;i&&($O(i,"playing",this.onMediaPlaying),$O(i,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t);const s=!!t.transferMedia;s||(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(Ck.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let i=!1,s=!1;t.levels.forEach(e=>{const t=e.audioCodec;t&&(i=i||-1!==t.indexOf("mp4a.40.2"),s=s||-1!==t.indexOf("mp4a.40.5"))}),this.audioCodecSwitch=i&&s&&!sF(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:i}=this;if(!i||this.state!==tP.IDLE)return;const s=t.levelInfo;(!s.details||s.details.live&&(this.levelLastLoaded!==s||s.details.expired)||this.waitForCdnTuneIn(s.details))&&(this.state=tP.WAITING_LEVEL)}onLevelLoaded(e,t){var i;const{levels:s,startFragRequested:r}=this,n=t.level,a=t.details,o=a.totalduration;if(!s)return void this.warn(`Levels were reset while loading level ${n}`);this.log(`Level ${n} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""}, cc [${a.startCC}, ${a.endCC}] duration:${o}`);const l=t.levelInfo,c=this.fragCurrent;!c||this.state!==tP.FRAG_LOADING&&this.state!==tP.FRAG_LOADING_WAITING_RETRY||c.level!==t.level&&c.loader&&this.abortCurrentFrag();let d=0;if(a.live||null!=(i=l.details)&&i.live){var h;if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;d=this.alignPlaylists(a,l.details,null==(h=this.levelLastLoaded)?void 0:h.details)}if(l.details=a,this.levelLastLoaded=l,r||this.setStartPosition(a,d),this.hls.trigger(Ck.LEVEL_UPDATED,{details:a,level:n}),this.state===tP.WAITING_LEVEL){if(this.waitForCdnTuneIn(a))return;this.state=tP.IDLE}r&&a.live&&this.synchronizeToLiveEdge(a),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:i}=this;if(!i)return;const s=this.hls.liveSyncPosition,r=this.getLoadPosition(),n=e.fragmentStart,a=e.edge,o=r>=n-t.maxFragLookUpTolerance&&r<=a;if(null!==s&&i.duration>s&&(r<s||!o)){const n=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;if((!o&&i.readyState<4||r<a-n)&&(this._hasEnoughToStart||(this.nextLoadPosition=s),i.readyState))if(this.warn(`Playback: ${r.toFixed(3)} is located too far from the end of live sliding playlist: ${a}, reset currentTime to : ${s.toFixed(3)}`),"buffered"===this.config.liveSyncMode){var l;const e=DC.bufferInfo(i,s,0);if(null==e||null==(l=e.buffered)||!l.length)return void(i.currentTime=s);const t=e.start<=r;if(t)return void(i.currentTime=s);const{nextStart:n}=DC.bufferedInfo(e.buffered,r,0);n&&(i.currentTime=n)}else i.currentTime=s}}_handleFragmentLoadProgress(e){var t;const i=e.frag,{part:s,payload:r}=e,{levels:n}=this;if(!n)return void this.warn(`Levels were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);const a=n[i.level];if(!a)return void this.warn(`Level ${i.level} not found on progress`);const o=a.details;if(!o)return this.warn(`Dropping fragment ${i.sn} of level ${i.level} after level details were reset`),void this.fragmentTracker.removeFragment(i);const l=a.videoCodec,c=o.PTSKnown||!o.live,d=null==(t=i.initSegment)?void 0:t.data,h=this._getAudioCodec(a),u=this.transmuxer=this.transmuxer||new uM(this.hls,Pk.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=s?s.index:-1,f=-1!==p,g=new CC(i.level,i.sn,i.stats.chunkCount,r.byteLength,p,f),m=this.initPTS[i.cc];u.push(r,d,h,l,i,s,o.totalduration,c,g,m)}onAudioTrackSwitching(e,t){const i=this.hls,s=2===this.altAudio,r=V_(t.url,i);if(r)this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const e=this.fragCurrent;e&&(this.log("Switching to main audio track, cancel main fragment load"),e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(s)return this.fragmentTracker.removeAllFragments(),i.once(Ck.BUFFER_FLUSHED,()=>{var e;null==(e=this.hls)||e.trigger(Ck.AUDIO_TRACK_SWITCHED,t)}),void i.trigger(Ck.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});i.trigger(Ck.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const i=V_(t.url,this.hls);if(i){const e=this.videoBuffer;e&&this.mediaBuffer!==e&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=e)}this.altAudio=i?2:0,this.tick()}onBufferCreated(e,t){const i=t.tracks;let s,r,n=!1;for(const a in i){const e=i[a];if("main"===e.id){if(r=a,s=e,"video"===a){const e=i[a];e&&(this.videoBuffer=e.buffer)}}else n=!0}n&&s?(this.log(`Alternate track found, use ${r}.buffered to schedule main fragment loading`),this.mediaBuffer=s.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:i,part:s}=t,r=i.type===Pk.MAIN;if(r){if(this.fragContextChanged(i))return this.warn(`Fragment ${i.sn}${s?" p: "+s.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}`),void(this.state===tP.PARSED&&(this.state=tP.IDLE));const e=s?s.stats:i.stats;this.fragLastKbps=Math.round(8*e.total/(e.buffering.end-e.loading.first)),dI(i)&&(this.fragPrevious=i),this.fragBufferedComplete(i,s)}const n=this.media;n&&(!this._hasEnoughToStart&&DC.getBuffered(n).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),r&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var i;if(t.fatal)this.state=tP.ERROR;else switch(t.details){case _k.FRAG_GAP:case _k.FRAG_PARSING_ERROR:case _k.FRAG_DECRYPT_ERROR:case _k.FRAG_LOAD_ERROR:case _k.FRAG_LOAD_TIMEOUT:case _k.KEY_LOAD_ERROR:case _k.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Pk.MAIN,t);break;case _k.LEVEL_LOAD_ERROR:case _k.LEVEL_LOAD_TIMEOUT:case _k.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==tP.WAITING_LEVEL||(null==(i=t.context)?void 0:i.type)!==Rk.LEVEL||(this.state=tP.IDLE);break;case _k.BUFFER_ADD_CODEC_ERROR:case _k.BUFFER_APPEND_ERROR:if("main"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&this.resetLoadingState();break;case _k.BUFFER_FULL_ERROR:if("main"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case _k.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onFragLoadEmergencyAborted(){this.state=tP.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==lI.AUDIO||!this.altAudio){const e=(t===lI.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;e&&(this.afterBufferFlushed(e,t,Pk.MAIN),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,-1===this.level&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let i=this.startPosition;if(i>=0&&t<i){if(e.seeking)return void this.log(`could not seek to ${i}, already seeking at ${t}`);const s=this.timelineOffset;s&&i&&(i+=s);const r=this.getLevelDetails(),n=DC.getBuffered(e),a=n.length?n.start(0):0,o=a-i,l=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||o>0&&(o<l||this.loadingParts&&o<2*((null==r?void 0:r.partTarget)||0)))&&(this.log(`adjusting start position by ${o} to match buffer start`),i+=o,this.startPosition=i),t<i&&(this.log(`seek to target start position ${i} from current time ${t} buffer start ${a}`),e.currentTime=i)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(e=>{const{hls:i}=this,s=null==e?void 0:e.frag;if(!s||this.fragContextChanged(s))return;t.fragmentError=0,this.state=tP.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const r=s.stats;r.parsing.start=r.parsing.end=r.buffering.start=r.buffering.end=self.performance.now(),i.trigger(Ck.FRAG_LOADED,e),s.bitrateTest=!1})}_handleTransmuxComplete(e){var t;const i=this.playlistType,{hls:s}=this,{remuxResult:r,chunkMeta:n}=e,a=this.getCurrentContext(n);if(!a)return void this.resetWhenMissingContext(n);const{frag:o,part:l,level:c}=a,{video:d,text:h,id3:u,initSegment:p}=r,{details:f}=c,g=this.altAudio?void 0:r.audio;if(this.fragContextChanged(o))this.fragmentTracker.removeFragment(o);else{if(this.state=tP.PARSING,p){if(null!=p&&p.tracks){const e=o.initSegment||o;this._bufferInitSegment(c,p.tracks,e,n),s.trigger(Ck.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:i,tracks:p.tracks})}const e=p.initPTS,t=p.timescale,r=this.initPTS[o.cc];!xk(e)||r&&r.baseTime===e&&r.timescale===t||(this.initPTS[o.cc]={baseTime:e,timescale:t},s.trigger(Ck.INIT_PTS_FOUND,{frag:o,id:i,initPTS:e,timescale:t}))}if(d&&f){g&&"audiovideo"===d.type&&this.logMuxedErr(o);const e=f.fragments[o.sn-1-f.startSN],t=o.sn===f.startSN,i=!e||o.cc>e.cc;if(!1!==r.independent){const{startPTS:e,endPTS:s,startDTS:r,endDTS:a}=d;if(l)l.elementaryStreams[d.type]={startPTS:e,endPTS:s,startDTS:r,endDTS:a};else if(d.firstKeyFrame&&d.independent&&1===n.id&&!i&&(this.couldBacktrack=!0),d.dropped&&d.independent){const r=this.getMainFwdBufferInfo(),n=(r?r.end:this.getLoadPosition())+this.config.maxBufferHole,l=d.firstKeyFramePTS?d.firstKeyFramePTS:e;if(!t&&n<l-this.config.maxBufferHole&&!i)return void this.backtrack(o);i&&(o.gap=!0),o.setElementaryStreamInfo(d.type,o.start,s,o.start,a,!0)}else t&&e-(f.appliedTimelineOffset||0)>$B&&(o.gap=!0);o.setElementaryStreamInfo(d.type,e,s,r,a),this.backtrackFragment&&(this.backtrackFragment=o),this.bufferFragmentData(d,o,l,n,t||i)}else{if(!t&&!i)return void this.backtrack(o);o.gap=!0}}if(g){const{startPTS:e,endPTS:t,startDTS:i,endDTS:s}=g;l&&(l.elementaryStreams[lI.AUDIO]={startPTS:e,endPTS:t,startDTS:i,endDTS:s}),o.setElementaryStreamInfo(lI.AUDIO,e,t,i,s),this.bufferFragmentData(g,o,l,n)}if(f&&null!=u&&null!=(t=u.samples)&&t.length){const e={id:i,frag:o,details:f,samples:u.samples};s.trigger(Ck.FRAG_PARSING_METADATA,e)}if(f&&h){const e={id:i,frag:o,details:f,samples:h.samples};s.trigger(Ck.FRAG_PARSING_USERDATA,e)}}}logMuxedErr(e){this.warn(`${dI(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,i,s){if(this.state!==tP.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(i));const{audio:r,video:n,audiovideo:a}=t;if(r){const i=e.audioCodec;let s=n_(r.codec,i);"mp4a"===s&&(s="mp4a.40.5");const n=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){s&&(s=-1!==s.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5");const e=r.metadata;e&&"channelCount"in e&&1!==(e.channelCount||1)&&-1===n.indexOf("firefox")&&(s="mp4a.40.5")}s&&-1!==s.indexOf("mp4a.40.5")&&-1!==n.indexOf("android")&&"audio/mpeg"!==r.container&&(s="mp4a.40.2",this.log(`Android: force audio codec to ${s}`)),i&&i!==s&&this.log(`Swapping manifest audio codec "${i}" for "${s}"`),r.levelCodec=s,r.id=Pk.MAIN,this.log(`Init audio buffer, container:${r.container}, codecs[selected/level/parsed]=[${s||""}/${i||""}/${r.codec}]`),delete t.audiovideo}if(n){n.levelCodec=e.videoCodec,n.id=Pk.MAIN;const i=n.codec;if(4===(null==i?void 0:i.length))switch(i){case"hvc1":case"hev1":n.codec="hvc1.1.6.L120.90";break;case"av01":n.codec="av01.0.04M.08";break;case"avc1":n.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${n.container}, codecs[level/parsed]=[${e.videoCodec||""}/${i}]${n.codec!==i?" parsed-corrected="+n.codec:""}${n.supplemental?" supplemental="+n.supplemental:""}`),delete t.audiovideo}a&&(this.log(`Init audiovideo buffer, container:${a.container}, codecs[level/parsed]=[${e.codecs}/${a.codec}]`),delete t.video,delete t.audio);const o=Object.keys(t);if(o.length){if(this.hls.trigger(Ck.BUFFER_CODECS,t),!this.hls)return;o.forEach(e=>{const r=t[e],n=r.initSegment;null!=n&&n.byteLength&&this.hls.trigger(Ck.BUFFER_APPENDING,{type:e,data:n,frag:i,part:null,chunkMeta:s,parent:i.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&2===this.altAudio?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,Pk.MAIN)}get maxBufferLength(){const{levels:e,level:t}=this,i=null==e?void 0:e[t];return i?this.getMaxBufferLength(i.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=tP.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&!1===e.seeking){const i=e.currentTime;if(DC.isBuffered(e,i)?t=this.getAppendedFrag(i):DC.isBuffered(e,i+.1)&&(t=this.getAppendedFrag(i+.1)),t){this.backtrackFragment=null;const e=this.fragPlaying,i=t.level;e&&t.sn===e.sn&&e.level===i||(this.fragPlaying=t,this.hls.trigger(Ck.FRAG_CHANGED,{frag:t}),e&&e.level===i||this.hls.trigger(Ck.LEVEL_SWITCHED,{level:i}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=(null==(e=this.media)?void 0:e.currentTime)||this.lastCurrentTime;return xk(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=(null==(e=this.media)?void 0:e.currentTime)||this.lastCurrentTime;if(xk(t)){const e=this.getLevelDetails(),i=this.currentFrag||(e?q_(null,e.fragments,t):null);if(i){const e=i.programDateTime;if(null!==e){const s=e+1e3*(t-i.start);return new Date(s)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class aF{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const i in this.keyUriToKeyInfo){const s=this.keyUriToKeyInfo[i].loader;if(s){var t;if(e&&e!==(null==(t=s.context)?void 0:t.frag.type))return;s.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=_k.KEY_LOAD_ERROR,i,s,r){return new IC({type:Ik.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:r,error:i,networkDetails:s})}loadClear(e,t,i){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(t.length)for(let s=0,r=t.length;s<r;s++){const n=t[s];if(e.cc<=n.cc&&(!dI(e)||!dI(n)||e.sn<n.sn)||!i&&s==r-1)return this.emeController.selectKeySystemFormat(n).then(e=>{if(!this.emeController)return;n.setKeyFormat(e);const t=rR(e);return t?this.emeController.getKeySystemAccess([t]):void 0})}if(this.config.requireKeySystemAccessOnStart){const e=aR(this.config);if(e.length)return this.emeController.getKeySystemAccess(e)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var i,s;t&&e.setKeyFormat(t);const r=e.decryptdata;if(!r){const i=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,_k.KEY_LOAD_ERROR,i))}const n=r.uri;if(!n)return Promise.reject(this.createKeyLoadError(e,_k.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${n}"`)));let a=this.keyUriToKeyInfo[n];if(null!=(i=a)&&i.decryptdata.key)return r.key=a.decryptdata.key,Promise.resolve({frag:e,keyInfo:a});var o;if(null!=(s=a)&&s.keyLoadPromise)switch(null==(o=a.mediaKeySessionContext)?void 0:o.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return a.keyLoadPromise.then(t=>(r.key=t.keyInfo.decryptdata.key,{frag:e,keyInfo:a}))}switch(a=this.keyUriToKeyInfo[n]={decryptdata:r,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},r.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===r.keyFormat?this.loadKeyHTTP(a,e):this.loadKeyEME(a,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(a,e);default:return Promise.reject(this.createKeyLoadError(e,_k.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${r.method}"`)))}}loadKeyEME(e,t){const i={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const t=this.emeController.loadKey(i);if(t)return(e.keyLoadPromise=t.then(t=>(e.mediaKeySessionContext=t,i))).catch(t=>{throw e.keyLoadPromise=null,t})}return Promise.resolve(i)}loadKeyHTTP(e,t){const i=this.config,s=i.loader,r=new s(i);return t.keyLoader=e.loader=r,e.keyLoadPromise=new Promise((s,n)=>{const a={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},o=i.keyLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(e,t,i,r)=>{const{frag:a,keyInfo:o,url:l}=i;if(!a.decryptdata||o!==this.keyUriToKeyInfo[l])return n(this.createKeyLoadError(a,_k.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),r));o.decryptdata.key=a.decryptdata.key=new Uint8Array(e.data),a.keyLoader=null,o.loader=null,s({frag:a,keyInfo:o})},onError:(e,i,s,r)=>{this.resetLoader(i),n(this.createKeyLoadError(t,_k.KEY_LOAD_ERROR,new Error(`HTTP Error ${e.code} loading key ${e.text}`),s,Fk({url:a.url,data:void 0},e)))},onTimeout:(e,i,s)=>{this.resetLoader(i),n(this.createKeyLoadError(t,_k.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),s))},onAbort:(e,i,s)=>{this.resetLoader(i),n(this.createKeyLoadError(t,_k.INTERNAL_ABORTED,new Error("key loading aborted"),s))}};r.load(a,l,c)})}resetLoader(e){const{frag:t,keyInfo:i,url:s}=e,r=i.loader;t.keyLoader===r&&(t.keyLoader=null,i.loader=null),delete this.keyUriToKeyInfo[s],r&&r.destroy()}}function oF(e){const{type:t}=e;switch(t){case Rk.AUDIO_TRACK:return Pk.AUDIO;case Rk.SUBTITLE_TRACK:return Pk.SUBTITLE;default:return Pk.MAIN}}function lF(e,t){let i=e.url;return void 0!==i&&0!==i.indexOf("data:")||(i=t.url),i}class cF{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Ck.LEVEL_LOADING,this.onLevelLoading,this),e.on(Ck.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(Ck.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(Ck.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(Ck.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Ck.LEVEL_LOADING,this.onLevelLoading,this),e.off(Ck.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(Ck.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(Ck.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,i=t.pLoader,s=t.loader,r=i||s,n=new r(t);return this.loaders[e.type]=n,n}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:i}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Rk.MANIFEST,url:i,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:i,level:s,pathwayId:r,url:n,deliveryDirectives:a,levelInfo:o}=t;this.load({id:i,level:s,pathwayId:r,responseType:"text",type:Rk.LEVEL,url:n,deliveryDirectives:a,levelOrTrack:o})}onAudioTrackLoading(e,t){const{id:i,groupId:s,url:r,deliveryDirectives:n,track:a}=t;this.load({id:i,groupId:s,level:null,responseType:"text",type:Rk.AUDIO_TRACK,url:r,deliveryDirectives:n,levelOrTrack:a})}onSubtitleTrackLoading(e,t){const{id:i,groupId:s,url:r,deliveryDirectives:n,track:a}=t;this.load({id:i,groupId:s,level:null,responseType:"text",type:Rk.SUBTITLE_TRACK,url:r,deliveryDirectives:n,levelOrTrack:a})}onLevelsUpdated(e,t){const i=this.loaders[Rk.LEVEL];if(i){const e=i.context;e&&!t.levels.some(t=>t===e.levelOrTrack)&&(i.abort(),delete this.loaders[Rk.LEVEL])}}load(e){var t;const i=this.hls.config;let s,r=this.getInternalLoader(e);if(r){const t=this.hls.logger,i=r.context;if(i&&i.levelOrTrack===e.levelOrTrack&&(i.url===e.url||i.deliveryDirectives&&!e.deliveryDirectives))return void(i.url===e.url?t.log(`[playlist-loader]: ignore ${e.url} ongoing request`):t.log(`[playlist-loader]: ignore ${e.url} in favor of ${i.url}`));t.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),r.abort()}if(s=e.type===Rk.MANIFEST?i.manifestLoadPolicy.default:Nk({},i.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),r=this.createInternalLoader(e),xk(null==(t=e.deliveryDirectives)?void 0:t.part)){let t;if(e.type===Rk.LEVEL&&null!==e.level?t=this.hls.levels[e.level].details:e.type===Rk.AUDIO_TRACK&&null!==e.id?t=this.hls.audioTracks[e.id].details:e.type===Rk.SUBTITLE_TRACK&&null!==e.id&&(t=this.hls.subtitleTracks[e.id].details),t){const e=t.partTarget,i=t.targetduration;if(e&&i){const t=1e3*Math.max(3*e,.8*i);s=Nk({},s,{maxTimeToFirstByteMs:Math.min(t,s.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(t,s.maxTimeToFirstByteMs)})}}}const n=s.errorRetry||s.timeoutRetry||{},a={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:n.maxNumRetry||0,retryDelay:n.retryDelayMs||0,maxRetryDelay:n.maxRetryDelayMs||0},o={onSuccess:(e,t,i,s)=>{const r=this.getInternalLoader(i);this.resetInternalLoader(i.type);const n=e.data;0===n.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),ER.isMediaPlaylist(n)||i.type!==Rk.MANIFEST?this.handleTrackOrLevelPlaylist(e,t,i,s||null,r):this.handleMasterPlaylist(e,t,i,s)):this.handleManifestParsingError(e,i,new Error("no EXTM3U delimiter"),s||null,t)},onError:(e,t,i,s)=>{this.handleNetworkError(t,i,!1,e,s)},onTimeout:(e,t,i)=>{this.handleNetworkError(t,i,!0,void 0,e)}};r.load(e,a,o)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:i}=this.hls;(e||i)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,i,s){const r=this.hls,n=e.data,a=lF(e,i),o=ER.parseMasterPlaylist(n,a);if(o.playlistParsingError)return void this.handleManifestParsingError(e,i,o.playlistParsingError,s,t);const{contentSteering:l,levels:c,sessionData:d,sessionKeys:h,startTimeOffset:u,variableList:p}=o;this.variableList=p;const{AUDIO:f=[],SUBTITLES:g,"CLOSED-CAPTIONS":m}=ER.parseMasterPlaylistMedia(n,a,o);if(f.length){const e=f.some(e=>!e.url);e||!c[0].audioCodec||c[0].attrs.AUDIO||(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),f.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new GC({}),bitrate:0,url:""}))}r.trigger(Ck.MANIFEST_LOADED,{levels:c,audioTracks:f,subtitles:g,captions:m,contentSteering:l,url:a,stats:t,networkDetails:s,sessionData:d,sessionKeys:h,startTimeOffset:u,variableList:p})}handleTrackOrLevelPlaylist(e,t,i,s,r){const n=this.hls,{id:a,level:o,type:l}=i,c=lF(e,i),d=xk(o)?o:xk(a)?a:0,h=oF(i),u=ER.parseLevelPlaylist(e.data,c,d,h,0,this.variableList);if(l===Rk.MANIFEST){const e={attrs:new GC({}),bitrate:0,details:u,name:"",url:c};u.requestScheduled=t.loading.start+HR(u,0),n.trigger(Ck.MANIFEST_LOADED,{levels:[e],audioTracks:[],url:c,stats:t,networkDetails:s,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),i.levelDetails=u,this.handlePlaylistLoaded(u,e,t,i,s,r)}handleManifestParsingError(e,t,i,s,r){this.hls.trigger(Ck.ERROR,{type:Ik.NETWORK_ERROR,details:_k.MANIFEST_PARSING_ERROR,fatal:t.type===Rk.MANIFEST,url:e.url,err:i,error:i,reason:i.message,response:e,context:t,networkDetails:s,stats:r})}handleNetworkError(e,t,i=!1,s,r){let n=`A network ${i?"timeout":"error"+(s?" (status "+s.code+")":"")} occurred while loading ${e.type}`;e.type===Rk.LEVEL?n+=`: ${e.level} id: ${e.id}`:e.type!==Rk.AUDIO_TRACK&&e.type!==Rk.SUBTITLE_TRACK||(n+=` id: ${e.id} group-id: "${e.groupId}"`);const a=new Error(n);this.hls.logger.warn(`[playlist-loader]: ${n}`);let o=_k.UNKNOWN,l=!1;const c=this.getInternalLoader(e);switch(e.type){case Rk.MANIFEST:o=i?_k.MANIFEST_LOAD_TIMEOUT:_k.MANIFEST_LOAD_ERROR,l=!0;break;case Rk.LEVEL:o=i?_k.LEVEL_LOAD_TIMEOUT:_k.LEVEL_LOAD_ERROR,l=!1;break;case Rk.AUDIO_TRACK:o=i?_k.AUDIO_TRACK_LOAD_TIMEOUT:_k.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case Rk.SUBTITLE_TRACK:o=i?_k.SUBTITLE_TRACK_LOAD_TIMEOUT:_k.SUBTITLE_LOAD_ERROR,l=!1;break}c&&this.resetInternalLoader(e.type);const d={type:Ik.NETWORK_ERROR,details:o,fatal:l,url:e.url,loader:c,context:e,error:a,networkDetails:t,stats:r};if(s){const i=(null==t?void 0:t.url)||e.url;d.response=Fk({url:i,data:void 0},s)}this.hls.trigger(Ck.ERROR,d)}handlePlaylistLoaded(e,t,i,s,r,n){const a=this.hls,{type:o,level:l,id:c,groupId:d,deliveryDirectives:h}=s,u=lF(t,s),p=oF(s),f="number"===typeof s.level&&p===Pk.MAIN?l:void 0;if(!e.fragments.length){const n=e.playlistParsingError=new Error("No Segments found in Playlist");return void a.trigger(Ck.ERROR,{type:Ik.NETWORK_ERROR,details:_k.LEVEL_EMPTY_ERROR,fatal:!1,url:u,error:n,reason:n.message,response:t,context:s,level:f,parent:p,networkDetails:r,stats:i})}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const g=e.playlistParsingError;if(g){if(this.hls.logger.warn(g),!a.config.ignorePlaylistParsingErrors)return void a.trigger(Ck.ERROR,{type:Ik.NETWORK_ERROR,details:_k.LEVEL_PARSING_ERROR,fatal:!1,url:u,error:g,reason:g.message,response:t,context:s,level:f,parent:p,networkDetails:r,stats:i});e.playlistParsingError=null}switch(e.live&&n&&(n.getCacheAge&&(e.ageHeader=n.getCacheAge()||0),n.getCacheAge&&!isNaN(e.ageHeader)||(e.ageHeader=0)),o){case Rk.MANIFEST:case Rk.LEVEL:a.trigger(Ck.LEVEL_LOADED,{details:e,levelInfo:s.levelOrTrack||a.levels[0],level:f||0,id:c||0,stats:i,networkDetails:r,deliveryDirectives:h,withoutMultiVariant:o===Rk.MANIFEST});break;case Rk.AUDIO_TRACK:a.trigger(Ck.AUDIO_TRACK_LOADED,{details:e,track:s.levelOrTrack,id:c||0,groupId:d||"",stats:i,networkDetails:r,deliveryDirectives:h});break;case Rk.SUBTITLE_TRACK:a.trigger(Ck.SUBTITLE_TRACK_LOADED,{details:e,track:s.levelOrTrack,id:c||0,groupId:d||"",stats:i,networkDetails:r,deliveryDirectives:h});break}}}class dF{static get version(){return hP}static isMSESupported(){return tF()}static isSupported(){return iF()}static getMediaSource(){return Xk()}static get Events(){return Ck}static get MetadataSchema(){return QP}static get ErrorTypes(){return Ik}static get ErrorDetails(){return _k}static get DefaultConfig(){return dF.defaultConfig?dF.defaultConfig:MB}static set DefaultConfig(e){dF.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new dP,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=Kk(e.debug||!1,"Hls instance",e.assetPlayerId),i=this.config=NB(dF.DefaultConfig,e,t);this.userConfig=e,i.progressive&&FB(i,t);const{abrController:s,bufferController:r,capLevelController:n,errorController:a,fpsController:o}=i,l=new a(this),c=this.abrController=new s(this),d=new hC(this),h=i.interstitialsController,u=h?this.interstitialsController=new h(this,dF):null,p=this.bufferController=new r(this,d),f=this.capLevelController=new n(this),g=new o(this),m=new cF(this),v=i.contentSteeringController,y=v?new v(this):null,b=this.levelController=new ZB(this,y),E=new XB(this),w=new aF(this.config),A=this.streamController=new nF(this,d,w),T=this.gapController=new jB(this,d);f.setStreamController(A),g.setStreamController(A);const S=[m,b,A];u&&S.splice(1,0,u),y&&S.splice(1,0,y),this.networkControllers=S;const x=[c,p,T,f,g,E,d];this.audioTrackController=this.createController(i.audioTrackController,S);const L=i.audioStreamController;L&&S.push(this.audioStreamController=new L(this,d,w)),this.subtitleTrackController=this.createController(i.subtitleTrackController,S);const k=i.subtitleStreamController;k&&S.push(this.subtititleStreamController=new k(this,d,w)),this.createController(i.timelineController,x),w.emeController=this.emeController=this.createController(i.emeController,x),this.cmcdController=this.createController(i.cmcdController,x),this.latencyController=this.createController(QB,x),this.coreComponents=x,S.push(l);const I=l.onErrorOut;"function"===typeof I&&this.on(Ck.ERROR,I,l),this.on(Ck.MANIFEST_LOADED,m.onManifestLoaded,m)}createController(e,t){if(e){const i=new e(this);return t&&t.push(i),i}return null}on(e,t,i=this){this._emitter.on(e,t,i)}once(e,t,i=this){this._emitter.once(e,t,i)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,i=this,s){this._emitter.off(e,t,i,s)}listeners(e){return this._emitter.listeners(e)}emit(e,t,i){return this._emitter.emit(e,t,i)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(i){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+i.message+'". Here is a stacktrace:',i),!this.triggeringException){this.triggeringException=!0;const t=e===Ck.ERROR;this.trigger(Ck.ERROR,{type:Ik.OTHER_ERROR,details:_k.INTERNAL_EXCEPTION,fatal:t,event:e,error:i}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(Ck.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(e=>e.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(e=>e.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const t=new Error(`attachMedia failed: invalid argument (${e})`);return void this.trigger(Ck.ERROR,{type:Ik.OTHER_ERROR,details:_k.ATTACH_MEDIA_ERROR,fatal:!0,error:t})}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,i=t?e.media:e,s=t?e:{media:i};this._media=i,this.trigger(Ck.MEDIA_ATTACHING,s)}detachMedia(){this.logger.log("detachMedia"),this.trigger(Ck.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(Ck.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,i=this._url,s=this._url=aI.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${s}`),t&&i&&(i!==s||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(Ck.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let i=0;i<this.networkControllers.length;i++)if(this.networkControllers[i].startLoad(e,t),!this.started||!this.networkControllers)break}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length;e++)if(this.networkControllers[e].stopLoad(),this.started||!this.networkControllers)break}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[Pk.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[Pk.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[Pk.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=null==e?void 0:e.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=QO()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return-1===e&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){w_(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return-1===this.levelController.manualLevel}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const i=e.length;for(let s=0;s<i;s++)if(e[s].maxBitrate>=t)return s;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:i}=this;let s;if(s=-1===t&&null!=e&&e.length?e.length-1:t,i)for(let r=s;r--;){const t=e[r].attrs["HDCP-LEVEL"];if(t&&t<=i)return r}return s}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return(null==(t=this.audioTrackController)?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return(null==(t=this.subtitleTrackController)?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return!!e&&e.subtitleDisplay}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!(null==(e=this.bufferController)||!e.bufferedToEnd)}get interstitialsManager(){var e;return(null==(e=this.interstitialsController)?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){const i=O_(t);return f_(e,i,navigator.mediaCapabilities)}}dF.defaultConfig=void 0;const hF=Object.freeze(Object.defineProperty({__proto__:null,AbrController:Y_,AttrList:GC,AudioStreamController:fM,AudioTrackController:bM,BasePlaylistController:gM,BaseSegment:cI,BaseStreamController:iP,BufferController:SM,CMCDController:DO,CapLevelController:IM,ChunkMetadata:CC,ContentSteeringController:OO,Cues:AB,DateRange:VC,EMEController:UO,ErrorActionFlags:oC,ErrorController:lC,ErrorDetails:_k,ErrorTypes:Ik,Events:Ck,FPSController:HO,FetchLoader:xB,Fragment:hI,Hls:dF,HlsSkip:S_,HlsUrlParameters:L_,KeySystemFormats:sR,KeySystems:iR,Level:k_,LevelDetails:WC,LevelKey:pR,LoadStats:oI,M3U8Parser:ER,MetadataSchema:QP,NetworkErrorAction:aC,Part:uI,PlaylistLevelType:Pk,SubtitleStreamController:mN,SubtitleTrackController:XO,TimelineController:mB,XhrLoader:PB,default:dF,fetchSupported:TB,getMediaSource:Xk,isMSESupported:tF,isSupported:iF,requestMediaKeySystemAccess:oR},Symbol.toStringTag,{value:"Module"})),uF=Gr({__name:"IconFont",props:{name:{type:String,default:""},size:{type:[String,Number],default:""},width:{type:[String,Number],default:""},height:{type:[String,Number],default:""},classPrefix:{type:String,default:"nut-icon"},fontClassName:{type:String,default:"nutui-iconfont"},color:{type:String,default:""},tag:{type:String,default:"i"}},emits:["click"],setup(e,{emit:t}){var i;const s=e,r="nut-icon",n=e=>{t("click",e)},a=An();Tn();const o=()=>!!s.name&&-1!==s.name.indexOf("/"),l=e=>{if(e)return isNaN(Number(e))?String(e):e+"px"},c=o();let d=Uo(c?"img":s.tag,{class:c?`${r}__img`:`${s.fontClassName} ${r} ${s.classPrefix}-${s.name}`,style:{color:s.color,fontSize:l(s.size),width:l(s.size),height:l(s.size)},onClick:n,src:c?s.name:""},null==(i=a.default)?void 0:i.call(a));const h=()=>d;return(e,t)=>(Ka(),eo(h))}}),pF=Gr({__name:"Close",props:{name:{type:String,default:"close"},size:{type:[String,Number],default:""},width:{type:[String,Number],default:""},height:{type:[String,Number],default:""},classPrefix:{type:String,default:"nut-icon"},fontClassName:{type:String,default:"nutui-iconfont"},color:{type:String,default:""},tag:{type:String,default:"i"}},emits:["click"],setup(e,{emit:t}){const i=e,s="nut-icon",r=e=>{t("click",e)},n=An();Tn();const a=e=>{if(e)return isNaN(Number(e))?String(e):e+"px"},o=()=>{var e;return Uo(i.tag,{class:i.fontClassName+" "+s+" "+i.classPrefix+"-"+i.name,style:{color:i.color,fontSize:a(i.size),width:a(i.size),height:a(i.size)},onClick:r},null==(e=n.default)?void 0:e.call(n))};return(e,t)=>(Ka(),eo(o))}}),fF=Gr({__name:"DownArrow",props:{name:{type:String,default:"down-arrow"},size:{type:[String,Number],default:""},width:{type:[String,Number],default:""},height:{type:[String,Number],default:""},classPrefix:{type:String,default:"nut-icon"},fontClassName:{type:String,default:"nutui-iconfont"},color:{type:String,default:""},tag:{type:String,default:"i"}},emits:["click"],setup(e,{emit:t}){const i=e,s="nut-icon",r=e=>{t("click",e)},n=An();Tn();const a=e=>{if(e)return isNaN(Number(e))?String(e):e+"px"},o=()=>{var e;return Uo(i.tag,{class:i.fontClassName+" "+s+" "+i.classPrefix+"-"+i.name,style:{color:i.color,fontSize:a(i.size),width:a(i.size),height:a(i.size)},onClick:r},null==(e=n.default)?void 0:e.call(n))};return(e,t)=>(Ka(),eo(o))}}),gF=Gr({__name:"Left",props:{name:{type:String,default:"left"},size:{type:[String,Number],default:""},width:{type:[String,Number],default:""},height:{type:[String,Number],default:""},classPrefix:{type:String,default:"nut-icon"},fontClassName:{type:String,default:"nutui-iconfont"},color:{type:String,default:""},tag:{type:String,default:"i"}},emits:["click"],setup(e,{emit:t}){const i=e,s="nut-icon",r=e=>{t("click",e)},n=An();Tn();const a=e=>{if(e)return isNaN(Number(e))?String(e):e+"px"},o=()=>{var e;return Uo(i.tag,{class:i.fontClassName+" "+s+" "+i.classPrefix+"-"+i.name,style:{color:i.color,fontSize:a(i.size),width:a(i.size),height:a(i.size)},onClick:r},null==(e=n.default)?void 0:e.call(n))};return(e,t)=>(Ka(),eo(o))}}),mF=Gr({__name:"Loading",props:{name:{type:String,default:"loading"},size:{type:[String,Number],default:""},width:{type:[String,Number],default:""},height:{type:[String,Number],default:""},classPrefix:{type:String,default:"nut-icon"},fontClassName:{type:String,default:"nutui-iconfont"},color:{type:String,default:""},tag:{type:String,default:"i"}},emits:["click"],setup(e,{emit:t}){const i=e,s="nut-icon",r=e=>{t("click",e)},n=An();Tn();const a=e=>{if(e)return isNaN(Number(e))?String(e):e+"px"},o=()=>{var e;return Uo(i.tag,{class:i.fontClassName+" "+s+" "+i.classPrefix+"-"+i.name,style:{color:i.color,fontSize:a(i.size),width:a(i.size),height:a(i.size)},onClick:r},null==(e=n.default)?void 0:e.call(n))};return(e,t)=>(Ka(),eo(o))}}),vF=Gr({__name:"Loading1",props:{name:{type:String,default:"loading1"},size:{type:[String,Number],default:""},width:{type:[String,Number],default:""},height:{type:[String,Number],default:""},classPrefix:{type:String,default:"nut-icon"},fontClassName:{type:String,default:"nutui-iconfont"},color:{type:String,default:""},tag:{type:String,default:"i"}},emits:["click"],setup(e,{emit:t}){const i=e,s="nut-icon",r=e=>{t("click",e)},n=An();Tn();const a=e=>{if(e)return isNaN(Number(e))?String(e):e+"px"},o=()=>{var e;return Uo(i.tag,{class:i.fontClassName+" "+s+" "+i.classPrefix+"-"+i.name,style:{color:i.color,fontSize:a(i.size),width:a(i.size),height:a(i.size)},onClick:r},null==(e=n.default)?void 0:e.call(n))};return(e,t)=>(Ka(),eo(o))}}),yF=Gr({__name:"Right",props:{name:{type:String,default:"right"},size:{type:[String,Number],default:""},width:{type:[String,Number],default:""},height:{type:[String,Number],default:""},classPrefix:{type:String,default:"nut-icon"},fontClassName:{type:String,default:"nutui-iconfont"},color:{type:String,default:""},tag:{type:String,default:"i"}},emits:["click"],setup(e,{emit:t}){const i=e,s="nut-icon",r=e=>{t("click",e)},n=An();Tn();const a=e=>{if(e)return isNaN(Number(e))?String(e):e+"px"},o=()=>{var e;return Uo(i.tag,{class:i.fontClassName+" "+s+" "+i.classPrefix+"-"+i.name,style:{color:i.color,fontSize:a(i.size),width:a(i.size),height:a(i.size)},onClick:r},null==(e=n.default)?void 0:e.call(n))};return(e,t)=>(Ka(),eo(o))}}),bF=e=>{const t=e;return t.install=e=>{t.name&&e.component(t.name,t)},t},EF=e=>{if(void 0!==e)return isNaN(Number(e))?String(e):`${e}px`};var wF=Object.defineProperty,AF=Object.defineProperties,TF=Object.getOwnPropertyDescriptors,SF=Object.getOwnPropertySymbols,xF=Object.prototype.hasOwnProperty,LF=Object.prototype.propertyIsEnumerable,kF=(e,t,i)=>t in e?wF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,IF=(e,t)=>{for(var i in t||(t={}))xF.call(t,i)&&kF(e,i,t[i]);if(SF)for(var i of SF(t))LF.call(t,i)&&kF(e,i,t[i]);return e},_F=(e,t)=>AF(e,TF(t));const CF={key:0,class:"nut-cell__icon"},RF={key:1,class:"nut-cell__title"},PF={class:"title"},DF={class:"nut-cell__title-desc"},MF=Gr(_F(IF({},{name:"NutCell"}),{__name:"cell.taro",props:{title:{default:""},subTitle:{default:""},desc:{default:""},descTextAlign:{default:"right"},isLink:{type:Boolean,default:!1},roundRadius:{default:""},center:{type:Boolean,default:!1},size:{default:"normal"}},emits:["click"],setup(e,{emit:t}){const i=e,s=t,r=$o(()=>{const e="nut-cell";return{[e]:!0,[`${e}--clickable`]:i.isLink,[`${e}--center`]:i.center,[`${e}--large`]:"large"===i.size}}),n=$o(()=>({borderRadius:EF(i.roundRadius)})),a=$o(()=>({textAlign:i.descTextAlign})),o=e=>{s("click",e)};return(e,t)=>(Ka(),Ja("view",{class:Qt(r.value),style:Yt(n.value),onClick:o},[mn(e.$slots,"default",{},()=>[e.$slots.icon?(Ka(),Ja("view",CF,[mn(e.$slots,"icon")])):uo("",!0),ho(),e.title||e.subTitle||e.$slots.title?(Ka(),Ja("view",RF,[e.subTitle?(Ka(),Ja(Ha,{key:0},[mn(e.$slots,"title",{},()=>[no("view",PF,ii(e.title),1)]),ho(),no("view",DF,ii(e.subTitle),1)],64)):mn(e.$slots,"title",{key:1},()=>[ho(ii(e.title),1)])])):uo("",!0),ho(),e.desc||e.$slots.desc?(Ka(),Ja("view",{key:2,class:Qt(["nut-cell__value",{"nut-cell__value--alone":!e.title&&!e.subTitle&&!e.$slots.title}]),style:Yt(a.value)},[mn(e.$slots,"desc",{},()=>[ho(ii(e.desc),1)])],6)):uo("",!0),ho(),mn(e.$slots,"link",{},()=>[e.isLink?(Ka(),eo(Ns(yF),{key:0,class:"nut-cell__link"})):uo("",!0)])])],6))}}));bF(MF);var OF=Object.defineProperty,NF=Object.defineProperties,BF=Object.getOwnPropertyDescriptors,FF=Object.getOwnPropertySymbols,$F=Object.prototype.hasOwnProperty,UF=Object.prototype.propertyIsEnumerable,GF=(e,t,i)=>t in e?OF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,HF=(e,t)=>{for(var i in t||(t={}))$F.call(t,i)&&GF(e,i,t[i]);if(FF)for(var i of FF(t))UF.call(t,i)&&GF(e,i,t[i]);return e},jF=(e,t)=>NF(e,BF(t));const zF={class:"nut-cell-group"},VF={key:1,class:"nut-cell-group__title"},YF={key:3,class:"nut-cell-group__desc"},WF={class:"nut-cell-group__wrap"},KF=Gr(jF(HF({},{name:"NutCellGroup"}),{__name:"cell-group.taro",props:{title:{default:""},desc:{default:""}},setup(e){return(e,t)=>(Ka(),Ja("view",zF,[e.$slots.title?mn(e.$slots,"title",{key:0}):e.title?(Ka(),Ja("view",VF,ii(e.title),1)):uo("",!0),ho(),e.$slots.desc?mn(e.$slots,"desc",{key:2}):e.desc?(Ka(),Ja("view",YF,ii(e.desc),1)):uo("",!0),ho(),no("view",WF,[mn(e.$slots,"default")])]))}}));bF(KF);var qF=Object.defineProperty,XF=Object.defineProperties,QF=Object.getOwnPropertyDescriptors,ZF=Object.getOwnPropertySymbols,JF=Object.prototype.hasOwnProperty,e$=Object.prototype.propertyIsEnumerable,t$=(e,t,i)=>t in e?qF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,i$=(e,t)=>{for(var i in t||(t={}))JF.call(t,i)&&t$(e,i,t[i]);if(ZF)for(var i of ZF(t))e$.call(t,i)&&t$(e,i,t[i]);return e},s$=(e,t)=>XF(e,QF(t));const r$=["catch-move"],n$=Gr(s$(i$({},{name:"NutOverlay"}),{__name:"overlay.taro",props:{visible:{type:Boolean,default:!1},zIndex:{default:2e3},duration:{default:.3},lockScroll:{type:Boolean,default:!0},overlayClass:{default:""},overlayStyle:{},closeOnClickOverlay:{type:Boolean,default:!0}},emits:["click","update:visible"],setup(e,{emit:t}){const i=e,s=t,r=$o(()=>{const e="nut-overlay";return{[e]:!0,[i.overlayClass]:!0}}),n=$o(()=>i$({transitionDuration:`${i.duration}s`,zIndex:i.zIndex},i.overlayStyle)),a=e=>{s("click",e),i.closeOnClickOverlay&&s("update:visible",!1)};return(e,t)=>(Ka(),eo(il,{name:"overlay-fade"},{default:wr(()=>[Ar(no("view",{class:Qt(r.value),style:Yt(n.value),"catch-move":e.lockScroll,onClick:a},[mn(e.$slots,"default")],14,r$),[[El,e.visible]])]),_:3}))}}));bF(n$);const a$=e=>e.replace(/-./g,e=>e[1].toUpperCase());function o$(e){const t="nut-"+e;return{componentName:t,create:function(t){return t.name="Nut"+a$("-"+e),t.install=e=>{e.component(t.name,t)},Gr(t)}}}const l$=(e,t)=>{const i=e.__vccOpts||e;for(const[s,r]of t)i[s]=r;return i};var c$=Object.defineProperty,d$=Object.defineProperties,h$=Object.getOwnPropertyDescriptors,u$=Object.getOwnPropertySymbols,p$=Object.prototype.hasOwnProperty,f$=Object.prototype.propertyIsEnumerable,g$=(e,t,i)=>t in e?c$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,m$=(e,t)=>{for(var i in t||(t={}))p$.call(t,i)&&g$(e,i,t[i]);if(u$)for(var i of u$(t))f$.call(t,i)&&g$(e,i,t[i]);return e},v$=(e,t)=>d$(e,h$(t));const y$={visible:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:2e3},duration:{type:[Number,String],default:.3},lockScroll:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0},position:{type:String,default:"center"},transition:{type:String,default:""},style:{type:Object,default:()=>({})},popClass:{type:String,default:""},closeable:{type:Boolean,default:!1},closeIconPosition:{type:String,default:"top-right"},destroyOnClose:{type:Boolean,default:!0},teleport:{type:[String,Element],default:"body"},overlay:{type:Boolean,default:!0},round:{type:Boolean,default:!1},teleportDisable:{type:Boolean,default:!1},safeAreaInsetBottom:{type:Boolean,default:!1},overlayClass:{type:String,default:""},overlayStyle:{type:Object,default:()=>({})}},{componentName:b$,create:E$}=o$("popup"),w$=2e3;let A$=w$;const T$=E$({components:{NutOverlay:n$,Close:pF},props:y$,emits:["clickPop","clickCloseIcon","open","close","opened","closed","clickOverlay","update:visible"],setup(e,{emit:t}){let i;const s=Es({zIndex:e.zIndex,showSlot:!0,closed:e.closeable}),r=$o(()=>{const t=b$;return{[t]:!0,["round"]:e.round,[`nut-popup--${e.position}`]:!0,[`nut-popup--${e.position}--safebottom`]:"bottom"===e.position&&e.safeAreaInsetBottom,[e.popClass]:!0}}),n=$o(()=>m$({zIndex:s.zIndex,transitionDuration:`${e.duration}s`},e.style)),a=$o(()=>e.transition?e.transition:`nut-popup-slide-${e.position}`),o=()=>{i||(i=!0,e.zIndex!==w$&&(A$=Number(e.zIndex)),t("update:visible",!0),s.zIndex=++A$,e.destroyOnClose&&(s.showSlot=!0),t("open"))},l=()=>{i&&(i=!1,t("update:visible",!1),t("close"),e.destroyOnClose&&setTimeout(()=>{s.showSlot=!1},1e3*+e.duration))},c=e=>{t("clickPop",e)},d=e=>{e.stopPropagation(),t("clickCloseIcon",e),l()},h=i=>{t("clickOverlay",i),e.closeOnClickOverlay&&l()},u=e=>{t("opened",e)},p=e=>{t("closed",e)};return La(()=>e.visible,()=>{e.visible&&!i&&o(),!e.visible&&i&&l()}),xa(()=>{s.closed=e.closeable}),v$(m$({},$s(s)),{popStyle:n,transitionName:a,classes:r,onClick:c,onClickCloseIcon:d,onClickOverlay:h,onOpened:u,onClosed:p})}});function S$(e,t,i,s,r,n){const a=dn("nut-overlay"),o=dn("Close");return Ka(),Ja("view",null,[e.overlay?(Ka(),eo(a,mo({key:0,visible:e.visible,"close-on-click-overlay":e.closeOnClickOverlay,"z-index":e.zIndex,"lock-scroll":e.lockScroll,duration:e.duration,"overlay-class":e.overlayClass,"overlay-style":e.overlayStyle},e.$attrs,{onClick:e.onClickOverlay}),null,16,["visible","close-on-click-overlay","z-index","lock-scroll","duration","overlay-class","overlay-style","onClick"])):uo("",!0),ho(),ao(il,{name:e.transitionName,onAfterEnter:e.onOpened,onAfterLeave:e.onClosed},{default:wr(()=>[Ar(no("view",{class:Qt(e.classes),style:Yt(e.popStyle),onClick:t[1]||(t[1]=(...t)=>e.onClick&&e.onClick(...t))},[e.showSlot?mn(e.$slots,"default",{key:0}):uo("",!0),ho(),e.closed?(Ka(),Ja("view",{key:1,class:Qt(["nut-popup__close-icon","nut-popup__close-icon--"+e.closeIconPosition]),onClick:t[0]||(t[0]=(...t)=>e.onClickCloseIcon&&e.onClickCloseIcon(...t))},[mn(e.$slots,"close-icon",{},()=>[ao(o,{height:"12px"})])],2)):uo("",!0)],6),[[El,e.visible]])]),_:3},8,["name","onAfterEnter","onAfterLeave"])])}const x$=l$(T$,[["render",S$]]);function L$(e){return"undefined"!==typeof window&&e===window}const k$=e=>{let t=Ns(e);return new Promise((e,i)=>{if(US.getEnv()===US.ENV_TYPE.WEB){if(t&&t.$el&&(t=t.$el),L$(t)){const i=t.innerWidth,s=t.innerHeight;e({top:0,left:0,right:i,bottom:s,width:i,height:s})}t&&t.getBoundingClientRect&&e(t.getBoundingClientRect()),i()}else{const s=US.createSelectorQuery(),r=null==t?void 0:t.id;r?s.select(`#${r}`).boundingClientRect().exec(function(t){t[0]?e(t[0]):i()}):i()}})},I$=e=>{const t=Wn(e,null);if(t){const e=Ao(),{link:i,unlink:s,internalChildren:r}=t;i(e),rn(()=>{s(e)});const n=$o(()=>r.indexOf(e));return{parent:t,index:n}}return{parent:t,index:$o(()=>-1)}};var _$=Object.defineProperty,C$=Object.defineProperties,R$=Object.getOwnPropertyDescriptors,P$=Object.getOwnPropertySymbols,D$=Object.prototype.hasOwnProperty,M$=Object.prototype.propertyIsEnumerable,O$=(e,t,i)=>t in e?_$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,N$=(e,t)=>{for(var i in t||(t={}))D$.call(t,i)&&O$(e,i,t[i]);if(P$)for(var i of P$(t))M$.call(t,i)&&O$(e,i,t[i]);return e},B$=(e,t)=>C$(e,R$(t));const F$=["id"],$$={key:1,class:"nut-navbar__text"},U$={class:"nut-navbar__title"},G$={key:0,class:"nut-navbar__text"},H$=Gr(B$(N$({},{name:"NutNavbar"}),{__name:"navbar.taro",props:{leftShow:{type:Boolean,default:!1},title:{default:""},titleIcon:{type:Boolean,default:!1},leftText:{default:""},desc:{default:""},fixed:{type:Boolean,default:!1},safeAreaInsetTop:{type:Boolean,default:!1},border:{type:Boolean,default:!1},placeholder:{type:Boolean,default:!0},zIndex:{default:10}},emits:["clickBack","clickTitle","clickIcon","clickRight","onClickBack","onClickTitle","onClickIcon","onClickRight"],setup(e,{emit:t}){const i=e,s=t,r=Math.random().toString(36).slice(-8),n=Ds("auto"),a=Ds(null),o=$o(()=>{const e="nut-navbar";return{[e]:!0,[`${e}--border`]:i.border,[`${e}--fixed`]:i.fixed,[`${e}--safe-area-inset-top`]:i.safeAreaInsetTop}}),l=$o(()=>i.fixed&&i.placeholder?{height:n.value}:{}),c=()=>{k$(a).then(e=>{n.value=`${e.height}px`},()=>{})};Jr(()=>{i.fixed&&i.placeholder&&setTimeout(()=>{c()},100)});const d=()=>{s("clickBack"),s("onClickBack")},h=()=>{s("clickTitle"),s("onClickTitle")},u=()=>{s("clickIcon"),s("onClickIcon")},p=()=>{s("clickRight"),s("onClickRight")};return(e,t)=>(Ka(),Ja("view",{class:"nut-navbar--placeholder",style:Yt(l.value)},[no("view",{id:"navbarRef-"+Ns(r),ref_key:"navbarRef",ref:a,class:Qt(o.value),style:Yt({zIndex:e.zIndex})},[no("view",{class:"nut-navbar__left",onClick:d},[e.leftShow?mn(e.$slots,"left-show",{key:0},()=>[ao(Ns(gF),{height:"12px",color:"#979797"})]):uo("",!0),ho(),e.leftText?(Ka(),Ja("view",$$,ii(e.leftText),1)):uo("",!0),ho(),mn(e.$slots,"left")]),ho(),no("view",U$,[e.title?(Ka(),Ja("view",{key:0,class:"title",onClick:h},ii(e.title),1)):uo("",!0),ho(),e.titleIcon?(Ka(),Ja("view",{key:1,class:"icon",onClick:u},[mn(e.$slots,"title-icon",{onClick:u})])):uo("",!0),ho(),mn(e.$slots,"content")]),ho(),no("view",{class:"nut-navbar__right",onClick:p},[e.desc?(Ka(),Ja("view",G$,ii(e.desc),1)):uo("",!0),ho(),mn(e.$slots,"right")])],14,F$)],4))}}));bF(H$);class j${}var z$=Object.defineProperty,V$=(e,t,i)=>t in e?z$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Y$=(e,t,i)=>V$(e,"symbol"!==typeof t?t+"":t,i);let W$=class extends j${constructor(){super(...arguments),Y$(this,"save","\u4fdd\u5b58"),Y$(this,"confirm","\u786e\u8ba4"),Y$(this,"cancel","\u53d6\u6d88"),Y$(this,"done","\u5b8c\u6210"),Y$(this,"noData","\u6682\u65e0\u6570\u636e"),Y$(this,"placeholder","\u8bf7\u8f93\u5165"),Y$(this,"select","\u8bf7\u9009\u62e9"),Y$(this,"video",{errorTip:"\u89c6\u9891\u52a0\u8f7d\u5931\u8d25",clickRetry:"\u70b9\u51fb\u91cd\u8bd5"}),Y$(this,"fixednav",{activeText:"\u6536\u8d77\u5bfc\u822a",unActiveText:"\u5feb\u901f\u5bfc\u822a"}),Y$(this,"pagination",{prev:"\u4e0a\u4e00\u9875",next:"\u4e0b\u4e00\u9875"}),Y$(this,"calendaritem",{weekdays:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],end:"\u7ed3\u675f",start:"\u5f00\u59cb",title:"\u65e5\u671f\u9009\u62e9",monthTitle:(e,t)=>`${e}\u5e74${t}\u6708`,today:"\u4eca\u5929"}),Y$(this,"calendarcard",{weekdays:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],end:"\u7ed3\u675f",start:"\u5f00\u59cb",title:"\u65e5\u671f\u9009\u62e9",monthTitle:(e,t)=>`${e}\u5e74${t}\u6708`,today:"\u4eca\u5929"}),Y$(this,"shortpassword",{title:"\u8bf7\u8f93\u5165\u5bc6\u7801",desc:"\u60a8\u4f7f\u7528\u4e86\u865a\u62df\u8d44\u4ea7\uff0c\u8bf7\u8fdb\u884c\u9a8c\u8bc1",tips:"\u5fd8\u8bb0\u5bc6\u7801"}),Y$(this,"uploader",{ready:"\u51c6\u5907\u5b8c\u6210",readyUpload:"\u51c6\u5907\u4e0a\u4f20",waitingUpload:"\u7b49\u5f85\u4e0a\u4f20",uploading:"\u4e0a\u4f20\u4e2d",success:"\u4e0a\u4f20\u6210\u529f",error:"\u4e0a\u4f20\u5931\u8d25"}),Y$(this,"countdown",{day:"\u5929",hour:"\u65f6",minute:"\u5206",second:"\u79d2"}),Y$(this,"address",{selectRegion:"\u8bf7\u9009\u62e9\u6240\u5728\u5730\u533a",deliveryTo:"\u914d\u9001\u81f3",chooseAnotherAddress:"\u9009\u62e9\u5176\u4ed6\u5730\u5740"}),Y$(this,"signature",{reSign:"\u91cd\u7b7e",unSupportTpl:"\u5bf9\u4e0d\u8d77\uff0c\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301Canvas\uff0c\u65e0\u6cd5\u4f7f\u7528\u672c\u63a7\u4ef6\uff01"}),Y$(this,"ecard",{chooseText:"\u8bf7\u9009\u62e9\u7535\u5b50\u5361\u9762\u503c",otherValueText:"\u5176\u4ed6\u9762\u503c",placeholder:"\u8bf7\u8f93\u51651-5000\u6574\u6570"}),Y$(this,"timeselect",{pickupTime:"\u53d6\u4ef6\u65f6\u95f4"}),Y$(this,"sku",{buyNow:"\u7acb\u5373\u8d2d\u4e70",buyNumber:"\u8d2d\u4e70\u6570\u91cf",addToCart:"\u52a0\u5165\u8d2d\u7269\u8f66"}),Y$(this,"skuheader",{skuId:"\u5546\u54c1\u7f16\u53f7"}),Y$(this,"addresslist",{addAddress:"\u65b0\u5efa\u5730\u5740",default:"\u9ed8\u8ba4"}),Y$(this,"comment",{complaintsText:"\u6211\u8981\u6295\u8bc9",additionalReview:e=>`\u8d2d\u4e70${e}\u5929\u540e\u8ffd\u8bc4`,additionalImages:e=>`${e}\u5f20\u8ffd\u8bc4\u56fe\u7247`}),Y$(this,"infiniteloading",{loading:"\u52a0\u8f7d\u4e2d...",pullTxt:"\u677e\u5f00\u5237\u65b0",loadMoreTxt:"\u54ce\u5440\uff0c\u8fd9\u91cc\u662f\u5e95\u90e8\u4e86\u5566"}),Y$(this,"datepicker",{year:"\u5e74",month:"\u6708",day:"\u65e5",hour:"\u65f6",min:"\u5206",seconds:"\u79d2"}),Y$(this,"audiooperate",{back:"\u5012\u9000",start:"\u5f00\u59cb",pause:"\u6682\u505c",forward:"\u5feb\u8fdb",mute:"\u9759\u97f3"}),Y$(this,"pullrefresh",{pulling:"\u4e0b\u62c9\u5237\u65b0",loosing:"\u91ca\u653e\u5237\u65b0",loading:"\u52a0\u8f7d\u4e2d...",complete:"\u5237\u65b0\u6210\u529f"})}};var K$=Object.defineProperty,q$=(e,t,i)=>t in e?K$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,X$=(e,t,i)=>q$(e,"symbol"!==typeof t?t+"":t,i);class Q$ extends j${constructor(){super(...arguments),X$(this,"save","Save"),X$(this,"confirm","Confirm"),X$(this,"cancel","Cancel"),X$(this,"done","Done"),X$(this,"noData","No Data"),X$(this,"placeholder","Placeholder"),X$(this,"select","Select"),X$(this,"video",{errorTip:"Error Tip",clickRetry:"Click Retry"}),X$(this,"fixednav",{activeText:"Close Nav",unActiveText:"Open Nav"}),X$(this,"pagination",{prev:"Previous",next:"Next"}),X$(this,"calendaritem",{weekdays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],end:"End",start:"Start",title:"Calendar",monthTitle:(e,t)=>`${e}/${t}`,today:"Today"}),X$(this,"calendarcard",{weekdays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],end:"End",start:"Start",title:"Calendar",monthTitle:(e,t)=>`${e}/${t}`,today:"Today"}),X$(this,"shortpassword",{title:"Please input a password",desc:"Verify",tips:"Forget password"}),X$(this,"uploader",{ready:"Ready",readyUpload:"Ready to upload",waitingUpload:"Waiting for upload",uploading:"Uploading",success:"Upload successful",error:"Upload failed"}),X$(this,"countdown",{day:" Day ",hour:" Hour ",minute:" Minute ",second:" Second "}),X$(this,"address",{selectRegion:"Select Region",deliveryTo:"Delivery To",chooseAnotherAddress:"Choose Another Address"}),X$(this,"signature",{reSign:"Re Sign",unSupportTpl:"Sorry, the current browser doesn't support canvas, so we can't use this control!"}),X$(this,"ecard",{chooseText:"Select",otherValueText:"Other Value",placeholder:"Placeholder"}),X$(this,"timeselect",{pickupTime:"Pickup Time"}),X$(this,"sku",{buyNow:"Buy Now",buyNumber:"Buy Number",addToCart:"Add to Cart"}),X$(this,"skuheader",{skuId:"Sku Number"}),X$(this,"addresslist",{addAddress:"Add New Address",default:"default"}),X$(this,"comment",{complaintsText:"I have a complaint",additionalReview:e=>`Review after ${e} days of purchase`,additionalImages:e=>`There are ${e} follow-up comments`}),X$(this,"infiniteloading",{loading:"Loading...",pullTxt:"Loose to refresh",loadMoreTxt:"Oops, this is the bottom"}),X$(this,"datepicker",{year:"Year",month:"Month",day:"Day",hour:"Hour",min:"Minute",seconds:"Second"}),X$(this,"audiooperate",{back:"Back",start:"Start",pause:"Pause",forward:"Forward",mute:"Mute"}),X$(this,"pullrefresh",{pulling:"Pull to refresh...",loosing:"Loose to refresh...",loading:"Loading...",complete:"Refresh successfully"})}}var Z$=Object.defineProperty,J$=(e,t,i)=>t in e?Z$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,eU=(e,t,i)=>J$(e,"symbol"!==typeof t?t+"":t,i);const tU=e=>null!==e&&"object"===typeof e,iU=(e,t)=>(Object.keys(t).forEach(i=>{const s=e[i],r=t[i];tU(s)&&tU(r)?iU(s,r):e[i]=r}),e),sU=Es({"zh-CN":new W$,"en-US":new Q$});class rU{static languages(){return sU[this.currentLang.value]}static use(e,t){t&&(sU[e]=new t),this.currentLang.value=e}static merge(e,t){t&&(sU[e]?iU(sU[e],t):this.use(e,t))}}eU(rU,"currentLang",Ds("zh-CN"));const nU=e=>"function"===typeof e,aU=(e,t)=>{try{return t.split(".").reduce((e,t)=>e[t],e)}catch(i){return""}},oU=(e="")=>(t,...i)=>{e=e.toLocaleLowerCase();const s=rU.languages();let r=t;e&&e.startsWith("nut")&&(r=`${e.slice(3)}.${t}`);const n=aU(s,r)||aU(s,t);return nU(n)?n(...i):n},lU=(e,t)=>e?Uo(e,t):"",cU=Symbol("nut-form-disabled"),dU=e=>{const{parent:t}=I$(cU);return $o(()=>{var i;return e.value||(null==(i=null==t?void 0:t.props)?void 0:i.disabled)||!1})};var hU=Object.defineProperty,uU=Object.defineProperties,pU=Object.getOwnPropertyDescriptors,fU=Object.getOwnPropertySymbols,gU=Object.prototype.hasOwnProperty,mU=Object.prototype.propertyIsEnumerable,vU=(e,t,i)=>t in e?hU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,yU=(e,t)=>{for(var i in t||(t={}))gU.call(t,i)&&vU(e,i,t[i]);if(fU)for(var i of fU(t))mU.call(t,i)&&vU(e,i,t[i]);return e},bU=(e,t)=>uU(e,pU(t));const{create:EU}=o$("action-sheet"),wU=EU({components:{NutPopup:x$,Loading:mF},props:bU(yU({},y$),{cancelTxt:{type:String,default:""},optionTag:{type:String,default:"name"},optionSubTag:{type:String,default:"subname"},chooseTagValue:{type:String,default:""},title:{type:String,default:""},color:{type:String,default:"#ee0a24"},description:{type:String,default:""},menuItems:{type:Array,default:()=>[]},closeAbled:{type:Boolean,default:!0}}),emits:["cancel","close","choose","update:visible"],setup(e,{emit:t}){const i=!!An().default,s=t=>e.chooseTagValue&&e.chooseTagValue===t[e.optionTag]?e.color:"",r=()=>{t("cancel"),t("update:visible",!1)},n=(e,i)=>{e.disable||e.loading||(t("choose",e,i),t("update:visible",!1))},a=i=>{e.closeAbled&&(t("close",i),t("update:visible",!1))};return{slotDefault:i,isHighlight:s,cancelActionSheet:r,chooseItem:n,close:a}}}),AU={class:"nut-action-sheet"},TU={key:0,class:"nut-action-sheet__title"},SU={key:1},xU={key:0,class:"nut-action-sheet__item nut-action-sheet__desc"},LU={key:1,class:"nut-action-sheet__menu"},kU=["onClick"],IU={key:1},_U={class:"nut-action-sheet__subdesc"};function CU(e,t,i,s,r,n){const a=dn("Loading"),o=dn("nut-popup");return Ka(),eo(o,{visible:e.visible,position:"bottom",round:"","close-on-click-overlay":e.closeAbled,"lock-scroll":e.lockScroll,"catch-move":e.lockScroll,"z-index":e.zIndex,onClickOverlay:e.close},{default:wr(()=>[no("view",AU,[e.title?(Ka(),Ja("view",TU,ii(e.title),1)):uo("",!0),ho(),mn(e.$slots,"default"),ho(),e.slotDefault?uo("",!0):(Ka(),Ja("view",SU,[e.description?(Ka(),Ja("view",xU,ii(e.description),1)):uo("",!0),ho(),e.menuItems.length?(Ka(),Ja("view",LU,[(Ka(!0),Ja(Ha,null,gn(e.menuItems,(t,i)=>(Ka(),Ja("view",{key:i,class:Qt(["nut-action-sheet__item",{"nut-action-sheet__item--disabled":t.disable,"nut-action-sheet__item--loading":t.loading}]),style:Yt({color:e.isHighlight(t)||t.color}),onClick:s=>e.chooseItem(t,i)},[t.loading?(Ka(),eo(a,{key:0})):(Ka(),Ja("view",IU,ii(t[e.optionTag]),1)),ho(),no("view",_U,ii(t[e.optionSubTag]),1)],14,kU))),128))])):uo("",!0),ho(),e.cancelTxt?(Ka(),Ja("view",{key:2,class:"nut-action-sheet__cancel",onClick:t[0]||(t[0]=(...t)=>e.cancelActionSheet&&e.cancelActionSheet(...t))},ii(e.cancelTxt),1)):uo("",!0)]))])]),_:3},8,["visible","close-on-click-overlay","lock-scroll","catch-move","z-index","onClickOverlay"])}const RU=l$(wU,[["render",CU]]);var PU=Object.defineProperty,DU=Object.defineProperties,MU=Object.getOwnPropertyDescriptors,OU=Object.getOwnPropertySymbols,NU=Object.prototype.hasOwnProperty,BU=Object.prototype.propertyIsEnumerable,FU=(e,t,i)=>t in e?PU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,$U=(e,t)=>{for(var i in t||(t={}))NU.call(t,i)&&FU(e,i,t[i]);if(OU)for(var i of OU(t))BU.call(t,i)&&FU(e,i,t[i]);return e},UU=(e,t)=>DU(e,MU(t));const GU={class:"nut-switch-button"},HU=Gr(UU($U({},{name:"NutSwitch"}),{__name:"switch.taro",props:{modelValue:{type:[String,Number,Boolean],default:!1},disabled:{type:Boolean,default:!1},activeColor:{default:""},inactiveColor:{default:""},activeText:{default:""},inactiveText:{default:""},activeValue:{type:[String,Number,Boolean],default:!0},inactiveValue:{type:[String,Number,Boolean],default:!1},loading:{type:Boolean,default:!1},disable:{type:Boolean,default:!1}},emits:["change","update:modelValue","update:loading"],setup(e,{emit:t}){const i=e,s=t,r=$o(()=>i.disabled||i.disable),n=dU(r),a=$o(()=>i.modelValue===i.activeValue),o=$o(()=>{const e="nut-switch";return{[e]:!0,[a.value?"nut-switch-open":"nut-switch-close"]:!0,[`${e}-disabled`]:n.value,[`${e}-base`]:!0}}),l=$o(()=>({backgroundColor:a.value?i.activeColor:i.inactiveColor}));let c="";const d=e=>{if(i.loading||n.value)return;const t=a.value?i.inactiveValue:i.activeValue;c="click",s("update:modelValue",t),s("change",t,e)};return La(()=>i.modelValue,e=>{"click"==c?c="":s("change",e)}),(e,t)=>(Ka(),Ja("view",{class:Qt(o.value),style:Yt(l.value),onClick:d},[no("view",GU,[e.loading?mn(e.$slots,"icon",{key:0},()=>[ao(Ns(vF),{name:"loading1",color:e.activeColor},null,8,["color"])]):uo("",!0),ho(),e.activeText?(Ka(),Ja(Ha,{key:1},[Ar(no("view",{class:"nut-switch-label open"},ii(e.activeText),513),[[El,a.value]]),ho(),Ar(no("view",{class:"nut-switch-label close"},ii(e.inactiveText),513),[[El,!a.value]])],64)):uo("",!0)])],6))}}));bF(HU);var jU=Object.defineProperty,zU=Object.defineProperties,VU=Object.getOwnPropertyDescriptors,YU=Object.getOwnPropertySymbols,WU=Object.prototype.hasOwnProperty,KU=Object.prototype.propertyIsEnumerable,qU=(e,t,i)=>t in e?jU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,XU=(e,t)=>{for(var i in t||(t={}))WU.call(t,i)&&qU(e,i,t[i]);if(YU)for(var i of YU(t))KU.call(t,i)&&qU(e,i,t[i]);return e},QU=(e,t)=>zU(e,VU(t));const ZU={class:"nut-empty"},JU=["src"],eG={class:"nut-empty__description"},tG="NutEmpty",iG=Gr(QU(XU({},{name:tG}),{__name:"empty.taro",props:{image:{default:"empty"},imageSize:{default:""},description:{default:""}},setup(e){const t=e,i=oU(tG),s={empty:"https://static-ftcms.jd.com/p/files/61a9e3183985005b3958672b.png",error:"https://ftcms.jd.com/p/files/61a9e33ee7dcdbcc0ce62736.png",network:"https://static-ftcms.jd.com/p/files/61a9e31de7dcdbcc0ce62734.png"},r=$o(()=>t.imageSize?{width:EF(t.imageSize),height:EF(t.imageSize)}:{}),n=$o(()=>/^https?:\/\/|^\/\//.test(t.image)?t.image:s[t.image]),a=$o(()=>t.description||i("noData"));return(e,t)=>(Ka(),Ja("view",ZU,[no("view",{class:"nut-empty__box",style:Yt(r.value)},[mn(e.$slots,"image",{},()=>[n.value?(Ka(),Ja("img",{key:0,class:"nut-empty__box--img",src:n.value},null,8,JU)):uo("",!0)])],4),ho(),mn(e.$slots,"description",{},()=>[no("view",eG,ii(a.value),1)]),ho(),mn(e.$slots,"default")]))}}));bF(iG);const sG=Symbol("nut-collapse");var rG=Object.defineProperty,nG=Object.defineProperties,aG=Object.getOwnPropertyDescriptors,oG=Object.getOwnPropertySymbols,lG=Object.prototype.hasOwnProperty,cG=Object.prototype.propertyIsEnumerable,dG=(e,t,i)=>t in e?rG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,hG=(e,t)=>{for(var i in t||(t={}))lG.call(t,i)&&dG(e,i,t[i]);if(oG)for(var i of oG(t))cG.call(t,i)&&dG(e,i,t[i]);return e},uG=(e,t)=>nG(e,aG(t));const pG={class:"nut-collapse"},fG=Gr(uG(hG({},{name:"NutCollapse"}),{__name:"collapse.taro",props:{modelValue:{default:""},accordion:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:t}){const i=e,s=t,r=Ds(i.modelValue||(i.accordion?"":[]));La(()=>i.modelValue,e=>{r.value=e});const n=(e,t,i=!0)=>{r.value=e,s("update:modelValue",e),s("change",e,t,i)},a=e=>{if(i.accordion)r.value===e?n("",e,!1):n(e,e,!0);else if(Array.isArray(r.value))if(r.value.includes(e)){const t=r.value.filter(t=>t!==e);n(t,e,!1)}else{const t=r.value.concat([e]);n(t,e,!0)}else console.warn("[NutUI] <Collapse> \u672a\u5f00\u542f\u624b\u98ce\u7434\u6a21\u5f0f\u65f6 v-model \u5e94\u4e3a\u6570\u7ec4")},o=e=>i.accordion?r.value===e:!!Array.isArray(r.value)&&r.value.includes(e);return Yn(sG,{updateVal:a,isExpanded:o}),(e,t)=>(Ka(),Ja("view",pG,[mn(e.$slots,"default")]))}}));bF(fG);var gG=Object.defineProperty,mG=Object.defineProperties,vG=Object.getOwnPropertyDescriptors,yG=Object.getOwnPropertySymbols,bG=Object.prototype.hasOwnProperty,EG=Object.prototype.propertyIsEnumerable,wG=(e,t,i)=>t in e?gG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,AG=(e,t)=>{for(var i in t||(t={}))bG.call(t,i)&&wG(e,i,t[i]);if(yG)for(var i of yG(t))EG.call(t,i)&&wG(e,i,t[i]);return e},TG=(e,t)=>mG(e,vG(t));const SG={class:"nut-collapse-item__title-main"},xG={class:"nut-collapse-item__title-main-value"},LG=["innerHTML"],kG={key:2,class:"nut-collapse-item__title-label"},IG={key:0,class:"nut-collapse-item__title-sub"},_G=["innerHTML"],CG={key:0,class:"nut-collapse__item-extraWrapper"},RG={class:"nut-collapse__item-extraWrapper__extraRender"},PG=["id"],DG=Gr(TG(AG({},{name:"NutCollapseItem"}),{__name:"collapse-item.taro",props:{title:{default:""},value:{default:""},label:{default:""},disabled:{type:Boolean,default:!1},name:{default:-1},border:{type:Boolean,default:!0},icon:{default:()=>fF},rotate:{default:180}},setup(e){const t=e,i=An(),s=Ds(null),r=Math.random().toString(36).slice(-8),n=`#nut-collapse__item-${r}`,a=Ds("auto"),o=Ds(!1),l=Ds(""),c=Wn(sG),d=$o(()=>{const e="nut-collapse-item";return{[e]:!0,[e+"__border"]:t.border}});Jr(()=>{setTimeout(()=>{h(n).then(e=>{(null==e?void 0:e.height)&&(a.value=`${e.height}px`)})},100)}),La(()=>{var e;return null==(e=i.default)?void 0:e.call(i)},()=>{setTimeout(()=>{h(n).then(e=>{(null==e?void 0:e.height)&&(a.value=`${e.height}px`)})},200)});const h=e=>new Promise(t=>{US.createSelectorQuery().select(e).boundingClientRect().exec((e=[])=>{t(e[0])})}),u=$o(()=>!!c&&c.isExpanded(t.name)),p=Ds(u.value?"auto":"0px"),f=()=>{o.value||c&&c.updateVal(t.name)},g=e=>{l.value&&(clearTimeout(l.value),l.value="");const t=e?"0px":a.value,i=e?a.value:"0px";o.value=!0,p.value=t,setTimeout(()=>{p.value=i,o.value=!1,e&&(l.value=setTimeout(()=>{p.value="auto"},300))},100)};return La(u,g),(e,t)=>(Ka(),Ja("view",{class:Qt(d.value)},[no("view",{class:Qt(["nut-collapse-item__title",{"nut-collapse-item__title--disabled":e.disabled}]),onClick:f},[no("view",SG,[no("view",xG,[e.$slots.title?mn(e.$slots,"title",{key:0}):(Ka(),Ja("view",{key:1,class:"nut-collapse-item__title-mtitle",innerHTML:e.title},null,8,LG)),ho(),e.label?(Ka(),Ja("view",kG,ii(e.label),1)):uo("",!0)])]),ho(),e.$slots.value?(Ka(),Ja("view",IG,[mn(e.$slots,"value")])):(Ka(),Ja("view",{key:1,class:"nut-collapse-item__title-sub",innerHTML:e.value},null,8,_G)),ho(),no("view",{class:Qt(["nut-collapse-item__title-icon",{"nut-collapse-item__title-icon--expanded":u.value}]),style:Yt({transform:"rotate("+(u.value?e.rotate:0)+"deg)"})},[e.$slots.icon?mn(e.$slots,"icon",{key:0}):(Ka(),eo(un(Ns(lU)(e.icon)),{key:1}))],6)],2),ho(),e.$slots.extra?(Ka(),Ja("view",CG,[no("div",RG,[mn(e.$slots,"extra")])])):uo("",!0),ho(),no("view",{ref_key:"wrapperRef",ref:s,class:"nut-collapse__item-wrapper",style:Yt({willChange:"height",height:p.value})},[no("view",{id:`nut-collapse__item-${Ns(r)}`,class:"nut-collapse__item-wrapper__content"},[mn(e.$slots,"default")],8,PG)],4)],2))}}));bF(DG);function MG(e,t,i,s){var r=Object.defineProperty;try{r({},"",{})}catch(n){r=0}MG=function(e,t,i,s){if(t)r?r(e,t,{value:i,enumerable:!s,configurable:!s,writable:!s}):e[t]=i;else{var n=function(t,i){MG(e,t,function(e){return this._invoke(t,i,e)})};n("next",0),n("throw",1),n("return",2)}},MG(e,t,i,s)}function OG(){var e,t,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",r=i.toStringTag||"@@toStringTag";function n(i,s,r,n){var l=s&&s.prototype instanceof o?s:o,c=Object.create(l.prototype);return MG(c,"_invoke",function(i,s,r){var n,o,l,c=0,d=r||[],h=!1,u={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,i){return n=t,o=0,l=e,u.n=i,a}};function p(i,s){for(o=i,l=s,t=0;!h&&c&&!r&&t<d.length;t++){var r,n=d[t],p=u.p,f=n[2];i>3?(r=f===s)&&(l=n[(o=n[4])?5:(o=3,3)],n[4]=n[5]=e):n[0]<=p&&((r=i<2&&p<n[1])?(o=0,u.v=s,u.n=n[1]):p<f&&(r=i<3||n[0]>s||s>f)&&(n[4]=i,n[5]=s,u.n=f,o=0))}if(r||i>1)return a;throw h=!0,s}return function(r,d,f){if(c>1)throw TypeError("Generator is already running");for(h&&1===d&&p(d,f),o=d,l=f;(t=o<2?e:l)||!h;){n||(o?o<3?(o>1&&(u.n=-1),p(o,l)):u.n=l:u.v=l);try{if(c=2,n){if(o||(r="next"),t=n[r]){if(!(t=t.call(n,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,o<2&&(o=0)}else 1===o&&(t=n["return"])&&t.call(n),o<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),o=1);n=e}else if((t=(h=u.n<0)?l:i.call(s,u))!==a)break}catch(g){n=e,o=1,l=g}finally{c=1}}return{value:t,done:h}}}(i,r,n),!0),c}var a={};function o(){}function l(){}function c(){}t=Object.getPrototypeOf;var d=[][s]?t(t([][s]())):(MG(t={},s,function(){return this}),t),h=c.prototype=o.prototype=Object.create(d);function u(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,MG(e,r,"GeneratorFunction")),e.prototype=Object.create(h),e}return l.prototype=c,MG(h,"constructor",c),MG(c,"constructor",l),l.displayName="GeneratorFunction",MG(c,r,"GeneratorFunction"),MG(h),MG(h,r,"Generator"),MG(h,s,function(){return this}),MG(h,"toString",function(){return"[object Generator]"}),(OG=function(){return{w:n,m:u}})()}function NG(e,t,i,s,r,n,a){try{var o=e[n](a),l=o.value}catch(c){return void i(c)}o.done?t(l):Promise.resolve(l).then(s,r)}function BG(e){return function(){var t=this,i=arguments;return new Promise(function(s,r){var n=e.apply(t,i);function a(e){NG(n,s,r,a,o,"next",e)}function o(e){NG(n,s,r,a,o,"throw",e)}a(void 0)})}}function FG(e){"@babel/helpers - typeof";return FG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FG(e)}function $G(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],i=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}throw new TypeError(FG(e)+" is not iterable")}function UG(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=Array(t);i<t;i++)s[i]=e[i];return s}function GG(e){if(Array.isArray(e))return UG(e)}function HG(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function jG(e,t){if(e){if("string"==typeof e)return UG(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?UG(e,t):void 0}}function zG(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function VG(e){return GG(e)||HG(e)||jG(e)||zG()}function YG(e){if(Array.isArray(e))return e}function WG(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var s,r,n,a,o=[],l=!0,c=!1;try{if(n=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(s=n.call(i)).done)&&(o.push(s.value),o.length!==t);l=!0);}catch(d){c=!0,r=d}finally{try{if(!l&&null!=i["return"]&&(a=i["return"](),Object(a)!==a))return}finally{if(c)throw r}}return o}}function KG(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qG(e,t){return YG(e)||WG(e,t)||jG(e,t)||KG()}function XG(e,t){if("object"!=FG(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=FG(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function QG(e){var t=XG(e,"string");return"symbol"==FG(t)?t:t+""}function ZG(e,t,i){return(t=QG(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function JG(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function eH(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?JG(Object(i),!0).forEach(function(t){ZG(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):JG(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}export{Ar as $,Jl as A,nx as B,pe as C,f as D,Fm as E,Ha as F,wx as G,Rc as H,dA as I,BT as J,NT as K,KS as L,Sk as M,Uo as N,Ex as O,Ns as P,no as Q,ql as R,uF as S,iG as T,uo as U,ho as V,Ps as W,DG as X,fG as Y,x$ as Z,BG as _,OG as a,El as a0,ii as a1,HU as a2,MF as a3,KF as a4,Gx as a5,US as a6,H$ as a7,RU as a8,$G as b,qG as c,VG as d,eH as e,bx as f,fS as g,$o as h,aS as i,kS as j,rn as k,dn as l,Ln as m,Ka as n,Jr as o,eo as p,ao as q,Ds as r,cS as s,Qt as t,Yt as u,Ja as v,wr as w,gn as x,mn as y,qS as z};

import{O as t,l as e,P as a,n,p as l,w as u,v as o,F as r,q as i,u as s,z as c,Q as d,R as f,S as m,T as v,m as p,h as g,x as y,y as _,U as h,r as b,V as k,W as L,X as w,Y as I,Z as V,i as z,$ as C,a0 as x,t as R,a1 as T,a2 as H,a3 as U,a4 as S,a5 as D,a6 as N,a7 as j,a8 as q}from"./vendors.02f57b9e.js";import{_ as B,u as A,a as O,L as Q,b as W,c as $,i as F,d as E}from"./common.691f8425.js";var G=["src"],M={__name:"layout",setup:function(p){var g=A(),y=O(),_=t(y),h=_.showTemplateDrawer,b=t(g),k=b.gridLayout,L=b.imageLayout,w=b.round,I=g.removeImage,V=g.addImage;return function(t,p){var g=e("taro-view"),y=e("taro-button"),_=v;return a(k)?(n(),l(Q,{key:0,gridLayout:a(k),addImage:a(V)},{image:u(function(t){var e=t.index;return[a(L)[e]&&a(L)[e].url?(n(),o(r,{key:0},[i(g,{class:"htt-img-container",style:s({borderRadius:a(w)&&a(c)(a(w))||0})},{default:u(function(){return[d("img",{src:a(L)[e].url,class:"htt-media",style:s({width:"".concat(a(c)(a(L)[e].crop.width)),height:"".concat(a(c)(a(L)[e].crop.height)),transform:"translate(-".concat(a(c)(a(L)[e].crop.x*a(L)[e].scale),", -").concat(a(c)(a(L)[e].crop.y*a(L)[e].scale),") scale(").concat(a(L)[e].scale,")")})},null,12,G)]}),_:2},1032,["style"]),i(y,{shape:"circle",size:"small",class:"htt-remove-btn",onClick:f(function(t){return a(I)&&a(I)(e)},["stop"])},{default:u(function(){return[i(a(m),{name:"del",width:"12",height:"12"})]}),_:2},1032,["onClick"])],64)):(n(),l(a(m),{key:1,class:"htt-add",color:"var(--nut-primary-color)",name:"plus",size:"20"}))]}),_:1},8,["gridLayout","addImage"])):(n(),l(g,{key:1,class:"htt-empty-template",onClick:p[0]||(p[0]=f(function(t){return h.value=!0},["stop"]))},{default:u(function(){return[i(_,{description:"\u70b9\u51fb\u6211\u9009\u62e9\u5e03\u5c40"})]}),_:1}))}}};const P=B(M,[["__file","layout.vue"]]);var X={__name:"longLayoutItem",props:p(["gridLayout","onTpl","addImage","isHorizontal","longImageLayout","gap"],{gridLayout:function(){return{}}}),setup:function(t){var a=function(e){if(t.longImageLayout&&t.longImageLayout["layout"]&&t.longImageLayout["layout"][e]){var a=t.longImageLayout["layout"][e],n=a.w,l=a.h;return{height:c(l),width:c(n),marginRight:t.isHorizontal&&c(t.gap)||0,marginBottom:!t.isHorizontal&&c(t.gap)||0}}return{height:c(200),width:t.isHorizontal?"50%":"auto",marginRight:t.isHorizontal&&c(t.gap)||0,marginBottom:!t.isHorizontal&&c(t.gap)||0}},d=g(function(){var e=t.isHorizontal&&t.longImageLayout&&t.longImageLayout.totalWidth&&c(t.longImageLayout.totalWidth+200)||"auto";return{display:"".concat(t.isHorizontal?"flex":"block"),padding:"".concat(c(t.gap)),width:e}});return function(c,f){var m=e("taro-view");return n(),l(m,{class:"htt-long-container"},{default:u(function(){return[i(m,{class:"grid-container-long",onClick:f[0]||(f[0]=function(e){return t.onTpl&&t.onTpl(t.gridLayout)}),style:s(d.value)},{default:u(function(){return[(n(!0),o(r,null,y(t.gridLayout,function(e,o){return n(),l(m,{key:o,class:"grid-item",onClick:function(e){return t.addImage&&t.addImage(o)},style:s(a(o))},{default:u(function(){return[_(c.$slots,"image",{index:o})]}),_:2},1032,["onClick","style"])}),128))]}),_:3},8,["style"])]}),_:3})}}};const Y=B(X,[["__file","longLayoutItem.vue"]]);var Z=["src"],J={__name:"longLayout",setup:function(v){var p=A(),g=W(),y=t(p),_=y.round,b=y.gap,k=t(g),L=k.longImageLayout,w=k.longGridLayout,I=k.isHorizontal,V=p.removeImage,z=p.addImage;return function(t,v){var p=e("taro-view"),g=e("taro-button");return a(w)?(n(),l(Y,{key:0,gridLayout:a(w),gap:a(b),addImage:a(z),isHorizontal:a(I),longImageLayout:a(L)},{image:u(function(t){var e=t.index;return[a(L)&&a(L)["layout"][e]&&a(L)["layout"][e].url?(n(),o(r,{key:0},[i(p,{class:"htt-long-img-container"},{default:u(function(){return[d("img",{src:a(L)["layout"][e].url,style:s({display:"block",width:"".concat(a(c)(a(L)["layout"][e].w)),height:"".concat(a(c)(a(L)["layout"][e].h)),borderRadius:a(_)&&a(c)(a(_))||0})},null,12,Z)]}),_:2},1024),i(g,{shape:"circle",size:"small",class:"htt-long-remove-btn",onClick:f(function(t){return a(V)&&a(V)(e)},["stop"])},{default:u(function(){return[i(a(m),{name:"del",width:"12",height:"12"})]}),_:2},1032,["onClick"])],64)):(n(),l(a(m),{key:1,color:"var(--nut-primary-color)",name:"plus",size:"20"}))]}),_:1},8,["gridLayout","gap","addImage","isHorizontal","longImageLayout"])):h("",!0)}}};const K=B(J,[["__file","longLayout.vue"]]);var tt={__name:"tpl",setup:function(s){var c=b(Object.keys($.LayoutDefinitions)),d=A(),f=O(),v=t(f),p=v.showTemplateDrawer,_=v.showSettings,h=t(d),z=h.allLayout,C=h.currentTpl,x=d.onTpl,R=function(t){x(t),p.value=!1,_.value=!1},T=g(function(){return!F()&&!_.value});return function(t,s){var d=e("taro-view"),f=w,v=I,g=V;return n(),l(g,{visible:a(p),"onUpdate:visible":s[2]||(s[2]=function(t){return L(p)?p.value=t:null}),position:"left",overlay:T.value,round:"","destroy-on-close":!1},{default:u(function(){return[i(d,{class:"drawer-header"},{default:u(function(){return[i(d,{class:"title"},{default:u(function(){return s[3]||(s[3]=[k("\u5e03\u5c40")])}),_:1,__:[3]}),i(a(m),{name:"left",color:"var(--nut-primary-color)",class:"nut-icon-am-shake close-icon close-icon--left",onClick:s[0]||(s[0]=function(t){return p.value=!1})})]}),_:1}),i(d,{class:"template-group"},{default:u(function(){return[i(v,{modelValue:c.value,"onUpdate:modelValue":s[1]||(s[1]=function(t){return c.value=t})},{default:u(function(){return[(n(!0),o(r,null,y(Object.keys(a(z)),function(t){return n(),l(f,{class:"htt-collapse-item",title:a(z)[t].name,key:t,name:t},{default:u(function(){return[(n(!0),o(r,null,y(a(z)[t].datas,function(e,u){return n(),l(Q,{onTpl:R,currentTpl:a(C),key:"".concat(t,"_").concat(u),gridLayout:e},null,8,["currentTpl","gridLayout"])}),128))]}),_:2},1032,["title","name"])}),128))]}),_:1},8,["modelValue"])]}),_:1})]}),_:1},8,["visible","overlay"])}}};const et=B(tt,[["__file","tpl.vue"]]);var at={class:"htt-input-ratio"},nt={__name:"inputRatio",props:["selectRatio"],setup:function(t){var a=b(""),l=function(){if(/^[\.\d]+:[\.\d]+$/.test(a.value)){var e=a.value.split(":").map(function(t){return+t}),n=e[0]/e[1];t.selectRatio(Number(n.toFixed(2))),z({title:"\u6bd4\u4f8b\u8bbe\u7f6e\u6210\u529f!",icon:"none",duration:1e3})}else z({title:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6bd4\u5217\uff08\u5982 16:9\uff09",icon:"none",duration:3e3})};return function(t,r){var s=e("taro-input"),c=e("taro-button");return n(),o("div",at,[i(s,{class:"htt-input-ratio__input",modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=function(t){return a.value=t}),placeholder:"\u8bf7\u8f93\u5165\u5982,16:9"},null,8,["modelValue"]),i(c,{class:"htt-input-ratio__button",onClick:l},{default:u(function(){return r[1]||(r[1]=[k("\u786e\u5b9a")])}),_:1,__:[1]})])}}};const lt=B(nt,[["__file","inputRatio.vue"]]);var ut={__name:"ratio",props:{ratios:{type:Array,default:function(){return[{label:"1:1",value:1},{label:"3:2",value:1.5},{label:"4:3",value:1.333},{label:"16:9",value:1.778}]}},defaultRatio:{type:Number,default:1}},emits:["ratio-selected"],setup:function(t,a){var s=a.emit,c=t,f=b(!1),m=s,v=b(c.defaultRatio),p=function(t){v.value=t,m("ratio-selected",t)};return function(a,s){var c=H,m=U,g=e("taro-view");return n(),l(g,{class:"aspect-ratio-selector"},{default:u(function(){return[i(m,{title:"\u81ea\u5b9a\u4e49\u6bd4\u4f8b"},{link:u(function(){return[i(c,{modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=function(t){return f.value=t}),"active-color":"var(--nut-primary-color)","active-text":"\u5f00","inactive-text":"\u5173"},null,8,["modelValue"])]}),_:1}),C(i(g,null,{default:u(function(){return[i(lt,{selectRatio:p})]}),_:1},512),[[x,f.value]]),(n(!0),o(r,null,y(t.ratios,function(t,e){return C((n(),l(g,{key:e,class:R(["ratio-option",{active:v.value===t.value}]),onClick:function(e){return p(t.value)}},{default:u(function(){return[d("span",null,T(t.label),1)]}),_:2},1032,["class","onClick"])),[[x,!f.value]])}),128))]}),_:1})}}};const ot=B(ut,[["__file","ratio.vue"]]);var rt={__name:"range",props:{min:{type:Number,default:0},max:{type:Number,default:100},modelValue:{type:Number,default:0},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup:function(t,a){var o=a.emit,r=o,i=g(function(){return!1}),s=function(t){r("update:modelValue",t.detail.value),r("change",t.detail.value)},c=function(t){r("change",t.detail.value)},d=function(t){var e=parseInt(t.target.value,10);r("update:modelValue",e),r("change",e)};return function(a,o){var r=e("taro-slider"),f=e("taro-input"),m=e("taro-view");return n(),l(m,{class:R(["slider-container",{disabled:t.disabled}])},{default:u(function(){return[i.value?(n(),l(r,{key:0,min:t.min,max:t.max,value:t.modelValue,disabled:t.disabled,onChange:s,onChanging:c,class:"slider-container__slider","block-size":"20","block-color":"var(--nut-primary-color)"},null,8,["min","max","value","disabled"])):(n(),l(f,{key:1,type:"range",min:t.min,max:t.max,value:t.modelValue,disabled:t.disabled,onInput:d,class:"slider-input"},null,8,["min","max","value","disabled"]))]}),_:1},8,["class"])}}};const it=B(rt,[["__file","range.vue"]]);var st={__name:"setting",setup:function(o){var r=A(),s=O(),c=E(),d=t(s),f=d.showTemplateDrawer,v=d.showSettings,p=t(r),y=p.gap,_=p.round,h=p.isLongLayout,z=p.customQuality,R=t(c),T=R.customRatios,H=R.currentRatio,D=c.handleRatioSelected,N=b(["set-1","set-2","set-3"]),j=g(function(){return!F()&&!f.value});function q(t){D(t),v.value=!1}return function(t,o){var r=e("taro-view"),s=U,c=S,d=w,f=I,p=V;return n(),l(p,{visible:a(v),"onUpdate:visible":o[5]||(o[5]=function(t){return L(v)?v.value=t:null}),position:"right",overlay:j.value,class:"htt-setting",round:"","destroy-on-close":!1},{default:u(function(){return[i(r,{class:"drawer-header"},{default:u(function(){return[i(r,{class:"title"},{default:u(function(){return o[6]||(o[6]=[k("\u8bbe\u7f6e")])}),_:1,__:[6]}),i(a(m),{name:"right",color:"var(--nut-primary-color)",class:"nut-icon-am-shake close-icon close-icon--right",onClick:o[0]||(o[0]=function(t){return v.value=!1})})]}),_:1}),i(f,{modelValue:N.value,"onUpdate:modelValue":o[4]||(o[4]=function(t){return N.value=t})},{default:u(function(){return[i(d,{title:"\u6837\u5f0f\u8bbe\u7f6e",name:"set-1"},{default:u(function(){return[i(c,{desc:"\u95f4\u8ddd(".concat(a(y),")")},{default:u(function(){return[i(s,null,{default:u(function(){return[i(it,{modelValue:a(y),"onUpdate:modelValue":o[1]||(o[1]=function(t){return L(y)?y.value=t:null}),step:10},null,8,["modelValue"])]}),_:1})]}),_:1},8,["desc"]),i(c,{title:"\u5706\u89d2(".concat(a(_),")")},{default:u(function(){return[i(s,null,{default:u(function(){return[i(it,{modelValue:a(_),"onUpdate:modelValue":o[2]||(o[2]=function(t){return L(_)?_.value=t:null}),max:200,step:10},null,8,["modelValue"])]}),_:1})]}),_:1},8,["title"])]}),_:1}),i(d,{title:"\u56fe\u7247\u8d28\u91cf\u8bbe\u7f6e",name:"set-2"},{default:u(function(){return[i(c,{desc:"\u8d28\u91cf(".concat(a(z)/10,"\uff09\u6ce8:0-10\u6570\u5b57\u8d8a\u5927\u8d8a\u9ad8\u6e05")},{default:u(function(){return[i(s,null,{default:u(function(){return[i(it,{modelValue:a(z),"onUpdate:modelValue":o[3]||(o[3]=function(t){return L(z)?z.value=t:null}),min:0,max:100,step:10},null,8,["modelValue"])]}),_:1})]}),_:1},8,["desc"])]}),_:1}),C(i(d,{title:"\u6bd4\u4f8b\u8bbe\u7f6e",name:"set-3"},{default:u(function(){return[i(c,{desc:"\u9ad8\u5bbd\u6bd4\u4f8b"},{default:u(function(){return[i(ot,{ratios:a(T),"default-ratio":a(H),onRatioSelected:q},null,8,["ratios","default-ratio"])]}),_:1})]}),_:1},512),[[x,!a(h)]])]}),_:1},8,["modelValue"])]}),_:1},8,["visible","overlay"])}}};const ct=B(st,[["__file","setting.vue"]]);var dt={__name:"fast",props:{buttons:{type:Array,required:!0,validator:function(t){return t.every(function(t){return t.label&&t.action})}},direction:{type:String,default:"horizontal",validator:function(t){return["horizontal","vertical"].includes(t)}}},setup:function(t){return function(s,c){var d=e("taro-view");return n(),l(d,{class:R(["floating-buttons",t.direction])},{default:u(function(){return[(n(!0),o(r,null,y(t.buttons,function(t,e){return n(),l(a(D),{key:e,class:R(["floating-button",[{"floating-button--disabled":t.disabled}]]),disabled:t.disabled,"open-type":"message"===t.label?"feedback":"",onClick:t.action},{default:u(function(){return[i(a(m),{class:"nut-icon-am-shake",name:t.label},null,8,["name"])]}),_:2},1032,["class","disabled","open-type","onClick"])}),128))]}),_:1},8,["class"])}}};const ft=B(dt,[["__file","fast.vue"]]);var mt={__name:"index",setup:function(o){var r=b("\u5408\u56fe\u56fe"),s=b(!1),c=O(),d=A(),v=t(d),p=v.isEmptyImage,g=v.isLongLayout,y=v.fastButton,_=t(c),h=_.isLoading,L=_.showTemplateDrawer,w=_.showSettings,I=_.qualityItems,V=c.chooseQuality;return N.useShareAppMessage(function(){return{title:"\u672c\u5730\u65e0\u670d\u52a1\u62fc\u56fe\uff0c\u6240\u89c1\u5373\u6240\u5f97\uff0c\u591a\u79cd\u5e03\u5c40\u8f7b\u677e\u62ff\u634f\u5404\u79cd\u573a\u666f\uff01",path:"/pages/index/index"}}),N.useShareTimeline(function(){console.log("onShareTimeline")}),function(t,o){var c=e("taro-view"),d=j,v=e("taro-button"),_=q,b=e("taro-canvas");return n(),l(c,{class:"puzzle-page"},{default:u(function(){return[i(d,{class:"htt-navbar",title:r.value},{left:u(function(){return[i(c,{class:"htt-navbar-left",onClick:o[0]||(o[0]=f(function(t){return L.value=!a(L)},["stop"]))},{default:u(function(){return[i(a(m),{name:"scan",size:"20",color:"var(--nut-primary-color)",class:"nut-icon-am-shake"})]}),_:1})]}),right:u(function(){return[i(a(m),{name:"setting",size:"20",color:"var(--nut-primary-color)",class:"nut-icon-am-shake",onClick:o[1]||(o[1]=function(t){return w.value=!a(w)})})]}),_:1},8,["title"]),i(et),i(ct),a(g)?(n(),l(K,{key:1})):(n(),l(P,{key:0})),i(c,{class:"htt-save"},{default:u(function(){return[i(v,{block:"",loading:a(h),onClick:o[2]||(o[2]=function(t){return s.value=!0}),class:R({"htt-save__btn":!0,"htt-save__btn--disabled":a(p)}),disabled:a(p)},{default:u(function(){return[k(T(a(h)?"\u751f\u6210\u4e2d...":"\u751f\u6210\u62fc\u56fe"),1)]}),_:1},8,["loading","class","disabled"])]}),_:1}),i(_,{class:"htt-quality",visible:s.value,"onUpdate:visible":o[3]||(o[3]=function(t){return s.value=t}),"menu-items":a(I),onChoose:a(V)},null,8,["visible","menu-items","onChoose"]),i(ft,{buttons:a(y)},null,8,["buttons"]),i(b,{"canvas-id":"puzzleCanvas",id:"puzzleCanvas",type:"2d",class:"hidden-canvas"})]}),_:1})}}};const vt=B(mt,[["__file","index.vue"]]);export{vt as default};
